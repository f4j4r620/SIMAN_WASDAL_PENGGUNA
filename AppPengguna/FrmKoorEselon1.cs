using System;
using System.Collections;
using System.Linq;
using System.Windows.Forms;
using DevExpress.XtraBars;
using System.Threading;
using DevExpress.XtraReports.UI;
using DevExpress.XtraBars.Helpers;
using DevExpress.LookAndFeel;
using DevExpress.XtraReports.Parameters;
using AppPengguna.KES1.WL.PEMINDAHTANGANAN;
using DevExpress.XtraPrinting;
using AppPengguna.KES1.WL.PENGHAPUSAN;
using AppPengguna.KES1.PENERTIBAN;
using AppPengguna.PU;
using AppPengguna.KKW.RSK;
using System.Data;
using System.Data.SqlClient;
using System.IO;
using System.Diagnostics;

namespace AppPengguna
{
    public partial class FrmKoorEselon1 : DevExpress.XtraBars.Ribbon.RibbonForm
    {
        public int lebarNavigasi = 0;

        //public SvcAssetTanahSelect.BPSIMANSROW_M_KTNH assetTanahPilihan;
        //public SvcAssetTanahSelect.call_pttClient ambilAssetTanah = null;
        //public SvcAssetTanahSelect.OutputParameters dataOutAssetTanah = null;
        //public SvcAssetTanahCrud.call_pttClient svcAssetTanahCrud = null;
        //public SvcAssetTanahCrud.OutputParameters dataOutAssetTanahCrud = null;
        //private SvcTnhDokSelect.call_pttClient fetchData;
        //private SvcTnhDokSelect.InputParameters parInp;
        //private SvcTnhDokSelect.OutputParameters outData;
        //public SvcTnhDokSelect.BPSIMANSROW_M_KTNH_DOK selectedData;
        //private SvcTnhLokSelect.call_pttClient fetchDataTanahLok;
        //private SvcTnhLokSelect.InputParameters parInpTanahLok;
        //private SvcTnhLokSelect.OutputParameters outDataTanahLok;
        //public SvcTnhLokSelect.BPSIMANSROW_M_KTNH_LOKASI selectedDataTanahLok;
        //private SvcTnhBangunanSelect.call_pttClient fetchDataTnhBangunan;
        //private SvcTnhBangunanSelect.InputParameters parInpTnhBangunan;
        //private SvcTnhBangunanSelect.OutputParameters outDataTnhBangunan;
        //public SvcTnhBangunanSelect.BPSIMANSROW_M_KTNH_BANGUNAN selectedDataTnhBangunan;
        //private SvcTnhFasPenunjangSelect.call_pttClient fetchDataTnhFas;
        //private SvcTnhFasPenunjangSelect.InputParameters parInTnhFasp;
        //private SvcTnhFasPenunjangSelect.OutputParameters outDataTnhFas;
        //public SvcTnhFasPenunjangSelect.BPSIMANSROW_M_KTNH_FAS_PENUNJANG selectedDataTnhFas;
        //private SvcTnhRwyPenilaianSelect.call_pttClient fetchDataRPenilaian;
        //private SvcTnhRwyPenilaianSelect.InputParameters parInpRPenilaian;
        //private SvcTnhRwyPenilaianSelect.OutputParameters outDataRPenilaian;
        //private SvcTnhRwyPenilaianSelect.BPSIMANSROW_M_KTNH_RWYT_NILAI selectedDataRPenilaian;
        //private SvcTnhNjopSelect.call_pttClient fetchDataNJOP;
        //private SvcTnhNjopSelect.InputParameters parInpNJOP;
        //private SvcTnhNjopSelect.OutputParameters outDataNJOP;
        //public SvcTnhNjopSelect.BPSIMANSROW_M_KTNH_NJOP selectedDataNJOP;
        //private SvcTnhRwyPenggunaSelect.call_pttClient fetchDataRwytPengguna;
        //private SvcTnhRwyPenggunaSelect.InputParameters parInpRwytPengguna;
        //private SvcTnhRwyPenggunaSelect.OutputParameters outDataRwytPengguna;
        //public SvcTnhRwyPenggunaSelect.BPSIMANSROW_M_KTNH_RWYT_PENGGUNA selectedDataRwytPengguna;
        //private SvcTnhRwyMutasiSelect.call_pttClient fetchDataRwyMutasi;
        //private SvcTnhRwyMutasiSelect.InputParameters parInpRwyMutasi;
        //private SvcTnhRwyMutasiSelect.OutputParameters outDataRwyMutasi;
        //public SvcTnhRwyMutasiSelect.BPSIMANSROW_M_KTNH_RWYT_MUTASI selectedDataRwyMutasi;
        //private SvcTnhRwyPeliharaSelect.call_pttClient fetchDataRwytPelihara;
        //private SvcTnhRwyPeliharaSelect.InputParameters parInpRwytPelihara;
        //private SvcTnhRwyPeliharaSelect.OutputParameters outDataRwytPelihara;
        //private SvcTnhRwyPeliharaSelect.BPSIMANSROW_M_KTNH_RWYT_PELIHARA selectedDataRwytPelihara;

        private SvcWasdalPSPBMNSelect.execute_pttClient svcWasdalPspSelect = null;
        private SvcWasdalPSPBMNSelect.OutputParameters outWasdalPspSelect = null;

        SvcWasdalPSPBMNSelect.WASDALSROW_WASDAL_PSP wasdalSelect;
        SvcWasdalPSPBMNSelect.execute_pttClient ambilWasdal;
        SvcWasdalPSPBMNSelect.OutputParameters dataOutWasdal;

        private SvcLapPemindahTanganan.execute_pttClient svcLapPemindahtanganan = null;
        private SvcLapPemindahTanganan.OutputParameters outLapPemindahtanganan = null;

        private SvcLapWasdalManfaat.execute_pttClient svcLapWasdalManfaatSelect = null;
        private SvcLapWasdalManfaat.OutputParameters outLapWasdalManfaatSelect = null;

        private SvcWasdalHapusLapWasdalMSK.lapWasdalMSK_pttClient svcLapPenghapusan = null;
        private SvcWasdalHapusLapWasdalMSK.OutputParameters outLapPenghapusan = null;

        Thread myThread = null;
        private char modeCrud = 'A';
        private string teksDialog = "";
        private bool modeCari = false;

        ArrayList dataGrid;
		private decimal dataAwal = 1;
		private decimal dataAkhir = 20;
		private decimal currentMaks = 20;
		private decimal currentMin = 1;
		public bool dataInisial = true;
		private bool adaData = false;
		private bool masihAdaData = true;
		private int? nilaiProgress = 0;
		private string strCari = "";
		private string modeLoadData = "normal"; //normal atau cari atau ganti_kiword
        //private string bySatker = " (ID_SATKER = " + konfigApp.idSatker + " OR ID_SATKER_PARENT = " + konfigApp.idSatker + ") ";
        private string byKL = " (ID_ESELON1 = " + konfigApp.idEselon1;// + " OR ID_SATKER_PARENT = " + konfigApp.idKl + ") ";
        private string kdPelayanan = "";
        private string kdMenu = "";
        KES1.WL.PENGGUNAAN.xrLapWasdalBMN xrlapwasdal;
        private decimal? tahunAnggaran;
        //KES1.WL.PENGGUNAAN.penggunaan xrlapwasdal;
        private string subMenuLapWasdal = "Laporan Wasdal";
        private string subMenuMonWasdal = "Monitoring Wasdal";

        public FrmKoorEselon1()
        {
            InitializeComponent();
            lebarNavigasi = sccSatker.SplitterPosition;
            bsiMenu.Caption = "";
            Icon = Properties.Resources.logo_2016;
        }

        private void inisialisasiForm()
        {
            this.Text = "Sistem Informasi Manajemen Aset Negara | Koordinator Eselon1";
            bsiUser.Caption = "User: " + konfigApp.namaUser;
            bsiGroup.Caption = "Group: " + konfigApp.namaGroup;
            bsiMenu.Caption = "Menu: " + konfigApp.strMenu +">"+ konfigApp.strSubMenu;
            bsiUser.Caption = "Login sbg: " + konfigApp.namaUser + " ";
            bsiNmSatker.Caption = "Eselon1: [" + konfigApp.kodeEselon1 + "]" + konfigApp.namaEselon1 + " ";
            konfigApp.kdMenu = "011";

            System.Reflection.Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly();
            FileVersionInfo fvi = FileVersionInfo.GetVersionInfo(assembly.Location);
            Text += " | v" + fvi.FileVersion;

            rpMonitoringWasdal.Visible = false;
            rpPspBmn.Visible = false;
            rpPspBmnDpl.Visible = false;
            rpPenertibanBMN.Visible = false;
            rpPnbp.Visible = false;
            rpRkmPnbp.Visible = false;
            rpRkmTindakLanjut.Visible = false;
            rpRekamSK.Visible = false;
            panelKoorSatker.Controls.Clear();
        }

        public void setPanel(UserControl uc)
        {
            uc.Dock = DockStyle.Fill;
            panelKoorSatker.Controls.Clear();
            panelKoorSatker.Controls.Add(uc);
        }

        #region Pengaturan Thread untuk kesetabilan Aplikasi
        public void progBar(BarItemVisibility str)
        {
            if (this.InvokeRequired)
            {
                ProgBar d = new ProgBar(progBar);
                this.Invoke(d, new object[] { str });
            }
            else
            {
                this.beMarqueeBar.Visibility = str;
            }
            if (str == DevExpress.XtraBars.BarItemVisibility.Never)
            {
                try
                {
                    this.Enabled = true;
                }
                catch (Exception)
                {
                    
                }
            }
        }

        public void ShowProgresBar()
        {
            this.progBar(BarItemVisibility.Always);
        }

        
        public delegate void AktifkanForm(string str);

        public void aktifkanForm(string str)
        {
            this.Enabled = true;
            try
            {
                this.Cursor = Cursors.Default;
            }
            catch (Exception)
            {
                
            }
        }
        public void fToggleProgressBar(string kondisi)
        {
            if (kondisi == "start")
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
            }
            else
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
            }
        }
        #endregion

        private void FrmKoorEselon1_Load(object sender, EventArgs e)
        {
            this.inisialisasiForm();
            //this.tampilkanDashboard();
            this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
            UserLookAndFeel.Default.SetSkinStyle(this.GetSkin().Name.ToString());
            this.nbiPersediaan.Enabled = false;
            DevExpress.UserSkins.OfficeSkins.Register();
            DevExpress.UserSkins.BonusSkins.Register();
            SkinHelper.InitSkinGallery(ribbonGallerySkins, true);

            if (konfigApp.initRef == "Y")
            {
                Reference Ref = new Reference();
                Ref.Size = new System.Drawing.Size(0, 0);
                Ref.Opacity = 0;
                Ref.Show();
                Ref.Hide();
                //Ref.getinitKondisi();
                konfigApp.initRef = "N";
            }
        }

        private void nbcNavigasi_NavPaneStateChanged(object sender, EventArgs e)
        {
            if (nbcNavigasi.OptionsNavPane.NavPaneState.ToString() == "Expanded")
            {
                sccSatker.SplitterPosition = lebarNavigasi;
                sccSatker.IsSplitterFixed = false;
            }
            else
            {
                sccSatker.SplitterPosition = 55;
                sccSatker.IsSplitterFixed = true;
            }
        }

        private void bbiKeluarAplikasi_ItemClick(object sender, ItemClickEventArgs e)
        {
            this.Close();
        }

        public void nonAktifkanForm(string str)
        {
            this.Cursor = Cursors.WaitCursor;
            this.Enabled = false;
        }

        #region Perekaman Wasdal

        #region SET TOMBOL
        private string menuMonWasdal = "Monitoring Pengawasan dan Pengendalian";
        private string menuRekamTlWasdal = "Perekaman Tindak Lanjut Pengawasan dan Pengendalian";
        private string menuRekamPnbpWasdal = "Perekaman PNBP Pengawasan dan Pengendalian";
        private string subMenuMonPSPBMN = "Penetapan Status Penggunaan BMN";
        private string subMenuMonPSPBMNLAIN = "Penetapan Status Penggunaan BMN yang dioperasikan Pihak Lain";
        private string subMenuMonASPBMN = "Alih Status Penggunaan BMN";
        private string subMenuMonPBMNS = "Penggunaan Sementara BMN";
        private string subMenuMonSWBMN = "Sewa BMN";
        private string subMenuMonPPBMN = "Pakai Pinjam BMN";
        private string subMenuMonKPBMN = "Kerjasama Pemanfaatan BMN";
        private string subMenuMonBSG = "KSPI";
        private string subMenuMonBGS = "KSPI";
        private string subMenuMonPenjualan = "Penjualan BMN";
        private string subMenuMonHibah = "Hibah BMN";
        private string subMenuMonTukar = "Tukar BMN";
        private string subMenuMonMusnah = "Pemusnahan BMN";
        private string subMenuMonPengadilan = "Penghapusan BMN karena Putusan Pengadilan";
        private string subMenuMonHapusLain = "Penghapusan BMN karena Sebab-sebab Lain";
        private string subMenuMonModal = "Penyertaan Modal Pemerintah";
        private string subMenuMonGuna = "Monitoring Penggunaan BMN";
        private string subMenuMonManfaat = "Monitoring Pemanfaatan BMN";
        private string subMenuMonPindahTgn = "Monitoring Pemindahtanganan BMN";
        private string subMenuMonHapus = "Monitoring Penghapusan BMN";

        private void resetEventButtonMonWasdal()
        {
            konfigApp.RemoveClickEvent(this.bbiMWasdalTutup);
            konfigApp.RemoveClickEvent(this.bbiMWasdalMore);
            konfigApp.RemoveClickEvent(this.bbiMWasdalRefresh);
            konfigApp.RemoveClickEvent(this.bbiMWasdalPrint);
        }

        private void setGridMonWasdal(string menu, string submenu)
        {


            konfigApp.strMenu = menu;
            konfigApp.strSubMenu = submenu;
            this.inisialisasiForm();
            this.rpMonitoringWasdal.Text = konfigApp.strSubMenu;
            this.rpgMonitoringWasdal.Text = konfigApp.strSubMenu;
            this.rpMonitoringWasdal.Visible = true;
            this.ribbon.SelectedPage = this.rpMonitoringWasdal;
            this.modeLoadData = "normal";
            this.strCari = "";
            this.dataInisial = true;
            this.adaData = false;
            this.masihAdaData = true;
        }
        public void setEnabledButtonMWasdal(string item, bool enabled)
        {
            BarButtonItem btnMonWl = null;
            switch (item)
            {
                case "Refresh":
                    btnMonWl = bbiMWasdalRefresh;
                    break;
                case "More":
                    btnMonWl = bbiMWasdalMore;
                    break;
                case "Print":
                    btnMonWl = bbiMWasdalPrint;
                    break;
                case "Tutup":
                    btnMonWl = bbiMWasdalTutup;
                    break;
                case "Export To Excel":
                    btnMonWl = barMonWasdalExcel;
                    break;
            }
            btnMonWl.Enabled = enabled;
        }

        public void setTombolMWasdal(bool status)
        {
            this.bbiMWasdalTutup.Enabled = false;
        }

        #endregion

        KES1.MWD.PSPBMN.ucPSPBMN MonPSPBMN;
        KES1.MWD.PSPBMN.ucMonLAIN MonLain;

        #region PSPBMN

        private void setEventButtonMWasdalPSPBMN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNTutup);
        }

        public void initGridMonWlPSPBMN()
        {
            inisialisasiForm();

            this.setEventButtonMWasdalPSPBMN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonPSPBMN);

            this.MonPSPBMN = new KES1.MWD.PSPBMN.ucPSPBMN(this);
            MonPSPBMN.nameTab1 = "BMN Sudah PSP";
            MonPSPBMN.nameTab2 = "BMN Belum PSP";
            MonPSPBMN.strKdPelayanan = "AND (KD_PELAYANAN = '02')";
            this.setPanel(this.MonPSPBMN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalPSPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlPSPBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalPSPBMN()
        {

        }

        private void mWlPSPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPSPBMN();
        }

        private void mWlPSPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MonPSPBMN.xtcPSP.SelectedTabPageIndex == 0)
            {

                #region PSP SUDAH JADI

                if (MonPSPBMN.xtbDetail1.SelectedTabPageIndex == 0)
                {
                    if (MonPSPBMN.tindakLanjut1.modeLoadData == "normal" || MonPSPBMN.tindakLanjut1.modeLoadData == "cari")
                        MonPSPBMN.tindakLanjut1.dataInisial = false;

                    MonPSPBMN.tindakLanjut1.getTindakLanjut();
                }
                #endregion
            }
            else
            {
                #region PSP BELUM JADI
                if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 0)
                {
                    if (MonPSPBMN.tanah2.modeLoadData == "normal" || MonPSPBMN.tanah2.modeLoadData == "cari")
                        MonPSPBMN.tanah2.dataInisial = false;

                    MonPSPBMN.tanah2.getTanah();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 1)
                {
                    if (MonPSPBMN.bangunan2.modeLoadData == "normal" || MonPSPBMN.bangunan2.modeLoadData == "cari")
                        MonPSPBMN.bangunan2.dataInisial = false;

                    MonPSPBMN.bangunan2.getBangunan();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 2)
                {
                    if (MonPSPBMN.rmhNgr2.modeLoadData == "normal" || MonPSPBMN.rmhNgr2.modeLoadData == "cari")
                        MonPSPBMN.rmhNgr2.dataInisial = false;

                    MonPSPBMN.rmhNgr2.getRmhNgr();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 3)
                {
                    if (MonPSPBMN.angkutan2.modeLoadData == "normal" || MonPSPBMN.angkutan2.modeLoadData == "cari")
                        MonPSPBMN.angkutan2.dataInisial = false;

                    MonPSPBMN.angkutan2.getAngkutan();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 4)
                {
                    if (MonPSPBMN.bangunanAir2.modeLoadData == "normal" || MonPSPBMN.bangunanAir2.modeLoadData == "cari")
                        MonPSPBMN.bangunanAir2.dataInisial = false;

                    MonPSPBMN.bangunanAir2.getBangunanAir();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 5)
                {
                    if (MonPSPBMN.senjata2.modeLoadData == "normal" || MonPSPBMN.senjata2.modeLoadData == "cari")
                        MonPSPBMN.senjata2.dataInisial = false;

                    MonPSPBMN.senjata2.getSenjata();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 6)
                {
                    if (MonPSPBMN.mesinNonTik2.modeLoadData == "normal" || MonPSPBMN.mesinNonTik2.modeLoadData == "cari")
                        MonPSPBMN.mesinNonTik2.dataInisial = false;

                    MonPSPBMN.mesinNonTik2.getMesinNonTik();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 7)
                {
                    if (MonPSPBMN.jlnJmbtn2.modeLoadData == "normal" || MonPSPBMN.jlnJmbtn2.modeLoadData == "cari")
                        MonPSPBMN.jlnJmbtn2.dataInisial = false;

                    MonPSPBMN.jlnJmbtn2.getJlnJmbtn();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 8)
                {
                    if (MonPSPBMN.propSus2.modeLoadData == "normal" || MonPSPBMN.propSus2.modeLoadData == "cari")
                        MonPSPBMN.propSus2.dataInisial = false;

                    MonPSPBMN.propSus2.getPropSus();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 9)
                {
                    if (MonPSPBMN.ATL2.modeLoadData == "normal" || MonPSPBMN.ATL2.modeLoadData == "cari")
                        MonPSPBMN.ATL2.dataInisial = false;

                    MonPSPBMN.ATL2.getATL();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 10)
                {
                    if (MonPSPBMN.mesinTik2.modeLoadData == "normal" || MonPSPBMN.mesinTik2.modeLoadData == "cari")
                        MonPSPBMN.mesinTik2.dataInisial = false;

                    MonPSPBMN.mesinTik2.getMesinTik();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 11)
                {
                    if (MonPSPBMN.ATB2.modeLoadData == "normal" || MonPSPBMN.ATB2.modeLoadData == "cari")
                        MonPSPBMN.ATB2.dataInisial = false;

                    MonPSPBMN.ATB2.getATB();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 12)
                {
                    if (MonPSPBMN.KDP2.modeLoadData == "normal" || MonPSPBMN.ATB2.modeLoadData == "cari")
                        MonPSPBMN.KDP2.dataInisial = false;

                    MonPSPBMN.KDP2.getKDP();
                }
                else if (MonPSPBMN.xtbDetail2.SelectedTabPageIndex == 13)
                {
                    if (MonPSPBMN.renovasi2.modeLoadData == "normal" || MonPSPBMN.ATB2.modeLoadData == "cari")
                        MonPSPBMN.renovasi2.dataInisial = false;

                    MonPSPBMN.renovasi2.getRenovasi();
                }
                #endregion
            }



        }

        private void mWlPSPBMNPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlPSPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region PSPBMNLAIN
        KES1.MWD.PSPBMNLAIN.ucPSPBMNLAIN MonPSPBMNLAIN;

        private void setEventButtonMWasdalPSPBMNLAIN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNLAINRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNLAINMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNLAINPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPSPBMNLAINTutup);
        }

        public void initGridMonWlPSPBMNLAIN()
        {
            inisialisasiForm();

            this.setEventButtonMWasdalPSPBMNLAIN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonPSPBMNLAIN);

            this.MonPSPBMNLAIN = new KES1.MWD.PSPBMNLAIN.ucPSPBMNLAIN(this);
            MonPSPBMNLAIN.strKdPelayanan = "AND (KD_PELAYANAN = '03')";
            //MonPSPBMNLAIN.strKdPelayanan = "AND ((KD_STATUS <> '01') OR (KD_STATUS <> '02'))";
            MonPSPBMNLAIN.nameTab1 = "BMN Sudah PSP";
            MonPSPBMNLAIN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonPSPBMNLAIN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalPSPBMNLAIN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlPSPBMNLAIN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalPSPBMNLAIN()
        {

        }

        private void mWlPSPBMNLAINRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPSPBMNLAIN();
        }

        private void mWlPSPBMNLAINMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonPSPBMNLAIN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonPSPBMNLAIN.tindakLanjut1.modeLoadData == "normal" || MonPSPBMNLAIN.tindakLanjut1.modeLoadData == "cari")
                    MonPSPBMNLAIN.tindakLanjut1.dataInisial = false;

                MonPSPBMNLAIN.tindakLanjut1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlPSPBMNLAINPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlPSPBMNLAINTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region ASPBMN
        KES1.MWD.ASPBMN.ucASPBMN MonASPBMN;

        private void setEventButtonMWasdalASPBMN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlASPBMNRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlASPBMNMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlASPBMNPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlASPBMNTutup);
        }

        public void initGridMonWlASPBMN()
        {
            inisialisasiForm();

            this.setEventButtonMWasdalASPBMN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonASPBMN);

            this.MonASPBMN = new KES1.MWD.ASPBMN.ucASPBMN(this);
            MonASPBMN.strKdPelayanan = "AND (KD_PELAYANAN = '04')";
            //MonASPBMN.strKdPelayanan = "";
            MonASPBMN.nameTab1 = "BMN Sudah PSP";
            MonASPBMN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonASPBMN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalASPBMNLAIN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlASPBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalASPBMN()
        {

        }

        private void mWlASPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlASPBMN();
        }

        private void mWlASPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonASPBMN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonASPBMN.tindakLanjut1.modeLoadData == "normal" || MonASPBMN.tindakLanjut1.modeLoadData == "cari")
                    MonASPBMN.tindakLanjut1.dataInisial = false;

                MonASPBMN.tindakLanjut1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlASPBMNPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlASPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region PBMNS
        KES1.MWD.PBMNS.ucPBMNS MonPBMNS;

        private void setEventButtonMWasdalPBMNS()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPBMNSRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPBMNSMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPBMNSPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPBMNSTutup);
        }

        public void initGridMonWlPBMNS()
        {
            inisialisasiForm();

            this.setEventButtonMWasdalPBMNS();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonPBMNS);

            this.MonPBMNS = new KES1.MWD.PBMNS.ucPBMNS(this);
            MonPBMNS.strKdPelayanan = "AND (KD_PELAYANAN = '05')";
            //MonPBMNS.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonPBMNS.nameTab1 = "BMN Sudah PSP";
            MonPBMNS.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonPBMNS);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalPBMNS_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlPBMNS();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalPBMNS()
        {

        }

        private void mWlPBMNSRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPBMNS();
        }

        private void mWlPBMNSMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonPBMNS.tindakLanjut1.modeLoadData == "normal" || MonPBMNS.tindakLanjut1.modeLoadData == "cari")
                    MonPBMNS.tindakLanjut1.dataInisial = false;

                MonPBMNS.tindakLanjut1.getTindakLanjut();
            }
            //if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 0)
            //{
            //    if (MonPBMNS.tanah1.modeLoadData == "normal" || MonPBMNS.tanah1.modeLoadData == "cari")
            //        MonPBMNS.tanah1.dataInisial = false;

            //    MonPBMNS.tanah1.getTanah();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 1)
            //{
            //    if (MonPBMNS.bangunan1.modeLoadData == "normal" || MonPBMNS.bangunan1.modeLoadData == "cari")
            //        MonPBMNS.bangunan1.dataInisial = false;

            //    MonPBMNS.bangunan1.getBangunan();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 2)
            //{
            //    if (MonPBMNS.rmhNgr1.modeLoadData == "normal" || MonPBMNS.rmhNgr1.modeLoadData == "cari")
            //        MonPBMNS.rmhNgr1.dataInisial = false;

            //    MonPBMNS.rmhNgr1.getRmhNgr();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 3)
            //{
            //    if (MonPBMNS.angkutan1.modeLoadData == "normal" || MonPBMNS.angkutan1.modeLoadData == "cari")
            //        MonPBMNS.angkutan1.dataInisial = false;

            //    MonPBMNS.angkutan1.getAngkutan();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 4)
            //{
            //    if (MonPBMNS.bangunanAir1.modeLoadData == "normal" || MonPBMNS.bangunanAir1.modeLoadData == "cari")
            //        MonPBMNS.bangunanAir1.dataInisial = false;

            //    MonPBMNS.bangunanAir1.getBangunanAir();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 5)
            //{
            //    if (MonPBMNS.senjata1.modeLoadData == "normal" || MonPBMNS.senjata1.modeLoadData == "cari")
            //        MonPBMNS.senjata1.dataInisial = false;

            //    MonPBMNS.senjata1.getSenjata();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 6)
            //{
            //    if (MonPBMNS.mesinNonTik1.modeLoadData == "normal" || MonPBMNS.mesinNonTik1.modeLoadData == "cari")
            //        MonPBMNS.mesinNonTik1.dataInisial = false;

            //    MonPBMNS.mesinNonTik1.getMesinNonTik();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 7)
            //{
            //    if (MonPBMNS.jlnJmbtn1.modeLoadData == "normal" || MonPBMNS.jlnJmbtn1.modeLoadData == "cari")
            //        MonPBMNS.jlnJmbtn1.dataInisial = false;

            //    MonPBMNS.jlnJmbtn1.getJlnJmbtn();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 8)
            //{
            //    if (MonPBMNS.propSus1.modeLoadData == "normal" || MonPBMNS.propSus1.modeLoadData == "cari")
            //        MonPBMNS.propSus1.dataInisial = false;

            //    MonPBMNS.propSus1.getPropSus();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 9)
            //{
            //    if (MonPBMNS.ATL1.modeLoadData == "normal" || MonPBMNS.ATL1.modeLoadData == "cari")
            //        MonPBMNS.ATL1.dataInisial = false;

            //    MonPBMNS.ATL1.getATL();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 10)
            //{
            //    if (MonPBMNS.mesinTik1.modeLoadData == "normal" || MonPBMNS.mesinTik1.modeLoadData == "cari")
            //        MonPBMNS.mesinTik1.dataInisial = false;

            //    MonPBMNS.mesinTik1.getMesinTik();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 11)
            //{
            //    if (MonPBMNS.ATB1.modeLoadData == "normal" || MonPBMNS.ATB1.modeLoadData == "cari")
            //        MonPBMNS.ATB1.dataInisial = false;

            //    MonPBMNS.ATB1.getATB();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 12)
            //{
            //    if (MonPBMNS.KDP1.modeLoadData == "normal" || MonPBMNS.ATB1.modeLoadData == "cari")
            //        MonPBMNS.KDP1.dataInisial = false;

            //    MonPBMNS.KDP1.getKDP();
            //}
            //else if (MonPBMNS.xtbDetail1.SelectedTabPageIndex == 13)
            //{
            //    if (MonPBMNS.renovasi1.modeLoadData == "normal" || MonPBMNS.ATB1.modeLoadData == "cari")
            //        MonPBMNS.renovasi1.dataInisial = false;

            //    MonPBMNS.renovasi1.getRenovasi();
            //}
            #endregion
        }

        private void mWlPBMNSPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlPBMNSTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region SWBMN
        KES1.MWD.SWBMN.ucSWBMN MonSWBMN;

        private void setEventButtonMWasdalSWBMN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlSWBMNRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlSWBMNMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlSWBMNPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlSWBMNTutup);
        }

        private void initGridMonWlSWBMN()
        {
            this.setEventButtonMWasdalSWBMN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonSWBMN);

            MonSWBMN = new KES1.MWD.SWBMN.ucSWBMN(this);
            MonSWBMN.strKdPelayanan = "AND (KD_PELAYANAN = '06')";
            MonSWBMN.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            //MonSWBMN.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonSWBMN.nameTab1 = "BMN Sudah PSP";
            MonSWBMN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonSWBMN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalSWBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlSWBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalSWBMN()
        {

        }

        private void mWlSWBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlSWBMN();
        }

        private void mWlSWBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI

            if (MonSWBMN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonSWBMN.tindakLanjut1.modeLoadData == "normal" || MonSWBMN.tindakLanjut1.modeLoadData == "cari")
                    MonSWBMN.tindakLanjut1.dataInisial = false;

                MonSWBMN.tindakLanjut1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlSWBMNPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlSWBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region PPBMN
        KES1.MWD.PPBMN.ucPPBMN MonPPBMN;

        private void setEventButtonMWasdalPPBMN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPPBMNRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPPBMNMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPPBMNPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPPBMNTutup);
        }

        private void initGridMonWlPPBMN()
        {
            this.setEventButtonMWasdalPPBMN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonPPBMN);

            this.MonPPBMN = new KES1.MWD.PPBMN.ucPPBMN(this);
            MonPPBMN.strKdPelayanan = "AND (KD_PELAYANAN = '07')";
            MonPPBMN.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            //MonPPBMN.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonPPBMN.nameTab1 = "BMN Sudah PSP";
            MonPPBMN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonPPBMN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalPPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlPPBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalPPBMN()
        {

        }

        private void mWlPPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPPBMN();
        }

        private void mWlPPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonPPBMN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonPPBMN.tindakLanjut1.modeLoadData == "normal" || MonPPBMN.tindakLanjut1.modeLoadData == "cari")
                    MonPPBMN.tindakLanjut1.dataInisial = false;

                MonPPBMN.tindakLanjut1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlPPBMNPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlPPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region KPBMN
        KES1.MWD.KPBMN.ucKPBMN MonKPBMN;

        private void setEventButtonMWasdalKPBMN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlKPBMNRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlKPBMNMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlKPBMNPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlKPBMNTutup);
        }

        private void initGridMonWlKPBMN()
        {
            this.setEventButtonMWasdalKPBMN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonKPBMN);

            this.MonKPBMN = new KES1.MWD.KPBMN.ucKPBMN(this);
            MonKPBMN.strKdPelayanan = "AND (KD_PELAYANAN = '08')";
            MonKPBMN.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            //MonKPBMN.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonKPBMN.nameTab1 = "BMN Sudah PSP";
            MonKPBMN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonKPBMN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalKPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlKPBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalKPBMN()
        {

        }

        private void mWlKPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlKPBMN();
        }

        private void mWlKPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonKPBMN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonKPBMN.tindakLanjut1.modeLoadData == "normal" || MonKPBMN.tindakLanjut1.modeLoadData == "cari")
                    MonKPBMN.tindakLanjut1.dataInisial = false;

                MonKPBMN.tindakLanjut1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlKPBMNPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlKPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region BSG
        KES1.MWD.BSG.ucBSG MonBSG;

        private void setEventButtonMWasdalBSG()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlBSGRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlBSGMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlBSGPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlBSGTutup);
        }

        private void initGridMonWlBSG()
        {
            this.setEventButtonMWasdalBSG();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonBSG);

            this.MonBSG = new KES1.MWD.BSG.ucBSG(this);
            MonBSG.strKdPelayanan = "AND (KD_PELAYANAN = '10')";
            MonBSG.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            //MonBSG.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonBSG.nameTab1 = "BMN Sudah PSP";
            MonBSG.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonBSG);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalBSG_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlBSG();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalBSG()
        {

        }

        private void mWlBSGRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlBSG();
        }

        private void mWlBSGMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonBSG.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonBSG.tindakLanjut1.modeLoadData == "normal" || MonBSG.tindakLanjut1.modeLoadData == "cari")
                    MonKPBMN.tindakLanjut1.dataInisial = false;

                MonBSG.tindakLanjut1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlBSGPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlBSGTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region BGS
        KES1.MWD.BGS.ucBGS MonBGS;

        private void setEventButtonMWasdalBGS()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlBGSRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlBGSMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlBGSPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlBGSTutup);
        }

        private void initGridMonWlBGS()
        {
            this.setEventButtonMWasdalBGS();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonBGS);

            this.MonBGS = new KES1.MWD.BGS.ucBGS(this);
            MonBGS.strKdPelayanan = "AND (KD_PELAYANAN = '09')";
            MonBGS.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            MonBGS.nameTab1 = "BMN Sudah PSP";
            MonBGS.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonBGS);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalBGS_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlBGS();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalBGS()
        {

        }

        private void mWlBGSRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlBGS();
        }

        private void mWlBGSMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonBGS.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonBGS.tindakLanjut1.modeLoadData == "normal" || MonBGS.tindakLanjut1.modeLoadData == "cari")
                    MonKPBMN.tindakLanjut1.dataInisial = false;

                MonBGS.tindakLanjut1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlBGSPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlBGSTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region PENJUALAN
        KES1.MWD.PENJUALAN.ucPENJUALAN MonPENJUALAN;

        private void setEventButtonMWasdalPENJUALAN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPENJUALANRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPENJUALANMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPENJUALANPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPENJUALANTutup);
        }

        private void initGridMonWlPENJUALAN()
        {
            this.setEventButtonMWasdalPENJUALAN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonPenjualan);

            this.MonPENJUALAN = new KES1.MWD.PENJUALAN.ucPENJUALAN(this);
            MonPENJUALAN.strKdPelayanan = "AND (KD_PELAYANAN = '11')";
            MonPENJUALAN.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            //MonPENJUALAN.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonPENJUALAN.nameTab1 = "BMN Sudah PSP";
            MonPENJUALAN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonPENJUALAN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalPENJUALAN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlPENJUALAN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalPENJUALAN()
        {

        }

        private void mWlPENJUALANRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPENJUALAN();
        }

        private void mWlPENJUALANMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonPENJUALAN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonPENJUALAN.tindakLanjut1.modeLoadData == "normal" || MonPENJUALAN.tindakLanjut1.modeLoadData == "cari")
                    MonPENJUALAN.tindakLanjut1.dataInisial = false;

                MonPENJUALAN.tindakLanjut1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlPENJUALANPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlPENJUALANTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region TUKAR
        KES1.MWD.TUKAR.ucTukar MonTUKAR;

        private void setEventButtonMWasdalTUKAR()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlTUKARRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlTUKARMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlTUKARPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlTUKARTutup);
        }

        private void initGridMonWlTUKAR()
        {
            this.setEventButtonMWasdalTUKAR();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonTukar);

            this.MonTUKAR = new KES1.MWD.TUKAR.ucTukar(this);
            MonTUKAR.strKdPelayanan = "AND (KD_PELAYANAN = '12')";
            MonTUKAR.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            MonTUKAR.nameTab1 = "BMN Sudah PSP";
            MonTUKAR.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonTUKAR);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalTUKAR_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlTUKAR();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalTUKAR()
        {

        }

        private void mWlTUKARRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlTUKAR();
        }

        private void mWlTUKARMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonTUKAR.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonTUKAR.tindakLanjut1.modeLoadData == "normal" || MonTUKAR.tindakLanjut1.modeLoadData == "cari")
                    MonTUKAR.tindakLanjut1.dataInisial = false;

                MonTUKAR.tindakLanjut1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlTUKARPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlTUKARTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region HIBAH
        KES1.MWD.HIBAH.ucHibah MonHIBAH;

        private void setEventButtonMWasdalHIBAH()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlHIBAHRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlHIBAHMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlHIBAHPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlHIBAHTutup);
        }

        private void initGridMonWlHIBAH()
        {
            this.setEventButtonMWasdalHIBAH();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonHibah);

            this.MonHIBAH = new KES1.MWD.HIBAH.ucHibah(this);
            MonHIBAH.strKdPelayanan = "AND (KD_PELAYANAN = '13')";
            MonHIBAH.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            MonHIBAH.nameTab1 = "BMN Sudah PSP";
            MonHIBAH.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonHIBAH);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalHIBAH_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlHIBAH();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalHIBAH()
        {

        }

        private void mWlHIBAHRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlHIBAH();
        }

        private void mWlHIBAHMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonHIBAH.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonHIBAH.tindakLanjut1.modeLoadData == "normal" || MonHIBAH.tindakLanjut1.modeLoadData == "cari")
                    MonHIBAH.tindakLanjut1.dataInisial = false;

                MonHIBAH.tindakLanjut1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlHIBAHPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlHIBAHTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region PMBMN
        KES1.MWD.PMBMN.ucPMBMN MonPMBMN;

        private void setEventButtonMWasdalPMBMN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPMBMNRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPMBMNMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPMBMNPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPMBMNTutup);
        }

        private void initGridMonWlPMBMN()
        {
            this.setEventButtonMWasdalPMBMN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonModal);

            this.MonPMBMN = new KES1.MWD.PMBMN.ucPMBMN(this);
            MonPMBMN.strKdPelayanan = "AND (KD_PELAYANAN = '14')";
            MonPMBMN.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            MonPMBMN.nameTab1 = "BMN Sudah PSP";
            MonPMBMN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonPMBMN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalPMBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlPMBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalPMBMN()
        {

        }

        private void mWlPMBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPMBMN();
        }

        private void mWlPMBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonPMBMN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonPMBMN.tindakLanjut1.modeLoadData == "normal" || MonPMBMN.tindakLanjut1.modeLoadData == "cari")
                    MonPMBMN.tindakLanjut1.dataInisial = false;

                MonPMBMN.tindakLanjut1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlPMBMNPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlPMBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region MusnahBMN
        KES1.MWD.MusnahBMN.ucMusnahBMN MonMusnahBMN;

        private void setEventButtonMWasdalMusnahBMN()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlMusnahBMNRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlMusnahBMNMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlMusnahBMNPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlMusnahBMNTutup);
        }

        private void initGridMonWlMusnahBMN()
        {
            this.setEventButtonMWasdalMusnahBMN();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonMusnah);

            this.MonMusnahBMN = new KES1.MWD.MusnahBMN.ucMusnahBMN(this);
            MonMusnahBMN.strKdPelayanan = "AND (KD_PELAYANAN = '15')";
            MonMusnahBMN.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            //MonMusnahBMN.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonMusnahBMN.nameTab1 = "BMN Sudah PSP";
            MonMusnahBMN.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonMusnahBMN);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalMusnahBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlMusnahBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalMusnahBMN()
        {

        }

        private void mWlMusnahBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlMusnahBMN();
        }

        private void mWlMusnahBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonMusnahBMN.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonMusnahBMN.tindakLanjut1.modeLoadData == "normal" || MonMusnahBMN.tindakLanjut1.modeLoadData == "cari")
                    MonMusnahBMN.tindakLanjut1.dataInisial = false;

                MonMusnahBMN.tindakLanjut1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlMusnahBMNPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlMusnahBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region HapusBmnPengadilan
        KES1.MWD.HapusBmnPengadilan.ucHapusBmnPengadilan MonHapusBmnPengadilan;

        private void setEventButtonMWasdalHapusBmnPengadilan()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnPengadilanRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnPengadilanMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnPengadilanPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnPengadilanTutup);
        }

        private void initGridMonWlHapusBmnPengadilan()
        {
            this.setEventButtonMWasdalHapusBmnPengadilan();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonPengadilan);

            this.MonHapusBmnPengadilan = new KES1.MWD.HapusBmnPengadilan.ucHapusBmnPengadilan(this);
            MonHapusBmnPengadilan.strKdPelayanan = "AND (KD_PELAYANAN = '16')";
            MonHapusBmnPengadilan.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            MonHapusBmnPengadilan.nameTab1 = "BMN Sudah PSP";
            MonHapusBmnPengadilan.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonHapusBmnPengadilan);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalHapusBmnPengadilan_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlHapusBmnPengadilan();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalHapusBmnPengadilan()
        {

        }

        private void mWlHapusBmnPengadilanRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlHapusBmnPengadilan();
        }

        private void mWlHapusBmnPengadilanMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonHapusBmnPengadilan.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonHapusBmnPengadilan.tindakLanjut1.modeLoadData == "normal" || MonHapusBmnPengadilan.tindakLanjut1.modeLoadData == "cari")
                    MonHapusBmnPengadilan.tindakLanjut1.dataInisial = false;

                MonHapusBmnPengadilan.tindakLanjut1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlHapusBmnPengadilanPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlHapusBmnPengadilanTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #region HapusBmnLain
        KES1.MWD.HapusBmnLain.ucHapusBmnLain MonHapusBmnLain;

        private void setEventButtonMWasdalHapusBmnLain()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnLainRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnLainMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnLainPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlHapusBmnLainTutup);
        }

        private void initGridMonWlHapusBmnLain()
        {
            this.setEventButtonMWasdalHapusBmnLain();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonHapusLain);

            this.MonHapusBmnLain = new KES1.MWD.HapusBmnLain.ucHapusBmnLain(this);
            MonHapusBmnLain.strKdPelayanan = "AND (KD_PELAYANAN = '17')";
            MonHapusBmnLain.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);

            //MonHapusBmnLain.strKdPelayanan = "AND ((KD_STATUS = '03') OR (KD_STATUS = '04') OR (KD_STATUS = '99'))";
            MonHapusBmnLain.nameTab1 = "BMN Sudah PSP";
            MonHapusBmnLain.nameTab2 = "BMN Belum PSP";
            this.setPanel(this.MonHapusBmnLain);

            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void nbiMonitoringWasdalHapusBmnLain_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlHapusBmnLain();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void kembalikeGridMWasdalHapusBmnLain()
        {

        }

        private void mWlHapusBmnLainRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlHapusBmnLain();
        }

        private void mWlHapusBmnLainMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region PSP SUDAH JADI
            if (MonHapusBmnLain.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (MonHapusBmnLain.tindakLanjut1.modeLoadData == "normal" || MonHapusBmnLain.tindakLanjut1.modeLoadData == "cari")
                    MonHapusBmnLain.tindakLanjut1.dataInisial = false;

                MonHapusBmnLain.tindakLanjut1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlHapusBmnLainPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void mWlHapusBmnLainTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        #endregion

        #endregion

        #region TINDAK LANJUT
        #region --> PSP BMN
        private KES1.TL.ucTl1GridPspBmn gridTl1PspBmn;
        private KES1.TL.ucTl1FormPspBmn formTl1PspBmn;

        private void initTl1GridPspBmn()
        {
            if (gridTl1PspBmn == null)
            {
                gridTl1PspBmn = new KES1.TL.ucTl1GridPspBmn();
                gridTl1PspBmn.cariDataOnline = new CariDataOnline(cariDataTl1PspBmn);
            }
            setPanel(gridTl1PspBmn);
            bbiTl1PspBmnDetail.Enabled = true;
            bbiTl1PspBmnKembali.Enabled = false;
            bbiTl1PspBmnRefresh.Enabled = true;
            bbiTl1PspBmnMoreData.Enabled = true;
        }

        private void initTl1FormPspBmn()
        {
            if (formTl1PspBmn == null)
            {
                formTl1PspBmn = new KES1.TL.ucTl1FormPspBmn();
            }
            setPanel(formTl1PspBmn);
            bbiTl1PspBmnDetail.Enabled = false;
            bbiTl1PspBmnKembali.Enabled = true;
            bbiTl1PspBmnRefresh.Enabled = false;
            bbiTl1PspBmnMoreData.Enabled = false;
        }

        private void getInitTl1PspBmn()
        {

        }

        private void cariDataTl1PspBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitTl1PspBmn();
        }

        private void nbiTl1PspBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Pengguna Aplikasi";
            konfigApp.strSubMenu = " > Group";
            this.Enabled = false;
            this.inisialisasiForm();
            rpPspBmn.Visible = true;
            ribbon.SelectedPage = rpPspBmn;
            initTl1GridPspBmn();
            modeCari = false;
            gridTl1PspBmn.teNamaKolom.Text = "";
            gridTl1PspBmn.teCari.Text = "";
            gridTl1PspBmn.fieldDicari = "";
            this.strCari = "";
            this.dataInisial = true;
            getInitTl1PspBmn();
        }

        private void bbiTl1PspBmnDetail_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void bbiTl1PspBmnKembali_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void bbiTl1PspBmnRefresh_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void bbiTl1PspBmnMoreData_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void bbiTl1PspBmnTutup_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }
        #endregion PSP BMN









        #endregion TINDAK LANJUT

        #region PEREKAMAN TINDAK LANJUT

        private void resetEventBtnTlWasdal()
        {
            konfigApp.RemoveClickEvent(this.bbiRkmTlTambah);
            konfigApp.RemoveClickEvent(this.bbiRkmTlEdit);
            konfigApp.RemoveClickEvent(this.bbiRkmTlHapus);
            konfigApp.RemoveClickEvent(this.bbiRkmTlRefresh);
            konfigApp.RemoveClickEvent(this.bbiRkmTlMore);
            konfigApp.RemoveClickEvent(this.bbiRkmTlDetail);
            konfigApp.RemoveClickEvent(this.bbiRkmTlKembali);
            konfigApp.RemoveClickEvent(this.bbiRkmTlTutup);
        }

        public void setTombolRtlGrid()
        {
            bbiRkmTlTambah.Enabled = true;
            bbiRkmTlEdit.Enabled = true;
            bbiRkmTlHapus.Enabled = true;
            bbiRkmTlDetail.Enabled = true;
            bbiRkmTlMore.Enabled = true;
            bbiRkmTlRefresh.Enabled = true;
            bbiRkmTlKembali.Enabled = false;
            bbiRkmTlTutup.Enabled = true;

        }

        public void setTombolRtlForm()
        {
            bbiRkmTlTambah.Enabled = false;
            bbiRkmTlEdit.Enabled = false;
            bbiRkmTlHapus.Enabled = false;
            bbiRkmTlDetail.Enabled = false;
            bbiRkmTlMore.Enabled = false;
            bbiRkmTlRefresh.Enabled = false;
            bbiRkmTlKembali.Enabled = true;
            bbiRkmTlTutup.Enabled = true;
        }

        private void setGridRkmTlWasdal(string menu, string submenu)
        {


            konfigApp.strMenu = menu;
            konfigApp.strSubMenu = submenu;
            this.inisialisasiForm();
            this.rpRkmTindakLanjut.Text = konfigApp.strSubMenu;
            this.rpgRkmTindakLanjut.Text = konfigApp.strSubMenu;
            this.rpRkmTindakLanjut.Visible = true;
            this.ribbon.SelectedPage = this.rpRkmTindakLanjut;
            this.modeLoadData = "normal";
            this.strCari = "";
            this.dataInisial = true;
            this.adaData = false;
            this.masihAdaData = true;
        }

        #region == PSPBMN

        KES1.TL.PSPBMN.ucRTLPspBmnGrid gridRTLPspBmn;
        KES1.TL.PSPBMN.ucRTLPspBmnForm formRTLPspBmnTambah;
        KES1.TL.PSPBMN.ucRTLPspBmnForm formRTLPspBmnUbah;
        KES1.TL.PSPBMN.ucRTLPspBmnForm formRTLPspDetail;
        private ArrayList dsGridRtlPspBmn;
        SvcWasdalPSPBMNSkSelect.OutputParameters dOutRtlPspBmn;
        SvcWasdalPSPBMNSkSelect.execute_pttClient ambilRtlPspBmn;

        private void nbiTLPSPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPSPBMN;
            konfigApp.kdPelayanan = "02";
            konfigApp.namaPelayanan = this.subMenuMonPSPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPSPSBMN();
            bbiRkmTlTambah.Enabled = false;
            modeCari = false;
            gridRTLPspBmn.teNamaKolom.Text = "";
            gridRTLPspBmn.teCari.Text = "";
            gridRTLPspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPspBmn();
        }
        private void setEventBtnTlPSPBMN()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNMore);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNHapus);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNTutup);

        }

        public void initGridRkmTlPSPSBMN()
        {

            if (gridRTLPspBmn == null)
            {
                gridRTLPspBmn = new KES1.TL.PSPBMN.ucRTLPspBmnGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPspBmn),
                    detailDataGrid = new DetailDataGrid(RkmTlPSPBMNDetail)
                };
            }
            //setTombolRskGrid();
            setEventBtnTlPSPBMN();
            setPanel(gridRTLPspBmn);
        }

        #region --++ Ambil Data PSP BMN
        private void getInitRkmTlPspBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNSkSelect.InputParameters parInp = new SvcWasdalPSPBMNSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_USER = {1} {2}", konfigApp.kdPelayanan, konfigApp.idUser, this.strCari);
                ambilRtlPspBmn = new SvcWasdalPSPBMNSkSelect.execute_pttClient();
                ambilRtlPspBmn.Open();
                ambilRtlPspBmn.Beginexecute(parInp, new AsyncCallback(getRkmTlPspBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlPspBmn(IAsyncResult result)
        {
            try
            {
                dOutRtlPspBmn = ambilRtlPspBmn.Endexecute(result);
                ambilRtlPspBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPspBmn(dsRtlPspBmn), dOutRtlPspBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPspBmn(SvcWasdalPSPBMNSkSelect.OutputParameters dataOut);

        private void dsRtlPspBmn(SvcWasdalPSPBMNSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRtlPspBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRtlPspBmn.Add(dataOut.SF_READ_WASDAL_PSP[i]);
            }

            gridRTLPspBmn.sbCariOnline.Enabled = !modeCari;
            gridRTLPspBmn.dsDataSource = dsGridRtlPspBmn;
            gridRTLPspBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPspBmn.teNamaKolom.Text.Trim();
                string xDua = gridRTLPspBmn.teCari.Text.Trim();
                string xTiga = gridRTLPspBmn.fieldDicari;
                gridRTLPspBmn.gvGridSk.ClearColumnsFilter();
                gridRTLPspBmn.teNamaKolom.Text = xSatu;
                gridRTLPspBmn.teCari.Text = xDua;
                gridRTLPspBmn.fieldDicari = xTiga;
            }
            else
                gridRTLPspBmn.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PSP BMN

        #region --++ Simpan Data PSP BMN
        SvcWasdalPSPBMNCrud.OutputParameters dOutAmbilDataPspBmnRsk;
        SvcWasdalPSPBMNCrud.execute_pttClient ambilDataPspBmnRsk;

        private void simpanDataRtlPspBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.idPemohon : formRTLPspBmnUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.rgJenisAset.EditValue.ToString() : formRTLPspBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teJabatan.Text.Trim() : formRTLPspBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNamaInstansi.EditValue.ToString() : formRTLPspBmnUbah.teNamaInstansi.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.kodePenerbitSkDetail : formRTLPspBmnUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formRTLPspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnTambah.teNilaiPenetapan.Text)) : (formRTLPspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNipPenandaTangan.Text : formRTLPspBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNamaPenandaTangan.Text : formRTLPspBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNamaInstansi.Text : formRTLPspBmnUbah.teNamaInstansi.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.namaPenerbitSkDetail : formRTLPspBmnUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNomorSk.Text.Trim() : formRTLPspBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = konfigApp.DateToString(DateTime.Now);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teTanggalSk.EditValue : formRTLPspBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teJenisPemohon.Text : formRTLPspBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teUraianKeputusan.Text : formRTLPspBmnUbah.teUraianKeputusan.Text);
                ambilDataPspBmnRsk = new SvcWasdalPSPBMNCrud.execute_pttClient();
                ambilDataPspBmnRsk.Beginexecute(parInp, new AsyncCallback(cudRtlPspBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        /*private void resetEventButtonMonWasdal()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.idPemohon : formRTLPspBmnUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.rgJenisAset.EditValue.ToString() : formRTLPspBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teJabatan.Text.Trim() : formRTLPspBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNamaInstansi.EditValue.ToString() : formRTLPspBmnUbah.teNamaInstansi.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.kodePenerbitSkDetail : formRTLPspBmnUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formRTLPspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnTambah.teNilaiPenetapan.Text)) : (formRTLPspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNipPenandaTangan.Text : formRTLPspBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNamaPenandaTangan.Text : formRTLPspBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNamaInstansi.Text : formRTLPspBmnUbah.teNamaInstansi.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.namaPenerbitSkDetail : formRTLPspBmnUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teNomorSk.Text.Trim() : formRTLPspBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = konfigApp.DateToString(DateTime.Now);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teTanggalSk.EditValue : formRTLPspBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teJenisPemohon.Text : formRTLPspBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLPspBmnTambah.teUraianKeputusan.Text : formRTLPspBmnUbah.teUraianKeputusan.Text);
                ambilDataPspBmnRsk = new SvcWasdalPSPBMNCrud.call_pttClient();
                ambilDataPspBmnRsk.Beginexecute(parInp, new AsyncCallback(cudRtlPspBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }*/

        private void cudRtlPspBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPspBmnRsk = ambilDataPspBmnRsk.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPspBmn(this.ubahDsRtlPspBmn), dOutAmbilDataPspBmnRsk);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPspBmn(SvcWasdalPSPBMNCrud.OutputParameters dataOutRtl);

        int _keBerapa1 = 0;

        private void ubahDsRtlPspBmn(SvcWasdalPSPBMNCrud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalPSPBMNSkSelect.WASDALSROW_READ_WASDAL_PSP dataPenyama = new SvcWasdalPSPBMNSkSelect.WASDALSROW_READ_WASDAL_PSP();
                dataPenyama.ID_PEMOHONSpecified = true;
                //dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLPspBmnTambah.idPemohon;
                        //dataPenyama.ID_SATKER = formRTLPspBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPspBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formRTLPspBmnTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPspBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPspBmnTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPspBmnTambah.kodePenerbitSkDetail;
                        //dataPenyama.KD_SATKER = formRTLPspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPspBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formRTLPspBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formRTLPspBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPspBmnTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPspBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRtlPspBmn == null ? 1 : dsGridRtlPspBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLPspBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPspBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPspBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPspBmnTambah.teNamaKl.Text;
                        //dataPenyama.UR_SATKER = formRTLPspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formRTLPspBmnTambah.teUraianKeputusan.Text;
                        dsGridRtlPspBmn.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPspBmn.dataTerpilih = dataPenyama;
                            _keBerapa1 = 1;
                            formRTLPspBmnTambah.gcDaftarAset.Enabled = true;
                            formRTLPspBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPspBmnTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPspBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPspBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPspBmnTambah.sbCariPemohon.Enabled = false;
                            formRTLPspBmnTambah.sbRefresh.Enabled = true;
                            formRTLPspBmnTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPspBmnTambah.cePilihSemua.Enabled = true;
                            formRTLPspBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPspBmnTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPspBmn.dataTerpilih = gridSkPspBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRtlPspBmn.IndexOf(gridRTLPspBmn.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRtlPspBmn.Remove(gridRTLPspBmn.dataTerpilih);
                            dsGridRtlPspBmn.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLPspBmnUbah.idPemohon;
                        //dataPenyama.ID_SATKER = formRTLPspBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPspBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formRTLPspBmnUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPspBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPspBmnUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPspBmnUbah.kodePenerbitSkDetail;
                        //dataPenyama.KD_SATKER = formRTLPspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPspBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formRTLPspBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLPspBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLPspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formRTLPspBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPspBmnUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPspBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLPspBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLPspBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLPspBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridRTLPspBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLPspBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPspBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPspBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLPspBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridRTLPspBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLPspBmn.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLPspBmnUbah.teNamaKl.Text;
                        //dataPenyama.UR_SATKER = formRTLPspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formRTLPspBmnUbah.teUraianKeputusan.Text;
                        _indeksData = dsGridRtlPspBmn.IndexOf(gridRTLPspBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRtlPspBmn.Remove(gridRTLPspBmn.dataTerpilih);
                        dsGridRtlPspBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRtlPspBmn.Remove(gridRTLPspBmn.dataTerpilih);
                        break;
                }
                gridRTLPspBmn.dsDataSource = dsGridRtlPspBmn;
                gridRTLPspBmn.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkPspBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN


        private void RkmTlPSPBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPspBmn.dataTerpilih != null)
            {
                if (formRTLPspBmnUbah == null)
                {
                    formRTLPspBmnUbah = new KES1.TL.PSPBMN.ucRTLPspBmnForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPspBmn = new SimpanDataRtl(simpanDataRtlPspBmn)
                    };
                }
                formRTLPspBmnUbah.dataTerpilih = gridRTLPspBmn.dataTerpilih;
                setPanel(formRTLPspBmnUbah);
                formRTLPspBmnUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPSPBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPSPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPspBmn.teNamaKolom.Text = "";
            gridRTLPspBmn.teCari.Text = "";
            gridRTLPspBmn.fieldDicari = "";
            gridRTLPspBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPspBmn();
        }

        private void RkmTlPSPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPspBmn();
            }
        }

        private void RkmTlPSPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void RkmTlPSPBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPSPBMN;
            konfigApp.kdPelayanan = "02";
            konfigApp.namaPelayanan = this.subMenuMonPSPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPSPSBMN();
            bbiRkmTlTambah.Enabled = false;
            modeCari = false;
            gridRTLPspBmn.teNamaKolom.Text = "";
            gridRTLPspBmn.teCari.Text = "";
            gridRTLPspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPspBmn();
        }

        private void cariDataRkmTlPspBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlPspBmn();
        }

        #endregion

        #region PSPBMNLAIN

        KES1.TL.PSPBMNLAIN.ucRTLPspBmnLainGrid gridRTLPspBmnLain;
        KES1.TL.PSPBMNLAIN.ucRTLPspBmnLainForm formRTLPspBmnLainTambah;
        KES1.TL.PSPBMNLAIN.ucRTLPspBmnLainForm formRTLPspBmnLainUbah;
        KES1.TL.PSPBMNLAIN.ucRTLPspBmnLainForm formRTLPspLainDetail;
        private ArrayList dsGridRtlPspBmnLain;
        SvcWasdalLainTindakLanjutSelect.OutputParameters dOutRtlPspBmnLain;
        SvcWasdalLainTindakLanjutSelect.execute_pttClient ambilRtlPspBmnLain;

        private void nbiTLPSPBMNLAIN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPSPBMNLAIN;
            konfigApp.kdPelayanan = "03";
            konfigApp.namaPelayanan = this.subMenuMonPSPBMNLAIN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPSPSBMNLain();
            modeCari = false;
            gridRTLPspBmnLain.teNamaKolom.Text = "";
            gridRTLPspBmnLain.teCari.Text = "";
            gridRTLPspBmnLain.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPspBmnLain();
        }

        private void setEventBtnTlPSPBMNLAIN()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNLAINTambah);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNLAINRefresh);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNLAINHapus);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNLAINMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNLAINDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNLAINKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPSPBMNLAINTutup);

        }

        public void initGridRkmTlPSPSBMNLain()
        {

            if (gridRTLPspBmnLain == null)
            {
                gridRTLPspBmnLain = new KES1.TL.PSPBMNLAIN.ucRTLPspBmnLainGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPspBmnLain),
                    detailDataGrid = new DetailDataGrid(RkmTlPSPBMNLAINDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlPSPBMNLAIN();
            setPanel(gridRTLPspBmnLain);
        }

        #region --++ Ambil Data PSP BMN LAIN
        private void getInitRkmTlPspBmnLain()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutSelect.InputParameters parInp = new SvcWasdalLainTindakLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NO_BUKTI_LAKSANA IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlPspBmnLain = new SvcWasdalLainTindakLanjutSelect.execute_pttClient();
                ambilRtlPspBmnLain.Open();
                ambilRtlPspBmnLain.Beginexecute(parInp, new AsyncCallback(getRkmTlPspBmnLain), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlPspBmnLain(IAsyncResult result)
        {
            try
            {
                dOutRtlPspBmnLain = ambilRtlPspBmnLain.Endexecute(result);
                ambilRtlPspBmnLain.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPspBmnLain(dsRtlPspBmnLain), dOutRtlPspBmnLain);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPspBmnLain(SvcWasdalLainTindakLanjutSelect.OutputParameters dataOut);

        private void dsRtlPspBmnLain(SvcWasdalLainTindakLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP_LAIN_TL2.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRtlPspBmnLain = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRtlPspBmnLain.Add(dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i]);
            }

            gridRTLPspBmnLain.sbCariOnline.Enabled = !modeCari;
            gridRTLPspBmnLain.dsDataSource = dsGridRtlPspBmnLain;
            gridRTLPspBmnLain.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPspBmnLain.teNamaKolom.Text.Trim();
                string xDua = gridRTLPspBmnLain.teCari.Text.Trim();
                string xTiga = gridRTLPspBmnLain.fieldDicari;
                gridRTLPspBmnLain.gvGridPSPBMNLAINSk.ClearColumnsFilter();
                gridRTLPspBmnLain.teNamaKolom.Text = xSatu;
                gridRTLPspBmnLain.teCari.Text = xDua;
                gridRTLPspBmnLain.fieldDicari = xTiga;
            }
            else
                gridRTLPspBmnLain.gvGridPSPBMNLAINSk.ClearColumnsFilter();
        }


        #endregion Ambil PSP BMN

        #region --++ Simpan Data PSP BMN LAIN
        SvcWasdalLainTindakLanjutCud.OutputParameters dOutAmbilDataPspBmnLain;
        SvcWasdalLainTindakLanjutCud.execute_pttClient ambilDataPspBmnLain;

        private void simpanDataRtlPspBmnLain(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutCud.InputParameters parInp = new SvcWasdalLainTindakLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPspBmnLainTambah.teNomorSk.Text.Trim() : formRTLPspBmnLainUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPspBmnLainTambah.teNoBuktiLaksana.Text.Trim() : formRTLPspBmnLainUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPspBmnLainTambah.cbJnsDokLaksana.SelectedText : formRTLPspBmnLainUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPspBmnLainTambah.teTanggalSk.EditValue : formRTLPspBmnLainUbah.teTanggalSk.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPspBmnLainTambah.teKetBukti.Text : formRTLPspBmnLainUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLPspBmnLainTambah.filePath) : konfigApp.convert2byte(formRTLPspBmnLainUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataPspBmnLain = new SvcWasdalLainTindakLanjutCud.execute_pttClient();
                ambilDataPspBmnLain.Beginexecute(parInp, new AsyncCallback(cudRtlPspBmnLain), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlPspBmnLain()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutCud.InputParameters parInp = new SvcWasdalLainTindakLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLPspBmnLain.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLPspBmnLain.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLPspBmnLain.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLPspBmnLain.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLPspBmnLain.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataPspBmnLain = new SvcWasdalLainTindakLanjutCud.execute_pttClient();
                ambilDataPspBmnLain.Beginexecute(parInp, new AsyncCallback(cudRtlPspBmnLain), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlPspBmnLain(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPspBmnLain = ambilDataPspBmnLain.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPspBmnLain(this.ubahDsRtlPspBmnLain), dOutAmbilDataPspBmnLain);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPspBmnLain(SvcWasdalLainTindakLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaASP = 0;

        private void ubahDsRtlPspBmnLain(SvcWasdalLainTindakLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalLainTindakLanjutSelect.WASDALSROW_READ_WASDAL_PSP_LAIN_TL2 dataPenyama = new SvcWasdalLainTindakLanjutSelect.WASDALSROW_READ_WASDAL_PSP_LAIN_TL2();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_BUKTI_LAKSANASpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLPspBmnLainTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPspBmnLainTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPspBmnLainTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLPspBmnLainTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPspBmnLainTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPspBmnLainTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPspBmnLainTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPspBmnLainTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPspBmnLainTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnLainTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPspBmnLainTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnLainTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPspBmnLainTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPspBmnLainTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLPspBmnLainTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPspBmnLainTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPspBmnLain == null ? 1 : dsGridRtlPspBmnLain.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLPspBmnLainTambah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLPspBmnLainTambah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLPspBmnLainTambah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLPspBmnLainTambah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLPspBmnLainTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPspBmnLainTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPspBmnLainTambah.teNamaPemohon.Text;
                        dsGridRtlPspBmnLain.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPspBmnLain.dataTerpilih = dataPenyama;
                            _keBerapaPpBmn = 1;
                            formRTLPspBmnLainTambah.gcDaftarAset.Enabled = true;
                            formRTLPspBmnLainTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPspBmnLainTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPspBmnLainTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPspBmnLainTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPspBmnLainTambah.sbCariPemohon.Enabled = false;
                            formRTLPspBmnLainTambah.sbRefresh.Enabled = true;
                            formRTLPspBmnLainTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPspBmnLainTambah.cePilihSemua.Enabled = true;
                            formRTLPspBmnLainTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPspBmnLainTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPspBmn.dataTerpilih = gridSkPspBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRtlPspBmnLain.IndexOf(gridRTLPspBmnLain.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRtlPspBmnLain.Remove(gridRTLPspBmnLain.dataTerpilih);
                            dsGridRtlPspBmnLain.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLPspBmnLainUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPspBmnLainUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPspBmnLainUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLPspBmnLainUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPspBmnLainUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPspBmnLainUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPspBmnLainUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPspBmnLainUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPspBmnLainUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnLainUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPspBmnLainUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPspBmnLainUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPspBmnLainUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPspBmnLainUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLPspBmnLainUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPspBmnLainUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPspBmnLain == null ? 1 : dsGridRtlPspBmnLain.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLPspBmnLainUbah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLPspBmnLainUbah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLPspBmnLainUbah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLPspBmnLainUbah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLPspBmnLainUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPspBmnLainUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPspBmnLainUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRtlPspBmnLain.IndexOf(gridRTLPspBmnLain.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRtlPspBmnLain.Remove(gridRTLPspBmnLain.dataTerpilih);
                        dsGridRtlPspBmnLain.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRtlPspBmnLain.Remove(gridRTLPspBmnLain.dataTerpilih);
                        break;
                }
                gridRTLPspBmnLain.dsDataSource = dsGridRtlPspBmnLain;
                gridRTLPspBmnLain.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkPspBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPspLain(SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN _skTerpilih)
        {
            formRTLPspBmnLainTambah = new KES1.TL.PSPBMNLAIN.ucRTLPspBmnLainForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlPspBmnLain = new SimpanDataRtl(simpanDataRtlPspBmnLain)
            };
            formRTLPspBmnLainTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLPspBmnLainTambah);
            formRTLPspBmnLainTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion Simpan Data PSP BMN LAIN

        #region action button
        KES1.TL.PSPBMNLAIN.frmPuSk formSkPspLain;

        private void RkmTlPSPBMNLAINTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan03), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPspLain = new KES1.TL.PSPBMNLAIN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkPspLain = new PilihSkPengguna(pilihSkPspLain)
                };
                formSkPspLain.ShowDialog();
            }
        }

        private void RkmTlPSPBMNLAINEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPSPBMNLAINHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPspBmnLain.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLPspBmnLain.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlPspBmnLain();
                }
            }
        }

        private void RkmTlPSPBMNLAINDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPspBmnLain.dataTerpilih != null)
            {
                if (formRTLPspBmnLainUbah == null)
                {
                    formRTLPspBmnLainUbah = new KES1.TL.PSPBMNLAIN.ucRTLPspBmnLainForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPspBmnLain = new SimpanDataRtl(simpanDataRtlPspBmnLain)
                    };
                }
                formRTLPspBmnLainUbah.dataTerpilih = gridRTLPspBmnLain.dataTerpilih;
                setPanel(formRTLPspBmnLainUbah);
                formRTLPspBmnLainUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPSPBMNLAINRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPspBmnLain.teNamaKolom.Text = "";
            gridRTLPspBmnLain.teCari.Text = "";
            gridRTLPspBmnLain.fieldDicari = "";
            gridRTLPspBmnLain.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPspBmnLain();
        }

        private void RkmTlPSPBMNLAINMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPspBmnLain();
            }
        }

        private void RkmTlPSPBMNLAINTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void RkmTlPSPBMNLAINKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPSPBMNLAIN;
            konfigApp.kdPelayanan = "03";
            konfigApp.namaPelayanan = this.subMenuMonPSPBMNLAIN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPSPSBMNLain();
            modeCari = false;
            gridRTLPspBmnLain.teNamaKolom.Text = "";
            gridRTLPspBmnLain.teCari.Text = "";
            gridRTLPspBmnLain.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPspBmnLain();
        }

        private void cariDataRkmTlPspBmnLain(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlPspBmnLain();
        }

        #endregion

        #endregion

        #region ASPBMN

        KES1.TL.ASPBMN.ucRTLAspBmnGrid gridRTLAspBmn;
        KES1.TL.ASPBMN.ucRTLAspBmnForm1 formRTLAspBmnTambah;
        KES1.TL.ASPBMN.ucRTLAspBmnForm1 formRTLAspBmnUbah;
        KES1.TL.ASPBMN.ucRTLAspBmnForm1 formRTLAspBmnDetail;
        private ArrayList dsGridRtlAspBmn;
        SvcWasdalLainTindakLanjutSelect.OutputParameters dOutRtlAspBmn;
        SvcWasdalLainTindakLanjutSelect.execute_pttClient ambilRtlAspBmn;
        SvcWasdalLainTindakLanjutCud.OutputParameters dOutAmbilDataAspBmn;
        SvcWasdalLainTindakLanjutCud.execute_pttClient ambilDataAspBmn;

        private void nbiTLASPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {

            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonASPBMN;
            konfigApp.kdPelayanan = "04";
            konfigApp.namaPelayanan = this.subMenuMonASPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlASPSBMN();
            modeCari = false;
            gridRTLAspBmn.teNamaKolom.Text = "";
            gridRTLAspBmn.teCari.Text = "";
            gridRTLAspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlAspBmn();
        }

        private void setEventBtnTlASPBMN()
        {
            this.resetEventBtnTlWasdal();

            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlASPBMNTambah);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlASPBMNRefresh);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlASPBMNHapus);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlASPBMNMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlASPBMNDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlASPBMNKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlASPBMNTutup);

        }

        public void initGridRkmTlASPSBMN()
        {

            if (gridRTLAspBmn == null)
            {
                gridRTLAspBmn = new KES1.TL.ASPBMN.ucRTLAspBmnGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlAspBmn),
                    detailDataGrid = new DetailDataGrid(RkmTlASPBMNDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlASPBMN();
            setPanel(gridRTLAspBmn);
        }

        #region --++ Ambil Data ASP BMN
        private void getInitRkmTlAspBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutSelect.InputParameters parInp = new SvcWasdalLainTindakLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NO_BUKTI_LAKSANA IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlAspBmn = new SvcWasdalLainTindakLanjutSelect.execute_pttClient();
                ambilRtlAspBmn.Open();
                ambilRtlAspBmn.Beginexecute(parInp, new AsyncCallback(getRkmTlAspBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlAspBmn(IAsyncResult result)
        {
            try
            {
                dOutRtlAspBmn = ambilRtlAspBmn.Endexecute(result);
                ambilRtlAspBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlAspBmn(dsRtlAspBmn), dOutRtlAspBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlAspBmn(SvcWasdalLainTindakLanjutSelect.OutputParameters dataOut);

        private void dsRtlAspBmn(SvcWasdalLainTindakLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP_LAIN_TL2.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRtlAspBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRtlAspBmn.Add(dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i]);
            }

            gridRTLAspBmn.sbCariOnline.Enabled = !modeCari;
            gridRTLAspBmn.dsDataSource = dsGridRtlAspBmn;
            gridRTLAspBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLAspBmn.teNamaKolom.Text.Trim();
                string xDua = gridRTLAspBmn.teCari.Text.Trim();
                string xTiga = gridRTLAspBmn.fieldDicari;
                gridRTLAspBmn.gvGridASPBMNSk.ClearColumnsFilter();
                gridRTLAspBmn.teNamaKolom.Text = xSatu;
                gridRTLAspBmn.teCari.Text = xDua;
                gridRTLAspBmn.fieldDicari = xTiga;
            }
            else
                gridRTLAspBmn.gvGridASPBMNSk.ClearColumnsFilter();
        }


        #endregion Ambil PSP BMN

        #region --++ Simpan Data ASP BMN

        private void simpanDataRtlAspBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutCud.InputParameters parInp = new SvcWasdalLainTindakLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLAspBmnTambah.teNomorSk.Text.Trim() : formRTLAspBmnUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLAspBmnTambah.teNoBuktiLaksana.Text.Trim() : formRTLAspBmnUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLAspBmnTambah.cbJnsDokLaksana.SelectedText : formRTLAspBmnUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLAspBmnTambah.teTanggalSk.EditValue : formRTLAspBmnUbah.teTanggalSk.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLAspBmnTambah.teKetBukti.Text : formRTLAspBmnUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLAspBmnTambah.filePath) : konfigApp.convert2byte(formRTLAspBmnUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataAspBmn = new SvcWasdalLainTindakLanjutCud.execute_pttClient();
                ambilDataAspBmn.Beginexecute(parInp, new AsyncCallback(cudRtlAspBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlAspBmn()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutCud.InputParameters parInp = new SvcWasdalLainTindakLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLAspBmn.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLAspBmn.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLAspBmn.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLAspBmn.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLAspBmn.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataAspBmn = new SvcWasdalLainTindakLanjutCud.execute_pttClient();
                ambilDataAspBmn.Beginexecute(parInp, new AsyncCallback(cudRtlAspBmn), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlAspBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataAspBmn = ambilDataAspBmn.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlAspBmn(this.ubahDsRtlAspBmn), dOutAmbilDataAspBmn);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlAspBmn(SvcWasdalLainTindakLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaPSPLAIN = 0;

        private void ubahDsRtlAspBmn(SvcWasdalLainTindakLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalLainTindakLanjutSelect.WASDALSROW_READ_WASDAL_PSP_LAIN_TL2 dataPenyama = new SvcWasdalLainTindakLanjutSelect.WASDALSROW_READ_WASDAL_PSP_LAIN_TL2();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_BUKTI_LAKSANASpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLAspBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLAspBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLAspBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLAspBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLAspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLAspBmnTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLAspBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLAspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLAspBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLAspBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLAspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLAspBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLAspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLAspBmnTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLAspBmnTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLAspBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPspBmnLain == null ? 1 : dsGridRtlPspBmnLain.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLAspBmnTambah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLAspBmnTambah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLAspBmnTambah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLAspBmnTambah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLAspBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLAspBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLAspBmnTambah.teNamaPemohon.Text;
                        dsGridRtlPspBmnLain.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLAspBmn.dataTerpilih = dataPenyama;
                            _keBerapaPSPLAIN = 1;
                            formRTLAspBmnTambah.gcDaftarAset.Enabled = true;
                            formRTLAspBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLAspBmnTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLAspBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLAspBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLAspBmnTambah.sbCariPemohon.Enabled = false;
                            formRTLAspBmnTambah.sbRefresh.Enabled = true;
                            formRTLAspBmnTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLAspBmnTambah.cePilihSemua.Enabled = true;
                            formRTLAspBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLAspBmnTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPspBmn.dataTerpilih = gridSkPspBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRtlAspBmn.IndexOf(gridRTLAspBmn.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRtlAspBmn.Remove(gridRTLAspBmn.dataTerpilih);
                            dsGridRtlAspBmn.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLAspBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLAspBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLAspBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLAspBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLAspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLAspBmnUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLAspBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLAspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLAspBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLAspBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLAspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLAspBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLAspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLAspBmnUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLAspBmnUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLAspBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPspBmnLain == null ? 1 : dsGridRtlPspBmnLain.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLAspBmnUbah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLAspBmnUbah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLAspBmnUbah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLAspBmnUbah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLAspBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLAspBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLAspBmnUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRtlAspBmn.IndexOf(gridRTLAspBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRtlAspBmn.Remove(gridRTLAspBmn.dataTerpilih);
                        dsGridRtlAspBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRtlAspBmn.Remove(gridRTLAspBmn.dataTerpilih);
                        break;
                }
                gridRTLAspBmn.dsDataSource = dsGridRtlAspBmn;
                gridRTLAspBmn.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkPspBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkAsp(SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN _skTerpilih)
        {
            formRTLAspBmnTambah = new KES1.TL.ASPBMN.ucRTLAspBmnForm1("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlAspBmn = new SimpanDataRtl(simpanDataRtlAspBmn)
            };
            formRTLAspBmnTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLAspBmnTambah);
            formRTLAspBmnTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion Simpan Data ASP BMN

        #region action button
        KES1.TL.ASPBMN.frmPuSk formSkAsp; 

        private void RkmTlASPBMNTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan04), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkAsp = new KES1.TL.ASPBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkAsp = new PilihSkPengguna(pilihSkAsp)
                };
                formSkAsp.ShowDialog();
            }
        }

        private void RkmTlASPBMNEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlASPBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLAspBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLAspBmn.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlAspBmn();
                }
            }
        }

        private void RkmTlASPBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLAspBmn.dataTerpilih != null)
            {
                if (formRTLAspBmnUbah == null)
                {
                    formRTLAspBmnUbah = new KES1.TL.ASPBMN.ucRTLAspBmnForm1("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlAspBmn = new SimpanDataRtl(simpanDataRtlAspBmn)
                    };
                }
                formRTLAspBmnUbah.dataTerpilih = gridRTLAspBmn.dataTerpilih;
                setPanel(formRTLAspBmnUbah);
                formRTLAspBmnUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlASPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLAspBmn.teNamaKolom.Text = "";
            gridRTLAspBmn.teCari.Text = "";
            gridRTLAspBmn.fieldDicari = "";
            gridRTLAspBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlAspBmn();
        }

        private void RkmTlASPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlAspBmn();
            }
        }

        private void RkmTlASPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void RkmTlASPBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonASPBMN;
            konfigApp.kdPelayanan = "04";
            konfigApp.namaPelayanan = this.subMenuMonASPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlASPSBMN();
            modeCari = false;
            gridRTLAspBmn.teNamaKolom.Text = "";
            gridRTLAspBmn.teCari.Text = "";
            gridRTLAspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlAspBmn();
        }

        private void cariDataRkmTlAspBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlAspBmn();
        }

        #endregion

        #endregion

        #region PBMNS

        KES1.TL.PBMNS.ucRTLPBMNSGrid gridRTLPbmns;
        KES1.TL.PBMNS.ucRTLPBMNSForm formRTLPbmnsTambah;
        KES1.TL.PBMNS.ucRTLPBMNSForm formRTLPbmnsUbah;
        KES1.TL.PBMNS.ucRTLPBMNSForm formRTLPbmnsDetail;
        private ArrayList dsGridRtlPbmns;
        SvcWasdalLainTindakLanjutSelect.OutputParameters dOutRtlPbmns;
        SvcWasdalLainTindakLanjutSelect.execute_pttClient ambilRtlPbmns;
        SvcWasdalLainTindakLanjutCud.OutputParameters dOutRtlDataPbmns;
        SvcWasdalLainTindakLanjutCud.execute_pttClient dOutAmbilDataPbmns;

        private void nbiTLPBMNS_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {

            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPBMNS;
            konfigApp.kdPelayanan = "05";
            konfigApp.namaPelayanan = this.subMenuMonPBMNS;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPBMNS();
            modeCari = false;
            gridRTLPbmns.teNamaKolom.Text = "";
            gridRTLPbmns.teCari.Text = "";
            gridRTLPbmns.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPbmns();
        }

        private void setEventBtnTlPbmns()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPBMNSRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPBMNSMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlPBMNSDetail);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPBMNSTutup);
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlPBMNSTambah);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPBMNSHapus);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPBMNSKembali);

        }

        public void initGridRkmTlPBMNS()
        {

            if (gridRTLPbmns == null)
            {
                gridRTLPbmns = new KES1.TL.PBMNS.ucRTLPBMNSGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPbmns),
                    detailDataGrid = new DetailDataGrid(RkmTlPBMNSDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlPbmns();
            setPanel(gridRTLPbmns);
        }

        #region --++ Ambil Data PBMN
        private void getInitRkmTlPbmns()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutSelect.InputParameters parInp = new SvcWasdalLainTindakLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NO_BUKTI_LAKSANA IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlPbmns = new SvcWasdalLainTindakLanjutSelect.execute_pttClient();
                ambilRtlPbmns.Open();
                ambilRtlPbmns.Beginexecute(parInp, new AsyncCallback(getInitRkmTlPbmns), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getInitRkmTlPbmns(IAsyncResult result)
        {
            try
            {
                dOutRtlPbmns = ambilRtlPbmns.Endexecute(result);
                ambilRtlPbmns.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPbmns(dsRtlPbmns), dOutRtlPbmns);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPbmns(SvcWasdalLainTindakLanjutSelect.OutputParameters dataOut);

        private void dsRtlPbmns(SvcWasdalLainTindakLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP_LAIN_TL2.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRtlPbmns = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRtlPbmns.Add(dataOut.SF_READ_WASDAL_PSP_LAIN_TL2[i]);
            }

            gridRTLPbmns.sbCariOnline.Enabled = !modeCari;
            gridRTLPbmns.dsDataSource = dsGridRtlPbmns;
            gridRTLPbmns.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPbmns.teNamaKolom.Text.Trim();
                string xDua = gridRTLPbmns.teCari.Text.Trim();
                string xTiga = gridRTLPbmns.fieldDicari;
                gridRTLPbmns.gvGridPSPBMNLAINSk.ClearColumnsFilter();
                gridRTLPbmns.teNamaKolom.Text = xSatu;
                gridRTLPbmns.teCari.Text = xDua;
                gridRTLPbmns.fieldDicari = xTiga;
            }
            else
                gridRTLPbmns.gvGridPSPBMNLAINSk.ClearColumnsFilter();
        }


        #endregion Ambil PSP BMN

        #region --++ Simpan Data PBMNS

        private void simpanDataRtlPbmns(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutCud.InputParameters parInp = new SvcWasdalLainTindakLanjutCud.InputParameters();

                parInp.P_ID_SK_WASDAL = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.idSkWasdal : formRTLPbmnsUbah.idSkWasdal);
                parInp.P_ID_SK_WASDALSpecified = true;
                parInp.P_ID_TL_WASDAL_GUNA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.idSkTL : formRTLPbmnsUbah.idSkTL);
                parInp.P_ID_TL_WASDAL_GUNASpecified = true;
                parInp.P_DARI_TGL = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.teDariTgl.Text : formRTLPbmnsUbah.teDariTgl.Text);
                parInp.P_SD_TGL = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.teSampaiTgl.Text : formRTLPbmnsUbah.teSampaiTgl.Text);
                parInp.P_PERIODE = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.konversiPeriode() : formRTLPbmnsUbah.konversiPeriode());
                parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU" || _mode == "D") ? Convert.ToDecimal(formRTLPbmnsTambah.teJangkaWaktu.Text) : Convert.ToDecimal(formRTLPbmnsUbah.teJangkaWaktu.Text));
                parInp.P_KD_PELAYANAN = "05";
                parInp.P_NO_BAST = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.teNoBAST.Text.Trim() : formRTLPbmnsUbah.teNoBAST.Text.Trim());
                parInp.P_TGL_BAST = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.deTglBAST.Text : formRTLPbmnsUbah.deTglBAST.Text);

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.teNomorSk.Text.Trim() : formRTLPbmnsUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.teNoBuktiLaksana.Text.Trim() : formRTLPbmnsUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.cbJnsDokLaksana.SelectedText : formRTLPbmnsUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.teTanggalSk.EditValue : formRTLPbmnsUbah.teTanggalSk.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPbmnsTambah.teKetBukti.Text : formRTLPbmnsUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLPbmnsTambah.filePath) : konfigApp.convert2byte(formRTLPbmnsUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                dOutAmbilDataPbmns = new SvcWasdalLainTindakLanjutCud.execute_pttClient();
                dOutAmbilDataPbmns.Beginexecute(parInp, new AsyncCallback(cudRtlPbmns), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlPBmns()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalLainTindakLanjutCud.InputParameters parInp = new SvcWasdalLainTindakLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLPbmns.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLPbmns.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLPbmns.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLPbmns.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLPbmns.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                dOutAmbilDataPbmns = new SvcWasdalLainTindakLanjutCud.execute_pttClient();
                dOutAmbilDataPbmns.Beginexecute(parInp, new AsyncCallback(cudRtlPbmns), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlPbmns(IAsyncResult result)
        {
            try
            {
                dOutRtlDataPbmns = dOutAmbilDataPbmns.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPbmns(this.ubahDsRtlPbmns), dOutRtlDataPbmns);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPbmns(SvcWasdalLainTindakLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaPBMNS = 0;

        private void ubahDsRtlPbmns(SvcWasdalLainTindakLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalLainTindakLanjutSelect.WASDALSROW_READ_WASDAL_PSP_LAIN_TL2 dataPenyama = new SvcWasdalLainTindakLanjutSelect.WASDALSROW_READ_WASDAL_PSP_LAIN_TL2();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_BUKTI_LAKSANASpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_SK_WASDAL = formRTLPbmnsTambah.idSkWasdal;
                        dataPenyama.ID_TL_WASDAL_GUNA = formRTLPbmnsTambah.idSkTL;
                        dataPenyama.ID_PEMOHON = formRTLPbmnsTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPbmnsTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPbmnsTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLPbmnsTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPbmnsTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPbmnsTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPbmnsTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPbmnsTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPbmnsTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPbmnsTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPbmnsTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPbmnsTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPbmnsTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPbmnsTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLPbmnsTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPbmnsTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPspBmnLain == null ? 1 : dsGridRtlPspBmnLain.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLPbmnsTambah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLPbmnsTambah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLPbmnsTambah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLPbmnsTambah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLPbmnsTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPbmnsTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPbmnsTambah.teNamaPemohon.Text;
                        dsGridRtlPspBmnLain.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPbmns.dataTerpilih = dataPenyama;
                            _keBerapaPBMNS = 1;
                            formRTLPbmnsTambah.gcDaftarAset.Enabled = true;
                            formRTLPbmnsTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPbmnsTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPbmnsTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPbmnsTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPbmnsTambah.sbCariPemohon.Enabled = false;
                            formRTLPbmnsTambah.sbRefresh.Enabled = true;
                            formRTLPbmnsTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPbmnsTambah.cePilihSemua.Enabled = true;
                            formRTLPbmnsTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPbmnsTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPspBmn.dataTerpilih = gridSkPspBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRtlPbmns.IndexOf(gridRTLPbmns.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRtlPbmns.Remove(gridRTLPbmns.dataTerpilih);
                            dsGridRtlPbmns.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL = formRTLPbmnsUbah.idSkWasdal;
                        dataPenyama.ID_TL_WASDAL_GUNA = formRTLPbmnsUbah.idSkTL;
                        dataPenyama.ID_PEMOHON = formRTLPbmnsUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPbmnsUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPbmnsUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLPbmnsUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPbmnsUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPbmnsUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPbmnsUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPbmnsUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPbmnsUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPbmnsUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPbmnsUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPbmnsUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPbmnsUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPbmnsUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLPbmnsUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPbmnsUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPspBmnLain == null ? 1 : dsGridRtlPspBmnLain.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLPbmnsUbah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLPbmnsUbah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLPbmnsUbah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLPbmnsUbah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLPbmnsUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPbmnsUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPbmnsUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRtlPbmns.IndexOf(gridRTLPbmns.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRtlPbmns.Remove(gridRTLPbmns.dataTerpilih);
                        dsGridRtlPbmns.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRtlPbmns.Remove(gridRTLPbmns.dataTerpilih);
                        break;
                }
                gridRTLPbmns.dsDataSource = dsGridRtlPbmns;
                gridRTLPbmns.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkPspBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPbmns(SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN _skTerpilih)
        {
            formRTLPbmnsTambah = new KES1.TL.PBMNS.ucRTLPBMNSForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlPbmns = new SimpanDataRtl(simpanDataRtlPbmns)
            };
            formRTLPbmnsTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLPbmnsTambah);
            formRTLPbmnsTambah.inisialisasiForm();
            setTombolRtlForm();
        }


        #endregion Simpan Data ASP BMN

        #region action button
        KES1.TL.PBMNS.frmPuSk formSkPbmns;

        private void RkmTlPBMNSTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan05), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPbmns = new KES1.TL.PBMNS.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkPbmns = new PilihSkPengguna(pilihSkPbmns)
                };
                formSkPbmns.ShowDialog();
            }
        }

        private void RkmTlPBMNSEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPBMNSHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPbmns.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLPbmns.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlPBmns();
                }
            }
        }

        private void RkmTlPBMNSDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPbmns.dataTerpilih != null)
            {
                if (formRTLPbmnsUbah == null)
                {
                    formRTLPbmnsUbah = new KES1.TL.PBMNS.ucRTLPBMNSForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPbmns = new SimpanDataRtl(simpanDataRtlPbmns)
                    };
                }
                formRTLPbmnsUbah.dataTerpilih = gridRTLPbmns.dataTerpilih;
                setPanel(formRTLPbmnsUbah);
                formRTLPbmnsUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPBMNSRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPbmns.teNamaKolom.Text = "";
            gridRTLPbmns.teCari.Text = "";
            gridRTLPbmns.fieldDicari = "";
            gridRTLPbmns.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPbmns();
        }

        private void RkmTlPBMNSMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPbmns();
            }
        }

        private void RkmTlPBMNSTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void cariDataRkmTlPbmns(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlPbmns();
        }

        private void RkmTlPBMNSKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPBMNS;
            konfigApp.kdPelayanan = "05";
            konfigApp.namaPelayanan = this.subMenuMonPBMNS;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPBMNS();
            modeCari = false;
            gridRTLPbmns.teNamaKolom.Text = "";
            gridRTLPbmns.teCari.Text = "";
            gridRTLPbmns.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPbmns();
        }

        #endregion

        #endregion


        #region SEWA BMN

        KES1.TL.SWBMN.ucRTLSewaBmnGrid gridRTLSwBmn;
        KES1.TL.SWBMN.ucRTLSewaBmnForm formRTLSwBmnTambah;
        KES1.TL.SWBMN.ucRTLSewaBmnForm formRTLSwBmnUbah;
        KES1.TL.SWBMN.ucRTLSewaBmnForm formRTLSwBmnHapus;
        private ArrayList dsGridRtlSwBmn;
        SvcWasdalManfaatTdLanjutSelect.OutputParameters dOutRtlSwBmn;
        SvcWasdalManfaatTdLanjutSelect.execute_pttClient ambilRtlSwBmn;


        private void nbiTLSWBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonSWBMN;
            konfigApp.kdPelayanan = "06";
            konfigApp.namaPelayanan = this.subMenuMonSWBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlSWBMN();
            modeCari = false;
            gridRTLSwBmn.teNamaKolom.Text = "";
            gridRTLSwBmn.teCari.Text = "";
            gridRTLSwBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlSwBmn();
        }

        private void setEventBtnTlSWBMN()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlSWBMNTutup);

        }

        public void initGridRkmTlSWBMN()
        {

            if (gridRTLSwBmn == null)
            {
                gridRTLSwBmn = new KES1.TL.SWBMN.ucRTLSewaBmnGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlSwBmn),
                    detailDataGrid = new DetailDataGrid(RkmTlSWBMNDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlSWBMN();
            setPanel(gridRTLSwBmn);
        }

        #region --++ Ambil Data SEWA BMN
        private void getInitRkmTlSwBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutSelect.InputParameters parInp = new SvcWasdalManfaatTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NO_BUKTI_LAKSANA IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlSwBmn = new SvcWasdalManfaatTdLanjutSelect.execute_pttClient();
                ambilRtlSwBmn.Open();
                ambilRtlSwBmn.Beginexecute(parInp, new AsyncCallback(getRkmTlSwBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlSwBmn(IAsyncResult result)
        {
            try
            {
                dOutRtlSwBmn = ambilRtlSwBmn.Endexecute(result);
                ambilRtlSwBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlSwBmn(dsRtlSwBmn), dOutRtlSwBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlSwBmn(SvcWasdalManfaatTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlSwBmn(SvcWasdalManfaatTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_TL_SELECT_WASDAL_MANFAAT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRtlSwBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRtlSwBmn.Add(dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i]);
            }

            gridRTLSwBmn.sbCariOnline.Enabled = !modeCari;
            gridRTLSwBmn.dsDataSource = dsGridRtlSwBmn;
            gridRTLSwBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLSwBmn.teNamaKolom.Text.Trim();
                string xDua = gridRTLSwBmn.teCari.Text.Trim();
                string xTiga = gridRTLSwBmn.fieldDicari;
                gridRTLSwBmn.gvGridSk.ClearColumnsFilter();
                gridRTLSwBmn.teNamaKolom.Text = xSatu;
                gridRTLSwBmn.teCari.Text = xDua;
                gridRTLSwBmn.fieldDicari = xTiga;
            }
            else
                gridRTLSwBmn.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PSP BMN

        #region --++ Simpan Data SEWA BMN
        SvcWasdalManfaatTdLanjutCud.OutputParameters dOutAmbilDataSwBmn;
        SvcWasdalManfaatTdLanjutCud.execute_pttClient ambilDataSwBmn;

        private void simpanDataRtlSwBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutCud.InputParameters parInp = new SvcWasdalManfaatTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLSwBmnTambah.teNomorSk.Text.Trim() : formRTLSwBmnUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLSwBmnTambah.teNoBuktiLaksana.Text.Trim() : formRTLSwBmnUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLSwBmnTambah.cbJnsDokLaksana.SelectedText : formRTLSwBmnUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLSwBmnTambah.teTanggalSk.EditValue : formRTLSwBmnUbah.teTanggalSk.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLSwBmnTambah.teKetBukti.Text : formRTLSwBmnUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLSwBmnTambah.filePath) : konfigApp.convert2byte(formRTLSwBmnUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataSwBmn = new SvcWasdalManfaatTdLanjutCud.execute_pttClient();
                ambilDataSwBmn.Beginexecute(parInp, new AsyncCallback(cudRtlSwBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlSwBmn()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutCud.InputParameters parInp = new SvcWasdalManfaatTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLSwBmn.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLSwBmn.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLSwBmn.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLSwBmn.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLSwBmn.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataSwBmn = new SvcWasdalManfaatTdLanjutCud.execute_pttClient();
                ambilDataSwBmn.Beginexecute(parInp, new AsyncCallback(cudRtlSwBmn), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }


        private void cudRtlSwBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataSwBmn = ambilDataSwBmn.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlSwBmn(this.ubahDsRtlSwBmn), dOutAmbilDataSwBmn);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlSwBmn(SvcWasdalManfaatTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaPpBmn = 0;

        private void ubahDsRtlSwBmn(SvcWasdalManfaatTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalManfaatTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_BUKTI_LAKSANASpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLSwBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLSwBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLSwBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLSwBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLSwBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLSwBmnTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLSwBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLSwBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLSwBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLSwBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLSwBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLSwBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLSwBmnTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLSwBmnTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLSwBmnTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLSwBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlSwBmn == null ? 1 : dsGridRtlSwBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLSwBmnTambah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLSwBmnTambah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLSwBmnTambah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLSwBmnTambah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLSwBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLSwBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLSwBmnTambah.teNamaPemohon.Text;
                        dsGridRtlSwBmn.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLSwBmn.dataTerpilih = dataPenyama;
                            _keBerapaPpBmn = 1;
                            formRTLSwBmnTambah.gcDaftarAset.Enabled = true;
                            formRTLSwBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLSwBmnTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLSwBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLSwBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLSwBmnTambah.sbCariPemohon.Enabled = false;
                            formRTLSwBmnTambah.sbRefresh.Enabled = true;
                            formRTLSwBmnTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLSwBmnTambah.cePilihSemua.Enabled = true;
                            formRTLSwBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLSwBmnTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskSwBmn.IndexOf(gridSkSwBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkSwBmn.dataTerpilih = gridSkSwBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRtlSwBmn.IndexOf(gridRTLSwBmn.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRtlSwBmn.Remove(gridRTLSwBmn.dataTerpilih);
                            dsGridRtlSwBmn.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLSwBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLSwBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLSwBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLSwBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLSwBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLSwBmnUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLSwBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLSwBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLSwBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLSwBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLSwBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLSwBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLSwBmnUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLSwBmnUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLSwBmnUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLSwBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlSwBmn == null ? 1 : dsGridRtlSwBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLSwBmnUbah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLSwBmnUbah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLSwBmnUbah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLSwBmnUbah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLSwBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLSwBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLSwBmnUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRtlSwBmn.IndexOf(gridRTLSwBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRtlSwBmn.Remove(gridRTLSwBmn.dataTerpilih);
                        dsGridRtlSwBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRtlSwBmn.Remove(gridRTLSwBmn.dataTerpilih);
                        break;
                }
                gridRTLSwBmn.dsDataSource = dsGridRtlSwBmn;
                gridRTLSwBmn.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkSwBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSk(SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT _skTerpilih)
        {
            formRTLSwBmnTambah = new KES1.TL.SWBMN.ucRTLSewaBmnForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlSwBmn = new SimpanDataRtl(simpanDataRtlSwBmn)
            };
            formRTLSwBmnTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLSwBmnTambah);
            formRTLSwBmnTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion Simpan Data PSP BMN

        #region action button
        KES1.TL.SWBMN.frmPuSk formSk;

        private void RkmTlSWBMNTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan06), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSk = new KES1.TL.SWBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSk = new PilihSk(pilihSk)
                };
                formSk.ShowDialog();
            }
        }

        private void RkmTlSWBMNEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlSWBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLSwBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLSwBmn.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlSwBmn();
                }
            }
        }

        private void RkmTlSWBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLSwBmn.dataTerpilih != null)
            {
                if (formRTLSwBmnUbah == null)
                {
                    formRTLSwBmnUbah = new KES1.TL.SWBMN.ucRTLSewaBmnForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlSwBmn = new SimpanDataRtl(simpanDataRtlSwBmn)
                    };
                }
                formRTLSwBmnUbah.dataTerpilih = gridRTLSwBmn.dataTerpilih;
                setPanel(formRTLSwBmnUbah);
                formRTLSwBmnUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlSWBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLSwBmn.teNamaKolom.Text = "";
            gridRTLSwBmn.teCari.Text = "";
            gridRTLSwBmn.fieldDicari = "";
            gridRTLSwBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlSwBmn();
        }

        private void RkmTlSWBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlSwBmn();
            }
        }

        private void RkmTlSWBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonSWBMN;
            konfigApp.kdPelayanan = "06";
            konfigApp.namaPelayanan = this.subMenuMonSWBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlSWBMN();
            modeCari = false;
            gridRTLSwBmn.teNamaKolom.Text = "";
            gridRTLSwBmn.teCari.Text = "";
            gridRTLSwBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlSwBmn();
        }

        private void RkmTlSWBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmTlSwBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlSwBmn();
        }

        #endregion

        #region PAKAI PINJAM BMN

        KES1.TL.PPBMN.ucRTLPpBmnGrid gridRTLPpBmn;
        KES1.TL.PPBMN.ucRTLPpBmnForm formRTLPpBmnTambah;
        KES1.TL.PPBMN.ucRTLPpBmnForm formRTLPpBmnUbah;
        KES1.TL.PPBMN.ucRTLPpBmnForm formRTLPpBmnDetail;
        private ArrayList dsGridRtlPpBmn;
        SvcWasdalManfaatTdLanjutSelect.OutputParameters dOutRtlPpBmn;
        SvcWasdalManfaatTdLanjutSelect.execute_pttClient ambilRtlPpBmn;


        private void nbiTLPPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPPBMN;
            konfigApp.kdPelayanan = "07";
            konfigApp.namaPelayanan = this.subMenuMonPPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPPBMN();
            modeCari = false;
            gridRTLPpBmn.teNamaKolom.Text = "";
            gridRTLPpBmn.teCari.Text = "";
            gridRTLPpBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPpBmn();
        }



        private void setEventBtnTlPPBMN()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPPBMNTutup);
        }

        public void initGridRkmTlPPBMN()
        {

            if (gridRTLPpBmn == null)
            {
                gridRTLPpBmn = new KES1.TL.PPBMN.ucRTLPpBmnGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPpBmn),
                    detailDataGrid = new DetailDataGrid(RkmTlPPBMNDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlPPBMN();
            setPanel(gridRTLPpBmn);
        }

        #region --++ Ambil Data PAKAI PINJAM BMN
        private void getInitRkmTlPpBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutSelect.InputParameters parInp = new SvcWasdalManfaatTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NO_BUKTI_LAKSANA IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlPpBmn = new SvcWasdalManfaatTdLanjutSelect.execute_pttClient();
                ambilRtlPpBmn.Open();
                ambilRtlPpBmn.Beginexecute(parInp, new AsyncCallback(getRkmTlPpBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlPpBmn(IAsyncResult result)
        {
            try
            {
                dOutRtlPpBmn = ambilRtlPpBmn.Endexecute(result);
                ambilRtlPpBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPpBmn(dsRtlPpBmn), dOutRtlPpBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPpBmn(SvcWasdalManfaatTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlPpBmn(SvcWasdalManfaatTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_TL_SELECT_WASDAL_MANFAAT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRtlPpBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRtlPpBmn.Add(dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i]);
            }

            gridRTLPpBmn.sbCariOnline.Enabled = !modeCari;
            gridRTLPpBmn.dsDataSource = dsGridRtlPpBmn;
            gridRTLPpBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPpBmn.teNamaKolom.Text.Trim();
                string xDua = gridRTLPpBmn.teCari.Text.Trim();
                string xTiga = gridRTLPpBmn.fieldDicari;
                gridRTLPpBmn.gvGridPPBMNSk.ClearColumnsFilter();
                gridRTLPpBmn.teNamaKolom.Text = xSatu;
                gridRTLPpBmn.teCari.Text = xDua;
                gridRTLPpBmn.fieldDicari = xTiga;
            }
            else
                gridRTLPpBmn.gvGridPPBMNSk.ClearColumnsFilter();
        }


        #endregion Ambil PP BMN

        #region --++ Simpan Data PAKAI PINJAM BMN
        SvcWasdalManfaatTdLanjutCud.OutputParameters dOutAmbilDataPpBmn;
        SvcWasdalManfaatTdLanjutCud.execute_pttClient ambilDataPpBmn;

        private void simpanDataRtlPpBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutCud.InputParameters parInp = new SvcWasdalManfaatTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPpBmnTambah.teNomorSk.Text.Trim() : formRTLPpBmnUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPpBmnTambah.teNoBuktiLaksana.Text.Trim() : formRTLPpBmnUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPpBmnTambah.cbJnsDokLaksana.SelectedText : formRTLPpBmnUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPpBmnTambah.teTanggalSk.EditValue : formRTLPpBmnUbah.teTanggalSk.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPpBmnTambah.teKetBukti.Text : formRTLPpBmnUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLPpBmnTambah.filePath) : konfigApp.convert2byte(formRTLPpBmnUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataPpBmn = new SvcWasdalManfaatTdLanjutCud.execute_pttClient();
                ambilDataPpBmn.Beginexecute(parInp, new AsyncCallback(cudRtlPpBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlPpBmn()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutCud.InputParameters parInp = new SvcWasdalManfaatTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLPpBmn.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLPpBmn.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLPpBmn.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLPpBmn.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLPpBmn.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataPpBmn = new SvcWasdalManfaatTdLanjutCud.execute_pttClient();
                ambilDataPpBmn.Beginexecute(parInp, new AsyncCallback(cudRtlPpBmn), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlPpBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPpBmn = ambilDataPpBmn.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPpBmn(this.ubahDsRtlPpBmn), dOutAmbilDataPpBmn);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPpBmn(SvcWasdalManfaatTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapa2 = 0;

        private void ubahDsRtlPpBmn(SvcWasdalManfaatTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalManfaatTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_BUKTI_LAKSANASpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLPpBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPpBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPpBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLPpBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPpBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPpBmnTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPpBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPpBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPpBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPpBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPpBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPpBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPpBmnTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPpBmnTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLPpBmnTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPpBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPpBmn == null ? 1 : dsGridRtlPpBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLPpBmnTambah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLPpBmnTambah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLPpBmnTambah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLPpBmnTambah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLPpBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPpBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPpBmnTambah.teNamaPemohon.Text;
                        dsGridRtlPpBmn.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPpBmn.dataTerpilih = dataPenyama;
                            _keBerapaPpBmn = 1;
                            formRTLPpBmnTambah.gcDaftarAset.Enabled = true;
                            formRTLPpBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPpBmnTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPpBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPpBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPpBmnTambah.sbCariPemohon.Enabled = false;
                            formRTLPpBmnTambah.sbRefresh.Enabled = true;
                            formRTLPpBmnTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPpBmnTambah.cePilihSemua.Enabled = true;
                            formRTLPpBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPpBmnTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRtlPpBmn.IndexOf(gridRTLPpBmn.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRtlPpBmn.Remove(gridRTLPpBmn.dataTerpilih);
                            dsGridRtlPpBmn.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLPpBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPpBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPpBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLPpBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPpBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPpBmnUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPpBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPpBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPpBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPpBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPpBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPpBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPpBmnUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPpBmnUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLPpBmnUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPpBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRtlPpBmn == null ? 1 : dsGridRtlPpBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLPpBmnUbah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLPpBmnUbah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLPpBmnUbah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLPpBmnUbah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLPpBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPpBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPpBmnUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRtlPpBmn.IndexOf(gridRTLPpBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRtlPpBmn.Remove(gridRTLPpBmn.dataTerpilih);
                        dsGridRtlPpBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRtlPpBmn.Remove(gridRTLPpBmn.dataTerpilih);
                        break;
                }
                gridRTLPpBmn.dsDataSource = dsGridRtlPpBmn;
                gridRTLPpBmn.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPP(SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT _skTerpilih)
        {
            formRTLPpBmnTambah = new KES1.TL.PPBMN.ucRTLPpBmnForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlPpBmn = new SimpanDataRtl(simpanDataRtlPpBmn)
            };
            formRTLPpBmnTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLPpBmnTambah);
            formRTLPpBmnTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion Simpan Data PP BMN

        #region action button
        KES1.TL.PPBMN.frmPuSk formSkPP;

        private void RkmTlPPBMNTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan07), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPP = new KES1.TL.PPBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkPP = new PilihSk(pilihSkPP)
                };
                formSkPP.ShowDialog();
            }
        }

        private void RkmTlPPBMNEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPPBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPpBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLPpBmn.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlPpBmn();
                }
            }
        }

        private void RkmTlPPBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPpBmn.dataTerpilih != null)
            {
                if (formRTLPpBmnUbah == null)
                {
                    formRTLPpBmnUbah = new KES1.TL.PPBMN.ucRTLPpBmnForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPpBmn = new SimpanDataRtl(simpanDataRtlPpBmn)
                    };
                }
                formRTLPpBmnUbah.dataTerpilih = gridRTLPpBmn.dataTerpilih;
                setPanel(formRTLPpBmnUbah);
                formRTLPpBmnUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPpBmn.teNamaKolom.Text = "";
            gridRTLPpBmn.teCari.Text = "";
            gridRTLPpBmn.fieldDicari = "";
            gridRTLPpBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPpBmn();
        }

        private void RkmTlPPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPpBmn();
            }
        }

        private void RkmTlPPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void RkmTlPPBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPPBMN;
            konfigApp.kdPelayanan = "07";
            konfigApp.namaPelayanan = this.subMenuMonPPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPPBMN();
            modeCari = false;
            gridRTLPpBmn.teNamaKolom.Text = "";
            gridRTLPpBmn.teCari.Text = "";
            gridRTLPpBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPpBmn();
        }

        private void cariDataRkmTlPpBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlPpBmn();
        }

        #endregion

        #endregion

        #region KERJASAMA PEMANFAATAN BMN

        KES1.TL.KPBMN.ucRTLKpBmnGrid gridRTLKpBmn;
        KES1.TL.KPBMN.ucRTLKpBmnForm formRTLKpBmnTambah;
        KES1.TL.KPBMN.ucRTLKpBmnForm formRTLKpBmnUbah;
        KES1.TL.KPBMN.ucRTLKpBmnForm formRTLKpBmnDetail;
        private ArrayList dsgridRTLKpBmn;
        SvcWasdalManfaatTdLanjutSelect.OutputParameters dOutRtlKpBmn;
        SvcWasdalManfaatTdLanjutSelect.execute_pttClient ambilRtlKpBmn;


        private void nbiTLKPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonKPBMN;
            konfigApp.kdPelayanan = "08";
            konfigApp.namaPelayanan = this.subMenuMonKPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlKPBMN();
            modeCari = false;
            gridRTLKpBmn.teNamaKolom.Text = "";
            gridRTLKpBmn.teCari.Text = "";
            gridRTLKpBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlKpBmn();
        }

        private void setEventBtnTlKPBMN()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlKPBMNTutup);
        }

        public void initGridRkmTlKPBMN()
        {

            if (gridRTLKpBmn == null)
            {
                gridRTLKpBmn = new KES1.TL.KPBMN.ucRTLKpBmnGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlKpBmn),
                    detailDataGrid = new DetailDataGrid(RkmTlKPBMNDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlKPBMN();
            setPanel(gridRTLKpBmn);
        }

        #region --++ Ambil Data KERJASAMA PEMANFAATAN BMN
        private void getInitRkmTlKpBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutSelect.InputParameters parInp = new SvcWasdalManfaatTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NO_BUKTI_LAKSANA IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlKpBmn = new SvcWasdalManfaatTdLanjutSelect.execute_pttClient();
                ambilRtlKpBmn.Open();
                ambilRtlKpBmn.Beginexecute(parInp, new AsyncCallback(getRkmTlKpBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlKpBmn(IAsyncResult result)
        {
            try
            {
                dOutRtlKpBmn = ambilRtlKpBmn.Endexecute(result);
                ambilRtlKpBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlKpBmn(dsRtlKpBmn), dOutRtlKpBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlKpBmn(SvcWasdalManfaatTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlKpBmn(SvcWasdalManfaatTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_TL_SELECT_WASDAL_MANFAAT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLKpBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLKpBmn.Add(dataOut.SF_TL_SELECT_WASDAL_MANFAAT[i]);
            }

            gridRTLKpBmn.sbCariOnline.Enabled = !modeCari;
            gridRTLKpBmn.dsDataSource = dsgridRTLKpBmn;
            gridRTLKpBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLKpBmn.teNamaKolom.Text.Trim();
                string xDua = gridRTLKpBmn.teCari.Text.Trim();
                string xTiga = gridRTLKpBmn.fieldDicari;
                gridRTLKpBmn.gvGridKPBMNSk.ClearColumnsFilter();
                gridRTLKpBmn.teNamaKolom.Text = xSatu;
                gridRTLKpBmn.teCari.Text = xDua;
                gridRTLKpBmn.fieldDicari = xTiga;
            }
            else
                gridRTLKpBmn.gvGridKPBMNSk.ClearColumnsFilter();
        }


        #endregion Ambil PP BMN

        #region --++ Simpan Data KERJASAMA PEMANFAATAN BMN
        SvcWasdalManfaatTdLanjutCud.OutputParameters dOutAmbilDataKpBmn;
        SvcWasdalManfaatTdLanjutCud.execute_pttClient ambilDataKpBmn;

        private void simpanDataRtlKpBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutCud.InputParameters parInp = new SvcWasdalManfaatTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLKpBmnTambah.teNomorSk.Text.Trim() : formRTLKpBmnUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLKpBmnTambah.teNoBuktiLaksana.Text.Trim() : formRTLKpBmnUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLKpBmnTambah.cbJnsDokLaksana.SelectedText : formRTLKpBmnUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLKpBmnTambah.teTanggalSk.EditValue : formRTLKpBmnUbah.teTanggalSk.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLKpBmnTambah.teKetBukti.Text : formRTLKpBmnUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLKpBmnTambah.filePath) : konfigApp.convert2byte(formRTLKpBmnUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataKpBmn = new SvcWasdalManfaatTdLanjutCud.execute_pttClient();
                ambilDataKpBmn.Beginexecute(parInp, new AsyncCallback(cudRtlKpBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlKpBmn()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatTdLanjutCud.InputParameters parInp = new SvcWasdalManfaatTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLKpBmn.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLKpBmn.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLKpBmn.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLKpBmn.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLKpBmn.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataKpBmn = new SvcWasdalManfaatTdLanjutCud.execute_pttClient();
                ambilDataKpBmn.Beginexecute(parInp, new AsyncCallback(cudRtlKpBmn), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlKpBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataKpBmn = ambilDataKpBmn.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlKpBmn(this.ubahDsRtlKpBmn), dOutAmbilDataKpBmn);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlKpBmn(SvcWasdalManfaatTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaKPBMN = 0;

        private void ubahDsRtlKpBmn(SvcWasdalManfaatTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalManfaatTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_BUKTI_LAKSANASpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLKpBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLKpBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLKpBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLKpBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLKpBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLKpBmnTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLKpBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLKpBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLKpBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLKpBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLKpBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLKpBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLKpBmnTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLKpBmnTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLKpBmnTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLKpBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsgridRTLKpBmn == null ? 1 : dsgridRTLKpBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLKpBmnTambah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLKpBmnTambah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLKpBmnTambah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLKpBmnTambah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLKpBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLKpBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLKpBmnTambah.teNamaPemohon.Text;
                        dsgridRTLKpBmn.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLKpBmn.dataTerpilih = dataPenyama;
                            _keBerapaPpBmn = 1;
                            formRTLKpBmnTambah.gcDaftarAset.Enabled = true;
                            formRTLKpBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLKpBmnTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLKpBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLKpBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLKpBmnTambah.sbCariPemohon.Enabled = false;
                            formRTLKpBmnTambah.sbRefresh.Enabled = true;
                            formRTLKpBmnTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLKpBmnTambah.cePilihSemua.Enabled = true;
                            formRTLKpBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLKpBmnTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLKpBmn.IndexOf(gridRTLKpBmn.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLKpBmn.Remove(gridRTLKpBmn.dataTerpilih);
                            dsgridRTLKpBmn.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLKpBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLKpBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLKpBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRTLKpBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLKpBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLKpBmnUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLKpBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLKpBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLKpBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLKpBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLKpBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLKpBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLKpBmnUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLKpBmnUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRTLKpBmnUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLKpBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsgridRTLKpBmn == null ? 1 : dsgridRTLKpBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NO_BUKTI_LAKSANA = formRTLKpBmnUbah.teNoBuktiLaksana.Text;
                        dataPenyama.TGL_BUKTI_LAKSANA = Convert.ToDateTime(formRTLKpBmnUbah.deTglBuktiLaksana.Text);
                        dataPenyama.JNS_BUKTI_LAKSANAAN = formRTLKpBmnUbah.cbJnsDokLaksana.SelectedText;
                        dataPenyama.KET = formRTLKpBmnUbah.teKetBukti.Text;

                        dataPenyama.TIPE_PEMOHON = formRTLKpBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLKpBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLKpBmnUbah.teNamaPemohon.Text;
                        _indeksData = dsgridRTLKpBmn.IndexOf(gridRTLKpBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLKpBmn.Remove(gridRTLKpBmn.dataTerpilih);
                        dsgridRTLKpBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLKpBmn.Remove(gridRTLKpBmn.dataTerpilih);
                        break;
                }
                gridRTLKpBmn.dsDataSource = dsgridRTLKpBmn;
                gridRTLKpBmn.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkKP(SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT _skTerpilih)
        {
            formRTLKpBmnTambah = new KES1.TL.KPBMN.ucRTLKpBmnForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlKpBmn = new SimpanDataRtl(simpanDataRtlKpBmn)
            };
            formRTLKpBmnTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLKpBmnTambah);
            formRTLKpBmnTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion Simpan Data KP BMN

        #region action button
        KES1.TL.KPBMN.frmPuSk formSkKP;

        private void RkmTlKPBMNTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan08), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkKP = new KES1.TL.KPBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkKP = new PilihSk(pilihSkKP)
                };
                formSkKP.ShowDialog();
            }
        }

        private void RkmTlKPBMNEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlKPBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLKpBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLKpBmn.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlKpBmn();
                }
            }
        }

        private void RkmTlKPBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLKpBmn.dataTerpilih != null)
            {
                if (formRTLKpBmnUbah == null)
                {
                    formRTLKpBmnUbah = new KES1.TL.KPBMN.ucRTLKpBmnForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlKpBmn = new SimpanDataRtl(simpanDataRtlKpBmn)
                    };
                }
                formRTLKpBmnUbah.dataTerpilih = gridRTLKpBmn.dataTerpilih;
                setPanel(formRTLKpBmnUbah);
                formRTLKpBmnUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlKPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLKpBmn.teNamaKolom.Text = "";
            gridRTLKpBmn.teCari.Text = "";
            gridRTLKpBmn.fieldDicari = "";
            gridRTLKpBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlKpBmn();
        }

        private void RkmTlKPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlKpBmn();
            }
        }

        private void RkmTlKPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void RkmTlKPBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonKPBMN;
            konfigApp.kdPelayanan = "08";
            konfigApp.namaPelayanan = this.subMenuMonKPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlKPBMN();
            modeCari = false;
            gridRTLKpBmn.teNamaKolom.Text = "";
            gridRTLKpBmn.teCari.Text = "";
            gridRTLKpBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlKpBmn();
        }

        private void cariDataRkmTlKpBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlKpBmn();
        }

        #endregion

        #endregion

        #region BGS

        KES1.TL.ucRTLBGSGrid gridRTLBGS;
        KES1.TL.ucRTLBGSForm formRTLBGSTambah;
        KES1.TL.ucRTLBGSForm formRTLBGSUbah;
        KES1.TL.ucRTLBGSForm formRTLBGSDetail;
        private ArrayList dsgridRTLBGS;
        SvcWasdalManfaatSkSelect.OutputParameters dOutRtlBGS;
        SvcWasdalManfaatSkSelect.execute_pttClient ambilRtlBGS;


        private void nbiTLBGS_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonBGS;
            konfigApp.kdPelayanan = "09";
            konfigApp.namaPelayanan = this.subMenuMonBGS;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlBGS();
            modeCari = false;
            gridRTLBGS.teNamaKolom.Text = "";
            gridRTLBGS.teCari.Text = "";
            gridRTLBGS.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlBGS();
        }



        private void setEventBtnTlBGS()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlBGSRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlBGSMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlBGSDetail);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlBGSTutup);

        }

        public void initGridRkmTlBGS()
        {

            if (gridRTLBGS == null)
            {
                gridRTLBGS = new KES1.TL.ucRTLBGSGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlBGS),
                    detailDataGrid = new DetailDataGrid(RkmTlBGSDetail)
                };
            }
            //setTombolRskGrid();
            setEventBtnTlBGS();
            setPanel(gridRTLBGS);
        }

        #region --++ Ambil Data BGS
        private void getInitRkmTlBGS()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatSkSelect.InputParameters parInp = new SvcWasdalManfaatSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlBGS = new SvcWasdalManfaatSkSelect.execute_pttClient();
                ambilRtlBGS.Open();
                ambilRtlBGS.Beginexecute(parInp, new AsyncCallback(getRkmTlBGS), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlBGS(IAsyncResult result)
        {
            try
            {
                dOutRtlBGS = ambilRtlBGS.Endexecute(result);
                ambilRtlBGS.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlBGS(dsRtlBGS), dOutRtlBGS);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlBGS(SvcWasdalManfaatSkSelect.OutputParameters dataOut);

        private void dsRtlBGS(SvcWasdalManfaatSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_MANFAAT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLBGS = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLBGS.Add(dataOut.SF_READ_WASDAL_MANFAAT[i]);
            }

            gridRTLBGS.sbCariOnline.Enabled = !modeCari;
            gridRTLBGS.dsDataSource = dsgridRTLBGS;
            gridRTLBGS.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLBGS.teNamaKolom.Text.Trim();
                string xDua = gridRTLBGS.teCari.Text.Trim();
                string xTiga = gridRTLBGS.fieldDicari;
                gridRTLBGS.gvGridBGSSk.ClearColumnsFilter();
                gridRTLBGS.teNamaKolom.Text = xSatu;
                gridRTLBGS.teCari.Text = xDua;
                gridRTLBGS.fieldDicari = xTiga;
            }
            else
                gridRTLBGS.gvGridBGSSk.ClearColumnsFilter();
        }


        #endregion Ambil BGS

        #region --++ Simpan Data BGS
        SvcWasdalManfaatCud.OutputParameters dOutAmbilDataBGS;
        SvcWasdalManfaatCud.execute_pttClient ambilDataBGS;

        private void simpanDataRtlBGS(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.idPemohon : formRTLBGSUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idSatker;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.rgJenisAset.EditValue.ToString() : formRTLBGSUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teJabatan.Text.Trim() : formRTLBGSUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teNamaInstansi.EditValue.ToString() : formRTLBGSUbah.teNamaInstansi.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.kodePenerbitSkDetail : formRTLBGSUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formRTLBGSTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBGSTambah.teNilaiPenetapan.Text)) : (formRTLBGSUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBGSUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teNipPenandaTangan.Text : formRTLBGSUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teNamaPenandaTangan.Text : formRTLBGSUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teNamaInstansi.Text : formRTLBGSUbah.teNamaInstansi.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.namaPenerbitSkDetail : formRTLBGSUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teNomorSk.Text.Trim() : formRTLBGSUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = konfigApp.DateToString(DateTime.Now);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teTanggalSk.EditValue : formRTLBGSUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teJenisPemohon.Text : formRTLBGSUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLBGSTambah.teUraianKeputusan.Text : formRTLBGSUbah.teUraianKeputusan.Text);
                ambilDataBGS = new SvcWasdalManfaatCud.execute_pttClient();
                ambilDataBGS.Beginexecute(parInp, new AsyncCallback(cudRtlBGS), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }


        private void cudRtlBGS(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataBGS = ambilDataBGS.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlBGS(this.ubahDsRtlBGS), dOutAmbilDataBGS);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlBGS(SvcWasdalManfaatAllCud.OutputParameters dataOutRtl);

        int _keBerapaBGS = 0;

        private void ubahDsRtlBGS(SvcWasdalManfaatAllCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLBGSTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLBGSTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLBGSTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formRTLBGSTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLBGSTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLBGSTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLBGSTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLBGSTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLBGSTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLBGSTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLBGSTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLBGSTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBGSTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formRTLBGSTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLBGSTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formRTLBGSTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLBGSTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLBGSTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLBGS == null ? 1 : dsgridRTLBGS.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLBGSTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLBGSTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLBGSTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLBGSTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLBGSTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formRTLBGSTambah.teUraianKeputusan.Text;
                        dsgridRTLBGS.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLBGS.dataTerpilih = dataPenyama;
                            _keBerapaBGS = 1;
                            formRTLBGSTambah.gcDaftarAset.Enabled = true;
                            formRTLBGSTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLBGSTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLBGSTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLBGSTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLBGSTambah.sbCariPemohon.Enabled = false;
                            formRTLBGSTambah.sbRefresh.Enabled = true;
                            formRTLBGSTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLBGSTambah.cePilihSemua.Enabled = true;
                            formRTLBGSTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLBGSTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLBGS.IndexOf(gridRTLBGS.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLBGS.Remove(gridRTLBGS.dataTerpilih);
                            dsgridRTLBGS.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLBGSUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLBGSUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLBGSUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formRTLBGSUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLBGSUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLBGSUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLBGSUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLBGSUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLBGSUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLBGSUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLBGSUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLBGSUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBGSUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formRTLBGSUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLBGS.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLBGSUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formRTLBGSUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLBGSUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLBGSUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLBGS.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLBGS.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLBGSUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridRTLBGS.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLBGS.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLBGSUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLBGSUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLBGS.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridRTLBGS.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLBGS.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLBGSUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLBGSUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formRTLBGSUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLBGS.IndexOf(gridRTLBGS.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLBGS.Remove(gridRTLBGS.dataTerpilih);
                        dsgridRTLBGS.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLBGS.Remove(gridRTLBGS.dataTerpilih);
                        break;
                }
                gridRTLBGS.dsDataSource = dsgridRTLBGS;
                gridRTLBGS.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN


        private void RkmTlBGSDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //if (gridRTLBGS.dataTerpilih != null)
            //{
            //    if (formRTLBGSUbah == null)
            //    {
            //        formRTLBGSUbah = new KES1.TL.ucRTLBGSForm("U")
            //        {

            //            toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
            //            simpanDataRtlBGS = new SimpanDataRtl(simpanDataRtlBGS)
            //        };
            //    }
            //    formRTLBGSUbah.dataTerpilih = gridRTLBGS.dataTerpilih;
            //    setPanel(formRTLBGSUbah);
            //    formRTLBGSUbah.inisialisasiForm();
            //    setTombolRtlForm();
            //}
            //else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlBGSRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLBGS.teNamaKolom.Text = "";
            gridRTLBGS.teCari.Text = "";
            gridRTLBGS.fieldDicari = "";
            gridRTLBGS.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlBGS();
        }

        private void RkmTlBGSMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlBGS();
            }
        }

        private void RkmTlBGSTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void cariDataRkmTlBGS(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlBGS();
        }

        #endregion

        #region BSG

        KES1.TL.ucRTLBSGGrid gridRTLBSG;
        KES1.TL.ucRTLBSGForm formRTLBSGTambah;
        KES1.TL.ucRTLBSGForm formRTLBSGUbah;
        KES1.TL.ucRTLBSGForm formRTLBSGDetail;
        private ArrayList dsgridRTLBSG;
        SvcWasdalManfaatSkSelect.OutputParameters dOutRtlBSG;
        SvcWasdalManfaatSkSelect.execute_pttClient ambilRtlBSG;


        private void nbiTLBSG_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonBSG;
            konfigApp.kdPelayanan = "10";
            konfigApp.namaPelayanan = this.subMenuMonBSG;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlBSG();
            modeCari = false;
            gridRTLBSG.teNamaKolom.Text = "";
            gridRTLBSG.teCari.Text = "";
            gridRTLBSG.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlBSG();
        }

        private void setEventBtnTlBSG()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlBSGRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlBSGMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlBSGDetail);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlBSGTutup);

        }

        public void initGridRkmTlBSG()
        {

            if (gridRTLBSG == null)
            {
                gridRTLBSG = new KES1.TL.ucRTLBSGGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlBSG),
                    detailDataGrid = new DetailDataGrid(RkmTlBSGDetail)
                };
            }
            //setTombolRskGrid();
            setEventBtnTlBSG();
            setPanel(gridRTLBSG);
        }

        #region --++ Ambil Data BSG
        private void getInitRkmTlBSG()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatSkSelect.InputParameters parInp = new SvcWasdalManfaatSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlBSG = new SvcWasdalManfaatSkSelect.execute_pttClient();
                ambilRtlBSG.Open();
                ambilRtlBSG.Beginexecute(parInp, new AsyncCallback(getRkmTlBSG), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlBSG(IAsyncResult result)
        {
            try
            {
                dOutRtlBSG = ambilRtlBSG.Endexecute(result);
                ambilRtlBSG.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlBSG(dsRtlBSG), dOutRtlBSG);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlBSG(SvcWasdalManfaatSkSelect.OutputParameters dataOut);

        private void dsRtlBSG(SvcWasdalManfaatSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_MANFAAT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLBSG = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLBSG.Add(dataOut.SF_READ_WASDAL_MANFAAT[i]);
            }

            gridRTLBSG.sbCariOnline.Enabled = !modeCari;
            gridRTLBSG.dsDataSource = dsgridRTLBSG;
            gridRTLBSG.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLBSG.teNamaKolom.Text.Trim();
                string xDua = gridRTLBSG.teCari.Text.Trim();
                string xTiga = gridRTLBSG.fieldDicari;
                gridRTLBSG.gvGridBSGSk.ClearColumnsFilter();
                gridRTLBSG.teNamaKolom.Text = xSatu;
                gridRTLBSG.teCari.Text = xDua;
                gridRTLBSG.fieldDicari = xTiga;
            }
            else
                gridRTLBSG.gvGridBSGSk.ClearColumnsFilter();
        }


        #endregion Ambil BSG

        #region --++ Simpan Data BSG
        SvcWasdalManfaatCud.OutputParameters dOutAmbilDataBSG;
        SvcWasdalManfaatCud.execute_pttClient ambilDataBSG;

        private void simpanDataRtlBSG(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.idPemohon : formRTLBSGUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idSatker;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.rgJenisAset.EditValue.ToString() : formRTLBSGUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teJabatan.Text.Trim() : formRTLBSGUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teNamaInstansi.EditValue.ToString() : formRTLBSGUbah.teNamaInstansi.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.kodePenerbitSkDetail : formRTLBSGUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formRTLBSGTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBSGTambah.teNilaiPenetapan.Text)) : (formRTLBSGUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBSGUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teNipPenandaTangan.Text : formRTLBSGUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teNamaPenandaTangan.Text : formRTLBSGUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teNamaInstansi.Text : formRTLBSGUbah.teNamaInstansi.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.namaPenerbitSkDetail : formRTLBSGUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teNomorSk.Text.Trim() : formRTLBSGUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = konfigApp.DateToString(DateTime.Now);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teTanggalSk.EditValue : formRTLBSGUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teJenisPemohon.Text : formRTLBSGUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLBSGTambah.teUraianKeputusan.Text : formRTLBSGUbah.teUraianKeputusan.Text);
                ambilDataBSG = new SvcWasdalManfaatCud.execute_pttClient();
                ambilDataBSG.Beginexecute(parInp, new AsyncCallback(cudRtlBSG), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }


        private void cudRtlBSG(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataBSG = ambilDataBSG.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlBSG(this.ubahDsRtlBSG), dOutAmbilDataBSG);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlBSG(SvcWasdalManfaatAllCud.OutputParameters dataOutRtl);

        int _keBerapaBSG = 0;

        private void ubahDsRtlBSG(SvcWasdalManfaatAllCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLBSGTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLBSGTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLBSGTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formRTLBSGTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLBSGTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLBSGTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLBSGTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLBSGTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLBSGTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLBSGTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLBSGTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLBSGTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBSGTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formRTLBSGTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLBSGTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formRTLBSGTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLBSGTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLBSGTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLBSG == null ? 1 : dsgridRTLBSG.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLBSGTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLBSGTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLBSGTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLBSGTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLBSGTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formRTLBSGTambah.teUraianKeputusan.Text;
                        dsgridRTLBSG.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLBSG.dataTerpilih = dataPenyama;
                            _keBerapaBSG = 1;
                            formRTLBSGTambah.gcDaftarAset.Enabled = true;
                            formRTLBSGTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLBSGTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLBSGTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLBSGTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLBSGTambah.sbCariPemohon.Enabled = false;
                            formRTLBSGTambah.sbRefresh.Enabled = true;
                            formRTLBSGTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLBSGTambah.cePilihSemua.Enabled = true;
                            formRTLBSGTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLBSGTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLBSG.IndexOf(gridRTLBSG.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLBSG.Remove(gridRTLBSG.dataTerpilih);
                            dsgridRTLBSG.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLBSGUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLBSGUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLBSGUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formRTLBSGUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLBSGUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLBSGUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLBSGUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLBSGUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLBSGUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLBSGUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLBSGUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLBSGUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLBSGUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formRTLBSGUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLBSG.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLBSGUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formRTLBSGUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLBSGUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLBSGUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLBSG.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLBSG.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLBSGUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridRTLBSG.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLBSG.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLBSGUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLBSGUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLBSG.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridRTLBSG.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLBSG.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLBSGUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLBSGUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formRTLBSGUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLBSG.IndexOf(gridRTLBSG.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLBSG.Remove(gridRTLBSG.dataTerpilih);
                        dsgridRTLBSG.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLBSG.Remove(gridRTLBSG.dataTerpilih);
                        break;
                }
                gridRTLBSG.dsDataSource = dsgridRTLBSG;
                gridRTLBSG.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN


        private void RkmTlBSGDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //if (gridRTLBSG.dataTerpilih != null)
            //{
            //    if (formRTLBSGUbah == null)
            //    {
            //        formRTLBSGUbah = new KES1.TL.ucRTLBSGForm("U")
            //        {

            //            toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
            //            simpanDataRtlBSG = new SimpanDataRtl(simpanDataRtlBSG)
            //        };
            //    }
            //    formRTLBSGUbah.dataTerpilih = gridRTLBSG.dataTerpilih;
            //    setPanel(formRTLBSGUbah);
            //    formRTLBSGUbah.inisialisasiForm();
            //    setTombolRtlForm();
            //}
            //else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlBSGRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLBSG.teNamaKolom.Text = "";
            gridRTLBSG.teCari.Text = "";
            gridRTLBSG.fieldDicari = "";
            gridRTLBSG.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlBSG();
        }

        private void RkmTlBSGMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlBSG();
            }
        }

        private void RkmTlBSGTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void cariDataRkmTlBSG(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlBSG();
        }

        #endregion

        #region JUAL

        KES1.TL.PENJUALAN.ucRTLJUALGrid gridRTLJUAL;
        KES1.TL.PENJUALAN.ucRTLJUALForm formRTLJUALTambah;
        KES1.TL.PENJUALAN.ucRTLJUALForm formRTLJUALUbah;
        KES1.TL.PENJUALAN.ucRTLJUALForm formRTLJUALDetail;
        private ArrayList dsgridRTLJUAL;
        SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dOutRtlJUAL;
        SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient ambilRtlJUAL;


        private void nbiTLJUAL_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPenjualan;
            konfigApp.kdPelayanan = "11";
            konfigApp.namaPelayanan = this.subMenuMonPenjualan;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlJUAL();
            modeCari = false;
            gridRTLJUAL.teNamaKolom.Text = "";
            gridRTLJUAL.teCari.Text = "";
            gridRTLJUAL.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlJUAL();
        }



        private void setEventBtnTlJUAL()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlJUALTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlJUALDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlJUALHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlJUALRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlJUALMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlJUALDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlJUALKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlJUALTutup);
        }

        public void initGridRkmTlJUAL()
        {

            if (gridRTLJUAL == null)
            {
                gridRTLJUAL = new KES1.TL.PENJUALAN.ucRTLJUALGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlJUAL),
                    detailDataGrid = new DetailDataGrid(RkmTlJUALDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlJUAL();
            setPanel(gridRTLJUAL);
        }

        #region --++ Ambil Data JUAL
        private void getInitRkmTlJUAL()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutSelect.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlJUAL = new SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient();
                ambilRtlJUAL.Open();
                ambilRtlJUAL.Beginexecute(parInp, new AsyncCallback(getRkmTlJUAL), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlJUAL(IAsyncResult result)
        {
            try
            {
                dOutRtlJUAL = ambilRtlJUAL.Endexecute(result);
                ambilRtlJUAL.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlJUAL(dsRtlJUAL), dOutRtlJUAL);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlJUAL(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlJUAL(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_TL_SELECT_WASDAL_PT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLJUAL = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB = (dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLJUAL.Add(dataOut.SF_TL_SELECT_WASDAL_PT[i]);
            }

            gridRTLJUAL.sbCariOnline.Enabled = !modeCari;
            gridRTLJUAL.dsDataSource = dsgridRTLJUAL;
            gridRTLJUAL.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLJUAL.teNamaKolom.Text.Trim();
                string xDua = gridRTLJUAL.teCari.Text.Trim();
                string xTiga = gridRTLJUAL.fieldDicari;
                gridRTLJUAL.gvGridSk.ClearColumnsFilter();
                gridRTLJUAL.teNamaKolom.Text = xSatu;
                gridRTLJUAL.teCari.Text = xDua;
                gridRTLJUAL.fieldDicari = xTiga;
            }
            else
                gridRTLJUAL.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil JUAL

        #region --++ Simpan Data JUAL
        SvcWasdalPindahtanganTdLanjutCud.OutputParameters dOutAmbilDataJUAL;
        SvcWasdalPindahtanganTdLanjutCud.execute_pttClient ambilDataJUAL;

        private void simpanDataRtlJUAL(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLJUALTambah.teNomorSk.Text.Trim() : formRTLJUALUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLJUALTambah.teNoBuktiLaksana.Text.Trim() : formRTLJUALUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLJUALTambah.jnsBuktiStr(formRTLJUALUbah.cbJnsDokLaksana.SelectedIndex) : formRTLJUALUbah.jnsBuktiStr(formRTLJUALUbah.cbJnsDokLaksana.SelectedIndex));
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLJUALTambah.deTglBuktiLaksana.EditValue : formRTLJUALUbah.deTglBuktiLaksana.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLJUALTambah.teKetBukti.Text : formRTLJUALUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLJUALTambah.filePath) : konfigApp.convert2byte(formRTLJUALUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataJUAL = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataJUAL.Beginexecute(parInp, new AsyncCallback(cudRtlJUAL), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlJUAL()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLJUAL.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLJUAL.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLJUAL.dataTerpilih.JNS_BUKTI_LAKSANA;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLJUAL.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLJUAL.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataJUAL = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataJUAL.Beginexecute(parInp, new AsyncCallback(cudRtlJUAL), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlJUAL(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataJUAL = ambilDataJUAL.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlJUAL(this.ubahDsRtlJUAL), dOutAmbilDataJUAL);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlJUAL(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaJUAL = 0;

        private void ubahDsRtlJUAL(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT dataPenyama = new SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLJUALTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLJUALTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLJUALTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLJUALTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLJUALTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLJUALTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLJUALTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLJUALTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLJUALTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLJUALTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLJUALTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLJUALTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLJUALTambah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLJUALTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLJUALTambah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLJUALTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLJUALTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLJUALTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLJUAL == null ? 1 : dsgridRTLJUAL.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLJUALTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLJUALTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLJUALTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLJUALTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLJUALTambah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLJUALTambah.teUraianKeputusan.Text;
                        dsgridRTLJUAL.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLJUAL.dataTerpilih = dataPenyama;
                            _keBerapaJUAL = 1;
                            formRTLJUALTambah.gcDaftarAset.Enabled = true;
                            formRTLJUALTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLJUALTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLJUALTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLJUALTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLJUALTambah.sbCariPemohon.Enabled = false;
                            formRTLJUALTambah.sbRefresh.Enabled = true;
                            formRTLJUALTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLJUALTambah.cePilihSemua.Enabled = true;
                            formRTLJUALTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLJUALTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLJUAL.IndexOf(gridRTLJUAL.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLJUAL.Remove(gridRTLJUAL.dataTerpilih);
                            dsgridRTLJUAL.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLJUALUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLJUALUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLJUALUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLJUALUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLJUALUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLJUALUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLJUALUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLJUALUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLJUALUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLJUALUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLJUALUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLJUALUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLJUALUbah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLJUALUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLJUAL.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLJUALUbah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLJUALUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLJUALUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLJUALUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLJUAL.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLJUAL.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLJUALUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridRTLJUAL.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLJUAL.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLJUALUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLJUALUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLJUAL.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridRTLJUAL.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLJUAL.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLJUALUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLJUALUbah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLJUALUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLJUAL.IndexOf(gridRTLJUAL.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLJUAL.Remove(gridRTLJUAL.dataTerpilih);
                        dsgridRTLJUAL.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLJUAL.Remove(gridRTLJUAL.dataTerpilih);
                        break;
                }
                gridRTLJUAL.dsDataSource = dsgridRTLJUAL;
                gridRTLJUAL.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkJual(SvcWasdalJualSkSelect.WASDALSROW_READ_WASDAL_PT_JUAL _skTerpilih)
        {
            formRTLJUALTambah = new KES1.TL.PENJUALAN.ucRTLJUALForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlJUAL = new SimpanDataRtl(simpanDataRtlJUAL)
            };
            formRTLJUALTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLJUALTambah);
            formRTLJUALTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion


        #region Action Button
        KES1.TL.PENJUALAN.frmPuSk formSkJual;

        private void RkmTlJUALTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan11), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkJual = new KES1.TL.PENJUALAN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkJual = new PilihSkJual(pilihSkJual)
                };
                formSkJual.ShowDialog();
            }
        }

        private void RkmTlJUALEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlJUALHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLJUAL.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLJUAL.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlSwBmn();
                }
            }
        }

        private void RkmTlJUALDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLJUAL.dataTerpilih != null)
            {
                if (formRTLJUALUbah == null)
                {
                    formRTLJUALUbah = new KES1.TL.PENJUALAN.ucRTLJUALForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlJUAL = new SimpanDataRtl(simpanDataRtlJUAL)
                    };
                }
                formRTLJUALUbah.dataTerpilih = gridRTLJUAL.dataTerpilih;
                setPanel(formRTLJUALUbah);
                formRTLJUALUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlJUALRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLJUAL.teNamaKolom.Text = "";
            gridRTLJUAL.teCari.Text = "";
            gridRTLJUAL.fieldDicari = "";
            gridRTLJUAL.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlJUAL();
        }

        private void RkmTlJUALMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlJUAL();
            }
        }

        private void RkmTlJUALKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPenjualan;
            konfigApp.kdPelayanan = "11";
            konfigApp.namaPelayanan = this.subMenuMonPenjualan;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlJUAL();
            modeCari = false;
            gridRTLJUAL.teNamaKolom.Text = "";
            gridRTLJUAL.teCari.Text = "";
            gridRTLJUAL.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlJUAL();
        }

        private void RkmTlJUALTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion Action Button

        private void cariDataRkmTlJUAL(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlJUAL();
        }

        #endregion

        #region TM

        KES1.TL.TMBMN.ucRTLTMGrid gridRTLTM;
        KES1.TL.TMBMN.ucRTLTMForm formRTLTMTambah;
        KES1.TL.TMBMN.ucRTLTMForm formRTLTMUbah;
        KES1.TL.TMBMN.ucRTLTMForm formRTLTMDetail;
        private ArrayList dsgridRTLTM;
        SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dOutRtlTM;
        SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient ambilRtlTM;


        private void nbiTLTM_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonTukar;
            konfigApp.kdPelayanan = "12";
            konfigApp.namaPelayanan = this.subMenuMonTukar;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlTM();
            modeCari = false;
            gridRTLTM.teNamaKolom.Text = "";
            gridRTLTM.teCari.Text = "";
            gridRTLTM.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlTM();
        }



        private void setEventBtnTlTM()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlTMTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlTMDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlTMHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlTMRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlTMNMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlTMDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlTMKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlTMTutup);

        }

        public void initGridRkmTlTM()
        {

            if (gridRTLTM == null)
            {
                gridRTLTM = new KES1.TL.TMBMN.ucRTLTMGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlTM),
                    detailDataGrid = new DetailDataGrid(RkmTlTMDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlTM();
            setPanel(gridRTLTM);
        }

        #region --++ Ambil Data TM
        private void getInitRkmTlTM()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutSelect.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlTM = new SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient();
                ambilRtlTM.Open();
                ambilRtlTM.Beginexecute(parInp, new AsyncCallback(getRkmTlTM), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlTM(IAsyncResult result)
        {
            try
            {
                dOutRtlTM = ambilRtlTM.Endexecute(result);
                ambilRtlTM.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlTM(dsRtlTM), dOutRtlTM);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlTM(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlTM(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_TL_SELECT_WASDAL_PT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLTM = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB = (dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLTM.Add(dataOut.SF_TL_SELECT_WASDAL_PT[i]);
            }

            gridRTLTM.sbCariOnline.Enabled = !modeCari;
            gridRTLTM.dsDataSource = dsgridRTLTM;
            gridRTLTM.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLTM.teNamaKolom.Text.Trim();
                string xDua = gridRTLTM.teCari.Text.Trim();
                string xTiga = gridRTLTM.fieldDicari;
                gridRTLTM.gvGridSk.ClearColumnsFilter();
                gridRTLTM.teNamaKolom.Text = xSatu;
                gridRTLTM.teCari.Text = xDua;
                gridRTLTM.fieldDicari = xTiga;
            }
            else
                gridRTLTM.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil Data TM

        #region --++ Simpan Data TM
        SvcWasdalPindahtanganTdLanjutCud.OutputParameters dOutAmbilDataTM;
        SvcWasdalPindahtanganTdLanjutCud.execute_pttClient ambilDataTM;

        private void simpanDataRtlTM(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLTMTambah.teNomorSk.Text.Trim() : formRTLTMUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLTMTambah.teNoBuktiLaksana.Text.Trim() : formRTLTMUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLTMTambah.jnsBuktiStr(formRTLTMUbah.cbJnsDokLaksana.SelectedIndex) : formRTLTMUbah.jnsBuktiStr(formRTLJUALUbah.cbJnsDokLaksana.SelectedIndex));
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLTMTambah.deTglBuktiLaksana.EditValue : formRTLTMUbah.deTglBuktiLaksana.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLTMTambah.teKetBukti.Text : formRTLTMUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLTMTambah.filePath) : konfigApp.convert2byte(formRTLTMUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);

                //parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formRTLTMTambah.teUraianKeputusan.Text : formRTLTMUbah.teUraianKeputusan.Text);

                ambilDataTM = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataTM.Beginexecute(parInp, new AsyncCallback(cudRtlTM), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlTM()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLTM.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLTM.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLTM.dataTerpilih.JNS_BUKTI_LAKSANA;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLTM.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLTM.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataTM = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataTM.Beginexecute(parInp, new AsyncCallback(cudRtlTM), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlTM(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataTM = ambilDataTM.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlTM(this.ubahDsRtlTM), dOutAmbilDataTM);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlTM(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaTM = 0;

        private void ubahDsRtlTM(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT dataPenyama = new SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLTMTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLTMTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLTMTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);

                        //dataPenyama.JABATAN_TTD = formRTLTMTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLTMTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLTMTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLTMTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLTMTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLTMTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLTMTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLTMTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLTMTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLTMTambah.teNilaiPenetapan.Text);

                        //dataPenyama.NIP_PENANDATANGAN = formRTLTMTambah.teNipPenandaTangan.Text;

                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLTMTambah.teNamaPemohon.Text;

                        //dataPenyama.NM_PENANDATANGAN = formRTLTMTambah.teNamaPenandaTangan.Text;

                        dataPenyama.NM_PENERBIT_SK = formRTLTMTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLTMTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLTM == null ? 1 : dsgridRTLTM.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLTMTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLTMTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLTMTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLTMTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLTMTambah.teNamaPemohon.Text;

                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLTMTambah.teUraianKeputusan.Text;

                        dsgridRTLTM.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLTM.dataTerpilih = dataPenyama;
                            _keBerapaTM = 1;
                            formRTLTMTambah.gcDaftarAset.Enabled = true;
                            formRTLTMTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLTMTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLTMTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLTMTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLTMTambah.sbCariPemohon.Enabled = false;
                            formRTLTMTambah.sbRefresh.Enabled = true;
                            formRTLTMTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLTMTambah.cePilihSemua.Enabled = true;
                            formRTLTMTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLTMTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLTM.IndexOf(gridRTLTM.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLTM.Remove(gridRTLTM.dataTerpilih);
                            dsgridRTLTM.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLTMUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLTMUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLTMUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);

                        //dataPenyama.JABATAN_TTD = formRTLTMUbah.teJabatan.Text;

                        dataPenyama.KD_KL = formRTLTMUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLTMUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLTMUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLTMUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLTMUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLTMUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLTMUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLTMUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLTMUbah.teNilaiPenetapan.Text);

                        //dataPenyama.NIP_PENANDATANGAN = formRTLTMUbah.teNipPenandaTangan.Text;

                        dataPenyama.NM_PELAYANAN = gridRTLTM.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLTMUbah.teNamaPemohon.Text;

                        //dataPenyama.NM_PENANDATANGAN = formRTLTMUbah.teNamaPenandaTangan.Text;

                        dataPenyama.NM_PENERBIT_SK = formRTLTMUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLTMUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLTM.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLTM.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLTMUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridRTLTM.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLTM.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLTMUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLTMUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLTM.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridRTLTM.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLTM.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLTMUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLTMUbah.teNamaPemohon.Text;

                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLTMUbah.teUraianKeputusan.Text;

                        _indeksData = dsgridRTLTM.IndexOf(gridRTLTM.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLTM.Remove(gridRTLTM.dataTerpilih);
                        dsgridRTLTM.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLTM.Remove(gridRTLTM.dataTerpilih);
                        break;
                }
                gridRTLTM.dsDataSource = dsgridRTLTM;
                gridRTLTM.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkTm(SvcWasdalTmSkSelect.WASDALSROW_READ_WASDAL_PT_TUKAR _skTerpilih)
        {
            formRTLTMTambah = new KES1.TL.TMBMN.ucRTLTMForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlTm = new SimpanDataRtl(simpanDataRtlTM)
            };
            formRTLTMTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLTMTambah);
            formRTLTMTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion Simpan Data TMBMN


        #region action button
        KES1.TL.TMBMN.frmPuSk formSkTm;

        private void RkmTlTMTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan12), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkTm = new KES1.TL.TMBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkTm = new PilihSkTm(pilihSkTm)
                };
                formSkTm.ShowDialog();
            }
        }

        private void RkmTlTMEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlTMHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLTM.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLTM.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlTM();
                }
            }
        }

        private void RkmTlTMDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLTM.dataTerpilih != null)
            {
                if (formRTLTMUbah == null)
                {
                    formRTLTMUbah = new KES1.TL.TMBMN.ucRTLTMForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlTm = new SimpanDataRtl(simpanDataRtlTM)
                    };
                }
                formRTLTMUbah.dataTerpilih = gridRTLTM.dataTerpilih;
                setPanel(formRTLTMUbah);
                formRTLTMUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlTMRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLTM.teNamaKolom.Text = "";
            gridRTLTM.teCari.Text = "";
            gridRTLTM.fieldDicari = "";
            gridRTLTM.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlTM();
        }

        private void RkmTlTMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlTM();
            }
        }

        private void RkmTlTMKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonTukar;
            konfigApp.kdPelayanan = "12";
            konfigApp.namaPelayanan = this.subMenuMonTukar;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlTM();
            modeCari = false;
            gridRTLTM.teNamaKolom.Text = "";
            gridRTLTM.teCari.Text = "";
            gridRTLTM.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlTM();
        }

        private void RkmTlTMTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmTlTM(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmTlTM();
        }

        #endregion

        #region HIBAH

        KES1.TL.HIBAH.ucRTLHIBAHGrid gridRTLHIBAH;
        KES1.TL.HIBAH.ucRTLHIBAHForm formRTLHIBAHTambah;
        KES1.TL.HIBAH.ucRTLHIBAHForm formRTLHIBAHUbah;
        KES1.TL.HIBAH.ucRTLHIBAHForm formRTLHIBAHDetail;
        private ArrayList dsgridRTLHIBAH;
        SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dOutRtlHIBAH;
        SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient ambilRtlHIBAH;


        private void nbiTLHIBAH_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonHibah;
            konfigApp.kdPelayanan = "13";
            konfigApp.namaPelayanan = this.subMenuMonHibah;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlHIBAH();
            modeCari = false;
            gridRTLHIBAH.teNamaKolom.Text = "";
            gridRTLHIBAH.teCari.Text = "";
            gridRTLHIBAH.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlHIBAH();
        }



        private void setEventBtnTlHIBAH()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlHIBAHTutup);

        }

        public void initGridRkmTlHIBAH()
        {

            if (gridRTLHIBAH == null)
            {
                gridRTLHIBAH = new KES1.TL.HIBAH.ucRTLHIBAHGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlHIBAH),
                    detailDataGrid = new DetailDataGrid(RkmTlHIBAHDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlHIBAH();
            setPanel(gridRTLHIBAH);
        }

        #region --++ Ambil Data HIBAH
        private void getInitRkmTlHIBAH()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutSelect.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlHIBAH = new SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient();
                ambilRtlHIBAH.Open();
                ambilRtlHIBAH.Beginexecute(parInp, new AsyncCallback(getRkmTlHIBAH), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlHIBAH(IAsyncResult result)
        {
            try
            {
                dOutRtlHIBAH = ambilRtlHIBAH.Endexecute(result);
                ambilRtlHIBAH.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlHIBAH(dsRtlHIBAH), dOutRtlHIBAH);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlHIBAH(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlHIBAH(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_TL_SELECT_WASDAL_PT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLHIBAH = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB = (dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLHIBAH.Add(dataOut.SF_TL_SELECT_WASDAL_PT[i]);
            }

            gridRTLHIBAH.sbCariOnline.Enabled = !modeCari;
            gridRTLHIBAH.dsDataSource = dsgridRTLHIBAH;
            gridRTLHIBAH.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLHIBAH.teNamaKolom.Text.Trim();
                string xDua = gridRTLHIBAH.teCari.Text.Trim();
                string xTiga = gridRTLHIBAH.fieldDicari;
                gridRTLHIBAH.gvGridSk.ClearColumnsFilter();
                gridRTLHIBAH.teNamaKolom.Text = xSatu;
                gridRTLHIBAH.teCari.Text = xDua;
                gridRTLHIBAH.fieldDicari = xTiga;
            }
            else
                gridRTLHIBAH.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil HIBAH

        #region --++ Simpan Data HIBAH
        SvcWasdalPindahtanganTdLanjutCud.OutputParameters dOutAmbilDataHIBAH;
        SvcWasdalPindahtanganTdLanjutCud.execute_pttClient ambilDataHIBAH;

        private void simpanDataRtlHIBAH(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLHIBAHTambah.teNomorSk.Text.Trim() : formRTLHIBAHUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLHIBAHTambah.teNoBuktiLaksana.Text.Trim() : formRTLHIBAHUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLHIBAHTambah.cbJnsDokLaksana.SelectedText : formRTLHIBAHUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLHIBAHTambah.deTglBuktiLaksana.EditValue : formRTLHIBAHUbah.deTglBuktiLaksana.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLHIBAHTambah.teKetBukti.Text : formRTLHIBAHUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLHIBAHTambah.filePath) : konfigApp.convert2byte(formRTLHIBAHUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataHIBAH = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataHIBAH.Beginexecute(parInp, new AsyncCallback(cudRtlHIBAH), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlHIBAH()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLHIBAH.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLHIBAH.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLHIBAH.dataTerpilih.JNS_BUKTI_LAKSANA;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLHIBAH.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLHIBAH.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataHIBAH = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataJUAL.Beginexecute(parInp, new AsyncCallback(cudRtlHIBAH), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }


        private void cudRtlHIBAH(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataHIBAH = ambilDataHIBAH.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlHIBAH(this.ubahDsRtlHIBAH), dOutAmbilDataHIBAH);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlHIBAH(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaHIBAH = 0;

        private void ubahDsRtlHIBAH(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT dataPenyama = new SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLHIBAHTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLHIBAHTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLHIBAHTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLHIBAHTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLHIBAHTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLHIBAHTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLHIBAHTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLHIBAHTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLHIBAHTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLHIBAHTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLHIBAHTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLHIBAHTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLHIBAHTambah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLHIBAHTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLHIBAHTambah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLHIBAHTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLHIBAHTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLHIBAHTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLHIBAH == null ? 1 : dsgridRTLHIBAH.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLHIBAHTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLHIBAHTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLHIBAHTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLHIBAHTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLHIBAHTambah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLHIBAHTambah.teUraianKeputusan.Text;
                        dsgridRTLHIBAH.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLHIBAH.dataTerpilih = dataPenyama;
                            _keBerapaHIBAH = 1;
                            formRTLHIBAHTambah.gcDaftarAset.Enabled = true;
                            formRTLHIBAHTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLHIBAHTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLHIBAHTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLHIBAHTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLHIBAHTambah.sbCariPemohon.Enabled = false;
                            formRTLHIBAHTambah.sbRefresh.Enabled = true;
                            formRTLHIBAHTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLHIBAHTambah.cePilihSemua.Enabled = true;
                            formRTLHIBAHTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLHIBAHTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLHIBAH.IndexOf(gridRTLHIBAH.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLHIBAH.Remove(gridRTLHIBAH.dataTerpilih);
                            dsgridRTLHIBAH.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLHIBAHUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLHIBAHUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLHIBAHUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLHIBAHUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLHIBAHUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLHIBAHUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLHIBAHUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLHIBAHUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLHIBAHUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLHIBAHUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLHIBAHUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLHIBAHUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLHIBAHUbah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLHIBAHUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLHIBAH.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLHIBAHUbah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLHIBAHUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLHIBAHUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLHIBAHUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLHIBAH.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLHIBAH.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLHIBAHUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridRTLHIBAH.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLHIBAH.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLHIBAHUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLHIBAHUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLHIBAH.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridRTLHIBAH.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLHIBAH.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLHIBAHUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLHIBAHUbah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLHIBAHUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLHIBAH.IndexOf(gridRTLHIBAH.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLHIBAH.Remove(gridRTLHIBAH.dataTerpilih);
                        dsgridRTLHIBAH.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLHIBAH.Remove(gridRTLHIBAH.dataTerpilih);
                        break;
                }
                gridRTLHIBAH.dsDataSource = dsgridRTLHIBAH;
                gridRTLHIBAH.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkHibah(SvcWasdalHibahSkSelect.WASDALSROW_READ_WASDAL_PT_HIBAH _skTerpilih)
        {
            formRTLHIBAHTambah = new KES1.TL.HIBAH.ucRTLHIBAHForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlHIBAH = new SimpanDataRtl(simpanDataRtlHIBAH)
            };
            formRTLHIBAHTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLHIBAHTambah);
            formRTLHIBAHTambah.inisialisasiForm();
            setTombolRtlForm();
        }

        #endregion

        #region action button
        KES1.TL.HIBAH.frmPuSk formSkHibah;

        private void RkmTlHIBAHTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan13), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkHibah = new KES1.TL.HIBAH.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkHibah = new PilihSkHibah(pilihSkHibah)
                };
                formSkHibah.ShowDialog();
            }
        }

        private void RkmTlHIBAHEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlHIBAHHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLHIBAH.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLHIBAH.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlTM();
                }
            }
        }

        private void RkmTlHIBAHDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLHIBAH.dataTerpilih != null)
            {
                if (formRTLHIBAHUbah == null)
                {
                    formRTLHIBAHUbah = new KES1.TL.HIBAH.ucRTLHIBAHForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlHIBAH = new SimpanDataRtl(simpanDataRtlHIBAH)
                    };
                }
                formRTLHIBAHUbah.dataTerpilih = gridRTLHIBAH.dataTerpilih;
                setPanel(formRTLHIBAHUbah);
                formRTLHIBAHUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlHIBAHRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLHIBAH.teNamaKolom.Text = "";
            gridRTLHIBAH.teCari.Text = "";
            gridRTLHIBAH.fieldDicari = "";
            gridRTLHIBAH.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlHIBAH();
        }

        private void RkmTlHIBAHMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlHIBAH();
            }
        }

        private void RkmTlHIBAHKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonTukar;
            konfigApp.kdPelayanan = "13";
            konfigApp.namaPelayanan = this.subMenuMonTukar;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlHIBAH();
            modeCari = false;
            gridRTLHIBAH.teNamaKolom.Text = "";
            gridRTLHIBAH.teCari.Text = "";
            gridRTLHIBAH.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlHIBAH();
        }

        private void RkmTlHIBAHTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion


        private void cariDataRkmTlHIBAH(string _strWhere, bool iniHIBAHodeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = iniHIBAHodeCari;
            getInitRkmTlHIBAH();
        }

        #endregion

        #region PMP

        KES1.TL.PMP.ucRTLPMPGrid gridRTLPMP;
        KES1.TL.PMP.ucRTLPMPForm formRTLPMPTambah;
        KES1.TL.PMP.ucRTLPMPForm formRTLPMPUbah;
        KES1.TL.PMP.ucRTLPMPForm formRTLPMPDetail;
        private ArrayList dsgridRTLPMP;
        SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dOutRtlPMP;
        SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient ambilRtlPMP;


        private void nbiTLPMP_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonModal;
            konfigApp.kdPelayanan = "14";
            konfigApp.namaPelayanan = this.subMenuMonModal;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPMP();
            modeCari = false;
            gridRTLPMP.teNamaKolom.Text = "";
            gridRTLPMP.teCari.Text = "";
            gridRTLPMP.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPMP();
        }



        private void setEventBtnTlPMP()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlPMPTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlPMPDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPMPHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPMPRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPMPMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlPMPDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPMPKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPMPTutup);
        }

        public void initGridRkmTlPMP()
        {

            if (gridRTLPMP == null)
            {
                gridRTLPMP = new KES1.TL.PMP.ucRTLPMPGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPMP),
                    detailDataGrid = new DetailDataGrid(RkmTlPMPDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlPMP();
            setPanel(gridRTLPMP);
        }

        #region --++ Ambil Data PMP
        private void getInitRkmTlPMP()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutSelect.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlPMP = new SvcWasdalPindahtanganTdLanjutSelect.execute_pttClient();
                ambilRtlPMP.Open();
                ambilRtlPMP.Beginexecute(parInp, new AsyncCallback(getRkmTlPMP), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlPMP(IAsyncResult result)
        {
            try
            {
                dOutRtlPMP = ambilRtlPMP.Endexecute(result);
                ambilRtlPMP.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPMP(dsRtlPMP), dOutRtlPMP);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPMP(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlPMP(SvcWasdalPindahtanganTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_TL_SELECT_WASDAL_PT.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLPMP = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB = (dataOut.SF_TL_SELECT_WASDAL_PT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLPMP.Add(dataOut.SF_TL_SELECT_WASDAL_PT[i]);
            }

            gridRTLPMP.sbCariOnline.Enabled = !modeCari;
            gridRTLPMP.dsDataSource = dsgridRTLPMP;
            gridRTLPMP.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPMP.teNamaKolom.Text.Trim();
                string xDua = gridRTLPMP.teCari.Text.Trim();
                string xTiga = gridRTLPMP.fieldDicari;
                gridRTLPMP.gvGridSk.ClearColumnsFilter();
                gridRTLPMP.teNamaKolom.Text = xSatu;
                gridRTLPMP.teCari.Text = xDua;
                gridRTLPMP.fieldDicari = xTiga;
            }
            else
                gridRTLPMP.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PMP

        #region --++ Simpan Data PMP
        SvcWasdalPindahtanganTdLanjutCud.OutputParameters dOutAmbilDataPMP;
        SvcWasdalPindahtanganTdLanjutCud.execute_pttClient ambilDataPMP;

        private void simpanDataRtlPMP(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMPTambah.teNomorSk.Text.Trim() : formRTLPMPUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMPTambah.teNoBuktiLaksana.Text.Trim() : formRTLPMPUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMPTambah.cbJnsDokLaksana.SelectedText : formRTLPMPUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMPTambah.deTglBuktiLaksana.EditValue : formRTLPMPUbah.deTglBuktiLaksana.EditValue)));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMPTambah.teKetBukti.Text : formRTLPMPUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLPMPTambah.filePath) : konfigApp.convert2byte(formRTLPMPUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataPMP = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataPMP.Beginexecute(parInp, new AsyncCallback(cudRtlPMP), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlPMP()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPindahtanganTdLanjutCud.InputParameters parInp = new SvcWasdalPindahtanganTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLPMP.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLPMP.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLPMP.dataTerpilih.JNS_BUKTI_LAKSANA;
                parInp.P_TGL_BUKTI_LAKSANA = konfigApp.DateToString(gridRTLPMP.dataTerpilih.TGL_BUKTI_LAKSANA);
                parInp.P_KET = gridRTLPMP.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataPMP = new SvcWasdalPindahtanganTdLanjutCud.execute_pttClient();
                ambilDataPMP.Beginexecute(parInp, new AsyncCallback(cudRtlPMP), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlPMP(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPMP = ambilDataPMP.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPMP(this.ubahDsRtlPMP), dOutAmbilDataPMP);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPMP(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaPMP = 0;

        private void ubahDsRtlPMP(SvcWasdalPindahtanganTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT dataPenyama = new SvcWasdalPindahtanganTdLanjutSelect.WASDALSROW_TL_SELECT_WASDAL_PT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLPMPTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPMPTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPMPTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPMPTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPMPTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPMPTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPMPTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPMPTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPMPTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPMPTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPMPTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPMPTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPMPTambah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPMPTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPMPTambah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPMPTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPMPTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPMPTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLPMP == null ? 1 : dsgridRTLPMP.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLPMPTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPMPTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPMPTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPMPTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPMPTambah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPMPTambah.teUraianKeputusan.Text;
                        dsgridRTLPMP.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPMP.dataTerpilih = dataPenyama;
                            _keBerapaPMP = 1;
                            formRTLPMPTambah.gcDaftarAset.Enabled = true;
                            formRTLPMPTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPMPTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPMPTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPMPTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPMPTambah.sbCariPemohon.Enabled = false;
                            formRTLPMPTambah.sbRefresh.Enabled = true;
                            formRTLPMPTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPMPTambah.cePilihSemua.Enabled = true;
                            formRTLPMPTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPMPTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLPMP.IndexOf(gridRTLPMP.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLPMP.Remove(gridRTLPMP.dataTerpilih);
                            dsgridRTLPMP.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLPMPUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPMPUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPMPUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPMPUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPMPUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPMPUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPMPUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPMPUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPMPUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPMPUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPMPUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPMPUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPMPUbah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPMPUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLPMP.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLPMPUbah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPMPUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPMPUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPMPUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLPMP.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLPMP.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLPMPUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridRTLPMP.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLPMP.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPMPUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPMPUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLPMP.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridRTLPMP.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLPMP.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLPMPUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPMPUbah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPMPUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLPMP.IndexOf(gridRTLPMP.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLPMP.Remove(gridRTLPMP.dataTerpilih);
                        dsgridRTLPMP.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLPMP.Remove(gridRTLPMP.dataTerpilih);
                        break;
                }
                gridRTLPMP.dsDataSource = dsgridRTLPMP;
                gridRTLPMP.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPmp(SvcWasdalPmpSkSelect.WASDALSROW_READ_WASDAL_PT_MODAL _skTerpilih)
        {
            formRTLPMPTambah = new KES1.TL.PMP.ucRTLPMPForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlPMP = new SimpanDataRtl(simpanDataRtlPMP)
            };
            formRTLPMPTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLPMPTambah);
            formRTLPMPTambah.inisialisasiForm();
            setTombolRtlForm();
        }
        #endregion Simpan Data PSP BMN

        #region action button
        KES1.TL.PMP.frmPuSk formSkPmp;

        private void RkmTlPMPTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan14), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPmp = new KES1.TL.PMP.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkPmp = new PilihSkPmp(pilihSkPmp)
                };
                formSkPmp.ShowDialog();
            }
        }

        private void RkmTlPMPEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPMPHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPMP.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLPMP.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlPMP();
                }
            }
        }

        private void RkmTlPMPDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPMP.dataTerpilih != null)
            {
                if (formRTLPMPUbah == null)
                {
                    formRTLPMPUbah = new KES1.TL.PMP.ucRTLPMPForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPMP = new SimpanDataRtl(simpanDataRtlPMP)
                    };
                }
                formRTLPMPUbah.dataTerpilih = gridRTLPMP.dataTerpilih;
                setPanel(formRTLPMPUbah);
                formRTLPMPUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPMPRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPMP.teNamaKolom.Text = "";
            gridRTLPMP.teCari.Text = "";
            gridRTLPMP.fieldDicari = "";
            gridRTLPMP.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPMP();
        }

        private void RkmTlPMPMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPMP();
            }
        }

        private void RkmTlPMPKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonTukar;
            konfigApp.kdPelayanan = "14";
            konfigApp.namaPelayanan = this.subMenuMonTukar;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPMP();
            modeCari = false;
            gridRTLHIBAH.teNamaKolom.Text = "";
            gridRTLHIBAH.teCari.Text = "";
            gridRTLHIBAH.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPMP();
        }

        private void RkmTlPMPTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmTlPMP(string _strWhere, bool iniPMPodeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = iniPMPodeCari;
            getInitRkmTlPMP();
        }

        #endregion

        #region PMBMN

        KES1.TL.PMBMN.ucRTLPMGrid gridRTLPMBMN;
        KES1.TL.PMBMN.ucRTLPMForm formRTLPMBMNTambah;
        KES1.TL.PMBMN.ucRTLPMForm formRTLPMBMNUbah;
        KES1.TL.PMBMN.ucRTLPMForm formRTLPMBMNDetail;
        private ArrayList dsgridRTLPMBMN;
        SvcWasdalHapusTdLanjutSelect.OutputParameters dOutRtlPMBMN;
        SvcWasdalHapusTdLanjutSelect.execute_pttClient ambilRtlPMBMN;


        private void nbiTLPMBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonHapus;
            konfigApp.kdPelayanan = "15";
            konfigApp.namaPelayanan = this.subMenuMonHapus;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPMBMN();
            modeCari = false;
            gridRTLPMBMN.teNamaKolom.Text = "";
            gridRTLPMBMN.teCari.Text = "";
            gridRTLPMBMN.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPMBMN();
        }



        private void setEventBtnTlPMBMN()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNMore);
            this.bbiRkmTlDetail.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNDetail);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPMBMNTutup);
        }

        public void initGridRkmTlPMBMN()
        {

            if (gridRTLPMBMN == null)
            {
                gridRTLPMBMN = new KES1.TL.PMBMN.ucRTLPMGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPMBMN),
                    detailDataGrid = new DetailDataGrid(RkmTlPMBMNDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlPMBMN();
            setPanel(gridRTLPMBMN);
        }

        #region --++ Ambil Data PMBMN
        private void getInitRkmTlPMBMN()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutSelect.InputParameters parInp = new SvcWasdalHapusTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlPMBMN = new SvcWasdalHapusTdLanjutSelect.execute_pttClient();
                ambilRtlPMBMN.Open();
                ambilRtlPMBMN.Beginexecute(parInp, new AsyncCallback(getRkmTlPMBMN), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlPMBMN(IAsyncResult result)
        {
            try
            {
                dOutRtlPMBMN = ambilRtlPMBMN.Endexecute(result);
                ambilRtlPMBMN.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPMBMN(dsRtlPMBMN), dOutRtlPMBMN);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPMBMN(SvcWasdalHapusTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlPMBMN(SvcWasdalHapusTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_HAPUS_TL.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLPMBMN = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_HAPUS_TL[i].IS_TB = (dataOut.SF_READ_WASDAL_HAPUS_TL[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLPMBMN.Add(dataOut.SF_READ_WASDAL_HAPUS_TL[i]);
            }

            gridRTLPMBMN.sbCariOnline.Enabled = !modeCari;
            gridRTLPMBMN.dsDataSource = dsgridRTLPMBMN;
            gridRTLPMBMN.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPMBMN.teNamaKolom.Text.Trim();
                string xDua = gridRTLPMBMN.teCari.Text.Trim();
                string xTiga = gridRTLPMBMN.fieldDicari;
                gridRTLPMBMN.gvGridSk.ClearColumnsFilter();
                gridRTLPMBMN.teNamaKolom.Text = xSatu;
                gridRTLPMBMN.teCari.Text = xDua;
                gridRTLPMBMN.fieldDicari = xTiga;
            }
            else
                gridRTLPMBMN.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PMBMN

        #region --++ Simpan Data PMBMN
        SvcWasdalHapusTdLanjutCud.OutputParameters dOutAmbilDataPMBMN;
        SvcWasdalHapusTdLanjutCud.execute_pttClient ambilDataPMBMN;

        private void simpanDataRtlPMBMN(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutCud.InputParameters parInp = new SvcWasdalHapusTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMBMNTambah.teNomorSk.Text.Trim() : formRTLPMBMNUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMBMNTambah.teNoBuktiLaksana.Text.Trim() : formRTLPMBMNUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMBMNTambah.cbJnsDokLaksana.SelectedText : formRTLPMBMNUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = Convert.ToString(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMBMNTambah.deTglBuktiLaksana.EditValue : formRTLPMBMNUbah.deTglBuktiLaksana.EditValue));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPMBMNTambah.teKetBukti.Text : formRTLPMBMNUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLPMBMNTambah.filePath) : konfigApp.convert2byte(formRTLPMBMNUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataPMBMN = new SvcWasdalHapusTdLanjutCud.execute_pttClient();
                ambilDataPMBMN.Beginexecute(parInp, new AsyncCallback(cudRtlPMBMN), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlPMBMN()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutCud.InputParameters parInp = new SvcWasdalHapusTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLPMBMN.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLPMBMN.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLPMBMN.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = gridRTLPMBMN.dataTerpilih.TGL_BUKTI_LAKSANA.ToString();
                parInp.P_KET = gridRTLPMBMN.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataPMBMN = new SvcWasdalHapusTdLanjutCud.execute_pttClient();
                ambilDataPMBMN.Beginexecute(parInp, new AsyncCallback(cudRtlPMBMN), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlPMBMN(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPMBMN = ambilDataPMBMN.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPMBMN(this.ubahDsRtlPMBMN), dOutAmbilDataPMBMN);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPMBMN(SvcWasdalHapusTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaPMBMN = 0;

        private void ubahDsRtlPMBMN(SvcWasdalHapusTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalHapusTdLanjutSelect.WASDALSROW_READ_WASDAL_HAPUS_TL dataPenyama = new SvcWasdalHapusTdLanjutSelect.WASDALSROW_READ_WASDAL_HAPUS_TL();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                //dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLPMBMNTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPMBMNTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPMBMNTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPMBMNTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPMBMNTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPMBMNTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPMBMNTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPMBMNTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPMBMNTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPMBMNTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPMBMNTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPMBMNTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPMBMNTambah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPMBMNTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPMBMNTambah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPMBMNTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPMBMNTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPMBMNTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLPMBMN == null ? 1 : dsgridRTLPMBMN.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLPMBMNTambah.teNomorSk.Text;
                        //dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPMBMNTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPMBMNTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        //dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPMBMNTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPMBMNTambah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPMBMNTambah.teUraianKeputusan.Text;
                        dsgridRTLPMBMN.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPMBMN.dataTerpilih = dataPenyama;
                            _keBerapaPMBMN = 1;
                            formRTLPMBMNTambah.gcDaftarAset.Enabled = true;
                            formRTLPMBMNTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPMBMNTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPMBMNTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPMBMNTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPMBMNTambah.sbCariPemohon.Enabled = false;
                            formRTLPMBMNTambah.sbRefresh.Enabled = true;
                            formRTLPMBMNTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPMBMNTambah.cePilihSemua.Enabled = true;
                            formRTLPMBMNTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPMBMNTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLPMBMN.IndexOf(gridRTLPMBMN.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLPMBMN.Remove(gridRTLPMBMN.dataTerpilih);
                            dsgridRTLPMBMN.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLPMBMNUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPMBMNUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPMBMNUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPMBMNUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPMBMNUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPMBMNUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPMBMNUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPMBMNUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPMBMNUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPMBMNUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPMBMNUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPMBMNUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPMBMNUbah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPMBMNUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLPMBMN.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLPMBMNUbah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPMBMNUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPMBMNUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPMBMNUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLPMBMN.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLPMBMN.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLPMBMNUbah.teNomorSk.Text;
                        //dataPenyama.STATUS_BMN = gridRTLPMBMN.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLPMBMN.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPMBMNUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPMBMNUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLPMBMN.dataTerpilih.TOT_BMN;
                        //dataPenyama.TOT_STATUS = gridRTLPMBMN.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLPMBMN.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLPMBMNUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPMBMNUbah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPMBMNUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLPMBMN.IndexOf(gridRTLPMBMN.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLPMBMN.Remove(gridRTLPMBMN.dataTerpilih);
                        dsgridRTLPMBMN.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLPMBMN.Remove(gridRTLPMBMN.dataTerpilih);
                        break;
                }
                gridRTLPMBMN.dsDataSource = dsgridRTLPMBMN;
                gridRTLPMBMN.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPMBMN(SvcWasdalHapusSkTLSelect.WASDALSROW_SK_WASDAL_HAPUS_TL _skTerpilih)
        {
            formRTLPMBMNTambah = new KES1.TL.PMBMN.ucRTLPMForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlPM = new SimpanDataRtl(simpanDataRtlPMBMN)
            };
            formRTLPMBMNTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLPMBMNTambah);
            formRTLPMBMNTambah.inisialisasiForm();
            setTombolRtlForm();
        }
        #endregion Simpan Data PSP BMN

        #region action button
        KES1.TL.PMBMN.frmPuSk formSkPMBMN;

        private void RkmTlPMBMNTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan15), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPMBMN = new KES1.TL.PMBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkPM = new PilihSkHapus(pilihSkPMBMN)
                };
                formSkPMBMN.ShowDialog();
            }
        }

        private void RkmTlPMBMNEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPMBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPMBMN.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLPMBMN.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlPMBMN();
                }
            }
        }

        private void RkmTlPMBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPMBMN.dataTerpilih != null)
            {
                if (formRTLPMBMNUbah == null)
                {
                    formRTLPMBMNUbah = new KES1.TL.PMBMN.ucRTLPMForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPM = new SimpanDataRtl(simpanDataRtlPMBMN)
                    };
                }
                formRTLPMBMNUbah.dataTerpilih = gridRTLPMBMN.dataTerpilih;
                setPanel(formRTLPMBMNUbah);
                formRTLPMBMNUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPMBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPMBMN.teNamaKolom.Text = "";
            gridRTLPMBMN.teCari.Text = "";
            gridRTLPMBMN.fieldDicari = "";
            gridRTLPMBMN.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPMBMN();
        }

        private void RkmTlPMBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPMBMN();
            }
        }

        private void RkmTlPMBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonHapus;
            konfigApp.kdPelayanan = "15";
            konfigApp.namaPelayanan = this.subMenuMonHapus;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPMBMN();
            modeCari = false;
            gridRTLPMBMN.teNamaKolom.Text = "";
            gridRTLPMBMN.teCari.Text = "";
            gridRTLPMBMN.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPMBMN();
        }

        private void RkmTlPMBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmTlPMBMN(string _strWhere, bool iniPMBMNodeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = iniPMBMNodeCari;
            getInitRkmTlPMBMN();
        }

        #endregion

        #region PBKSL

        KES1.TL.PBKSL.ucRTLPBKSLGrid gridRTLPBKSL;
        KES1.TL.PBKSL.ucRTLPBKSLForm formRTLPBKSLTambah;
        KES1.TL.PBKSL.ucRTLPBKSLForm formRTLPBKSLUbah;
        KES1.TL.PBKSL.ucRTLPBKSLForm formRTLPBKSLDetail;
        private ArrayList dsgridRTLPBKSL;
        SvcWasdalHapusTdLanjutSelect.OutputParameters dOutRtlPBKSL;
        SvcWasdalHapusTdLanjutSelect.execute_pttClient ambilRtlPBKSL;


        private void nbiTLPBKSL_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonHapusLain;
            konfigApp.kdPelayanan = "17";
            konfigApp.namaPelayanan = this.subMenuMonHapusLain;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPBKSL();
            modeCari = false;
            gridRTLPBKSL.teNamaKolom.Text = "";
            gridRTLPBKSL.teCari.Text = "";
            gridRTLPBKSL.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPBKSL();
        }



        private void setEventBtnTlPBKSL()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlPBKSLTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlPBKSLDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPBKSLHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPBKSLRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPBKSLMore);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPBKSLKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPBKSLTutup);
        }

        public void initGridRkmTlPBKSL()
        {

            if (gridRTLPBKSL == null)
            {
                gridRTLPBKSL = new KES1.TL.PBKSL.ucRTLPBKSLGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPBKSL),
                    detailDataGrid = new DetailDataGrid(RkmTlPBKSLDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlPBKSL();
            setPanel(gridRTLPBKSL);
        }

        #region --++ Ambil Data PBKSL
        private void getInitRkmTlPBKSL()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutSelect.InputParameters parInp = new SvcWasdalHapusTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlPBKSL = new SvcWasdalHapusTdLanjutSelect.execute_pttClient();
                ambilRtlPBKSL.Open();
                ambilRtlPBKSL.Beginexecute(parInp, new AsyncCallback(getRkmTlPBKSL), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlPBKSL(IAsyncResult result)
        {
            try
            {
                dOutRtlPBKSL = ambilRtlPBKSL.Endexecute(result);
                ambilRtlPBKSL.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPBKSL(dsRtlPBKSL), dOutRtlPBKSL);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPBKSL(SvcWasdalHapusTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlPBKSL(SvcWasdalHapusTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_HAPUS_TL.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLPBKSL = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_HAPUS_TL[i].IS_TB = (dataOut.SF_READ_WASDAL_HAPUS_TL[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLPBKSL.Add(dataOut.SF_READ_WASDAL_HAPUS_TL[i]);
            }

            gridRTLPBKSL.sbCariOnline.Enabled = !modeCari;
            gridRTLPBKSL.dsDataSource = dsgridRTLPBKSL;
            gridRTLPBKSL.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPBKSL.teNamaKolom.Text.Trim();
                string xDua = gridRTLPBKSL.teCari.Text.Trim();
                string xTiga = gridRTLPBKSL.fieldDicari;
                gridRTLPBKSL.gvGridSk.ClearColumnsFilter();
                gridRTLPBKSL.teNamaKolom.Text = xSatu;
                gridRTLPBKSL.teCari.Text = xDua;
                gridRTLPBKSL.fieldDicari = xTiga;
            }
            else
                gridRTLPBKSL.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PBKSL

        #region --++ Simpan Data PBKSL
        SvcWasdalHapusTdLanjutCud.OutputParameters dOutAmbilDataPBKSL;
        SvcWasdalHapusTdLanjutCud.execute_pttClient ambilDataPBKSL;

        private void simpanDataRtlPBKSL(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutCud.InputParameters parInp = new SvcWasdalHapusTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKSLTambah.teNomorSk.Text.Trim() : formRTLPBKSLUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKSLTambah.teNoBuktiLaksana.Text.Trim() : formRTLPBKSLUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKSLTambah.cbJnsDokLaksana.SelectedText : formRTLPBKSLUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = Convert.ToString(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKSLTambah.deTglBuktiLaksana.EditValue : formRTLPBKSLUbah.deTglBuktiLaksana.EditValue));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKSLTambah.teKetBukti.Text : formRTLPBKSLUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLPBKSLTambah.filePath) : konfigApp.convert2byte(formRTLPBKSLUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataPBKSL = new SvcWasdalHapusTdLanjutCud.execute_pttClient();
                ambilDataPBKSL.Beginexecute(parInp, new AsyncCallback(cudRtlPBKSL), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlPBKSL()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutCud.InputParameters parInp = new SvcWasdalHapusTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLPBKSL.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLPBKSL.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLPBKSL.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = gridRTLPBKSL.dataTerpilih.TGL_BUKTI_LAKSANA.ToString();
                parInp.P_KET = gridRTLPBKSL.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataPBKSL = new SvcWasdalHapusTdLanjutCud.execute_pttClient();
                ambilDataPBKSL.Beginexecute(parInp, new AsyncCallback(cudRtlPBKSL), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlPBKSL(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPBKSL = ambilDataPBKSL.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPBKSL(this.ubahDsRtlPBKSL), dOutAmbilDataPBKSL);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPBKSL(SvcWasdalHapusTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaPBKSL = 0;

        private void ubahDsRtlPBKSL(SvcWasdalHapusTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalHapusTdLanjutSelect.WASDALSROW_READ_WASDAL_HAPUS_TL dataPenyama = new SvcWasdalHapusTdLanjutSelect.WASDALSROW_READ_WASDAL_HAPUS_TL();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                //dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLPBKSLTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPBKSLTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPBKSLTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPBKSLTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPBKSLTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPBKSLTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPBKSLTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPBKSLTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPBKSLTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPBKSLTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKSLTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPBKSLTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKSLTambah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPBKSLTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPBKSLTambah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPBKSLTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPBKSLTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPBKSLTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLPBKSL == null ? 1 : dsgridRTLPBKSL.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLPBKSLTambah.teNomorSk.Text;
                        //dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPBKSLTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPBKSLTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        //dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPBKSLTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPBKSLTambah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPBKSLTambah.teUraianKeputusan.Text;
                        dsgridRTLPBKSL.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPBKSL.dataTerpilih = dataPenyama;
                            _keBerapaPBKSL = 1;
                            formRTLPBKSLTambah.gcDaftarAset.Enabled = true;
                            formRTLPBKSLTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPBKSLTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPBKSLTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPBKSLTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPBKSLTambah.sbCariPemohon.Enabled = false;
                            formRTLPBKSLTambah.sbRefresh.Enabled = true;
                            formRTLPBKSLTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPBKSLTambah.cePilihSemua.Enabled = true;
                            formRTLPBKSLTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPBKSLTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLPBKSL.IndexOf(gridRTLPBKSL.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLPBKSL.Remove(gridRTLPBKSL.dataTerpilih);
                            dsgridRTLPBKSL.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLPBKSLUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPBKSLUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPBKSLUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPBKSLUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPBKSLUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPBKSLUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPBKSLUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPBKSLUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPBKSLUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPBKSLUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKSLUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPBKSLUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKSLUbah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPBKSLUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLPBKSL.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLPBKSLUbah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPBKSLUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPBKSLUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPBKSLUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLPBKSL.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLPBKSL.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLPBKSLUbah.teNomorSk.Text;
                        //dataPenyama.STATUS_BMN = gridRTLPBKSL.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLPBKSL.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPBKSLUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPBKSLUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLPBKSL.dataTerpilih.TOT_BMN;
                        //dataPenyama.TOT_STATUS = gridRTLPBKSL.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLPBKSL.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLPBKSLUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPBKSLUbah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPBKSLUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLPBKSL.IndexOf(gridRTLPBKSL.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLPBKSL.Remove(gridRTLPBKSL.dataTerpilih);
                        dsgridRTLPBKSL.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLPBKSL.Remove(gridRTLPBKSL.dataTerpilih);
                        break;
                }
                gridRTLPBKSL.dsDataSource = dsgridRTLPBKSL;
                gridRTLPBKSL.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPBKSL(SvcWasdalHapusSkTLSelect.WASDALSROW_SK_WASDAL_HAPUS_TL _skTerpilih)
        {
            formRTLPBKSLTambah = new KES1.TL.PBKSL.ucRTLPBKSLForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlPM = new SimpanDataRtl(simpanDataRtlPBKSL)
            };
            formRTLPBKSLTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLPBKSLTambah);
            formRTLPBKSLTambah.inisialisasiForm();
            setTombolRtlForm();
        }
        #endregion Simpan Data PSP BMN

        #region action button
        KES1.TL.PBKSL.frmPuSk formSkPBKSL;

        private void RkmTlPBKSLTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan17), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPBKSL = new KES1.TL.PBKSL.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkPM = new PilihSkHapus(pilihSkPBKSL)
                };
                formSkPBKSL.ShowDialog();
            }
        }

        private void RkmTlPBKSLEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPBKSLHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPBKSL.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLPBKSL.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlPBKSL();
                }
            }
        }

        private void RkmTlPBKSLDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPBKSL.dataTerpilih != null)
            {
                if (formRTLPBKSLUbah == null)
                {
                    formRTLPBKSLUbah = new KES1.TL.PBKSL.ucRTLPBKSLForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPM = new SimpanDataRtl(simpanDataRtlPBKSL)
                    };
                }
                formRTLPBKSLUbah.dataTerpilih = gridRTLPBKSL.dataTerpilih;
                setPanel(formRTLPBKSLUbah);
                formRTLPBKSLUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPBKSLRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPBKSL.teNamaKolom.Text = "";
            gridRTLPBKSL.teCari.Text = "";
            gridRTLPBKSL.fieldDicari = "";
            gridRTLPBKSL.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPBKSL();
        }

        private void RkmTlPBKSLMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPBKSL();
            }
        }

        private void RkmTlPBKSLKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonHapusLain;
            konfigApp.kdPelayanan = "17";
            konfigApp.namaPelayanan = this.subMenuMonHapusLain;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPBKSL();
            modeCari = false;
            gridRTLPBKSL.teNamaKolom.Text = "";
            gridRTLPBKSL.teCari.Text = "";
            gridRTLPBKSL.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPBKSL();
        }

        private void RkmTlPBKSLTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmTlPBKSL(string _strWhere, bool iniPBKSLNodeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = iniPBKSLNodeCari;
            getInitRkmTlPBKSL();
        }

        #endregion

        #region PBKPP

        KES1.TL.PBKPP.ucRTLPBKPPGrid gridRTLPBKPP;
        KES1.TL.PBKPP.ucRTLPBKPPForm formRTLPBKPPTambah;
        KES1.TL.PBKPP.ucRTLPBKPPForm formRTLPBKPPUbah;
        KES1.TL.PBKPP.ucRTLPBKPPForm formRTLPBKPPDetail;
        private ArrayList dsgridRTLPBKPP;
        SvcWasdalHapusTdLanjutSelect.OutputParameters dOutRtlPBKPP;
        SvcWasdalHapusTdLanjutSelect.execute_pttClient ambilRtlPBKPP;


        private void nbiTLPBKPP_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPengadilan;
            konfigApp.kdPelayanan = "16";
            konfigApp.namaPelayanan = this.subMenuMonPengadilan;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPBKPP();
            modeCari = false;
            gridRTLPBKPP.teNamaKolom.Text = "";
            gridRTLPBKPP.teCari.Text = "";
            gridRTLPBKPP.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPBKPP();
        }



        private void setEventBtnTlPBKPP()
        {
            this.resetEventBtnTlWasdal();
            this.bbiRkmTlTambah.ItemClick += new ItemClickEventHandler(this.RkmTlPBKPPTambah);
            this.bbiRkmTlEdit.ItemClick += new ItemClickEventHandler(this.RkmTlPBKPPDetail);
            this.bbiRkmTlHapus.ItemClick += new ItemClickEventHandler(this.RkmTlPBKPPHapus);
            this.bbiRkmTlRefresh.ItemClick += new ItemClickEventHandler(this.RkmTlPBKPPRefresh);
            this.bbiRkmTlMore.ItemClick += new ItemClickEventHandler(this.RkmTlPBKPPMore);
            this.bbiRkmTlKembali.ItemClick += new ItemClickEventHandler(this.RkmTlPBKPPKembali);
            this.bbiRkmTlTutup.ItemClick += new ItemClickEventHandler(this.RkmTlPBKPPTutup);
        }

        public void initGridRkmTlPBKPP()
        {

            if (gridRTLPBKPP == null)
            {
                gridRTLPBKPP = new KES1.TL.PBKPP.ucRTLPBKPPGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmTlPBKPP),
                    detailDataGrid = new DetailDataGrid(RkmTlPBKPPDetail)
                };
            }
            setTombolRtlGrid();
            setEventBtnTlPBKPP();
            setPanel(gridRTLPBKPP);
        }

        #region --++ Ambil Data PBKPP
        private void getInitRkmTlPBKPP()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutSelect.InputParameters parInp = new SvcWasdalHapusTdLanjutSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRtlPBKPP = new SvcWasdalHapusTdLanjutSelect.execute_pttClient();
                ambilRtlPBKPP.Open();
                ambilRtlPBKPP.Beginexecute(parInp, new AsyncCallback(getRkmTlPBKPP), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmTlPBKPP(IAsyncResult result)
        {
            try
            {
                dOutRtlPBKPP = ambilRtlPBKPP.Endexecute(result);
                ambilRtlPBKPP.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRtlPBKPP(dsRtlPBKPP), dOutRtlPBKPP);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRtlPBKPP(SvcWasdalHapusTdLanjutSelect.OutputParameters dataOut);

        private void dsRtlPBKPP(SvcWasdalHapusTdLanjutSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_HAPUS_TL.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmTlMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmTlMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsgridRTLPBKPP = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_HAPUS_TL[i].IS_TB = (dataOut.SF_READ_WASDAL_HAPUS_TL[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsgridRTLPBKPP.Add(dataOut.SF_READ_WASDAL_HAPUS_TL[i]);
            }

            gridRTLPBKPP.sbCariOnline.Enabled = !modeCari;
            gridRTLPBKPP.dsDataSource = dsgridRTLPBKPP;
            gridRTLPBKPP.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRTLPBKPP.teNamaKolom.Text.Trim();
                string xDua = gridRTLPBKPP.teCari.Text.Trim();
                string xTiga = gridRTLPBKPP.fieldDicari;
                gridRTLPBKPP.gvGridSk.ClearColumnsFilter();
                gridRTLPBKPP.teNamaKolom.Text = xSatu;
                gridRTLPBKPP.teCari.Text = xDua;
                gridRTLPBKPP.fieldDicari = xTiga;
            }
            else
                gridRTLPBKPP.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PBKPP

        #region --++ Simpan Data PBKPP
        SvcWasdalHapusTdLanjutCud.OutputParameters dOutAmbilDataPBKPP;
        SvcWasdalHapusTdLanjutCud.execute_pttClient ambilDataPBKPP;

        private void simpanDataRtlPBKPP(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutCud.InputParameters parInp = new SvcWasdalHapusTdLanjutCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKPPTambah.teNomorSk.Text.Trim() : formRTLPBKPPUbah.teNomorSk.Text.Trim());
                parInp.P_NO_BUKTI_LAKSANA = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKPPTambah.teNoBuktiLaksana.Text.Trim() : formRTLPBKPPUbah.teNoBuktiLaksana.Text.Trim());
                parInp.P_JNS_BUKTI_LAKSANAAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKPPTambah.cbJnsDokLaksana.SelectedText : formRTLPBKPPUbah.cbJnsDokLaksana.SelectedText);
                parInp.P_TGL_BUKTI_LAKSANA = Convert.ToString(((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKPPTambah.deTglBuktiLaksana.EditValue : formRTLPBKPPUbah.deTglBuktiLaksana.EditValue));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRTLPBKPPTambah.teKetBukti.Text : formRTLPBKPPUbah.teKetBukti.Text);
                //parInp.P_FILE_BUKTI = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRTLPBKPPTambah.filePath) : konfigApp.convert2byte(formRTLPBKPPUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilDataPBKPP = new SvcWasdalHapusTdLanjutCud.execute_pttClient();
                ambilDataPBKPP.Beginexecute(parInp, new AsyncCallback(cudRtlPBKPP), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRtlPBKPP()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusTdLanjutCud.InputParameters parInp = new SvcWasdalHapusTdLanjutCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRTLPBKPP.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NO_BUKTI_LAKSANA = gridRTLPBKPP.dataTerpilih.NO_BUKTI_LAKSANA;
                parInp.P_JNS_BUKTI_LAKSANAAN = gridRTLPBKPP.dataTerpilih.JNS_BUKTI_LAKSANAAN;
                parInp.P_TGL_BUKTI_LAKSANA = gridRTLPBKPP.dataTerpilih.TGL_BUKTI_LAKSANA.ToString();
                parInp.P_KET = gridRTLPBKPP.dataTerpilih.KET;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilDataPBKPP = new SvcWasdalHapusTdLanjutCud.execute_pttClient();
                ambilDataPBKPP.Beginexecute(parInp, new AsyncCallback(cudRtlPBKPP), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRtlPBKPP(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPBKPP = ambilDataPBKPP.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRtlPBKPP(this.ubahDsRtlPBKPP), dOutAmbilDataPBKPP);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRtlPBKPP(SvcWasdalHapusTdLanjutCud.OutputParameters dataOutRtl);

        int _keBerapaPBKPP = 0;

        private void ubahDsRtlPBKPP(SvcWasdalHapusTdLanjutCud.OutputParameters dataOutRtl)
        {
            if (dataOutRtl.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalHapusTdLanjutSelect.WASDALSROW_READ_WASDAL_HAPUS_TL dataPenyama = new SvcWasdalHapusTdLanjutSelect.WASDALSROW_READ_WASDAL_HAPUS_TL();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_PEMOHON = konfigApp.idSatker;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                //dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRTLPBKPPTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPBKPPTambah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPBKPPTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPBKPPTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPBKPPTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPBKPPTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPBKPPTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPBKPPTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPBKPPTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPBKPPTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKPPTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPBKPPTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKPPTambah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPBKPPTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRTLPBKPPTambah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPBKPPTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPBKPPTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPBKPPTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsgridRTLPBKPP == null ? 1 : dsgridRTLPBKPP.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formRTLPBKPPTambah.teNomorSk.Text;
                        //dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPBKPPTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPBKPPTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        //dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRTLPBKPPTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPBKPPTambah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPBKPPTambah.teUraianKeputusan.Text;
                        dsgridRTLPBKPP.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRTLPBKPP.dataTerpilih = dataPenyama;
                            _keBerapaPBKPP = 1;
                            formRTLPBKPPTambah.gcDaftarAset.Enabled = true;
                            formRTLPBKPPTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRTLPBKPPTambah.teNomorSk.Properties.ReadOnly = true;
                            formRTLPBKPPTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRTLPBKPPTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRTLPBKPPTambah.sbCariPemohon.Enabled = false;
                            formRTLPBKPPTambah.sbRefresh.Enabled = true;
                            formRTLPBKPPTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRTLPBKPPTambah.cePilihSemua.Enabled = true;
                            formRTLPBKPPTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRTLPBKPPTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPpBmn.dataTerpilih = gridSkPpBmn.dataTerpilih;
                            }*/
                            _indeksData = dsgridRTLPBKPP.IndexOf(gridRTLPBKPP.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsgridRTLPBKPP.Remove(gridRTLPBKPP.dataTerpilih);
                            dsgridRTLPBKPP.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRTLPBKPPUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRTLPBKPPUbah.idPemohon;
                        dataPenyama.IS_TB = (formRTLPBKPPUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        //dataPenyama.JABATAN_TTD = formRTLPBKPPUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formRTLPBKPPUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRTLPBKPPUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRTLPBKPPUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRTLPBKPPUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRTLPBKPPUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRTLPBKPPUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKPPUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRTLPBKPPUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRTLPBKPPUbah.teNilaiPenetapan.Text);
                        //dataPenyama.NIP_PENANDATANGAN = formRTLPBKPPUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridRTLPBKPP.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formRTLPBKPPUbah.teNamaPemohon.Text;
                        //dataPenyama.NM_PENANDATANGAN = formRTLPBKPPUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formRTLPBKPPUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRTLPBKPPUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridRTLPBKPP.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridRTLPBKPP.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formRTLPBKPPUbah.teNomorSk.Text;
                        //dataPenyama.STATUS_BMN = gridRTLPBKPP.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridRTLPBKPP.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRTLPBKPPUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formRTLPBKPPUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridRTLPBKPP.dataTerpilih.TOT_BMN;
                        //dataPenyama.TOT_STATUS = gridRTLPBKPP.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridRTLPBKPP.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formRTLPBKPPUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRTLPBKPPUbah.teNamaPemohon.Text;
                        //dataPenyama.URAIAN_KEPUTUSAN = formRTLPBKPPUbah.teUraianKeputusan.Text;
                        _indeksData = dsgridRTLPBKPP.IndexOf(gridRTLPBKPP.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsgridRTLPBKPP.Remove(gridRTLPBKPP.dataTerpilih);
                        dsgridRTLPBKPP.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsgridRTLPBKPP.Remove(gridRTLPBKPP.dataTerpilih);
                        break;
                }
                gridRTLPBKPP.dsDataSource = dsgridRTLPBKPP;
                gridRTLPBKPP.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initgridSkPpBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPBKPP(SvcWasdalHapusSkTLSelect.WASDALSROW_SK_WASDAL_HAPUS_TL _skTerpilih)
        {
            formRTLPBKPPTambah = new KES1.TL.PBKPP.ucRTLPBKPPForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRtlPM = new SimpanDataRtl(simpanDataRtlPBKPP)
            };
            formRTLPBKPPTambah.skTerpilih = _skTerpilih;
            setPanel(formRTLPBKPPTambah);
            formRTLPBKPPTambah.inisialisasiForm();
            setTombolRtlForm();
        }
        #endregion Simpan Data PSP BMN

        #region action button
        KES1.TL.PBKPP.frmPuSk formSkPBKPP;

        private void RkmTlPBKPPTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Tindak Lanjut Baru \n{0}?", konfigApp.namaLayanan16), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPBKPP = new KES1.TL.PBKPP.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSkPM = new PilihSkHapus(pilihSkPBKPP)
                };
                formSkPBKPP.ShowDialog();
            }
        }

        private void RkmTlPBKPPEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmTlPBKPPHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPBKPP.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRTLPBKPP.dataTerpilih.NO_BUKTI_LAKSANA), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRtlPBKPP();
                }
            }
        }

        private void RkmTlPBKPPDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRTLPBKPP.dataTerpilih != null)
            {
                if (formRTLPBKPPUbah == null)
                {
                    formRTLPBKPPUbah = new KES1.TL.PBKPP.ucRTLPBKPPForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRtlPM = new SimpanDataRtl(simpanDataRtlPBKPP)
                    };
                }
                formRTLPBKPPUbah.dataTerpilih = gridRTLPBKPP.dataTerpilih;
                setPanel(formRTLPBKPPUbah);
                formRTLPBKPPUbah.inisialisasiForm();
                setTombolRtlForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmTlPBKPPRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRTLPBKPP.teNamaKolom.Text = "";
            gridRTLPBKPP.teCari.Text = "";
            gridRTLPBKPP.fieldDicari = "";
            gridRTLPBKPP.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmTlPBKPP();
        }

        private void RkmTlPBKPPMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmTlPBKPP();
            }
        }

        private void RkmTlPBKPPKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamTlWasdal;
            konfigApp.strSubMenu = this.subMenuMonPengadilan;
            konfigApp.kdPelayanan = "16";
            konfigApp.namaPelayanan = this.subMenuMonPengadilan;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmTindakLanjut.Visible = true;
            ribbon.SelectedPage = rpRkmTindakLanjut;
            initGridRkmTlPBKPP();
            modeCari = false;
            gridRTLPBKPP.teNamaKolom.Text = "";
            gridRTLPBKPP.teCari.Text = "";
            gridRTLPBKPP.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmTlPBKPP();
        }

        private void RkmTlPBKPPTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmTlPBKPP(string _strWhere, bool iniPBKPPNodeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = iniPBKPPNodeCari;
            getInitRkmTlPBKPP();
        }

        #endregion

        #endregion

        #region Report

        #region  Show Data Wasdal penggunaan

        public void getInitWasdalBMN()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNSelect.InputParameters inPar = new SvcWasdalPSPBMNSelect.InputParameters();
                inPar.P_MAX = 0;
                inPar.P_MAXSpecified = true;
                inPar.P_MIN = 0;
                inPar.P_MINSpecified = true;
                if (konfigApp.idGroup == 2) { inPar.STR_WHERE = "ID_SATKER = " + konfigApp.idSatker+" AND THN_ANG='" + tahunAnggaran+"'"; }
                inPar.P_COL = "IS_TB";
                inPar.P_SORT = "DESC";
                ambilWasdal = new SvcWasdalPSPBMNSelect.execute_pttClient();
                ambilWasdal.Beginexecute(inPar, new AsyncCallback(getDataWasdalBMN), null);
            }
            catch
            {
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getDataWasdalBMN(IAsyncResult result)
        {
            try
            {
                dataOutWasdal = ambilWasdal.Endexecute(result);
                ambilWasdal.Close();
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new ToggleProgressBar(this.fToggleProgressBar), "");
                this.Invoke(new SimpanDataWasdalBMN(this.simpanDataWasdalBMN), dataOutWasdal);
            }
            catch
            {
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new ToggleProgressBar(this.fToggleProgressBar), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void SimpanDataWasdalBMN(SvcWasdalPSPBMNSelect.OutputParameters dataOut);

        private void simpanDataWasdalBMN(SvcWasdalPSPBMNSelect.OutputParameters dataOut)
        {
            xrlapwasdal = new KES1.WL.PENGGUNAAN.xrLapWasdalBMN(); 
            //xrlapwasdal = new KSK.WL.PENGGUNAAN.penggunaan();
            int jmlData = dataOut.SF_ROW_WASDAL_PSP.Count();
            for (int i = 0; i < jmlData; i++)
            {
                if (dataOut.SF_ROW_WASDAL_PSP[i].IS_TB == "Y")
                {
                    dataOut.SF_ROW_WASDAL_PSP[i].IS_TB = "I. Tanah dan / atau bangunan";

                }
                else
                {
                    dataOut.SF_ROW_WASDAL_PSP[i].IS_TB = "II. Selain Tanah dan / atau bangunan 5)";
                }

                //if (dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "01" || dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "02" || dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "03" )
                //{
                //    dataOut.SF_ROW_WASDAL_PSP[i].NIP_PENANDATANGAN = "Ya";
                //    dataOut.SF_ROW_WASDAL_PSP[i].GUNA_WASDAL = "";
                //    dataOut.SF_ROW_WASDAL_PSP[i].NM_PHK_LAIN = "";
                //}
                //else if (dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "99")
                //{
                //    dataOut.SF_ROW_WASDAL_PSP[i].NIP_PENANDATANGAN = "";
                //    dataOut.SF_ROW_WASDAL_PSP[i].GUNA_WASDAL = "Ya";
                //    dataOut.SF_ROW_WASDAL_PSP[i].NM_PHK_LAIN = "";
                //}
                //else if (dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "04" || dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "05" || dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "06" || dataOut.SF_ROW_WASDAL_PSP[i].KD_STATUS == "07")
                //{
                //    dataOut.SF_ROW_WASDAL_PSP[i].NIP_PENANDATANGAN = "";
                //    dataOut.SF_ROW_WASDAL_PSP[i].GUNA_WASDAL = "";
                //    dataOut.SF_ROW_WASDAL_PSP[i].NM_PHK_LAIN = "Ya";
                //}
                dataOut.SF_ROW_WASDAL_PSP[i].TGL_CREATED = konfigApp.setDefaultDate(dataOut.SF_ROW_WASDAL_PSP[i].TGL_CREATED);
                dataOut.SF_ROW_WASDAL_PSP[i].TGL_SK = konfigApp.setDefaultDate(dataOut.SF_ROW_WASDAL_PSP[i].TGL_SK);
            }
            xrlapwasdal.bsLapWasdalBMN.DataSource = dataOutWasdal.SF_ROW_WASDAL_PSP;

            //xrlapwasdal.bsLapWasdalBMN.DataSource = dataOut.SF_ROW_WASDAL_PSP;
            Parameter param = new Parameter();
            param.Name = "tahunAnggaran";
            param.Type = typeof(System.String);
            //param.Value = konfigApp.tahunAnggaran;
            param.Value = tahunAnggaran;
            param.Description = "";
            param.Visible = false;

            Parameter param1 = new Parameter();
            param1.Name = "tanggal";
            param1.Type = typeof(System.String);
            param1.Value = konfigApp.setDefaultDate(DateTime.Now);
            param1.Description = "";
            param1.Visible = false;
            //AppPengguna.KSK.WL.PSPBMN.LP.xrLapWasdalBMN xrlapwasdalbmn = new AppPengguna.KSK.WL.PSPBMN.LP.xrLapWasdalBMN();

            xrlapwasdal.Parameters.Add(param);
            //xrlapwasdal.ShowPreviewDialog();
            #region setting margin, paperkind
            DevExpress.XtraPrinting.Preview.PrintPreviewFormEx form = new DevExpress.XtraPrinting.Preview.PrintPreviewFormEx();
            xrlapwasdal.PaperKind = System.Drawing.Printing.PaperKind.A4; //paperkind
            xrlapwasdal.Margins = new System.Drawing.Printing.Margins(75, 75, 75, 0); //margin
            form.PrintingSystem = xrlapwasdal.PrintingSystem;
            xrlapwasdal.CreateDocument();
            form.PrintingSystem.ExecCommand(DevExpress.XtraPrinting.PrintingSystemCommand.Scale, new object[] { 1 }); //autofit
            form.ShowDialog();
            #endregion
        }

        #endregion

        #region Init Data Lap Manfaat
        private void GetIniLapManfaat()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcLapWasdalManfaat.InputParameters parInp = new SvcLapWasdalManfaat.InputParameters();

                if (dataInisial == true)
                {
                    this.currentMaks = konfigApp.dataAkhir;
                    this.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    this.currentMin = this.currentMaks + 1;
                    this.currentMaks = this.currentMaks + konfigApp.dataAkhir;
                }

                parInp.P_MAX = this.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = this.currentMin;
                parInp.P_MINSpecified = true;
                parInp.STR_WHERE = "ID_ESELON1 = " + konfigApp.idEselon1+" AND THN_ANG='" + tahunAnggaran+"'";
                parInp.P_COL = "KD_BRG,NUP";
                parInp.P_SORT = "ASC";
                parInp.P_COUNT = "n";
                svcLapWasdalManfaatSelect = new SvcLapWasdalManfaat.execute_pttClient();
                svcLapWasdalManfaatSelect.Beginexecute(parInp, new AsyncCallback(getDataLapManfaat), null);
            }
            catch
            {
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new ToggleProgressBar(this.fToggleProgressBar), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getDataLapManfaat(IAsyncResult result)
        {
            try
            {
                outLapWasdalManfaatSelect = svcLapWasdalManfaatSelect.Endexecute(result);
                svcLapWasdalManfaatSelect.Close();
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new ToggleProgressBar(this.fToggleProgressBar), "");
                this.Invoke(new LoadDataLapManfaat(this.loadDataLapManfaat), outLapWasdalManfaatSelect);
            }
            catch
            {
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new ToggleProgressBar(this.fToggleProgressBar), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void LoadDataLapManfaat(SvcLapWasdalManfaat.OutputParameters dataOut);

        private void loadDataLapManfaat(SvcLapWasdalManfaat.OutputParameters dataOut)
        {
            ReportPrintTool pt;
            int jmlData = dataOut.SF_LAP_WASDAL_MANFAAT_SK.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                this.bbiMWasdalMore.Enabled = true;
            }
            else
            {
                if (this.modeLoadData == "normal")
                {
                    this.masihAdaData = false;
                    this.bbiMWasdalMore.Enabled = false;
                }
                else if (this.modeLoadData == "cari")
                {
                    this.masihAdaData = true;
                }


            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_LAP_WASDAL_MANFAAT_SK[i].TGL_SETOR = konfigApp.setDefaultDate(dataOut.SF_LAP_WASDAL_MANFAAT_SK[i].TGL_SETOR);
                dataOut.SF_LAP_WASDAL_MANFAAT_SK[i].TGL_SK = konfigApp.setDefaultDate(dataOut.SF_LAP_WASDAL_MANFAAT_SK[i].TGL_SK);

            }

            KES1.WL.PEMANFAATAN.xrPemanfaatanBMN xrpemanfaatanbmn = new KES1.WL.PEMANFAATAN.xrPemanfaatanBMN();
            //KSK.WL.PEMANFAATAN.pemanfaatan xrpemanfaatanbmn = new KSK.WL.PEMANFAATAN.pemanfaatan();
            xrpemanfaatanbmn.bsLapWasdalBMN.DataSource = dataOut.SF_LAP_WASDAL_MANFAAT_SK;
            pt = new ReportPrintTool(xrpemanfaatanbmn);
            pt.AutoShowParametersPanel = true;


            Parameter param = new Parameter();
            param.Name = "tahunAnggaran";
            param.Type = typeof(System.String);
            param.Value = tahunAnggaran;
            param.Description = "";
            param.Visible = false;

            //pt.ShowPreviewDialog();
            #region setting margin, paperkind
            DevExpress.XtraPrinting.Preview.PrintPreviewFormEx form = new DevExpress.XtraPrinting.Preview.PrintPreviewFormEx();
            xrpemanfaatanbmn.PaperKind = System.Drawing.Printing.PaperKind.A4; //paperkind
            xrpemanfaatanbmn.Margins = new System.Drawing.Printing.Margins(75, 75, 75, 0); //margin
            form.PrintingSystem = xrpemanfaatanbmn.PrintingSystem;
            xrpemanfaatanbmn.CreateDocument();
            form.PrintingSystem.ExecCommand(DevExpress.XtraPrinting.PrintingSystemCommand.Scale, new object[] { 1 }); //autofit
            form.ShowDialog();
            #endregion
        }
        #endregion

        #region Init Data Lap Pemindahtanganan
        //KSK.WL.PEMINDAHTANGANAN.xrPemindahtangananBMN xrpemindahtangananBMN;
        private void GetIniLapPemindahtanganan()
        {
            try
            {
                Thread mythread = new Thread(new ThreadStart(ShowProgresBar));
                mythread.Start();
                SvcLapPemindahTanganan.InputParameters parInp = new SvcLapPemindahTanganan.InputParameters();

                parInp.P_MAX = 20;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = 1;
                parInp.P_MINSpecified = true;
                parInp.STR_WHERE = "ID_ESELON1 = " + konfigApp.idEselon1+" AND THN_ANG='" + tahunAnggaran+"'";
                parInp.P_COL = "ID_SATKER";
                parInp.P_SORT = "DESC";
                parInp.P_COUNT = "n";
                svcLapPemindahtanganan = new SvcLapPemindahTanganan.execute_pttClient();
                svcLapPemindahtanganan.Beginexecute(parInp, new AsyncCallback(getDataLapPemindahtanganan), null);
            }
            catch
            {
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getDataLapPemindahtanganan(IAsyncResult result)
        {
            try
            {
                outLapPemindahtanganan = svcLapPemindahtanganan.Endexecute(result);
                svcLapPemindahtanganan.Close();
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new LoadDataLapPemindahtanganan(this.loadDataLapPemindahtanganan), outLapPemindahtanganan);
            }
            catch
            {
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void LoadDataLapPemindahtanganan(SvcLapPemindahTanganan.OutputParameters dataOut);

        private void loadDataLapPemindahtanganan(SvcLapPemindahTanganan.OutputParameters dataOut)
        {
            ReportPrintTool pt;
            int jmlData = dataOut.SF_LAP_WASDAL_PT_SK.Count();

            for (int i = 0; i <= jmlData - 1; i++)
            {
                dataOut.SF_LAP_WASDAL_PT_SK[i].TGL_SETOR = konfigApp.setDefaultDate(dataOut.SF_LAP_WASDAL_PT_SK[i].TGL_SETOR);
                dataOut.SF_LAP_WASDAL_PT_SK[i].TGL_SK = konfigApp.setDefaultDate(dataOut.SF_LAP_WASDAL_PT_SK[i].TGL_SK);
            }

            xrPemindahtangananBMN xrpemindahtangananBMN = new xrPemindahtangananBMN();
            xrpemindahtangananBMN.bsLapWasdalBMN.DataSource = dataOut.SF_LAP_WASDAL_PT_SK;


            #region setting margin, paperkind
            DevExpress.XtraPrinting.Preview.PrintPreviewFormEx form = new DevExpress.XtraPrinting.Preview.PrintPreviewFormEx();
            xrpemindahtangananBMN.PaperKind = System.Drawing.Printing.PaperKind.A4; //paperkind
            xrpemindahtangananBMN.Margins = new System.Drawing.Printing.Margins(75, 75, 75, 0); //margin
            form.PrintingSystem = xrpemindahtangananBMN.PrintingSystem;
            xrpemindahtangananBMN.CreateDocument();
            form.PrintingSystem.ExecCommand(DevExpress.XtraPrinting.PrintingSystemCommand.Scale, new object[] { 1 }); //autofit
            form.ShowDialog();
            #endregion
            fToggleProgressBar("stop");
        }
        #endregion

        #region Init Data Lap Penghapusan
        //KSK.WL.PEMINDAHTANGANAN.xrPemindahtangananBMN xrpemindahtangananBMN;
        private void GetIniLapPenghapusan()
        {
            try
            {
                Thread mythread = new Thread(new ThreadStart(ShowProgresBar));
                mythread.Start();
                SvcWasdalHapusLapWasdalMSK.InputParameters parInp = new SvcWasdalHapusLapWasdalMSK.InputParameters();

                parInp.P_MAX = 0;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = 0;
                parInp.P_MINSpecified = true;
                parInp.STR_WHERE = "ID_ESELON1 = " + konfigApp.idEselon1+" AND THN_ANG='" + tahunAnggaran+"'";
                parInp.P_COL = "KD_BRG,NUP";
                parInp.P_SORT = "ASC";
                parInp.P_COUNT = "n";
                svcLapPenghapusan = new SvcWasdalHapusLapWasdalMSK.lapWasdalMSK_pttClient();
                svcLapPenghapusan.Beginexecute(parInp, new AsyncCallback(getDataLapPenghapusan), null);
            }
            catch
            {
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getDataLapPenghapusan(IAsyncResult result)
        {
            try
            {
                outLapPenghapusan = svcLapPenghapusan.Endexecute(result);
                svcLapPenghapusan.Close();
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new LoadDataLapPenghapusan(this.loadDataLapPenghapusan), outLapPenghapusan);
            }
            catch
            {
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void LoadDataLapPenghapusan(SvcWasdalHapusLapWasdalMSK.OutputParameters dataOut);

        private void loadDataLapPenghapusan(SvcWasdalHapusLapWasdalMSK.OutputParameters dataOut)
        {
            ReportPrintTool pt;
            int jmlData = dataOut.SF_LAP_WASDAL_HAPUS_SK.Count();

            for (int i = 0; i <= jmlData - 1; i++)
            {
                dataOut.SF_LAP_WASDAL_HAPUS_SK[i].TGL_SK = konfigApp.setDefaultDate(dataOut.SF_LAP_WASDAL_HAPUS_SK[i].TGL_SK);
            }

            xrPenghapusanBMN xrpemindahtangananBMN = new xrPenghapusanBMN();
            xrpemindahtangananBMN.bsLapWasdalBMN.DataSource = dataOut.SF_LAP_WASDAL_HAPUS_SK;
            pt = new ReportPrintTool(xrpemindahtangananBMN);
            pt.AutoShowParametersPanel = true;
            pt.ShowPreviewDialog();
            fToggleProgressBar("stop");
        }
        #endregion

        #region Init Lap Data Penertiban
        private void getInitLapPenertiban()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcMonPenertibanKoEsKl.InputParameters parInp = new SvcMonPenertibanKoEsKl.InputParameters();
                parInp.P_COL = "";
                parInp.P_MAX = 0;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = 0;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                //parInp.P_COUNT = "N";
                parInp.STR_WHERE = String.Format("ID_ESELON1 = {0}", konfigApp.idEselon1, this.strCari);  //ini diganti jadi gini
                ambilPenertiban = new SvcMonPenertibanKoEsKl.selectMonPenertibanKorEsKl_pttClient();
                ambilPenertiban.Open();
                ambilPenertiban.Beginexecute(parInp, new AsyncCallback(getLapPenertiban), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getLapPenertiban(IAsyncResult result)
        {
            try
            {
                dOutPenertiban = ambilPenertiban.Endexecute(result);    //dari sini langsung ke catch
                ambilPenertiban.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsLapPenertiban(dsLapPenertiban), dOutPenertiban);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);   //disini
            }
        }

        private delegate void DsLapPenertiban(SvcMonPenertibanKoEsKl.OutputParameters dataOut);

        private void dsLapPenertiban(SvcMonPenertibanKoEsKl.OutputParameters dataOut)
        {
            ReportPrintTool pt;
            xrPenertiban xrTertib = new xrPenertiban();
            xrTertib.bsLapPenertiban.DataSource = dataOut.SF_MON_KOR_ES_KL_PENERTIBAN;
            #region setting margin, paperkind
            DevExpress.XtraPrinting.Preview.PrintPreviewFormEx form = new DevExpress.XtraPrinting.Preview.PrintPreviewFormEx();
            xrTertib.PaperKind = System.Drawing.Printing.PaperKind.A4; //paperkind
            xrTertib.Margins = new System.Drawing.Printing.Margins(75, 75, 75, 0); //margin
            form.PrintingSystem = xrTertib.PrintingSystem;
            xrTertib.CreateDocument();
            form.PrintingSystem.ExecCommand(DevExpress.XtraPrinting.PrintingSystemCommand.Scale, new object[] { 1 }); //autofit
            form.ShowDialog();
            #endregion
            fToggleProgressBar("stop");
        }

        #endregion
        #endregion

        #region LAPORAN WASDAL
        public KES1.WL.ucLapWasdal lapWasdal;

        #region PENGGUNAAN BMN


        private void initGridMonWlGunaBMN()
        {
            inisialisasiForm();

            this.setEventButtonMWasdalGuna();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonGuna);

            this.lapWasdal = new KES1.WL.ucLapWasdal(this);
            lapWasdal.strKdPelayanan = "AND ((KD_PELAYANAN = '02') OR (KD_PELAYANAN = '03') OR (KD_PELAYANAN = '04') OR (KD_PELAYANAN = '05'))";
            lapWasdal.namaModul = "Penggunaan BMN";
            this.setPanel(this.lapWasdal);
            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void setEventButtonMWasdalGuna()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlGunaRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlGunaMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlGunaPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlGunaTutup);
        }

        private void nbiMonitoringWasdalGunaBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlGunaBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Always;
        }

        private void mWlGunaRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlGunaBMN();
        }

        private void mWlGunaMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (lapWasdal.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (lapWasdal.penggunaan1.modeLoadData == "normal" || lapWasdal.penggunaan1.modeLoadData == "cari")
                    lapWasdal.penggunaan1.dataInisial = false;

                lapWasdal.penggunaan1.getTindakLanjut();
            }
        }

        private void mWlGunaPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            puParameterLaporan puParam = new puParameterLaporan();
            puParam.ShowDialog();
            tahunAnggaran = puParam.thnAng;
            getInitWasdalBMN();
            //lapWasdal.print("penggunaan");
        }

        private void mWlGunaTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }


        #endregion

        #region PEMANFAATAN BMN

        private void initGridMonWlManfaatBMN()
        {
            this.setEventButtonMWasdalManfaat();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonManfaat);

            this.lapWasdal = new KES1.WL.ucLapWasdal(this);
            lapWasdal.strKdPelayanan = "AND ((KD_PELAYANAN = '06')OR(KD_PELAYANAN = '07')OR(KD_PELAYANAN = '08')OR(KD_PELAYANAN = '09')OR(KD_PELAYANAN = '10'))";
            lapWasdal.namaModul = "Pemanfaatan BMN";
            this.setPanel(this.lapWasdal);
            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void setEventButtonMWasdalManfaat()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlManfaatRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlManfaatMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlManfaatPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlManfaatTutup);
        }

        private void nbiMonitoringWasdalManfaatBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlManfaatBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Always;
        }

        private void mWlManfaatRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlManfaatBMN();
        }

        private void mWlManfaatMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region Manfaat
            if (lapWasdal.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (lapWasdal.pemanfaatan1.modeLoadData == "normal" || lapWasdal.pemanfaatan1.modeLoadData == "cari")
                    lapWasdal.pemanfaatan1.dataInisial = false;

                lapWasdal.pemanfaatan1.getTindakLanjut();
            }
            #endregion
        }

        KES1.WL.PEMANFAATAN.xrPemanfaatanBMN xrpemanfaatanbmn;

        private void mWlManfaatPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            puParameterLaporan puParam = new puParameterLaporan();
            puParam.ShowDialog();
            tahunAnggaran = puParam.thnAng;
            GetIniLapManfaat();
            //lapWasdal.print("pemanfaatan");
        }

        private void mWlManfaatTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }


        #endregion

        #region PEMINDAHTANGANAN BMN
        private void initGridMonWlPndhTgnBMN()
        {
            inisialisasiForm();

            this.setEventButtonMWasdalPndhTgn();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonPindahTgn);

            this.lapWasdal = new KES1.WL.ucLapWasdal(this);
            lapWasdal.strKdPelayanan = "AND ((KD_PELAYANAN = '11')OR(KD_PELAYANAN = '12')OR(KD_PELAYANAN = '13')OR(KD_PELAYANAN = '14'))";
            lapWasdal.namaModul = "Pemindatanganan BMN";
            this.setPanel(this.lapWasdal);
            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }


        private void setEventButtonMWasdalPndhTgn()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPndhTgnRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPndhTgnMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPndhTgnPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPndhTgnTutup);
        }

        private void nbiMonitoringWasdalPndhTgnBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlPndhTgnBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Always;
        }

        private void mWlPndhTgnRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPndhTgnBMN();
        }

        private void mWlPndhTgnMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region Pemindahtangan
            if (lapWasdal.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (lapWasdal.pemindahtanganan1.modeLoadData == "normal" || lapWasdal.pemindahtanganan1.modeLoadData == "cari")
                    lapWasdal.pemindahtanganan1.dataInisial = false;

                lapWasdal.pemindahtanganan1.getTindakLanjut();
            }

            #endregion
        }

        private void mWlPndhTgnPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            puParameterLaporan puParam = new puParameterLaporan();
            puParam.ShowDialog();
            tahunAnggaran = puParam.thnAng;
            GetIniLapPemindahtanganan();
        }

        private void mWlPndhTgnTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        #region PENGHAPUSAN BMN
        private void initGridMonWlHapusBMN()
        {
            inisialisasiForm();

            this.setEventButtonMWasdalHapus();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonHapus);

            this.lapWasdal = new KES1.WL.ucLapWasdal(this);
            lapWasdal.strKdPelayanan = "AND ((KD_PELAYANAN = '15')OR(KD_PELAYANAN = '16')OR(KD_PELAYANAN = '17'))";
            lapWasdal.namaModul = "Penghapusan BMN";
            this.setPanel(this.lapWasdal);
            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }

        private void setEventButtonMWasdalHapus()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlHapusRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlHapusMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlHapusPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlHapusTutup);
        }

        private void nbiMonitoringWasdalHapusBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            this.initGridMonWlHapusBMN();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Always;
        }

        private void mWlHapusRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlHapusBMN();
        }

        private void mWlHapusMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            #region Penghapusan
            if (lapWasdal.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (lapWasdal.penghapusan1.modeLoadData == "normal" || lapWasdal.penghapusan1.modeLoadData == "cari")
                    lapWasdal.penghapusan1.dataInisial = false;

                lapWasdal.penghapusan1.getTindakLanjut();
            }
            #endregion
        }

        private void mWlHapusPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            puParameterLaporan puParam = new puParameterLaporan();
            puParam.ShowDialog();
            tahunAnggaran = puParam.thnAng;
            GetIniLapPenghapusan();
        }

        private void mWlHapusTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        #endregion

        #region MONITORING PNBP

        KES1.PNBP.ucGridPnbp gridPnbp;
        ArrayList dsGridLaporanPnbp;
        private void setTombolPnbpGrid()
        {
            bbiPnbpRefresh.Enabled = true;
            bbiPnbpMore.Enabled = false;
        }
        private void resetEventTombolPnbp()
        {
            konfigApp.RemoveClickEvent(bbiPnbpRefresh);
            konfigApp.RemoveClickEvent(bbiPnbpMore);
            konfigApp.RemoveClickEvent(bbiPnbpBack);
        }

        #region PNBP per BMN
        private void setEventTombolLaporanPnbp()
        {
            resetEventTombolPnbp();
            bbiPnbpRefresh.ItemClick += new ItemClickEventHandler(bbiLapPnbpRefreshKlik);
            bbiPnbpMore.ItemClick += new ItemClickEventHandler(bbiLapPnbpMoreDataKlik);
            bbiPnbpKeluar.ItemClick += new ItemClickEventHandler(bbiPnbpTutup_ItemClick);
            bbiPnbpBack.ItemClick += new ItemClickEventHandler(bbiPnbpKeluarKlik);
            rpPnbp.Text = "Laporan PNBP";
        }

        private void initGridLapPnbp()
        {
            if (gridPnbp == null)
            {
                gridPnbp = new KES1.PNBP.ucGridPnbp();
                gridPnbp.cariDataOnline = new CariDataOnline(setCariDataLapPnbp);
            }
            setTombolPnbpGrid();
            setEventTombolLaporanPnbp();
            setPanel(gridPnbp);
        }

        private void bbiLapPnbpRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridPnbp.teNamaKolom.Text = "";
            gridPnbp.teCari.Text = "";
            gridPnbp.fieldDicari = "";
            gridPnbp.dataInisial = true;
            this.dataInisial = true;
            this.getInitLaporanPnbp();
        }

        private void bbiLapPnbpMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitLaporanPnbp();
            }
        }

        private void bbiExportExcel_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            PrintableComponentLink componenlink = new PrintableComponentLink(new PrintingSystem());
            componenlink.Component = gridPnbp.gcPnbp;
            componenlink.CreateDocument();
            PrintTool pt = new PrintTool(componenlink.PrintingSystemBase);
            pt.ShowRibbonPreview();
        }

        private void bbiPnbpKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            Dispose();
            //inisialisasiForm();
        }

        private void nbiMonitoringPnbp_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Laporan PNBP";
            konfigApp.strSubMenu = "Laporan PNBP";
            this.Enabled = false;
            this.inisialisasiForm();
            rpPnbp.Visible = true;
            rpPnbp.Text = "Laporan PNBP";

            //rpTindakLanjut.Visible = true;
            //rpTindakLanjut.Text = "Laporan PNBP";
            ribbon.SelectedPage = rpPnbp;
            initGridLapPnbp();
            modeCari = false;
            gridPnbp.teNamaKolom.Text = "";
            gridPnbp.teCari.Text = "";
            gridPnbp.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitLaporanPnbp();
        }
        private void bbiPnbpTutup_ItemClick(object sender, ItemClickEventArgs e)
        {
            //inisialisasiForm();
            Application.Exit();
        }

        #region --++ Ambil Data
        SvcWasdalManfaatMonPnbp.call_pttClient ambilDataLapPnbp;
        SvcWasdalManfaatMonPnbp.OutputParameters dOutLapPnbp;

        private void getInitLaporanPnbp()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatMonPnbp.InputParameters parInp = new SvcWasdalManfaatMonPnbp.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE =  " ID_ESELON1 = "+konfigApp.idEselon1+" "+this.strCari;
                ambilDataLapPnbp = new SvcWasdalManfaatMonPnbp.call_pttClient();
                ambilDataLapPnbp.Open();
                ambilDataLapPnbp.Beginexecute(parInp, new AsyncCallback(getLaporanPnbp), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getLaporanPnbp(IAsyncResult result)
        {
            try
            {
                dOutLapPnbp = ambilDataLapPnbp.Endexecute(result);
                ambilDataLapPnbp.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsLaporanPnbp(dsLaporanPnbp), dOutLapPnbp);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsLaporanPnbp(SvcWasdalManfaatMonPnbp.OutputParameters dataOut);

        private void dsLaporanPnbp(SvcWasdalManfaatMonPnbp.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_MON_PNBP.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_MON_PNBP[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiPnbpMore.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
                this.masihAdaData = false;
                bbiPnbpMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridLaporanPnbp = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                //dataOut.SF_MON_PNBP[i].TGL_BUKTI_LAKSANA = (dataOut.SF_MON_PNBP[i].TGL_BUKTI_LAKSANA.ToString() == "11/11/1000" ? "-" : dataOut.SF_MON_PNBP[i].TGL_BUKTI_LAKSANA);
                //dataOut.SF_MON_PNBP[i].TGL_SETOR = (dataOut.SF_MON_PNBP[i].TGL_SETOR.ToString() == "11/11/1000" ? "" : dataOut.SF_MON_PNBP[i].TGL_SETOR);
                //dataOut.SF_MON_PNBP[i].TGL_SK = (dataOut.SF_MON_PNBP[i].TGL_SK.ToString() == "11/11/1000" ? "" : dataOut.SF_MON_PNBP[i].TGL_SK);
                //dataOut.SF_MON_PNBP[i].TGL_TRANSAKSI = (dataOut.SF_MON_PNBP[i].TGL_TRANSAKSI.ToString() == "11/11/1000" ? "" : dataOut.SF_MON_PNBP[i].TGL_TRANSAKSI);
                dsGridLaporanPnbp.Add(dataOut.SF_MON_PNBP[i]);
            }

            gridPnbp.sbCariOnline.Enabled = !modeCari;
            gridPnbp.dsDataSource = dsGridLaporanPnbp;
            gridPnbp.displayData();
            if (modeCari == true)
            {
                string xSatu = gridPnbp.teNamaKolom.Text.Trim();
                string xDua = gridPnbp.teCari.Text.Trim();
                string xTiga = gridPnbp.fieldDicari;
                gridPnbp.gvPnbp.ClearColumnsFilter();
                gridPnbp.teNamaKolom.Text = xSatu;
                gridPnbp.teCari.Text = xDua;
                gridPnbp.fieldDicari = xTiga;
            }
            else
                gridPnbp.gvPnbp.ClearColumnsFilter();
            gridPnbp.labelTotData.Text = "";
            gridPnbp.labelTotData.Text = "Menampilkan " + jmlCurrent + " dari total " + totalData + " data";
        }

        private void setCariDataLapPnbp(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitLaporanPnbp();
        }
        #endregion

        #endregion

        #region PNBP perSSBP

        KES1.MONPNBP.SWBMN.ucSewaBmnGrid gridPnbpSSBP;
        ArrayList dsGridMonPnbpSSBP;

        private void nbiMonPnbpSSBP_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Monitoring PNBP";
            konfigApp.strSubMenu = " per SSBP";
            this.Enabled = false;
            this.inisialisasiForm();
            rpPnbp.Visible = true;
            rpPnbp.Text = "Monitoring PNBP per SSBP";

            ribbon.SelectedPage = rpPnbp;
            initGridMonPnbpSSBP();
            modeCari = false;
            gridPnbpSSBP.teNamaKolom.Text = "";
            gridPnbpSSBP.teCari.Text = "";
            gridPnbpSSBP.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitMonPnbpSSBP();
        }

        private void setEventTombolMonPnbpSSBP()
        {
            resetEventTombolPnbp();
            bbiPnbpRefresh.ItemClick += new ItemClickEventHandler(bbiMonPnbpSSBPRefreshKlik);
            bbiPnbpMore.ItemClick += new ItemClickEventHandler(bbiMonPnbpSSBPMoreDataKlik);
            bbiPnbpKeluar.ItemClick += new ItemClickEventHandler(bbiPnbpTutup_ItemClick);
            bbiPnbpBack.ItemClick += new ItemClickEventHandler(bbiMonPnbpSSBPKeluarKlik);
            rpPnbp.Text = "Monitoring PNBP per SSBP";
        }

        private void initGridMonPnbpSSBP()
        {
            if (gridPnbpSSBP == null)
            {
                gridPnbpSSBP = new KES1.MONPNBP.SWBMN.ucSewaBmnGrid();
                gridPnbpSSBP.cariDataOnline = new CariDataOnline(setCariDataMonPnbpSSBP);
            }
            setTombolPnbpGrid();
            setEventTombolLaporanPnbp();
            setPanel(gridPnbpSSBP);
        }

        #region ACTION BUTTON
        private void bbiMonPnbpSSBPRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridPnbpSSBP.teNamaKolom.Text = "";
            gridPnbpSSBP.teCari.Text = "";
            gridPnbpSSBP.fieldDicari = "";
            gridPnbpSSBP.dataInisial = true;
            this.dataInisial = true;
            this.getInitMonPnbpSSBP();
        }

        private void bbiMonPnbpSSBPMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitMonPnbpSSBP();
            }
        }

        private void bbiSSBPExportExcel_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            PrintableComponentLink componenlink = new PrintableComponentLink(new PrintingSystem());
            componenlink.Component = gridPnbpSSBP.gcGridSk;
            componenlink.CreateDocument();
            PrintTool pt = new PrintTool(componenlink.PrintingSystemBase);
            pt.ShowRibbonPreview();
        }

        private void bbiMonPnbpSSBPKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //inisialisasiForm();
            Dispose();
        }
        #endregion

        #region --++ Ambil Data
        SvcWasdalMonPnbpSsbp.call_pttClient ambilDataMonPnbpSSBP;
        SvcWasdalMonPnbpSsbp.OutputParameters dOutMonPnbpSSBP;

        private void getInitMonPnbpSSBP()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalMonPnbpSsbp.InputParameters parInp = new SvcWasdalMonPnbpSsbp.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format(" ID_SATKER = {0} {1}", konfigApp.idSatker, this.strCari);
                parInp.STR_WHERE = String.Format(" NTPN IS NOT NULL AND ID_PEMOHON = {0} {1}", konfigApp.idEselon1, this.strCari);
                ambilDataMonPnbpSSBP = new SvcWasdalMonPnbpSsbp.call_pttClient();
                ambilDataMonPnbpSSBP.Open();
                ambilDataMonPnbpSSBP.Beginexecute(parInp, new AsyncCallback(getMonPnbpSSBP), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getMonPnbpSSBP(IAsyncResult result)
        {
            try
            {
                dOutMonPnbpSSBP = ambilDataMonPnbpSSBP.Endexecute(result);
                ambilDataMonPnbpSSBP.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsMonPnbpSSBP(dsMonPnbpSSBP), dOutMonPnbpSSBP);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsMonPnbpSSBP(SvcWasdalMonPnbpSsbp.OutputParameters dataOut);

        private void dsMonPnbpSSBP(SvcWasdalMonPnbpSsbp.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_MON_WASDAL_PNBP_SSBP.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_MON_WASDAL_PNBP_SSBP[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiPnbpMore.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
                this.masihAdaData = false;
                bbiPnbpMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridMonPnbpSSBP = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                //dataOut.SF_MON_PNBP[i].TGL_BUKTI_LAKSANA = (dataOut.SF_MON_PNBP[i].TGL_BUKTI_LAKSANA.ToString() == "11/11/1000" ? "-" : dataOut.SF_MON_PNBP[i].TGL_BUKTI_LAKSANA);
                //dataOut.SF_MON_PNBP[i].TGL_SETOR = (dataOut.SF_MON_PNBP[i].TGL_SETOR.ToString() == "11/11/1000" ? "" : dataOut.SF_MON_PNBP[i].TGL_SETOR);
                //dataOut.SF_MON_PNBP[i].TGL_SK = (dataOut.SF_MON_PNBP[i].TGL_SK.ToString() == "11/11/1000" ? "" : dataOut.SF_MON_PNBP[i].TGL_SK);
                //dataOut.SF_MON_PNBP[i].TGL_TRANSAKSI = (dataOut.SF_MON_PNBP[i].TGL_TRANSAKSI.ToString() == "11/11/1000" ? "" : dataOut.SF_MON_PNBP[i].TGL_TRANSAKSI);
                dsGridMonPnbpSSBP.Add(dataOut.SF_MON_WASDAL_PNBP_SSBP[i]);
            }

            gridPnbpSSBP.sbCariOnline.Enabled = !modeCari;
            gridPnbpSSBP.dsDataSource = dsGridMonPnbpSSBP;
            gridPnbpSSBP.displayData();
            if (modeCari == true)
            {
                string xSatu = gridPnbpSSBP.teNamaKolom.Text.Trim();
                string xDua = gridPnbpSSBP.teCari.Text.Trim();
                string xTiga = gridPnbpSSBP.fieldDicari;
                gridPnbpSSBP.gvGridSk.ClearColumnsFilter();
                gridPnbpSSBP.teNamaKolom.Text = xSatu;
                gridPnbpSSBP.teCari.Text = xDua;
                gridPnbpSSBP.fieldDicari = xTiga;
            }
            else
                gridPnbpSSBP.gvGridSk.ClearColumnsFilter();
            gridPnbpSSBP.labelTotData.Text = "";
            gridPnbpSSBP.labelTotData.Text = "Menampilkan " + jmlCurrent + " dari total " + totalData + " data";
        }

        private void setCariDataMonPnbpSSBP(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitMonPnbpSSBP();
        }
        #endregion


        #endregion

        #endregion

        #region PEREKAMAN PNBP


        private void resetEventBtnPnbpWasdal()
        {
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpTambah);
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpUbah);
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpHapus);
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpRefresh);
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpMore);
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpDetail);
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpKembali);
            konfigApp.RemoveClickEvent(this.bbiRkmPnbpTutup);
        }

        public void setTombolRkmPnbpGrid()
        {
            bbiRkmPnbpTambah.Enabled = true;
            bbiRkmPnbpUbah.Enabled = true;
            bbiRkmPnbpHapus.Enabled = true;
            bbiRkmPnbpDetail.Enabled = true;
            bbiRkmPnbpMore.Enabled = true;
            bbiRkmPnbpRefresh.Enabled = true;
            bbiRkmPnbpKembali.Enabled = false;
            bbiRkmPnbpTutup.Enabled = true;

        }

        public void setTombolRkmPnbpForm()
        {
            bbiRkmPnbpTambah.Enabled = false;
            bbiRkmPnbpUbah.Enabled = false;
            bbiRkmPnbpHapus.Enabled = false;
            bbiRkmPnbpDetail.Enabled = false;
            bbiRkmPnbpMore.Enabled = false;
            bbiRkmPnbpRefresh.Enabled = false;
            bbiRkmPnbpKembali.Enabled = true;
            bbiRkmPnbpTutup.Enabled = true;
        }

        private void setGridRkmPnbpWasdal(string menu, string submenu)
        {


            konfigApp.strMenu = menu;
            konfigApp.strSubMenu = submenu;
            this.inisialisasiForm();
            this.rpRkmTindakLanjut.Text = konfigApp.strSubMenu;
            this.rpgRkmTindakLanjut.Text = konfigApp.strSubMenu;
            this.rpRkmTindakLanjut.Visible = true;
            this.ribbon.SelectedPage = this.rpRkmTindakLanjut;
            this.modeLoadData = "normal";
            this.strCari = "";
            this.dataInisial = true;
            this.adaData = false;
            this.masihAdaData = true;
        }

        #region SEWABMN
        KES1.PNBP.SWBMN.ucSewaBmnGrid gridRkmPnbpSwBmn;
        KES1.PNBP.SWBMN.ucPNBPSewaBmnForm formRkmPnbpSwBmnTambah;
        KES1.PNBP.SWBMN.ucPNBPSewaBmnForm formRkmPnbpSwBmnUbah;
        KES1.PNBP.SWBMN.ucPNBPSewaBmnForm formRkmPnbpSwBmnHapus;
        private ArrayList dsGridRkmPnbpSwBmn;
        SvcWasdalManfaatPnbpSelect.OutputParameters dOutRkmPnbpSwBmn;
        SvcWasdalManfaatPnbpSelect.execute_pttClient ambilRkmPnbpSwBmn;

        private void nbiPnbpSWBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamPnbpWasdal;
            konfigApp.strSubMenu = this.subMenuMonSWBMN;
            konfigApp.kdPelayanan = "06";
            konfigApp.namaPelayanan = this.subMenuMonSWBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmPnbp.Visible = true;
            ribbon.SelectedPage = rpRkmPnbp;
            initGridRkmPnbpSWBMN();
            modeCari = false;
            gridRkmPnbpSwBmn.teNamaKolom.Text = "";
            gridRkmPnbpSwBmn.teCari.Text = "";
            gridRkmPnbpSwBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmPnbpSwBmn();
        }

        private void setEventBtnPnbpSWBMN()
        {
            this.resetEventBtnPnbpWasdal();
            this.bbiRkmPnbpTambah.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNTambah);
            this.bbiRkmPnbpUbah.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNDetail);
            this.bbiRkmPnbpHapus.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNHapus);
            this.bbiRkmPnbpRefresh.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNRefresh);
            this.bbiRkmPnbpMore.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNMore);
            this.bbiRkmPnbpDetail.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNDetail);
            this.bbiRkmPnbpKembali.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNKembali);
            this.bbiRkmPnbpTutup.ItemClick += new ItemClickEventHandler(this.RkmPnbpSWBMNTutup);

        }

        public void initGridRkmPnbpSWBMN()
        {

            if (gridRkmPnbpSwBmn == null)
            {
                gridRkmPnbpSwBmn = new KES1.PNBP.SWBMN.ucSewaBmnGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmPnbpSwBmn),
                    detailDataGrid = new DetailDataGrid(RkmPnbpSWBMNDetail)
                };
            }
            setTombolRkmPnbpGrid();
            setEventBtnPnbpSWBMN();
            setPanel(gridRkmPnbpSwBmn);
        }

        #region --++ Ambil Data SEWA BMN
        private void getInitRkmPnbpSwBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatPnbpSelect.InputParameters parInp = new SvcWasdalManfaatPnbpSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NTPN IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRkmPnbpSwBmn = new SvcWasdalManfaatPnbpSelect.execute_pttClient();
                ambilRkmPnbpSwBmn.Open();
                ambilRkmPnbpSwBmn.Beginexecute(parInp, new AsyncCallback(getRkmPnbpSwBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmPnbpSwBmn(IAsyncResult result)
        {
            try
            {
                dOutRkmPnbpSwBmn = ambilRkmPnbpSwBmn.Endexecute(result);
                ambilRkmPnbpSwBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRkmPnbpSwBmn(dsRkmPnbpSwBmn), dOutRkmPnbpSwBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRkmPnbpSwBmn(SvcWasdalManfaatPnbpSelect.OutputParameters dataOut);

        private void dsRkmPnbpSwBmn(SvcWasdalManfaatPnbpSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmPnbpMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmPnbpMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRkmPnbpSwBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP[i].IS_TB = (dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRkmPnbpSwBmn.Add(dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP[i]);
            }

            gridRkmPnbpSwBmn.sbCariOnline.Enabled = !modeCari;
            gridRkmPnbpSwBmn.dsDataSource = dsGridRkmPnbpSwBmn;
            gridRkmPnbpSwBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRkmPnbpSwBmn.teNamaKolom.Text.Trim();
                string xDua = gridRkmPnbpSwBmn.teCari.Text.Trim();
                string xTiga = gridRkmPnbpSwBmn.fieldDicari;
                gridRkmPnbpSwBmn.gvGridSk.ClearColumnsFilter();
                gridRkmPnbpSwBmn.teNamaKolom.Text = xSatu;
                gridRkmPnbpSwBmn.teCari.Text = xDua;
                gridRkmPnbpSwBmn.fieldDicari = xTiga;
            }
            else
                gridRkmPnbpSwBmn.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PSP BMN

        #region --++ Simpan Data SEWA BMN
        SvcWasdalManfaatPnbpCud.OutputParameters dOutAmbilPnbpSwBmn;
        SvcWasdalManfaatPnbpCud.execute_pttClient ambilPnbpSwBmn;

        private void simpanDataRkmPnbpSwBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatPnbpCud.InputParameters parInp = new SvcWasdalManfaatPnbpCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpSwBmnTambah.teNomorSk.Text.Trim() : formRkmPnbpSwBmnUbah.teNomorSk.Text.Trim());
                parInp.P_NTPN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpSwBmnTambah.teNTPN.Text.Trim() : formRkmPnbpSwBmnUbah.teNTPN.Text.Trim());
                parInp.P_TGL_SETOR = konfigApp.DateToString((_mode == "C" || _mode == "CU" || _mode == "D") ? konfigApp.toDateTime(formRkmPnbpSwBmnTambah.deTglSetor.DateTime) : konfigApp.toDateTime(formRkmPnbpSwBmnUbah.deTglSetor.DateTime));
                parInp.P_NTB = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpSwBmnTambah.teNTB.Text : formRkmPnbpSwBmnUbah.teNTB.Text);
                parInp.P_TGL_TRANSAKSI = konfigApp.DateToString((_mode == "C" || _mode == "CU" || _mode == "D") ? konfigApp.toDateTime(formRkmPnbpSwBmnTambah.deTglTransaksi.DateTime) : konfigApp.toDateTime(formRkmPnbpSwBmnUbah.deTglTransaksi.DateTime));
                parInp.P_NM_PENYETOR = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpSwBmnTambah.teNamaPenyetor.Text : formRkmPnbpSwBmnUbah.teNamaPenyetor.Text);
                parInp.P_KD_AKUN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpSwBmnTambah.leAkun.EditValue.ToString() : formRkmPnbpSwBmnUbah.leAkun.EditValue.ToString());
                parInp.P_UR_AKUN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpSwBmnTambah.leAkun.Text : formRkmPnbpSwBmnUbah.leAkun.Text);
                parInp.P_NILAI_PNBPSpecified = true;
                parInp.P_NILAI_PNBP = ((_mode == "C" || _mode == "CU" || _mode == "D") ? Convert.ToDecimal(formRkmPnbpSwBmnTambah.teNilaiPnbp.Text) : Convert.ToDecimal(formRkmPnbpSwBmnUbah.teNilaiPnbp.Text));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpSwBmnTambah.teKet.Text : formRkmPnbpSwBmnUbah.teKet.Text);
                //parInp.P_FILE_PNBP = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRkmPnbpSwBmnTambah.filePath) : konfigApp.convert2byte(formRkmPnbpSwBmnUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilPnbpSwBmn = new SvcWasdalManfaatPnbpCud.execute_pttClient();
                ambilPnbpSwBmn.Beginexecute(parInp, new AsyncCallback(cudRkmPnbpSwBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRkmPnbpSwBmn()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatPnbpCud.InputParameters parInp = new SvcWasdalManfaatPnbpCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRkmPnbpSwBmn.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NTPN = gridRkmPnbpSwBmn.dataTerpilih.NTPN;
                parInp.P_NILAI_PNBPSpecified = false;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilPnbpSwBmn = new SvcWasdalManfaatPnbpCud.execute_pttClient();
                ambilPnbpSwBmn.Beginexecute(parInp, new AsyncCallback(cudRkmPnbpSwBmn), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }


        private void cudRkmPnbpSwBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilPnbpSwBmn = ambilPnbpSwBmn.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRkmPnbpSwBmn(this.ubahDsRkmPnbpSwBmn), dOutAmbilPnbpSwBmn);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRkmPnbpSwBmn(SvcWasdalManfaatPnbpCud.OutputParameters dataOutRkm);

        int _keBrpPnbpSwBmn = 0;

        private void ubahDsRkmPnbpSwBmn(SvcWasdalManfaatPnbpCud.OutputParameters dataOutRkm)
        {
            if (dataOutRkm.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalManfaatPnbpSelect.WASDALSROW_SELECT_MANFAAT_PNBP dataPenyama = new SvcWasdalManfaatPnbpSelect.WASDALSROW_SELECT_MANFAAT_PNBP();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_SETORSpecified = true;
                dataPenyama.TGL_TRANSAKSISpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                dataPenyama.NILAI_PNBPSpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRkmPnbpSwBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRkmPnbpSwBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formRkmPnbpSwBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRkmPnbpSwBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRkmPnbpSwBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRkmPnbpSwBmnTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRkmPnbpSwBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRkmPnbpSwBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRkmPnbpSwBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpSwBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRkmPnbpSwBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpSwBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRkmPnbpSwBmnTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRkmPnbpSwBmnTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRkmPnbpSwBmnTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRkmPnbpSwBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRkmPnbpSwBmn == null ? 1 : dsGridRkmPnbpSwBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NTPN = formRkmPnbpSwBmnTambah.teNTPN.Text;
                        dataPenyama.TGL_SETOR = Convert.ToDateTime(formRkmPnbpSwBmnTambah.deTglSetor.Text);
                        dataPenyama.NTB = formRkmPnbpSwBmnTambah.teNTB.Text;
                        dataPenyama.TGL_TRANSAKSI = Convert.ToDateTime(formRkmPnbpSwBmnTambah.deTglTransaksi.Text);
                        dataPenyama.NM_PENYETOR = formRkmPnbpSwBmnTambah.teNamaPenyetor.Text;
                        dataPenyama.KD_AKUN = formRkmPnbpSwBmnTambah.leAkun.EditValue.ToString();
                        dataPenyama.UR_AKUN = formRkmPnbpSwBmnTambah.leAkun.Text;
                        dataPenyama.NILAI_PNBP = Convert.ToDecimal(formRkmPnbpSwBmnTambah.teNilaiPnbp.Text);
                        dataPenyama.KET = formRkmPnbpSwBmnTambah.teKet.Text;

                        dataPenyama.TIPE_PEMOHON = formRkmPnbpSwBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRkmPnbpSwBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRkmPnbpSwBmnTambah.teNamaPemohon.Text;
                        dsGridRkmPnbpSwBmn.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRkmPnbpSwBmn.dataTerpilih = dataPenyama;
                            _keBrpPnbpSwBmn = 1;
                            formRkmPnbpSwBmnTambah.gcDaftarAset.Enabled = true;
                            formRkmPnbpSwBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRkmPnbpSwBmnTambah.teNomorSk.Properties.ReadOnly = true;
                            formRkmPnbpSwBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRkmPnbpSwBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRkmPnbpSwBmnTambah.sbCariPemohon.Enabled = false;
                            formRkmPnbpSwBmnTambah.sbRefresh.Enabled = true;
                            formRkmPnbpSwBmnTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRkmPnbpSwBmnTambah.cePilihSemua.Enabled = true;
                            formRkmPnbpSwBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRkmPnbpSwBmnTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskSwBmn.IndexOf(gridSkSwBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkSwBmn.dataTerpilih = gridSkSwBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRkmPnbpSwBmn.IndexOf(gridRkmPnbpSwBmn.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRkmPnbpSwBmn.Remove(gridRkmPnbpSwBmn.dataTerpilih);
                            dsGridRkmPnbpSwBmn.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRkmPnbpSwBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRkmPnbpSwBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formRkmPnbpSwBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRkmPnbpSwBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRkmPnbpSwBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRkmPnbpSwBmnUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRkmPnbpSwBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRkmPnbpSwBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRkmPnbpSwBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpSwBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRkmPnbpSwBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpSwBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRkmPnbpSwBmnUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRkmPnbpSwBmnUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRkmPnbpSwBmnUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRkmPnbpSwBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRkmPnbpSwBmn == null ? 1 : dsGridRkmPnbpSwBmn.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NTPN = formRkmPnbpSwBmnUbah.teNTPN.Text;
                        dataPenyama.TGL_SETOR = Convert.ToDateTime(formRkmPnbpSwBmnUbah.deTglSetor.Text);
                        dataPenyama.NTB = formRkmPnbpSwBmnUbah.teNTB.Text;
                        dataPenyama.TGL_TRANSAKSI = Convert.ToDateTime(formRkmPnbpSwBmnUbah.deTglTransaksi.Text);
                        dataPenyama.NM_PENYETOR = formRkmPnbpSwBmnUbah.teNamaPenyetor.Text;
                        dataPenyama.KD_AKUN = formRkmPnbpSwBmnUbah.leAkun.EditValue.ToString();
                        dataPenyama.UR_AKUN = formRkmPnbpSwBmnUbah.leAkun.Text;
                        dataPenyama.NILAI_PNBP = Convert.ToDecimal(formRkmPnbpSwBmnUbah.teNilaiPnbp.Text);
                        dataPenyama.KET = formRkmPnbpSwBmnUbah.teKet.Text;

                        dataPenyama.TIPE_PEMOHON = formRkmPnbpSwBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRkmPnbpSwBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRkmPnbpSwBmnUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRkmPnbpSwBmn.IndexOf(gridRkmPnbpSwBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRkmPnbpSwBmn.Remove(gridRkmPnbpSwBmn.dataTerpilih);
                        dsGridRkmPnbpSwBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRkmPnbpSwBmn.Remove(gridRkmPnbpSwBmn.dataTerpilih);
                        break;
                }
                gridRkmPnbpSwBmn.dsDataSource = dsGridRkmPnbpSwBmn;
                gridRkmPnbpSwBmn.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkSwBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPnbp(SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT _skTerpilih)
        {
            formRkmPnbpSwBmnTambah = new KES1.PNBP.SWBMN.ucPNBPSewaBmnForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRkmPnbpSwBmn = new SimpanDataRPNBP(simpanDataRkmPnbpSwBmn)
            };
            formRkmPnbpSwBmnTambah.skTerpilih = _skTerpilih;
            setPanel(formRkmPnbpSwBmnTambah);
            formRkmPnbpSwBmnTambah.inisialisasiForm();
            setTombolRkmPnbpForm();
        }

        #endregion Simpan Data PSP BMN

        #region action button
        KES1.PNBP.SWBMN.frmPuSk formSkPnbp;

        private void RkmPnbpSWBMNTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat PNBP Baru \n{0}?", konfigApp.namaLayanan06), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPnbp = new KES1.PNBP.SWBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSk = new PilihSk(pilihSkPnbp)
                };
                formSkPnbp.ShowDialog();
            }
        }

        private void RkmPnbpSWBMNEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmPnbpSWBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRkmPnbpSwBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRkmPnbpSwBmn.dataTerpilih.NTPN), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRkmPnbpSwBmn();
                }
            }
        }

        private void RkmPnbpSWBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRkmPnbpSwBmn.dataTerpilih != null)
            {
                if (formRkmPnbpSwBmnUbah == null)
                {
                    formRkmPnbpSwBmnUbah = new KES1.PNBP.SWBMN.ucPNBPSewaBmnForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRkmPnbpSwBmn = new SimpanDataRPNBP(simpanDataRkmPnbpSwBmn)
                    };
                }
                formRkmPnbpSwBmnUbah.dataTerpilih = gridRkmPnbpSwBmn.dataTerpilih;
                setPanel(formRkmPnbpSwBmnUbah);
                formRkmPnbpSwBmnUbah.inisialisasiForm();
                setTombolRkmPnbpForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmPnbpSWBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRkmPnbpSwBmn.teNamaKolom.Text = "";
            gridRkmPnbpSwBmn.teCari.Text = "";
            gridRkmPnbpSwBmn.fieldDicari = "";
            gridRkmPnbpSwBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmPnbpSwBmn();
        }

        private void RkmPnbpSWBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmPnbpSwBmn();
            }
        }

        private void RkmPnbpSWBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamPnbpWasdal;
            konfigApp.strSubMenu = this.subMenuMonSWBMN;
            konfigApp.kdPelayanan = "06";
            konfigApp.namaPelayanan = this.subMenuMonSWBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmPnbp.Visible = true;
            ribbon.SelectedPage = rpRkmPnbp;
            initGridRkmPnbpSWBMN();
            modeCari = false;
            gridRkmPnbpSwBmn.teNamaKolom.Text = "";
            gridRkmPnbpSwBmn.teCari.Text = "";
            gridRkmPnbpSwBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmPnbpSwBmn();
        }

        private void RkmPnbpSWBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmPnbpSwBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmPnbpSwBmn();
        }
        #endregion

        private void nbcNavigasi_Click(object sender, EventArgs e)
        {

        }

        #region KERJASAMA PEMANFAATAN
        KES1.PNBP.KPBMN.ucKpBmnGrid gridRkmPnbpKPBMN;
        KES1.PNBP.KPBMN.ucPNBPKpBmnForm formRkmPnbpKPBMNTambah;
        KES1.PNBP.KPBMN.ucPNBPKpBmnForm formRkmPnbpKPBMNUbah;
        KES1.PNBP.KPBMN.ucPNBPKpBmnForm formRkmPnbpKPBMNHapus;
        private ArrayList dsGridRkmPnbpKPBMN;
        SvcWasdalManfaatPnbpSelect.OutputParameters dOutRkmPnbpKpBmn;
        SvcWasdalManfaatPnbpSelect.execute_pttClient ambilRkmPnbpKpBmn;

        private void setEventBtnPnbpKPBMN()
        {
            this.resetEventBtnPnbpWasdal();
            this.bbiRkmPnbpTambah.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNTambah);
            this.bbiRkmPnbpUbah.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNDetail);
            this.bbiRkmPnbpHapus.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNHapus);
            this.bbiRkmPnbpRefresh.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNRefresh);
            this.bbiRkmPnbpMore.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNMore);
            this.bbiRkmPnbpDetail.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNDetail);
            this.bbiRkmPnbpKembali.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNKembali);
            this.bbiRkmPnbpTutup.ItemClick += new ItemClickEventHandler(this.RkmPnbpKPBMNTutup);

        }

        private void nbiPnbpKPBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamPnbpWasdal;
            konfigApp.strSubMenu = this.subMenuMonKPBMN;
            konfigApp.kdPelayanan = "08";
            konfigApp.namaPelayanan = this.subMenuMonKPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmPnbp.Visible = true;
            ribbon.SelectedPage = rpRkmPnbp;
            initGridRkmPnbpKPBMN();
            modeCari = false;
            gridRkmPnbpKPBMN.teNamaKolom.Text = "";
            gridRkmPnbpKPBMN.teCari.Text = "";
            gridRkmPnbpKPBMN.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmPnbpKpBmn();
        }

        public void initGridRkmPnbpKPBMN()
        {

            if (gridRkmPnbpKPBMN == null)
            {
                gridRkmPnbpKPBMN = new KES1.PNBP.KPBMN.ucKpBmnGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmPnbpKpBmn),
                    detailDataGrid = new DetailDataGrid(RkmPnbpKPBMNDetail)
                };
            }
            setTombolRkmPnbpGrid();
            setEventBtnPnbpKPBMN();
            setPanel(gridRkmPnbpKPBMN);
        }


        #region --++ Ambil Data KP BMN
        private void getInitRkmPnbpKpBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatPnbpSelect.InputParameters parInp = new SvcWasdalManfaatPnbpSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NTPN IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRkmPnbpKpBmn = new SvcWasdalManfaatPnbpSelect.execute_pttClient();
                ambilRkmPnbpKpBmn.Open();
                ambilRkmPnbpKpBmn.Beginexecute(parInp, new AsyncCallback(getRkmPnbpKpBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmPnbpKpBmn(IAsyncResult result)
        {
            try
            {
                dOutRkmPnbpKpBmn = ambilRkmPnbpKpBmn.Endexecute(result);
                ambilRkmPnbpKpBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRkmPnbpKpBmn(dsRkmPnbpKpBmn), dOutRkmPnbpKpBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRkmPnbpKpBmn(SvcWasdalManfaatPnbpSelect.OutputParameters dataOut);

        private void dsRkmPnbpKpBmn(SvcWasdalManfaatPnbpSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmPnbpMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmPnbpMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRkmPnbpKPBMN = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP[i].IS_TB = (dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRkmPnbpKPBMN.Add(dataOut.SF_SELECT_WASDAL_MANFAAT_PNBP[i]);
            }

            gridRkmPnbpKPBMN.sbCariOnline.Enabled = !modeCari;
            gridRkmPnbpKPBMN.dsDataSource = dsGridRkmPnbpKPBMN;
            gridRkmPnbpKPBMN.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRkmPnbpKPBMN.teNamaKolom.Text.Trim();
                string xDua = gridRkmPnbpKPBMN.teCari.Text.Trim();
                string xTiga = gridRkmPnbpKPBMN.fieldDicari;
                gridRkmPnbpKPBMN.gvGridSk.ClearColumnsFilter();
                gridRkmPnbpKPBMN.teNamaKolom.Text = xSatu;
                gridRkmPnbpKPBMN.teCari.Text = xDua;
                gridRkmPnbpKPBMN.fieldDicari = xTiga;
            }
            else
                gridRkmPnbpKPBMN.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PSP BMN

        #region --++ Simpan Data KP BMN
        SvcWasdalManfaatPnbpCud.OutputParameters dOutAmbilPnbpKpBmn;
        SvcWasdalManfaatPnbpCud.execute_pttClient ambilPnbpKpBmn;

        private void simpanDataRkmPnbpKpBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatPnbpCud.InputParameters parInp = new SvcWasdalManfaatPnbpCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpKPBMNTambah.teNomorSk.Text.Trim() : formRkmPnbpKPBMNUbah.teNomorSk.Text.Trim());
                parInp.P_NTPN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpKPBMNTambah.teNTPN.Text.Trim() : formRkmPnbpKPBMNUbah.teNTPN.Text.Trim());
                parInp.P_TGL_SETOR = konfigApp.DateToString((_mode == "C" || _mode == "CU" || _mode == "D") ? konfigApp.toDateTime(formRkmPnbpKPBMNTambah.deTglSetor.DateTime) : konfigApp.toDateTime(formRkmPnbpKPBMNUbah.deTglSetor.DateTime));
                parInp.P_NTB = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpKPBMNTambah.teNTB.Text : formRkmPnbpKPBMNUbah.teNTB.Text);
                parInp.P_TGL_TRANSAKSI = konfigApp.DateToString((_mode == "C" || _mode == "CU" || _mode == "D") ? konfigApp.toDateTime(formRkmPnbpKPBMNTambah.deTglTransaksi.DateTime) : konfigApp.toDateTime(formRkmPnbpKPBMNUbah.deTglTransaksi.DateTime));
                parInp.P_NM_PENYETOR = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpKPBMNTambah.teNamaPenyetor.Text : formRkmPnbpKPBMNUbah.teNamaPenyetor.Text);
                parInp.P_KD_AKUN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpKPBMNTambah.leAkun.EditValue.ToString() : formRkmPnbpKPBMNUbah.leAkun.EditValue.ToString());
                parInp.P_UR_AKUN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpKPBMNTambah.leAkun.Text : formRkmPnbpKPBMNUbah.leAkun.Text);
                parInp.P_NILAI_PNBPSpecified = true;
                parInp.P_NILAI_PNBP = ((_mode == "C" || _mode == "CU" || _mode == "D") ? Convert.ToDecimal(formRkmPnbpKPBMNTambah.teNilaiPnbp.Text) : Convert.ToDecimal(formRkmPnbpKPBMNUbah.teNilaiPnbp.Text));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpKPBMNTambah.teKet.Text : formRkmPnbpKPBMNUbah.teKet.Text);
                //parInp.P_FILE_PNBP = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRkmPnbpKPBMNTambah.filePath) : konfigApp.convert2byte(formRkmPnbpKPBMNUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilPnbpKpBmn = new SvcWasdalManfaatPnbpCud.execute_pttClient();
                ambilPnbpKpBmn.Beginexecute(parInp, new AsyncCallback(cudRkmPnbpKpBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRkmPnbpKpBmn()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatPnbpCud.InputParameters parInp = new SvcWasdalManfaatPnbpCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRkmPnbpKPBMN.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NTPN = gridRkmPnbpKPBMN.dataTerpilih.NTPN;
                parInp.P_NILAI_PNBPSpecified = false;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilPnbpKpBmn = new SvcWasdalManfaatPnbpCud.execute_pttClient();
                ambilPnbpKpBmn.Beginexecute(parInp, new AsyncCallback(cudRkmPnbpKpBmn), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRkmPnbpKpBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilPnbpKpBmn = ambilPnbpKpBmn.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRkmPnbpKpBmn(this.ubahDsRkmPnbpKpBmn), dOutAmbilPnbpKpBmn);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRkmPnbpKpBmn(SvcWasdalManfaatPnbpCud.OutputParameters dataOutRkm);

        int _keBrpPnbpKpBmn = 0;

        private void ubahDsRkmPnbpKpBmn(SvcWasdalManfaatPnbpCud.OutputParameters dataOutRkm)
        {
            if (dataOutRkm.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalManfaatPnbpSelect.WASDALSROW_SELECT_MANFAAT_PNBP dataPenyama = new SvcWasdalManfaatPnbpSelect.WASDALSROW_SELECT_MANFAAT_PNBP();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_SETORSpecified = true;
                dataPenyama.TGL_TRANSAKSISpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                dataPenyama.NILAI_PNBPSpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRkmPnbpKPBMNTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRkmPnbpKPBMNTambah.idPemohon;
                        dataPenyama.IS_TB = (formRkmPnbpKPBMNTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRkmPnbpKPBMNTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRkmPnbpKPBMNTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRkmPnbpKPBMNTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRkmPnbpKPBMNTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRkmPnbpKPBMNTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRkmPnbpKPBMNTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpKPBMNTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRkmPnbpKPBMNTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpKPBMNTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRkmPnbpKPBMNTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRkmPnbpKPBMNTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRkmPnbpKPBMNTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRkmPnbpKPBMNTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRkmPnbpKPBMN == null ? 1 : dsGridRkmPnbpKPBMN.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NTPN = formRkmPnbpKPBMNTambah.teNTPN.Text;
                        dataPenyama.TGL_SETOR = Convert.ToDateTime(formRkmPnbpKPBMNTambah.deTglSetor.Text);
                        dataPenyama.NTB = formRkmPnbpKPBMNTambah.teNTB.Text;
                        dataPenyama.TGL_TRANSAKSI = Convert.ToDateTime(formRkmPnbpKPBMNTambah.deTglTransaksi.Text);
                        dataPenyama.NM_PENYETOR = formRkmPnbpKPBMNTambah.teNamaPenyetor.Text;
                        dataPenyama.KD_AKUN = formRkmPnbpKPBMNTambah.leAkun.EditValue.ToString();
                        dataPenyama.UR_AKUN = formRkmPnbpKPBMNTambah.leAkun.Text;
                        dataPenyama.NILAI_PNBP = Convert.ToDecimal(formRkmPnbpKPBMNTambah.teNilaiPnbp.Text);
                        dataPenyama.KET = formRkmPnbpKPBMNTambah.teKet.Text;

                        dataPenyama.TIPE_PEMOHON = formRkmPnbpKPBMNTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRkmPnbpKPBMNTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRkmPnbpKPBMNTambah.teNamaPemohon.Text;
                        dsGridRkmPnbpKPBMN.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRkmPnbpKPBMN.dataTerpilih = dataPenyama;
                            _keBrpPnbpKpBmn = 1;
                            formRkmPnbpKPBMNTambah.gcDaftarAset.Enabled = true;
                            formRkmPnbpKPBMNTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRkmPnbpKPBMNTambah.teNomorSk.Properties.ReadOnly = true;
                            formRkmPnbpKPBMNTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRkmPnbpKPBMNTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRkmPnbpKPBMNTambah.sbCariPemohon.Enabled = false;
                            formRkmPnbpKPBMNTambah.sbRefresh.Enabled = true;
                            formRkmPnbpKPBMNTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRkmPnbpKPBMNTambah.cePilihSemua.Enabled = true;
                            formRkmPnbpKPBMNTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRkmPnbpKPBMNTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskSwBmn.IndexOf(gridSkSwBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkSwBmn.dataTerpilih = gridSkSwBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRkmPnbpKPBMN.IndexOf(gridRkmPnbpKPBMN.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRkmPnbpKPBMN.Remove(gridRkmPnbpKPBMN.dataTerpilih);
                            dsGridRkmPnbpKPBMN.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRkmPnbpKPBMNUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRkmPnbpKPBMNUbah.idPemohon;
                        dataPenyama.IS_TB = (formRkmPnbpKPBMNUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRkmPnbpKPBMNUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRkmPnbpKPBMNUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRkmPnbpKPBMNUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRkmPnbpKPBMNUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRkmPnbpKPBMNUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRkmPnbpKPBMNUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpKPBMNUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRkmPnbpKPBMNUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpKPBMNUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRkmPnbpKPBMNUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRkmPnbpKPBMNUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRkmPnbpKPBMNUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRkmPnbpKPBMNUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRkmPnbpKPBMN == null ? 1 : dsGridRkmPnbpKPBMN.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NTPN = formRkmPnbpKPBMNUbah.teNTPN.Text;
                        dataPenyama.TGL_SETOR = Convert.ToDateTime(formRkmPnbpKPBMNUbah.deTglSetor.Text);
                        dataPenyama.NTB = formRkmPnbpKPBMNUbah.teNTB.Text;
                        dataPenyama.TGL_TRANSAKSI = Convert.ToDateTime(formRkmPnbpKPBMNUbah.deTglTransaksi.Text);
                        dataPenyama.NM_PENYETOR = formRkmPnbpKPBMNUbah.teNamaPenyetor.Text;
                        dataPenyama.KD_AKUN = formRkmPnbpKPBMNUbah.leAkun.EditValue.ToString();
                        dataPenyama.UR_AKUN = formRkmPnbpKPBMNUbah.leAkun.Text;
                        dataPenyama.NILAI_PNBP = Convert.ToDecimal(formRkmPnbpKPBMNUbah.teNilaiPnbp.Text);
                        dataPenyama.KET = formRkmPnbpKPBMNUbah.teKet.Text;

                        dataPenyama.TIPE_PEMOHON = formRkmPnbpKPBMNUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRkmPnbpKPBMNUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRkmPnbpKPBMNUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRkmPnbpKPBMN.IndexOf(gridRkmPnbpKPBMN.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRkmPnbpKPBMN.Remove(gridRkmPnbpKPBMN.dataTerpilih);
                        dsGridRkmPnbpKPBMN.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRkmPnbpKPBMN.Remove(gridRkmPnbpKPBMN.dataTerpilih);
                        break;
                }
                gridRkmPnbpKPBMN.dsDataSource = dsGridRkmPnbpKPBMN;
                gridRkmPnbpKPBMN.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkSwBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPnbpKpBmn(SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT _skTerpilih)
        {
            formRkmPnbpKPBMNTambah = new KES1.PNBP.KPBMN.ucPNBPKpBmnForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRkmPnbpKPBMN = new SimpanDataRtl(simpanDataRkmPnbpKpBmn)
            };
            formRkmPnbpKPBMNTambah.skTerpilih = _skTerpilih;
            setPanel(formRkmPnbpKPBMNTambah);
            formRkmPnbpKPBMNTambah.inisialisasiForm();
            setTombolRkmPnbpForm();
        }

        #endregion Simpan Data PSP BMN


        #region action button
        KES1.PNBP.KPBMN.frmPuSk formSkPnbpKpBmn;

        private void RkmPnbpKPBMNTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat PNBP Kerjasama Pemanfaatan Baru \n{0}?", konfigApp.namaLayanan06), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPnbpKpBmn = new KES1.PNBP.KPBMN.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSk = new PilihSk(pilihSkPnbpKpBmn)
                };
                formSkPnbpKpBmn.ShowDialog();
            }
        }

        private void RkmPnbpKPBMNEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmPnbpKPBMNHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRkmPnbpKPBMN.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRkmPnbpKPBMN.dataTerpilih.NTPN), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRkmPnbpKpBmn();
                }
            }
        }

        private void RkmPnbpKPBMNDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRkmPnbpKPBMN.dataTerpilih != null)
            {
                if (formRkmPnbpKPBMNUbah == null)
                {
                    formRkmPnbpKPBMNUbah = new KES1.PNBP.KPBMN.ucPNBPKpBmnForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRkmPnbpKPBMN = new SimpanDataRtl(simpanDataRkmPnbpKpBmn)
                    };
                }
                formRkmPnbpKPBMNUbah.dataTerpilih = gridRkmPnbpKPBMN.dataTerpilih;
                setPanel(formRkmPnbpKPBMNUbah);
                formRkmPnbpKPBMNUbah.inisialisasiForm();
                setTombolRkmPnbpForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmPnbpKPBMNRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRkmPnbpKPBMN.teNamaKolom.Text = "";
            gridRkmPnbpKPBMN.teCari.Text = "";
            gridRkmPnbpKPBMN.fieldDicari = "";
            gridRkmPnbpKPBMN.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmPnbpKpBmn();
        }

        private void RkmPnbpKPBMNMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmPnbpKpBmn();
            }
        }

        private void RkmPnbpKPBMNKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamPnbpWasdal;
            konfigApp.strSubMenu = this.subMenuMonKPBMN;
            konfigApp.kdPelayanan = "08";
            konfigApp.namaPelayanan = this.subMenuMonKPBMN;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmPnbp.Visible = true;
            ribbon.SelectedPage = rpRkmPnbp;
            initGridRkmPnbpKPBMN();
            modeCari = false;
            gridRkmPnbpKPBMN.teNamaKolom.Text = "";
            gridRkmPnbpKPBMN.teCari.Text = "";
            gridRkmPnbpKPBMN.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmPnbpKpBmn();
        }

        private void RkmPnbpKPBMNTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmPnbpKpBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmPnbpKpBmn();
        }

        #endregion



        #region JUAL
        KES1.PNBP.JUAL.ucJualGrid gridRkmPnbpJual;
        KES1.PNBP.JUAL.ucPNBPJualForm formRkmPnbpJualTambah;
        KES1.PNBP.JUAL.ucPNBPJualForm formRkmPnbpJualUbah;
        KES1.PNBP.JUAL.ucPNBPJualForm formRkmPnbpJualHapus;
        private ArrayList dsGridRkmPnbpJual;
        SvcWasdalPTJualPnbpSelect.OutputParameters dOutRkmPnbpJual;
        SvcWasdalPTJualPnbpSelect.execute_pttClient ambilRkmPnbpJual;

        private void nbiPnbpJual_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamPnbpWasdal;
            konfigApp.strSubMenu = this.subMenuMonPenjualan;
            konfigApp.kdPelayanan = "11";
            konfigApp.namaPelayanan = this.subMenuMonPenjualan;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmPnbp.Visible = true;
            ribbon.SelectedPage = rpRkmPnbp;
            initGridRkmPnbpJual();
            modeCari = false;
            gridRkmPnbpJual.teNamaKolom.Text = "";
            gridRkmPnbpJual.teCari.Text = "";
            gridRkmPnbpJual.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmPnbpJual();
        }

        private void setEventBtnPnbpJual()
        {
            this.resetEventBtnPnbpWasdal();
            this.bbiRkmPnbpTambah.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualTambah);
            this.bbiRkmPnbpUbah.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualDetail);
            this.bbiRkmPnbpHapus.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualHapus);
            this.bbiRkmPnbpRefresh.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualRefresh);
            this.bbiRkmPnbpMore.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualMore);
            this.bbiRkmPnbpDetail.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualDetail);
            this.bbiRkmPnbpKembali.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualKembali);
            this.bbiRkmPnbpTutup.ItemClick += new ItemClickEventHandler(this.RkmPnbpJualTutup);

        }

        public void initGridRkmPnbpJual()
        {

            if (gridRkmPnbpJual == null)
            {
                gridRkmPnbpJual = new KES1.PNBP.JUAL.ucJualGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataRkmPnbpJual),
                    detailDataGrid = new DetailDataGrid(RkmPnbpJualDetail)
                };
            }
            setTombolRkmPnbpGrid();
            setEventBtnPnbpJual();
            setPanel(gridRkmPnbpJual);
        }

        #region --++ Ambil Data JUAL
        private void getInitRkmPnbpJual()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPTJualPnbpSelect.InputParameters parInp = new SvcWasdalPTJualPnbpSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format(" NTPN IS NOT NULL AND KD_PELAYANAN = '{0}' AND ID_PEMOHON = {1} {2}", konfigApp.kdPelayanan, konfigApp.idSatker, this.strCari);
                ambilRkmPnbpJual = new SvcWasdalPTJualPnbpSelect.execute_pttClient();
                ambilRkmPnbpJual.Open();
                ambilRkmPnbpJual.Beginexecute(parInp, new AsyncCallback(getRkmPnbpJual), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRkmPnbpJual(IAsyncResult result)
        {
            try
            {
                dOutRkmPnbpJual = ambilRkmPnbpJual.Endexecute(result);
                ambilRkmPnbpJual.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRkmPnbpJual(dsRkmPnbpJual), dOutRkmPnbpJual);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRkmPnbpJual(SvcWasdalPTJualPnbpSelect.OutputParameters dataOut);

        private void dsRkmPnbpJual(SvcWasdalPTJualPnbpSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_SELECT_WASDAL_JUAL_PNBP.Count();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRkmPnbpMore.Enabled = false;
            }
            else
            {
                this.masihAdaData = false;
                bbiRkmPnbpMore.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridRkmPnbpJual = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].IS_TB = (dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_CREATED = konfigApp.setDefaultDate(dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_CREATED);
                dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_SETOR = konfigApp.setDefaultDate(dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_SETOR);
                dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_SK = konfigApp.setDefaultDate(dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_SK);
                dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_TRANSAKSI = konfigApp.setDefaultDate(dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i].TGL_TRANSAKSI);
                dsGridRkmPnbpJual.Add(dataOut.SF_SELECT_WASDAL_JUAL_PNBP[i]);
            }

            gridRkmPnbpJual.sbCariOnline.Enabled = !modeCari;
            gridRkmPnbpJual.dsDataSource = dsGridRkmPnbpJual;
            gridRkmPnbpJual.displayData();
            if (modeCari == true)
            {
                string xSatu = gridRkmPnbpJual.teNamaKolom.Text.Trim();
                string xDua = gridRkmPnbpJual.teCari.Text.Trim();
                string xTiga = gridRkmPnbpJual.fieldDicari;
                gridRkmPnbpJual.gvGridSk.ClearColumnsFilter();
                gridRkmPnbpJual.teNamaKolom.Text = xSatu;
                gridRkmPnbpJual.teCari.Text = xDua;
                gridRkmPnbpJual.fieldDicari = xTiga;
            }
            else
                gridRkmPnbpJual.gvGridSk.ClearColumnsFilter();
        }


        #endregion Ambil PNBP JUAL

        #region --++ Simpan Data JUAL
        SvcWasdalPTJualPnbpCud.OutputParameters dOutAmbilPnbpJual;
        SvcWasdalPTJualPnbpCud.execute_pttClient ambilPnbpJual;

        private void simpanDataRkmPnbpJual(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPTJualPnbpCud.InputParameters parInp = new SvcWasdalPTJualPnbpCud.InputParameters();

                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.teNomorSk.Text.Trim() : formRkmPnbpJualUbah.teNomorSk.Text.Trim());
                parInp.P_NTPN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.teNTPN.Text.Trim() : formRkmPnbpJualUbah.teNTPN.Text.Trim());
                parInp.P_TGL_SETOR = konfigApp.DateToString(Convert.ToDateTime((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.deTglSetor.EditValue : formRkmPnbpJualUbah.deTglSetor.EditValue));
                parInp.P_NTB = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.teNTB.Text : formRkmPnbpJualUbah.teNTB.Text);
                parInp.P_TGL_TRANSAKSI = konfigApp.DateToString(Convert.ToDateTime((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.deTglTransaksi.EditValue : formRkmPnbpJualUbah.deTglTransaksi.EditValue));
                parInp.P_NM_PENYETOR = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.teNamaPenyetor.Text : formRkmPnbpJualUbah.teNamaPenyetor.Text);
                parInp.P_KD_AKUN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.leAkun.EditValue.ToString() : formRkmPnbpJualUbah.leAkun.EditValue.ToString());
                parInp.P_UR_AKUN = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.leAkun.Text : formRkmPnbpJualUbah.leAkun.Text);
                parInp.P_NILAI_PNBPSpecified = true;
                parInp.P_NILAI_PNBP = ((_mode == "C" || _mode == "CU" || _mode == "D") ? Convert.ToDecimal(formRkmPnbpJualTambah.teNilaiPnbp.Text) : Convert.ToDecimal(formRkmPnbpJualUbah.teNilaiPnbp.Text));
                parInp.P_KET = ((_mode == "C" || _mode == "CU" || _mode == "D") ? formRkmPnbpJualTambah.teKet.Text : formRkmPnbpJualUbah.teKet.Text);
                //parInp.P_FILE_PNBP = ((_mode == "C" || _mode == "CU") ? konfigApp.convert2byte(formRkmPnbpJualTambah.filePath) : konfigApp.convert2byte(formRkmPnbpJualUbah.filePath));

                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                ambilPnbpJual = new SvcWasdalPTJualPnbpCud.execute_pttClient();
                ambilPnbpJual.Beginexecute(parInp, new AsyncCallback(cudRkmPnbpJual), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void HapusDataRkmPnbpJual()
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPTJualPnbpCud.InputParameters parInp = new SvcWasdalPTJualPnbpCud.InputParameters();
                parInp.P_SK_KEPUTUSAN = gridRkmPnbpJual.dataTerpilih.SK_KEPUTUSAN;
                parInp.P_NTPN = gridRkmPnbpJual.dataTerpilih.NTPN;
                parInp.P_NILAI_PNBPSpecified = false;
                parInp.P_SELECT = "D";
                modeCrud = Convert.ToChar("D");
                ambilPnbpJual = new SvcWasdalPTJualPnbpCud.execute_pttClient();
                ambilPnbpJual.Beginexecute(parInp, new AsyncCallback(cudRkmPnbpJual), "");

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }


        private void cudRkmPnbpJual(IAsyncResult result)
        {
            try
            {
                dOutAmbilPnbpJual = ambilPnbpJual.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRkmPnbpJual(this.ubahDsRkmPnbpJual), dOutAmbilPnbpJual);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRkmPnbpJual(SvcWasdalPTJualPnbpCud.OutputParameters dataOutRkm);

        int _keBrpPnbpJual = 0;

        private void ubahDsRkmPnbpJual(SvcWasdalPTJualPnbpCud.OutputParameters dataOutRkm)
        {
            if (dataOutRkm.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalPTJualPnbpSelect.WASDALSROW_SELECT_JUAL_PNBP dataPenyama = new SvcWasdalPTJualPnbpSelect.WASDALSROW_SELECT_JUAL_PNBP();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_SETORSpecified = true;
                dataPenyama.TGL_TRANSAKSISpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                dataPenyama.NILAI_PNBPSpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formRkmPnbpJualTambah.idPemohon;
                        dataPenyama.ID_SATKER = formRkmPnbpJualTambah.idPemohon;
                        dataPenyama.IS_TB = (formRkmPnbpJualTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRkmPnbpJualTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRkmPnbpJualTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRkmPnbpJualTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRkmPnbpJualTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRkmPnbpJualTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRkmPnbpJualTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpJualTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRkmPnbpJualTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpJualTambah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRkmPnbpJualTambah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRkmPnbpJualTambah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRkmPnbpJualTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRkmPnbpJualTambah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRkmPnbpJual == null ? 1 : dsGridRkmPnbpJual.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NTPN = formRkmPnbpJualTambah.teNTPN.Text;
                        dataPenyama.TGL_SETOR = Convert.ToDateTime(formRkmPnbpJualTambah.deTglSetor.Text);
                        dataPenyama.NTB = formRkmPnbpJualTambah.teNTB.Text;
                        dataPenyama.TGL_TRANSAKSI = Convert.ToDateTime(formRkmPnbpJualTambah.deTglTransaksi.Text);
                        dataPenyama.NM_PENYETOR = formRkmPnbpJualTambah.teNamaPenyetor.Text;
                        dataPenyama.KD_AKUN = formRkmPnbpJualTambah.leAkun.EditValue.ToString();
                        dataPenyama.UR_AKUN = formRkmPnbpJualTambah.leAkun.Text;
                        dataPenyama.NILAI_PNBP = Convert.ToDecimal(formRkmPnbpJualTambah.teNilaiPnbp.Text);
                        dataPenyama.KET = formRkmPnbpJualTambah.teKet.Text;

                        dataPenyama.TIPE_PEMOHON = formRkmPnbpJualTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRkmPnbpJualTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRkmPnbpJualTambah.teNamaPemohon.Text;
                        dsGridRkmPnbpJual.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridRkmPnbpJual.dataTerpilih = dataPenyama;
                            _keBrpPnbpJual = 1;
                            formRkmPnbpJualTambah.gcDaftarAset.Enabled = true;
                            formRkmPnbpJualTambah.rgJenisAset.Properties.ReadOnly = true;
                            formRkmPnbpJualTambah.teNomorSk.Properties.ReadOnly = true;
                            formRkmPnbpJualTambah.teTanggalSk.Properties.ReadOnly = true;
                            formRkmPnbpJualTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formRkmPnbpJualTambah.sbCariPemohon.Enabled = false;
                            formRkmPnbpJualTambah.sbRefresh.Enabled = true;
                            formRkmPnbpJualTambah.teNamaInstansi.Properties.ReadOnly = true;
                            formRkmPnbpJualTambah.cePilihSemua.Enabled = true;
                            formRkmPnbpJualTambah.teKodePemohon.Properties.ReadOnly = true;
                            formRkmPnbpJualTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskJual.IndexOf(gridSkJual.dataTerpilih);
                            }
                            else
                            {
                                gridSkJual.dataTerpilih = gridSkJual.dataTerpilih;
                            }*/
                            _indeksData = dsGridRkmPnbpJual.IndexOf(gridRkmPnbpJual.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRkmPnbpJual.Remove(gridRkmPnbpJual.dataTerpilih);
                            dsGridRkmPnbpJual.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formRkmPnbpJualUbah.idPemohon;
                        dataPenyama.ID_SATKER = formRkmPnbpJualUbah.idPemohon;
                        dataPenyama.IS_TB = (formRkmPnbpJualUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.KD_KL = formRkmPnbpJualUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formRkmPnbpJualUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formRkmPnbpJualUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formRkmPnbpJualUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formRkmPnbpJualUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formRkmPnbpJualUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpJualUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formRkmPnbpJualUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formRkmPnbpJualUbah.teNilaiPenetapan.Text);
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formRkmPnbpJualUbah.teNamaPemohon.Text;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formRkmPnbpJualUbah.teTanggalSk.Text);
                        dataPenyama.NM_PENERBIT_SK = formRkmPnbpJualUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formRkmPnbpJualUbah.namaPenerbitSkDetail;
                        dataPenyama.NUM = (dsGridRkmPnbpJual == null ? 1 : dsGridRkmPnbpJual.Count + 1);
                        dataPenyama.ID_USER = konfigApp.idUser;

                        dataPenyama.NTPN = formRkmPnbpJualUbah.teNTPN.Text;
                        dataPenyama.TGL_SETOR = Convert.ToDateTime(formRkmPnbpJualUbah.deTglSetor.Text);
                        dataPenyama.NTB = formRkmPnbpJualUbah.teNTB.Text;
                        dataPenyama.TGL_TRANSAKSI = Convert.ToDateTime(formRkmPnbpJualUbah.deTglTransaksi.Text);
                        dataPenyama.NM_PENYETOR = formRkmPnbpJualUbah.teNamaPenyetor.Text;
                        dataPenyama.KD_AKUN = formRkmPnbpJualUbah.leAkun.EditValue.ToString();
                        dataPenyama.UR_AKUN = formRkmPnbpJualUbah.leAkun.Text;
                        dataPenyama.NILAI_PNBP = Convert.ToDecimal(formRkmPnbpJualUbah.teNilaiPnbp.Text);
                        dataPenyama.KET = formRkmPnbpJualUbah.teKet.Text;

                        dataPenyama.TIPE_PEMOHON = formRkmPnbpJualUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formRkmPnbpJualUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formRkmPnbpJualUbah.teNamaPemohon.Text;
                        _indeksData = dsGridRkmPnbpJual.IndexOf(gridRkmPnbpJual.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRkmPnbpJual.Remove(gridRkmPnbpJual.dataTerpilih);
                        dsGridRkmPnbpJual.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRkmPnbpJual.Remove(gridRkmPnbpJual.dataTerpilih);
                        break;
                }
                gridRkmPnbpJual.dsDataSource = dsGridRkmPnbpJual;
                gridRkmPnbpJual.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkJual();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        }

        private void pilihSkPnbp(SvcWasdalJualSkSelect.WASDALSROW_READ_WASDAL_PT_JUAL _skTerpilih)
        {
            formRkmPnbpJualTambah = new KES1.PNBP.JUAL.ucPNBPJualForm("C")
            {
                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                simpanDataRkmPnbpJual = new SimpanDataRPNBP(simpanDataRkmPnbpJual)
            };
            formRkmPnbpJualTambah.skTerpilih = _skTerpilih;
            setPanel(formRkmPnbpJualTambah);
            formRkmPnbpJualTambah.inisialisasiForm();
            setTombolRkmPnbpForm();
        }

        #endregion Simpan Data JUAL

        #region action button
        KES1.PNBP.JUAL.frmPuSk formSkPnbpJual;

        private void RkmPnbpJualTambah(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat PNBP Baru \n{0}?", konfigApp.namaLayanan11), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                formSkPnbpJual = new KES1.PNBP.JUAL.frmPuSk()
                {

                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    pilihSk = new PilihSkJual(pilihSkPnbp)
                };
                formSkPnbpJual.ShowDialog();
            }
        }

        private void RkmPnbpJualEdit(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

        }

        private void RkmPnbpJualHapus(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRkmPnbpJual.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format("Apakah anda ingin menghapus Tindak Lanjut\n{0}?", gridRkmPnbpJual.dataTerpilih.NTPN), konfigApp.judulKonfirmasi,
                 MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    this.HapusDataRkmPnbpJual();
                }
            }
        }

        private void RkmPnbpJualDetail(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridRkmPnbpJual.dataTerpilih != null)
            {
                if (formRkmPnbpJualUbah == null)
                {
                    formRkmPnbpJualUbah = new KES1.PNBP.JUAL.ucPNBPJualForm("U")
                    {

                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRkmPnbpJual = new SimpanDataRPNBP(simpanDataRkmPnbpJual)
                    };
                }
                formRkmPnbpJualUbah.dataTerpilih = gridRkmPnbpJual.dataTerpilih;
                setPanel(formRkmPnbpJualUbah);
                formRkmPnbpJualUbah.inisialisasiForm();
                setTombolRkmPnbpForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void RkmPnbpJualRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridRkmPnbpJual.teNamaKolom.Text = "";
            gridRkmPnbpJual.teCari.Text = "";
            gridRkmPnbpJual.fieldDicari = "";
            gridRkmPnbpJual.dataInisial = true;
            this.dataInisial = true;
            this.getInitRkmPnbpJual();
        }

        private void RkmPnbpJualMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRkmPnbpJual();
            }
        }

        private void RkmPnbpJualKembali(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = this.menuRekamPnbpWasdal;
            konfigApp.strSubMenu = this.subMenuMonPenjualan;
            konfigApp.kdPelayanan = "11";
            konfigApp.namaPelayanan = this.subMenuMonPenjualan;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRkmPnbp.Visible = true;
            ribbon.SelectedPage = rpRkmPnbp;
            initGridRkmPnbpJual();
            modeCari = false;
            gridRkmPnbpJual.teNamaKolom.Text = "";
            gridRkmPnbpJual.teCari.Text = "";
            gridRkmPnbpJual.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRkmPnbpJual();
        }

        private void RkmPnbpJualTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion

        private void cariDataRkmPnbpJual(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRkmPnbpJual();
        }
        #endregion

        #endregion

        #region Penertiban BMN


        #region -->> Setting Sifat Tombol
        private void setTombolPenertibanGrid()
        {
            bbiPenertibanTambah.Enabled = true;
            bbiPenertibanUbah.Enabled = true;
            bbiPenertibanHapus.Enabled = true;
            bbiPenertibanDetail.Enabled = true;
            bbiPenertibanKembali.Enabled = false;
            bbiPenertibanRefresh.Enabled = true;
            bbiPenertibanMoreData.Enabled = false;
        }

        private void setTombolPenertibanForm()
        {
            bbiPenertibanTambah.Enabled = false;
            bbiPenertibanUbah.Enabled = false;
            bbiPenertibanHapus.Enabled = false;
            bbiPenertibanDetail.Enabled = false;
            bbiPenertibanKembali.Enabled = true;
            bbiPenertibanRefresh.Enabled = false;
            bbiPenertibanMoreData.Enabled = false;
        }

        private void resetEventTombolPenertiban()
        {
            konfigApp.RemoveClickEvent(bbiPenertibanDetail);
            konfigApp.RemoveClickEvent(bbiPenertibanHapus);
            konfigApp.RemoveClickEvent(bbiPenertibanKembali);
            konfigApp.RemoveClickEvent(bbiPenertibanMoreData);
            konfigApp.RemoveClickEvent(bbiPenertibanRefresh);
            konfigApp.RemoveClickEvent(bbiPenertibanTambah);
            konfigApp.RemoveClickEvent(bbiPenertibanUbah);
        }
        #endregion

        private bool modeCariPenertiban = false;
        KES1.PENERTIBAN.ucPenertibanGrid gridPenertiban;
        KES1.PENERTIBAN.ucPenertibanForm formPenertibanTambah;
        KES1.PENERTIBAN.ucPenertibanForm formPenertibanUbah;
        KES1.PENERTIBAN.ucPenertibanForm formPenertibanDetail;
        private ArrayList dsGridPenertiban;
        SvcMonPenertibanKoEsKl.OutputParameters dOutPenertiban;
        SvcMonPenertibanKoEsKl.selectMonPenertibanKorEsKl_pttClient ambilPenertiban;

        private void setEventTombolPenertiban()
        {
            resetEventTombolPenertiban();
            //bbiPenertibanTambah.ItemClick += new ItemClickEventHandler(bbiPenertibanTambahKlik);
            //bbiPenertibanUbah.ItemClick += new ItemClickEventHandler(bbiPenertibanUbahKlik);
            //bbiPenertibanHapus.ItemClick += new ItemClickEventHandler(bbiPenertibanHapusKlik);
            //bbiPenertibanDetail.ItemClick += new ItemClickEventHandler(bbiPenertibanDetailKlik);
            //bbiPenertibanKembali.ItemClick += new ItemClickEventHandler(bbiPenertibanKembaliKlik);
            bbiPenertibanRefresh.ItemClick += new ItemClickEventHandler(bbiPenertibanRefreshKlik);
            bbiPenertibanMoreData.ItemClick += new ItemClickEventHandler(bbiPenertibanMoreDataKlik);
            bbiPenertibanKeluar.ItemClick += new ItemClickEventHandler(bbiPenertibanKeluarKlik);
        }

        private void initGridPenertiban()
        {
            if (gridPenertiban == null)
            {
                gridPenertiban = new KES1.PENERTIBAN.ucPenertibanGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataPenertiban),
                    //detailDataGrid = new DetailDataGrid(bbiPenertibanUbahKlik)
                };
            }
            setTombolPenertibanGrid();
            setEventTombolPenertiban();
            setPanel(gridPenertiban);
        }

        #region --++ Tombol Ribbon
        private void bbiPenertibanTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

            if (formPenertibanTambah == null)
            {
                formPenertibanTambah = new KES1.PENERTIBAN.ucPenertibanForm("C")
                {
                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    //simpanDataPenertiban = new SimpanDataPenertiban(simpanDataPenertiban)
                };
            }
            formPenertibanTambah.inisialisasiForm();
            setPanel(formPenertibanTambah);
            setTombolPenertibanForm();

        }
        #region Button Crud
     
        //private void bbiPenertibanUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridPenertiban.dataTerpilih != null)
        //    {
        //        if (formPenertibanUbah == null)
        //        {
        //            formPenertibanUbah = new KES1.PENERTIBAN.ucPenertibanForm("U")
        //            {
        //                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
        //                //simpanDataPenertiban = new SimpanDataPenertiban(simpanDataPenertiban)
        //            };
        //        }

        //        formPenertibanUbah.dataTerpilih = gridPenertiban.dataTerpilih;
        //        setPanel(formPenertibanUbah);
        //        formPenertibanUbah.inisialisasiForm();
        //        setTombolPenertibanForm();
        //    }
        //    else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        //}

        //private void bbiPenertibanHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridPenertiban.dataTerpilih != null)
        //    {
        //        if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusPenertiban, gridPenertiban.dataTerpilih.ID_PENERTIBAN), konfigApp.judulKonfirmasi,
        //            MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
        //        {
        //            try
        //            {
        //                myThread = new Thread(new ThreadStart(ShowProgresBar));
        //                myThread.Start();
        //                SvcWasdalPenertibanCud.InputParameters parInp = new SvcWasdalPenertibanCud.InputParameters();
        //                parInp.P_ID_PENERTIBAN = gridPenertiban.dataTerpilih.ID_PENERTIBAN;
        //                parInp.P_ID_PENERTIBANSpecified = true;
        //                parInp.P_ID_USER = gridPenertiban.dataTerpilih.ID_USER;
        //                parInp.P_ID_USERSpecified = true;
        //                parInp.P_ID_SATKER = gridPenertiban.dataTerpilih.ID_SATKER;
        //                parInp.P_BENTUK_PENERTIBAN = gridPenertiban.dataTerpilih.BENTUK_PENERTIBAN;
        //                parInp.P_ID_ASET = gridPenertiban.dataTerpilih.ID_ASET;
        //                parInp.P_ID_ASETSpecified = true;
        //                parInp.P_KD_BRG = gridPenertiban.dataTerpilih.KD_BRG;
        //                parInp.P_KD_SATKER = gridPenertiban.dataTerpilih.KD_SATKER;
        //                parInp.P_KET = gridPenertiban.dataTerpilih.KET;
        //                parInp.P_KUASA_PENGGUNA_BRG = gridPenertiban.dataTerpilih.KUASA_PENGGUNA_BRG;
        //                parInp.P_NM_PENGGUNA = gridPenertiban.dataTerpilih.NM_PENGGUNA;
        //                parInp.P_NOREG = gridPenertiban.dataTerpilih.NOREG;
        //                parInp.P_NUP = gridPenertiban.dataTerpilih.NUP.ToString();
        //                parInp.P_SELECT = "D";
        //                modeCrud = Convert.ToChar(parInp.P_SELECT);
        //                parInp.P_UR_SATKER = gridPenertiban.dataTerpilih.UR_SATKER;
        //                parInp.P_UR_SSKEL = gridPenertiban.dataTerpilih.UR_SSKEL;
        //                ambilDataPenertiban = new SvcWasdalPenertibanCud.execute_pttClient();
        //                ambilDataPenertiban.Open();
        //                ambilDataPenertiban.Beginexecute(parInp, new AsyncCallback(cudPenertiban), "");
        //            }
        //            catch
        //            {
        //                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //                this.Invoke(new AktifkanForm(aktifkanForm), "");
        //                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
        //            }
        //        }
        //    }
        //}

        //private void bbiPenertibanDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridPenertiban.dataTerpilih != null)
        //    {
        //        if (formPenertibanDetail == null)
        //        {
        //            formPenertibanDetail = new KES1.PENERTIBAN.ucPenertibanForm("A");
        //            formPenertibanDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
        //        }
        //        formPenertibanDetail.dataTerpilih = gridPenertiban.dataTerpilih;
        //        setPanel(formPenertibanDetail);
        //        formPenertibanDetail.inisialisasiForm();
        //        setTombolPenertibanForm();
        //    }
        //    else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        //}

        //private void bbiPenertibanKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    setPanel(gridPenertiban);
        //    setTombolPenertibanGrid();
        //    gridPenertiban.dsDataSource = dsGridPenertiban;
        //    gridPenertiban.displayData();
        //}
        #endregion
        private void bbiPenertibanRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridPenertiban.teNamaKolom.Text = "";
            gridPenertiban.teCari.Text = "";
            gridPenertiban.fieldDicari = "";
            gridPenertiban.dataInisial = true;
            this.dataInisial = true;
            this.getInitPenertiban();
        }

        private void bbiPenertibanMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitPenertiban();
            }
        }

        private void bbiPenertibanKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        #endregion --++ Tombol Ribbon

        private void nbiMonitoringWasdalPenertibanBMN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Penertiban BMN";
            konfigApp.strSubMenu = konfigApp.namaLayanan18;
            konfigApp.kdPelayanan = "18";
            konfigApp.namaPelayanan = konfigApp.namaLayanan18;
            this.Enabled = false;
            this.inisialisasiForm();
            rpPenertibanBMN.Visible = true;
            ribbon.SelectedPage = rpPenertibanBMN;
            initGridPenertiban();
            modeCariPenertiban = false;
            gridPenertiban.teNamaKolom.Text = "";
            gridPenertiban.teCari.Text = "";
            gridPenertiban.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitPenertiban();
        }


        #region --++ Ambil Data Penertiban
        private void getInitPenertiban()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcMonPenertibanKoEsKl.InputParameters parInp = new SvcMonPenertibanKoEsKl.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataMaks;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataMaks;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
               // parInp.P_COUNT = "y";
                parInp.STR_WHERE = String.Format("ID_ESELON1 = {0}", konfigApp.idEselon1, this.strCari);  //ini diganti jadi gini
                ambilPenertiban = new SvcMonPenertibanKoEsKl.selectMonPenertibanKorEsKl_pttClient();
                ambilPenertiban.Open();
                ambilPenertiban.Beginexecute(parInp, new AsyncCallback(getPenertiban), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getPenertiban(IAsyncResult result)
        {
            try
            {
                dOutPenertiban = ambilPenertiban.Endexecute(result);    //dari sini langsung ke catch
                ambilPenertiban.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsPenertiban(dsPenertiban), dOutPenertiban);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);   //disini
            }
        }

        private delegate void DsPenertiban(SvcMonPenertibanKoEsKl.OutputParameters dataOut);

        private void dsPenertiban(SvcMonPenertibanKoEsKl.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_MON_KOR_ES_KL_PENERTIBAN.Count();
            decimal jmlCurrent = 0;
            //string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_MON_ESELON1_PENERTIBAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            string totalData = "";
           
            if (jmlDataKl == konfigApp.dataMaks)
            {
                this.masihAdaData = true;
                bbiPenertibanMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataMaks;
            }
            else
            {
                if (jmlDataKl > konfigApp.dataMaks)
                    jmlCurrent = konfigApp.dataMaks;
                else
                    jmlCurrent = jmlDataKl;
                this.masihAdaData = false;
                bbiPenertibanMoreData.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridPenertiban = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                //dataOut.SF_ROW_WASDAL_PENERTIBAN[i] = (dataOut.SF_ROW_WASDAL_PENERTIBAN[i] == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridPenertiban.Add(dataOut.SF_MON_KOR_ES_KL_PENERTIBAN[i]);
            }

            gridPenertiban.sbCariOnline.Enabled = !modeCari;
            gridPenertiban.dsDataSource = dsGridPenertiban;
            gridPenertiban.displayData();
            if (modeCariPenertiban == true)
            {
                string xSatu = gridPenertiban.teNamaKolom.Text.Trim();
                string xDua = gridPenertiban.teCari.Text.Trim();
                string xTiga = gridPenertiban.fieldDicari;
                gridPenertiban.gvGridPenertiban.ClearColumnsFilter();
                gridPenertiban.teNamaKolom.Text = xSatu;
                gridPenertiban.teCari.Text = xDua;
                gridPenertiban.fieldDicari = xTiga;
            }
            else
                gridPenertiban.gvGridPenertiban.ClearColumnsFilter();
            gridPenertiban.labelTotData.Text = "";
            gridPenertiban.labelTotData.Text = "Menampilkan " + jmlCurrent + " dari total " + totalData + " data";
        }

        private void cariDataPenertiban(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCariPenertiban = true;
            dataInisial = initModeCari;
            getInitPenertiban();
        }
        #endregion Ambil Penertiban

        #region --++ Simpan Data Penertiban
        //SvcWasdalPenertibanCud.OutputParameters dOutAmbilDataPenertiban;
        //SvcWasdalPenertibanCud.execute_pttClient ambilDataPenertiban;

        //private void simpanDataPenertiban(string _mode)
        //{

        //    try
        //    {
        //        myThread = new Thread(new ThreadStart(ShowProgresBar));
        //        myThread.Start();
        //        SvcWasdalPenertibanCud.InputParameters parInp = new SvcWasdalPenertibanCud.InputParameters();
        //        parInp.P_ID_SATKER = konfigApp.idSatker;
        //        parInp.P_ID_SATKERSpecified = (konfigApp.idSatker == 0 ? false : true);
        //        parInp.P_ID_PENERTIBAN = ((_mode == "C" || _mode == "CU") ? null : gridPenertiban.dataTerpilih.ID_PENERTIBAN);
        //        parInp.P_ID_PENERTIBANSpecified = true;
        //        parInp.P_ID_USER = konfigApp.idUser;
        //        parInp.P_ID_USERSpecified = true;
        //        parInp.P_BENTUK_PENERTIBAN = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.cbJenisPenertiban.Text : formPenertibanUbah.cbJenisPenertiban.Text);
        //        parInp.P_KET = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.teKeterangan.Text : formPenertibanUbah.teKeterangan.Text);
        //        parInp.P_NUP = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.teUraianPenertiban.Text : formPenertibanUbah.teUraianPenertiban.Text);
        //        parInp.P_KUASA_PENGGUNA_BRG = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.teKuasaPenggunaBarang.Text : formPenertibanUbah.teKuasaPenggunaBarang.Text);
        //        parInp.P_UR_SATKER = ((_mode == "C" || _mode == "CU") ? konfigApp.namaSatker : konfigApp.namaSatker);
        //        parInp.P_KET = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.teKeterangan.Text : formPenertibanUbah.teKeterangan.Text);
        //        parInp.P_ID_ASET = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah._idAset : formPenertibanUbah._idAset);
        //        parInp.P_ID_ASETSpecified = true;
        //        parInp.P_ID_SATKER = konfigApp.idSatker;
        //        parInp.P_ID_SATKERSpecified = true;
        //        parInp.P_ID_USER = konfigApp.idUser;
        //        parInp.P_ID_USERSpecified = true;
        //        parInp.P_KD_BRG = ((_mode == "C" || _mode == "CU") ? konfigApp.kodebarang : konfigApp.kodebarang);
        //        parInp.P_KD_SATKER = konfigApp.kodeSatker;
        //        parInp.P_NM_PENGGUNA = konfigApp.namaPengguna;
        //        parInp.P_NOREG = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.noreg.ToString() : formPenertibanUbah.noreg.ToString());
        //        parInp.P_NUP = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.teNup.Text : formPenertibanUbah.teNup.Text);
        //        parInp.P_UR_SSKEL = ((_mode == "C" || _mode == "CU") ? formPenertibanTambah.teUraianBarang.Text : formPenertibanUbah.teUraianBarang.Text);
        //        string _penggantiChar = (_mode == "CU" ? "U" : _mode);
        //        string _charSementara = (_mode == "CU" ? "Z" : _mode);
        //        parInp.P_SELECT = _penggantiChar;
        //        modeCrud = Convert.ToChar(_charSementara);
        //        ambilDataPenertiban = new SvcWasdalPenertibanCud.execute_pttClient();
        //        ambilDataPenertiban.Beginexecute(parInp, new AsyncCallback(cudPenertiban), "");
        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(aktifkanForm), "");
        //        MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulGagalSimpan);
        //    }
        //}

        //private void cudPenertiban(IAsyncResult result)
        //{
        //    try
        //    {
        //        dOutAmbilDataPenertiban = ambilDataPenertiban.Endexecute(result);
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        this.Invoke(new UbahDsPenertiban(this.ubahDsPenertiban), dOutAmbilDataPenertiban);

        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(aktifkanForm), "");
        //        if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalSimpan;
        //        }
        //        else if (this.modeCrud == 'D')
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalHapus;
        //        }
        //        else
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalLain;
        //        }
        //        MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
        //    }
        //}

        //private delegate void UbahDsPenertiban(SvcWasdalPenertibanCud.OutputParameters dataOutKpknlCrud);

        //int _keBerapa = 0;

        //private void ubahDsPenertiban(SvcWasdalPenertibanCud.OutputParameters dataOutKpknlCrud)
        //{
        //    if (dataOutKpknlCrud.PO_RESULT == "Y")  //disini masih N
        //    {
        //        int _indeksData = 0;
        //        SvcMonEselon1PenertibanA1.WASDALSROW_MON_ESELON1_PENERTIBAN dataPenyama = new SvcMonEselon1PenertibanA1.WASDALSROW_MON_ESELON1_PENERTIBAN();
        //        dataPenyama.ID_ASETSpecified = true;
        //        dataPenyama.ID_SATKERSpecified = true;
        //        dataPenyama.ID_USER = konfigApp.idUser;
        //        dataPenyama.ID_USERSpecified = true;
        //        dataPenyama.ID_PENERTIBANSpecified = true;
        //        dataPenyama.NUPSpecified = true;
        //        dataPenyama.TOTAL_DATASpecified = true;
        //        switch (modeCrud.ToString())
        //        {
        //            case "C":
        //            case "Z":
        //                dataPenyama.ID_SATKER = konfigApp.idSatker;
        //                dataPenyama.KD_SATKER = konfigApp.kodeSatker;
        //                dataPenyama.ID_USER = konfigApp.idUser;
        //                dataPenyama.BENTUK_PENERTIBAN = formPenertibanTambah.cbJenisPenertiban.Text;
        //                dataPenyama.KET = formPenertibanTambah.teKeterangan.Text;
        //                dataPenyama.UR_BENTUK_PENERTIBAN = formPenertibanTambah.teUraianPenertiban.Text;
        //                dataPenyama.KUASA_PENGGUNA_BRG = formPenertibanTambah.teKuasaPenggunaBarang.Text;
        //                dataPenyama.NM_PENGGUNA = konfigApp.namaPengguna;
        //                dataPenyama.NUM = (dsGridPenertiban == null ? 1 : dsGridPenertiban.Count + 1);
        //                dataPenyama.UR_SATKER = konfigApp.namaSatker;
        //                //dataPenyama.ID_ASET = formPenertibanTambah.idAset;
        //                dataPenyama.ID_ASETSpecified = true;
        //                dataPenyama.ID_PENERTIBAN = null; 
        //                dataPenyama.ID_PENERTIBANSpecified = true;
        //                dataPenyama.ID_SATKERSpecified = true;
        //                dataPenyama.ID_USERSpecified = true;
        //                dataPenyama.KD_BRG = formPenertibanTambah.teKodeBarang.Text;
        //                dataPenyama.NOREG = formPenertibanTambah.noreg;
        //                dataPenyama.NUMSpecified = true;
        //                dataPenyama.NUP = Convert.ToDecimal(konfigApp.nup);
        //                dataPenyama.NUPSpecified = true;
        //                dataPenyama.TOTAL_DATA = (dsGridPenertiban == null ? 1 : dsGridPenertiban.Count + 1);
        //                dataPenyama.TOTAL_DATASpecified = true;
        //                dataPenyama.UR_SSKEL = formPenertibanTambah.teUraianBarang.Text;
        //                //dataPenyama.UR_SSKEL = formPenertibanTambah.teUraianPenertiban.Text;

        //                dsGridPenertiban.Add(dataPenyama);
        //                if (modeCrud == 'C')
        //                {
        //                    gridPenertiban.dataTerpilih = dataPenyama;
        //                    _keBerapa = 1;
        //                    //formPenertibanTambah.gcDaftarAset.Enabled = true;
        //                    //formPenertibanTambah.sbTambah.Enabled = true;
        //                    //formPenertibanTambah.sbHapus.Enabled = true;
        //                    //formPenertibanTambah.rgJenisAset.Properties.ReadOnly = true;
        //                    //formPenertibanTambah.sbRefresh.Enabled = true;
        //                    //formPenertibanTambah.cePilihSemua.Enabled = true;
        //                    //formSkPspBmnTambah.statusForm = "CU";
        //                    formPenertibanTambah.sbSimpan.Enabled = true;
        //                }
        //                else if (modeCrud == 'Z')
        //                {
        //                    //if (_keBerapa == 1)
        //                    //{
        //                    //    _keBerapa++;
        //                    //    _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
        //                    //}
        //                    //else
        //                    //{
        //                    //    gridSkPspBmn.dataTerpilih = gridSkPspBmn.dataTerpilih;
        //                    //}
        //                    _indeksData = dsGridPenertiban.IndexOf(gridPenertiban.dataTerpilih);
        //                    _indeksData = (_indeksData < 0 ? 0 : _indeksData);
        //                    dsGridPenertiban.Remove(gridPenertiban.dataTerpilih);
        //                    dsGridPenertiban.Insert(_indeksData, dataPenyama);
        //                }
        //                break;
        //            case "U":
        //                dataPenyama.ID_SATKER = konfigApp.idSatker;
        //                dataPenyama.KD_SATKER = konfigApp.kodeSatker;
        //                dataPenyama.ID_USER = konfigApp.idUser;
        //                dataPenyama.BENTUK_PENERTIBAN = formPenertibanUbah.cbJenisPenertiban.Text; //udah di ubah
        //                dataPenyama.KET = formPenertibanUbah.Keterangan;
        //                //dataPenyama.UR_PENERTIBAN = formPenertibanTambah.teUraianPenertiban.Text;
        //                dataPenyama.KUASA_PENGGUNA_BRG = formPenertibanUbah.teKuasaPenggunaBarang.Text;
        //                dataPenyama.NM_PENGGUNA = konfigApp.namaPengguna;
        //                dataPenyama.NUM = (dsGridPenertiban == null ? 1 : dsGridPenertiban.Count + 1);
        //                dataPenyama.UR_SATKER = konfigApp.namaSatker;
        //                dataPenyama.ID_ASET = formPenertibanUbah.idAset;
        //                dataPenyama.ID_ASETSpecified = true;
        //                dataPenyama.ID_PENERTIBAN = null;
        //                dataPenyama.ID_PENERTIBANSpecified = true;
        //                dataPenyama.ID_SATKERSpecified = true;
        //                dataPenyama.ID_USERSpecified = true;
        //                dataPenyama.KD_BRG = formPenertibanUbah.teKodeBarang.Text;
        //                dataPenyama.NOREG = formPenertibanUbah.noreg;
        //                dataPenyama.NUMSpecified = true;
        //                dataPenyama.NUP = Convert.ToDecimal(konfigApp.nup);
        //                dataPenyama.NUPSpecified = true;
        //                dataPenyama.TOTAL_DATA = (dsGridPenertiban == null ? 1 : dsGridPenertiban.Count + 1);
        //                dataPenyama.TOTAL_DATASpecified = true;
        //                dataPenyama.UR_SSKEL = formPenertibanUbah.teUraianBarang.Text;
        //                _indeksData = dsGridPenertiban.IndexOf(gridPenertiban.dataTerpilih);
        //                _indeksData = (_indeksData < 0 ? 0 : _indeksData);
        //                dsGridPenertiban.Remove(gridPenertiban.dataTerpilih);
        //                dsGridPenertiban.Insert(_indeksData, dataPenyama);
        //                break;
        //            case "D":
        //                dsGridPenertiban.Remove(gridPenertiban.dataTerpilih);
        //                break;
        //        }
        //        gridPenertiban.dsDataSource = dsGridPenertiban;
        //        gridPenertiban.displayData();

        //        //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
        //        //{
        //        //    initGridSkPspBmn();
        //        //}
        //    }
        //    else MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
        //}
        #endregion Simpan Data Penertiban

        #endregion

        private void panelKoorSatker_Paint(object sender, PaintEventArgs e)
        {

        }

        private void barButtonItem9_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            getInitLapPenertiban();
        }

        private void barButtonItem10_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpPenertibanBMN.Visible = true;
        }

        #region PEREKAMAN SK OLD

        //#region PSPBMN

        //#region -->> Setting Sifat Tombol
        //private void setTombolRskGrid()
        //{
        //    bbiRskTambah.Enabled = true;
        //    bbiRskUbah.Enabled = true;
        //    bbiRskHapus.Enabled = true;
        //    bbiRskDetail.Enabled = true;
        //    bbiRskKembali.Enabled = true;
        //    bbiRskRefresh.Enabled = true;
        //    bbiRskMoreData.Enabled = false;
        //    bbiRskKembaliGrid.Enabled = false;
        //}

        //private void setTombolRskForm()
        //{
        //    bbiRskTambah.Enabled = false;
        //    bbiRskUbah.Enabled = false;
        //    bbiRskHapus.Enabled = false;
        //    bbiRskDetail.Enabled = false;
        //    bbiRskKembali.Enabled = true;
        //    bbiRskRefresh.Enabled = false;
        //    bbiRskMoreData.Enabled = false;
        //    bbiRskKembaliGrid.Enabled = true;
        //}

        //private void resetEventTombolRsk()
        //{
        //    konfigApp.RemoveClickEvent(bbiRskDetail);
        //    konfigApp.RemoveClickEvent(bbiRskHapus);
        //    konfigApp.RemoveClickEvent(bbiRskKembali);
        //    konfigApp.RemoveClickEvent(bbiRskMoreData);
        //    konfigApp.RemoveClickEvent(bbiRskRefresh);
        //    konfigApp.RemoveClickEvent(bbiRskTambah);
        //    konfigApp.RemoveClickEvent(bbiRskUbah);
        //    konfigApp.RemoveClickEvent(bbiRskKembaliGrid);
        //}
        //#endregion

        //private bool modeCariRSK = false;
        //KES1.RSK.ucRskPspBmnGrid gridSkPspBmn;
        //KES1.RSK.ucRskPspBmnForm formSkPspBmnTambah;
        //KES1.RSK.ucRskPspBmnForm formSkPspBmnUbah;
        //KES1.RSK.ucRskPspBmnForm formSkPspBmnDetail;
        //private ArrayList dsGridRskPspBmn;
        //SvcWasdalPSPBMNSkSelect.OutputParameters dOutRskPspBmn;
        //SvcWasdalPSPBMNSkSelect.execute_pttClient ambilRskPspBmn;

        //private void setEventTombolRskPspBmn()
        //{
        //    resetEventTombolRsk();
        //    bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPspBmnTambahKlik);
        //    bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPspBmnUbahKlik);
        //    bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPspBmnHapusKlik);
        //    bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDetailKlik);
        //    bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
        //    bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
        //    bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPspBmnRefreshKlik);
        //    bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPspBmnMoreDataKlik);
        //    bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliGridKlik);
        //}

        //private void initGridSkPspBmn()
        //{
        //    if (gridSkPspBmn == null)
        //    {
        //        gridSkPspBmn = new KES1.RSK.ucRskPspBmnGrid()
        //        {
        //            cariDataOnline = new CariDataOnline(cariDataRskPspBmn),
        //            detailDataGrid = new DetailDataGrid(bbiRskPspBmnUbahKlik)
        //        };
        //    }
        //    setTombolRskGrid();
        //    setEventTombolRskPspBmn();
        //    setPanel(gridSkPspBmn);
        //}

        //#region --++ Tombol Ribbon
        //private void bbiRskPspBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan02), konfigApp.judulKonfirmasi,
        //        MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
        //    {
        //        if (formSkPspBmnTambah == null)
        //        {
        //            formSkPspBmnTambah = new KES1.RSK.ucRskPspBmnForm("C")
        //            {
        //                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
        //                simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPspBmn)
        //            };
        //        }
        //        formSkPspBmnTambah.inisialisasiForm();
        //        setPanel(formSkPspBmnTambah);
        //        setTombolRskForm();
        //    }
        //}

        //private void bbiRskPspBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridSkPspBmn.dataTerpilih != null)
        //    {
        //        if (formSkPspBmnUbah == null)
        //        {
        //            formSkPspBmnUbah = new KES1.RSK.ucRskPspBmnForm("U")
        //            {
        //                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
        //                simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPspBmn)
        //            };
        //        }
        //        formSkPspBmnUbah.dataTerpilih = gridSkPspBmn.dataTerpilih;
        //        setPanel(formSkPspBmnUbah);
        //        formSkPspBmnUbah.inisialisasiForm();
        //        setTombolRskForm();
        //    }
        //    else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        //}

        //private void bbiRskPspBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridSkPspBmn.dataTerpilih != null)
        //    {
        //        if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPspBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
        //            MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
        //        {
        //            try
        //            {
        //                myThread = new Thread(new ThreadStart(ShowProgresBar));
        //                myThread.Start();
        //                SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
        //                parInp.P_ID_PEMOHON = gridSkPspBmn.dataTerpilih.ID_PEMOHON;
        //                parInp.P_ID_PEMOHONSpecified = true;
        //                parInp.P_ID_USER = gridSkPspBmn.dataTerpilih.ID_USER;
        //                parInp.P_ID_USERSpecified = true;
        //                parInp.P_IS_TB = gridSkPspBmn.dataTerpilih.IS_TB;
        //                parInp.P_JABATAN_TTD = gridSkPspBmn.dataTerpilih.JABATAN_TTD;
        //                parInp.P_KD_PELAYANAN = gridSkPspBmn.dataTerpilih.KD_PELAYANAN;
        //                parInp.P_KD_PENERBIT_SK = gridSkPspBmn.dataTerpilih.KD_PENERBIT_SK;
        //                parInp.P_KD_PENERBIT_SK_DTL = gridSkPspBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
        //                parInp.P_NILAI_PENETAPAN = gridSkPspBmn.dataTerpilih.NILAI_PENETAPAN;
        //                parInp.P_NILAI_PENETAPANSpecified = true;
        //                parInp.P_NIP_PENANDATANGAN = gridSkPspBmn.dataTerpilih.NIP_PENANDATANGAN;
        //                parInp.P_NM_PENANDATANGAN = gridSkPspBmn.dataTerpilih.NM_PENANDATANGAN;
        //                parInp.P_NM_PENERBIT_SK = gridSkPspBmn.dataTerpilih.NM_PENERBIT_SK;
        //                parInp.P_NM_PENERBIT_SK_DTL = gridSkPspBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
        //                parInp.P_SELECT = "D";
        //                modeCrud = Convert.ToChar(parInp.P_SELECT);
        //                parInp.P_SK_KEPUTUSAN = gridSkPspBmn.dataTerpilih.SK_KEPUTUSAN;
        //                parInp.P_TGL_SK = konfigApp.DateToString(gridSkPspBmn.dataTerpilih.TGL_SK);
        //                parInp.P_THN_ANG = (gridSkPspBmn.dataTerpilih.THN_ANG == "-") ? konfigApp.tahunAnggaran.ToString() : gridSkPspBmn.dataTerpilih.THN_ANG;
        //                parInp.P_TIPE_PEMOHON = gridSkPspBmn.dataTerpilih.TIPE_PEMOHON;
        //                parInp.P_URAIAN_KEPUTUSAN = gridSkPspBmn.dataTerpilih.URAIAN_KEPUTUSAN;
        //                ambilDataPspBmn = new SvcWasdalPSPBMNCrud.execute_pttClient();
        //                ambilDataPspBmn.Open();
        //                ambilDataPspBmn.Beginexecute(parInp, new AsyncCallback(cudRskPspBmn), "");
        //            }
        //            catch
        //            {
        //                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //                this.Invoke(new AktifkanForm(aktifkanForm), "");
        //                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
        //            }
        //        }
        //    }
        //}

        //private void bbiRskPspBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridSkPspBmn.dataTerpilih != null)
        //    {
        //        if (formSkPspBmnDetail == null)
        //        {
        //            formSkPspBmnDetail = new KES1.RSK.ucRskPspBmnForm("A");
        //            formSkPspBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
        //        }
        //        formSkPspBmnDetail.dataTerpilih = gridSkPspBmn.dataTerpilih;
        //        setPanel(formSkPspBmnDetail);
        //        formSkPspBmnDetail.inisialisasiForm();
        //        setTombolRskForm();
        //    }
        //    else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        //}

        //private void bbiRskPspBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    panelKoorSatker.Controls.Clear();
        //    rpRekamSK.Visible = false;
        //}

        //private void bbiRskPspBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    strCari = "";
        //    modeCari = false;
        //    gridSkPspBmn.teNamaKolom.Text = "";
        //    gridSkPspBmn.teCari.Text = "";
        //    gridSkPspBmn.fieldDicari = "";
        //    gridSkPspBmn.dataInisial = true;
        //    this.dataInisial = true;
        //    this.getInitRskPspBmn();
        //}

        //private void bbiRskPspBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (this.masihAdaData == true)
        //    {
        //        this.dataInisial = false;
        //        this.getInitRskPspBmn();
        //    }
        //}

        //private void bbiRskPspBmnKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    this.Dispose();
        //}

        //private void bbiRskPspBmnKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    konfigApp.strMenu = "Perekaman SK";
        //    konfigApp.strSubMenu = "Perekaman " + konfigApp.namaLayanan02;
        //    konfigApp.kdPelayanan = "02";
        //    konfigApp.namaPelayanan = konfigApp.namaLayanan02;
        //    this.Enabled = false;
        //    this.inisialisasiForm();
        //    rpRekamSK.Visible = true;
        //    ribbon.SelectedPage = rpRekamSK;
        //    initGridSkPspBmn();
        //    modeCariRSK = false;
        //    gridSkPspBmn.teNamaKolom.Text = "";
        //    gridSkPspBmn.teCari.Text = "";
        //    gridSkPspBmn.fieldDicari = "";
        //    strCari = "";
        //    this.dataInisial = true;
        //    this.getInitRskPspBmn();
        //}

        //#endregion --++ Tombol Ribbon

        //private void nbiPerekamanSK_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        //{
        //    konfigApp.strMenu = "Perekaman SK";
        //    konfigApp.strSubMenu = "Perekaman " + konfigApp.namaLayanan02;
        //    konfigApp.kdPelayanan = "02";
        //    konfigApp.namaPelayanan = konfigApp.namaLayanan02;
        //    this.Enabled = false;
        //    this.inisialisasiForm();
        //    rpRekamSK.Visible = true;
        //    ribbon.SelectedPage = rpRekamSK;
        //    initGridSkPspBmn();
        //    modeCariRSK = false;
        //    gridSkPspBmn.teNamaKolom.Text = "";
        //    gridSkPspBmn.teCari.Text = "";
        //    gridSkPspBmn.fieldDicari = "";
        //    strCari = "";
        //    this.dataInisial = true;
        //    this.getInitRskPspBmn();
        //}

        //#region --++ Ambil Data PSP BMN
        //private void getInitRskPspBmn()
        //{
        //    this.Enabled = false;
        //    try
        //    {
        //        myThread = new Thread(new ThreadStart(ShowProgresBar));
        //        myThread.Start();
        //        SvcWasdalPSPBMNSkSelect.InputParameters parInp = new SvcWasdalPSPBMNSkSelect.InputParameters();
        //        parInp.P_COL = "";
        //        if (dataInisial == true)
        //        {
        //            konfigApp.currentMaks = konfigApp.dataAkhir;
        //            konfigApp.currentMin = konfigApp.dataAwal;
        //        }
        //        else
        //        {
        //            konfigApp.currentMin = konfigApp.currentMaks + 1;
        //            konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
        //        }
        //        parInp.P_MAX = konfigApp.currentMaks;
        //        parInp.P_MAXSpecified = true;
        //        parInp.P_MIN = konfigApp.currentMin;
        //        parInp.P_MINSpecified = true;
        //        parInp.P_SORT = "";
        //        parInp.P_COUNT = "Y";
        //        parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON = 'ESELON1' AND ID_PEMOHON={2})) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idEselon1, this.strCari);
        //        ambilRskPspBmn = new SvcWasdalPSPBMNSkSelect.execute_pttClient();
        //        //ambilRskPspBmn.Open();
        //        ambilRskPspBmn.Beginexecute(parInp, new AsyncCallback(getRskPspBmn), null);
        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
        //    }
        //}

        //private void getRskPspBmn(IAsyncResult result)
        //{
        //    try
        //    {
        //        dOutRskPspBmn = ambilRskPspBmn.Endexecute(result);
        //        ambilRskPspBmn.Close();
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        this.Invoke(new DsRskPspBmn(dsRskPspBmn), dOutRskPspBmn);
        //    }
        //    catch (Exception ex)
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
        //    }
        //}

        //private delegate void DsRskPspBmn(SvcWasdalPSPBMNSkSelect.OutputParameters dataOut);

        //private void dsRskPspBmn(SvcWasdalPSPBMNSkSelect.OutputParameters dataOut)
        //{
        //    int jmlData = dataOut.SF_READ_WASDAL_PSP.Count();
        //    decimal jmlCurrent = 0;
        //    string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_PSP[jmlData - 1].TOTAL_DATA.ToString();
        //    if (jmlData == konfigApp.dataAkhir)
        //    {
        //        this.masihAdaData = true;
        //        bbiRskMoreData.Enabled = true;
        //        jmlCurrent = konfigApp.dataAkhir;
        //    }
        //    else
        //    {
        //        this.masihAdaData = false;
        //        bbiRskMoreData.Enabled = false;
        //        if (jmlData > konfigApp.dataAkhir)
        //            jmlCurrent = konfigApp.dataAkhir;
        //        else
        //            jmlCurrent = jmlData;
        //    }
        //    if (dataInisial == true)
        //    {
        //        dsGridRskPspBmn = new ArrayList();
        //    }
        //    for (int i = 0; i < jmlData; i++)
        //    {
        //        dataOut.SF_READ_WASDAL_PSP[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
        //        dsGridRskPspBmn.Add(dataOut.SF_READ_WASDAL_PSP[i]);
        //    }

        //    gridSkPspBmn.labelTotData.Text = "";
        //    gridSkPspBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " data dari " + totalData + " data";
        //    gridSkPspBmn.sbCariOnline.Enabled = !modeCari;
        //    gridSkPspBmn.dsDataSource = dsGridRskPspBmn;
        //    gridSkPspBmn.displayData();
        //    if (modeCariRSK == true)
        //    {
        //        string xSatu = gridSkPspBmn.teNamaKolom.Text.Trim();
        //        string xDua = gridSkPspBmn.teCari.Text.Trim();
        //        string xTiga = gridSkPspBmn.fieldDicari;
        //        gridSkPspBmn.gvGridPenertiban.ClearColumnsFilter();
        //        gridSkPspBmn.teNamaKolom.Text = xSatu;
        //        gridSkPspBmn.teCari.Text = xDua;
        //        gridSkPspBmn.fieldDicari = xTiga;
        //    }
        //    else
        //        gridSkPspBmn.gvGridPenertiban.ClearColumnsFilter();
        //}

        //private void cariDataRskPspBmn(string _strWhere, bool initModeCari)
        //{
        //    strCari = _strWhere;
        //    modeCariRSK = true;
        //    dataInisial = initModeCari;
        //    getInitRskPspBmn();
        //}
        //#endregion Ambil PSP BMN

        //#region --++ Simpan Data PSP BMN
        //SvcWasdalPSPBMNCrud.OutputParameters dOutAmbilDataPspBmn;
        //SvcWasdalPSPBMNCrud.execute_pttClient ambilDataPspBmn;

        //private void simpanDataRskPspBmn(string _mode)
        //{
        //    try
        //    {
        //        myThread = new Thread(new ThreadStart(ShowProgresBar));
        //        myThread.Start();
        //        SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
        //        parInp.P_ID_SK_WASDALSpecified = true;
        //        parInp.P_ID_SK_WASDAL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.idSkWasdal : formSkPspBmnUbah.idSkWasdal);
        //        parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
        //        parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
        //        parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.idPemohon : formSkPspBmnUbah.idPemohon);
        //        parInp.P_ID_PEMOHONSpecified = true;
        //        parInp.P_ID_USER = konfigApp.idUser;
        //        parInp.P_ID_USERSpecified = true;
        //        parInp.P_ID_SATKERSpecified = true;
        //        parInp.P_ID_SATKER = konfigApp.idSatker;
        //        parInp.P_KD_SATKER = konfigApp.kodeSatker;
        //        parInp.P_UR_SATKER = konfigApp.namaSatker;
        //        parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.rgJenisAset.EditValue.ToString() : formSkPspBmnUbah.rgJenisAset.EditValue.ToString());
        //        parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teJabatan.Text.Trim() : formSkPspBmnUbah.teJabatan.Text.Trim());
        //        parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
        //        parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.kodePenerbitSk : formSkPspBmnUbah.kodePenerbitSk);
        //        parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.kodePenerbitSkDetail : formSkPspBmnUbah.kodePenerbitSkDetail);
        //        parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnTambah.teNilaiPenetapan.Text)) : (formSkPspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnUbah.teNilaiPenetapan.Text)));
        //        parInp.P_NILAI_PENETAPANSpecified = true;
        //        parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNipPenandaTangan.Text : formSkPspBmnUbah.teNipPenandaTangan.Text);
        //        parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNamaPenandaTangan.Text : formSkPspBmnUbah.teNamaPenandaTangan.Text);
        //        parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNmPenerbitSk.Text : formSkPspBmnUbah.teNmPenerbitSk.Text);
        //        parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNmPenerbitSkDetail.Text : formSkPspBmnUbah.teNmPenerbitSkDetail.Text);
        //        //parInp.P_FILE_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teFileSk.Text : formSkPspBmnUbah.teFileSk.Text);
        //        //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkPspBmnTambah.teFileSk.Text) : konfigApp.FileToByteArray(formSkPspBmnUbah.teFileSk.Text ));
        //        string _penggantiChar = (_mode == "CU" ? "U" : _mode);
        //        string _charSementara = (_mode == "CU" ? "Z" : _mode);
        //        parInp.P_SELECT = _penggantiChar;
        //        modeCrud = Convert.ToChar(_charSementara);
        //        parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNomorSk.Text.Trim() : formSkPspBmnUbah.teNomorSk.Text.Trim());
        //        parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
        //        parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teTanggalSk.EditValue : formSkPspBmnUbah.teTanggalSk.EditValue)));
        //        parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teTahunAnggaran.Text : formSkPspBmnUbah.teTahunAnggaran.Text);
        //        parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teJenisPemohon.Text : formSkPspBmnUbah.teJenisPemohon.Text);
        //        parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.tipePengelola : formSkPspBmnUbah.tipePengelola); ;//konfigApp.tipePengelola;
        //        parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teUraianKeputusan.Text : formSkPspBmnUbah.teUraianKeputusan.Text);
        //        ambilDataPspBmn = new SvcWasdalPSPBMNCrud.execute_pttClient();
        //        ambilDataPspBmn.Beginexecute(parInp, new AsyncCallback(cudRskPspBmn), "");
        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(aktifkanForm), "");
        //        MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulGagalSimpan);
        //    }
        //}

        //private void cudRskPspBmn(IAsyncResult result)
        //{
        //    try
        //    {
        //        dOutAmbilDataPspBmn = ambilDataPspBmn.Endexecute(result);
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        this.Invoke(new UbahDsPspBmn(this.ubahDsPspBmn), dOutAmbilDataPspBmn);

        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(aktifkanForm), "");
        //        if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalSimpan;
        //        }
        //        else if (this.modeCrud == 'D')
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalHapus;
        //        }
        //        else
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalLain;
        //        }
        //        MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
        //    }
        //}

        //private delegate void UbahDsPspBmn(SvcWasdalPSPBMNCrud.OutputParameters dataOutKpknlCrud);

        //int _yangkeBerapa = 0;

        //private void ubahDsPspBmn(SvcWasdalPSPBMNCrud.OutputParameters dataOutKpknlCrud)
        //{
        //    if (dataOutKpknlCrud.PO_RESULT == "Y")
        //    {
        //        int _indeksData = 0;
        //        SvcWasdalPSPBMNSkSelect.WASDALSROW_READ_WASDAL_PSP dataPenyama = new SvcWasdalPSPBMNSkSelect.WASDALSROW_READ_WASDAL_PSP();
        //        dataPenyama.ID_PEMOHONSpecified = true;
        //        //dataPenyama.ID_SATKERSpecified = true;
        //        dataPenyama.ID_USER = konfigApp.idUser;
        //        dataPenyama.ID_USERSpecified = true;
        //        dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
        //        dataPenyama.KUANTITAS_SKSpecified = true;
        //        dataPenyama.NILAI_PENETAPANSpecified = true;
        //        dataPenyama.NUMSpecified = true;
        //        dataPenyama.TGL_CREATEDSpecified = true;
        //        dataPenyama.TGL_SKSpecified = true;
        //        dataPenyama.TOT_BMNSpecified = true;
        //        dataPenyama.TOT_STATUSSpecified = true;
        //        dataPenyama.TOTAL_DATASpecified = true;
        //        switch (modeCrud.ToString())
        //        {
        //            case "C":
        //            case "Z":
        //                dataPenyama.ID_PEMOHON = formSkPspBmnTambah.idPemohon;
        //                //dataPenyama.ID_SATKER = konfigApp.idSatker;//formSkPspBmnTambah.idPemohon;
        //                dataPenyama.IS_TB = (formSkPspBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
        //                dataPenyama.JABATAN_TTD = formSkPspBmnTambah.teJabatan.Text;
        //                dataPenyama.KD_KL = formSkPspBmnTambah.teKodeKl.Text;
        //                dataPenyama.KD_PEMOHON = formSkPspBmnTambah.teKodePemohon.Text;
        //                dataPenyama.KD_PENERBIT_SK = formSkPspBmnTambah.teNmPenerbitSk.EditValue.ToString();
        //                dataPenyama.KD_PENERBIT_SK_DTL = formSkPspBmnTambah.kodePenerbitSkDetail;
        //                //dataPenyama.KD_SATKER = konfigApp.kodeSatker;//formSkPspBmnTambah.teKodePemohon.Text;
        //                dataPenyama.KUANTITAS_SK = formSkPspBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnTambah.teKuantitas.Text);
        //                dataPenyama.NILAI_PENETAPAN = formSkPspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnTambah.teNilaiPenetapan.Text);
        //                dataPenyama.NIP_PENANDATANGAN = formSkPspBmnTambah.teNipPenandaTangan.Text;
        //                dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
        //                dataPenyama.NM_PEMOHON = formSkPspBmnTambah.teNamaPemohon.Text;
        //                dataPenyama.NM_PENANDATANGAN = formSkPspBmnTambah.teNamaPenandaTangan.Text;
        //                dataPenyama.NM_PENERBIT_SK = formSkPspBmnTambah.teNmPenerbitSk.Text;
        //                dataPenyama.NM_PENERBIT_SK_DTL = formSkPspBmnTambah.namaPenerbitSkDetail;
        //                dataPenyama.NM_PENGGUNA = "";
        //                dataPenyama.NUM = (dsGridRskPspBmn == null ? 1 : dsGridRskPspBmn.Count + 1);
        //                dataPenyama.SK_KEPUTUSAN = formSkPspBmnTambah.teNomorSk.Text;
        //                dataPenyama.STATUS_BMN = "";
        //                dataPenyama.TGL_CREATED = DateTime.Now;
        //                dataPenyama.TGL_SK = Convert.ToDateTime(formSkPspBmnTambah.teTanggalSk.Text);
        //                dataPenyama.TIPE_PEMOHON = formSkPspBmnTambah.teJenisPemohon.Text;
        //                dataPenyama.TOT_BMN = 0;
        //                dataPenyama.TOT_STATUS = null;
        //                dataPenyama.TOTAL_DATA = null;
        //                dataPenyama.THN_ANG = formSkPspBmnTambah.teTahunAnggaran.Text;
        //                dataPenyama.UR_KL = formSkPspBmnTambah.teNamaKl.Text;
        //                //dataPenyama.UR_SATKER = konfigApp.namaSatker;//formSkPspBmnTambah.teNamaPemohon.Text;
        //                dataPenyama.URAIAN_KEPUTUSAN = formSkPspBmnTambah.teUraianKeputusan.Text;
        //                dsGridRskPspBmn.Add(dataPenyama);
        //                if (modeCrud == 'C')
        //                {
        //                    gridSkPspBmn.dataTerpilih = dataPenyama;
        //                    _yangkeBerapa = 1;
        //                    formSkPspBmnTambah.gcDaftarAset.Enabled = true;
        //                    formSkPspBmnTambah.sbTambah.Enabled = true;
        //                    formSkPspBmnTambah.sbHapus.Enabled = true;
        //                    formSkPspBmnTambah.rgJenisAset.Properties.ReadOnly = true;
        //                    formSkPspBmnTambah.teNomorSk.Properties.ReadOnly = false;
        //                    formSkPspBmnTambah.teTanggalSk.Properties.ReadOnly = false;
        //                    formSkPspBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
        //                    formSkPspBmnTambah.sbCariPemohon.Enabled = false;
        //                    formSkPspBmnTambah.sbRefresh.Enabled = true;
        //                    formSkPspBmnTambah.teNmPenerbitSk.Properties.ReadOnly = true;
        //                    formSkPspBmnTambah.cePilihSemua.Enabled = true;
        //                    formSkPspBmnTambah.teKodePemohon.Properties.ReadOnly = true;
        //                    //formSkPspBmnTambah.statusForm = "CU";
        //                }
        //                else if (modeCrud == 'Z')
        //                {
        //                    /*if (_keBerapa == 1)
        //                    {
        //                        _keBerapa++;
        //                        _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
        //                    }
        //                    else
        //                    {
        //                        gridSkPspBmn.dataTerpilih = gridSkPspBmn.dataTerpilih;
        //                    }*/
        //                    _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
        //                    _indeksData = (_indeksData < 0 ? 0 : _indeksData);
        //                    dsGridRskPspBmn.Remove(gridSkPspBmn.dataTerpilih);
        //                    dsGridRskPspBmn.Insert(_indeksData, dataPenyama);
        //                }
        //                break;
        //            case "U":
        //                dataPenyama.ID_SK_WASDAL = formSkPspBmnUbah.idSkWasdal;
        //                dataPenyama.ID_PEMOHON = formSkPspBmnUbah.idPemohon;
        //                //dataPenyama.ID_SATKER = konfigApp.idSatker;//formSkPspBmnUbah.idPemohon;
        //                dataPenyama.IS_TB = (formSkPspBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
        //                dataPenyama.JABATAN_TTD = formSkPspBmnUbah.teJabatan.Text;
        //                dataPenyama.KD_KL = formSkPspBmnUbah.teKodeKl.Text;
        //                dataPenyama.KD_PEMOHON = formSkPspBmnUbah.teKodePemohon.Text;
        //                dataPenyama.KD_PENERBIT_SK = formSkPspBmnUbah.teNmPenerbitSk.EditValue.ToString();
        //                dataPenyama.KD_PENERBIT_SK_DTL = formSkPspBmnUbah.kodePenerbitSkDetail;
        //                //dataPenyama.KD_SATKER = konfigApp.kodeSatker;//formSkPspBmnUbah.teKodePemohon.Text;
        //                dataPenyama.KUANTITAS_SK = formSkPspBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnUbah.teKuantitas.Text);
        //                dataPenyama.NILAI_PENETAPAN = formSkPspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnUbah.teNilaiPenetapan.Text);
        //                dataPenyama.NIP_PENANDATANGAN = formSkPspBmnUbah.teNipPenandaTangan.Text;
        //                dataPenyama.NM_PELAYANAN = gridSkPspBmn.dataTerpilih.NM_PELAYANAN;
        //                dataPenyama.NM_PEMOHON = formSkPspBmnUbah.teNamaPemohon.Text;
        //                dataPenyama.NM_PENANDATANGAN = formSkPspBmnUbah.teNamaPenandaTangan.Text;
        //                dataPenyama.NM_PENERBIT_SK = formSkPspBmnUbah.teNmPenerbitSk.Text;
        //                dataPenyama.NM_PENERBIT_SK_DTL = formSkPspBmnUbah.namaPenerbitSkDetail;
        //                dataPenyama.NM_PENGGUNA = gridSkPspBmn.dataTerpilih.NM_PENGGUNA;
        //                dataPenyama.NUM = gridSkPspBmn.dataTerpilih.NUM;
        //                dataPenyama.SK_KEPUTUSAN = formSkPspBmnUbah.teNomorSk.Text;
        //                dataPenyama.STATUS_BMN = gridSkPspBmn.dataTerpilih.STATUS_BMN;
        //                dataPenyama.TGL_CREATED = gridSkPspBmn.dataTerpilih.TGL_CREATED;
        //                dataPenyama.TGL_SK = Convert.ToDateTime(formSkPspBmnUbah.teTanggalSk.Text);
        //                dataPenyama.TIPE_PEMOHON = formSkPspBmnUbah.teJenisPemohon.Text;
        //                dataPenyama.TOT_BMN = gridSkPspBmn.dataTerpilih.TOT_BMN;
        //                dataPenyama.TOT_STATUS = gridSkPspBmn.dataTerpilih.TOT_STATUS;
        //                dataPenyama.TOTAL_DATA = gridSkPspBmn.dataTerpilih.TOTAL_DATA;
        //                dataPenyama.UR_KL = formSkPspBmnUbah.teNamaKl.Text;
        //                //dataPenyama.UR_SATKER = konfigApp.namaSatker;//formSkPspBmnUbah.teNamaPemohon.Text;
        //                dataPenyama.URAIAN_KEPUTUSAN = formSkPspBmnUbah.teUraianKeputusan.Text;
        //                dataPenyama.THN_ANG = formSkPspBmnUbah.teTahunAnggaran.Text;
        //                _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
        //                _indeksData = (_indeksData < 0 ? 0 : _indeksData);
        //                dsGridRskPspBmn.Remove(gridSkPspBmn.dataTerpilih);
        //                dsGridRskPspBmn.Insert(_indeksData, dataPenyama);
        //                break;
        //            case "D":
        //                dsGridRskPspBmn.Remove(gridSkPspBmn.dataTerpilih);
        //                break;
        //        }
        //        gridSkPspBmn.dsDataSource = dsGridRskPspBmn;
        //        gridSkPspBmn.displayData();

        //        //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
        //        //{
        //        //    initGridSkPspBmn();
        //        //}
        //    }
        //    else MessageBox.Show(konfigApp.teksGagalLain + " " + dataOutKpknlCrud.PO_RESULT_MESSAGE, konfigApp.judulKonfirmasi);
        //}
        //#endregion Simpan Data PSP BMN

        //#endregion

        //#region PSBMN
        //AppPengguna.KES1.RSK.ucRskPsBmnGrid gridSkPsBmn;
        //AppPengguna.KES1.RSK.ucRskPsBmnForm formSkPsBmnTambah;
        //AppPengguna.KES1.RSK.ucRskPsBmnForm formSkPsBmnUbah;
        //AppPengguna.KES1.RSK.ucRskPsBmnForm formSkPsBmnDetail;
        //private ArrayList dsGridRskPsBmn;
        //SvcWasdalPSPBMNLAINSkSelect.OutputParameters dOutRskPsBmn;
        //SvcWasdalPSPBMNLAINSkSelect.execute_pttClient ambilRskPsBmn;
        ////SvcWasdalLAINCrud.OutputParameters dOutAmbilDataPsBmn;
        ////SvcWasdalLAINCrud.call_pttClient ambilDataPsBmn;
        //SvcWasdalPSPBMNLAINCrud.OutputParameters dOutAmbilDataPsBmn;
        //SvcWasdalPSPBMNLAINCrud.execute_pttClient ambilDataPsBmn;

        //private void setEventTombolRskPsBmn()
        //{
        //    resetEventTombolRsk();
        //    bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPsBmnTambahKlik);
        //    bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPsBmnUbahKlik);
        //    bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPsBmnHapusKlik);
        //    bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPsBmnDetailKlik);
        //    bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPsBmnKembaliKlik);
        //    bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPsBmnRefreshKlik);
        //    bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPsBmnMoreDataKlik);
        //    bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
        //    bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
        //}

        //private void initGridSkPsBmn()
        //{
        //    if (gridSkPsBmn == null)
        //    {
        //        gridSkPsBmn = new AppPengguna.KES1.RSK.ucRskPsBmnGrid()
        //        {
        //            cariDataOnline = new CariDataOnline(cariDataRskPsBmn),
        //            detailDataGrid = new DetailDataGrid(bbiRskPsBmnUbahKlik)
        //        };
        //    }
        //    setTombolRskGrid();
        //    setEventTombolRskPsBmn();
        //    setPanel(gridSkPsBmn);
        //}

        //#region --++ Tombol Ribbon
        //private void bbiRskPsBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan05), konfigApp.judulKonfirmasi,
        //        MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
        //    {
        //        if (formSkPsBmnTambah == null)
        //        {
        //            formSkPsBmnTambah = new AppPengguna.KES1.RSK.ucRskPsBmnForm("C")
        //            {
        //                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
        //                simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPsBmn)
        //            };
        //        }
        //        setPanel(formSkPsBmnTambah);
        //        formSkPsBmnTambah.inisialisasiForm();
        //        setTombolRskForm();
        //    }
        //}

        //private void bbiRskPsBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridSkPsBmn.dataTerpilih != null)
        //    {
        //        if (formSkPsBmnUbah == null)
        //        {
        //            formSkPsBmnUbah = new AppPengguna.KES1.RSK.ucRskPsBmnForm("U")
        //            {
        //                toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
        //                simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPsBmn)
        //            };
        //        }
        //        formSkPsBmnUbah.dataTerpilih = gridSkPsBmn.dataTerpilih;
        //        setPanel(formSkPsBmnUbah);
        //        formSkPsBmnUbah.inisialisasiForm();
        //        setTombolRskForm();
        //    }
        //    else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        //}

        //private void bbiRskPsBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridSkPsBmn.dataTerpilih != null)
        //    {
        //        if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPsBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
        //            MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
        //        {
        //            try
        //            {
        //                myThread = new Thread(new ThreadStart(ShowProgresBar));
        //                myThread.Start();
        //                //SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
        //                SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters();
        //                parInp.P_ID_PEMOHON = gridSkPsBmn.dataTerpilih.ID_PEMOHON;
        //                parInp.P_ID_PEMOHONSpecified = true;
        //                parInp.P_ID_USER = gridSkPsBmn.dataTerpilih.ID_USER;
        //                parInp.P_ID_USERSpecified = true;
        //                parInp.P_IS_TB = gridSkPsBmn.dataTerpilih.IS_TB;
        //                parInp.P_JABATAN_TTD = gridSkPsBmn.dataTerpilih.JABATAN_TTD;
        //                parInp.P_KD_PELAYANAN = gridSkPsBmn.dataTerpilih.KD_PELAYANAN;
        //                parInp.P_KD_PENERBIT_SK = gridSkPsBmn.dataTerpilih.KD_PENERBIT_SK;
        //                parInp.P_KD_PENERBIT_SK_DTL = gridSkPsBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
        //                parInp.P_NILAI_PENETAPAN = gridSkPsBmn.dataTerpilih.NILAI_PENETAPAN;
        //                parInp.P_NILAI_PENETAPANSpecified = true;
        //                parInp.P_NIP_PENANDATANGAN = gridSkPsBmn.dataTerpilih.NIP_PENANDATANGAN;
        //                parInp.P_NM_PENANDATANGAN = gridSkPsBmn.dataTerpilih.NM_PENANDATANGAN;
        //                parInp.P_NM_PENERBIT_SK = gridSkPsBmn.dataTerpilih.NM_PENERBIT_SK;
        //                parInp.P_NM_PENERBIT_SK_DTL = gridSkPsBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
        //                parInp.P_SELECT = "D";
        //                modeCrud = Convert.ToChar(parInp.P_SELECT);
        //                parInp.P_SK_KEPUTUSAN = gridSkPsBmn.dataTerpilih.SK_KEPUTUSAN;
        //                parInp.P_TIPE_PEMOHON = gridSkPsBmn.dataTerpilih.TIPE_PEMOHON;
        //                parInp.P_URAIAN_KEPUTUSAN = gridSkPsBmn.dataTerpilih.URAIAN_KEPUTUSAN;
        //                ambilDataPsBmn = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
        //                ambilDataPsBmn.Open();
        //                ambilDataPsBmn.Beginexecute(parInp, new AsyncCallback(cudRskPsBmn), "");
        //            }
        //            catch
        //            {
        //                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //                this.Invoke(new AktifkanForm(aktifkanForm), "");
        //                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
        //            }
        //        }
        //    }
        //}

        //private void bbiRskPsBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (gridSkPsBmn.dataTerpilih != null)
        //    {
        //        if (formSkPsBmnDetail == null)
        //        {
        //            formSkPsBmnDetail = new AppPengguna.KES1.RSK.ucRskPsBmnForm("A");
        //            formSkPsBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
        //        }
        //        formSkPsBmnDetail.dataTerpilih = gridSkPsBmn.dataTerpilih;
        //        setPanel(formSkPsBmnDetail);
        //        formSkPsBmnDetail.inisialisasiForm();
        //        setTombolRskForm();
        //    }
        //    else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        //}

        //private void bbiRskPsBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    setPanel(gridSkPsBmn);
        //    setTombolRskGrid();
        //    gridSkPsBmn.dsDataSource = dsGridRskPsBmn;
        //    gridSkPsBmn.displayData();
        //}

        //private void bbiRskPsBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    strCari = "";
        //    modeCari = false;
        //    gridSkPsBmn.teNamaKolom.Text = "";
        //    gridSkPsBmn.teCari.Text = "";
        //    gridSkPsBmn.fieldDicari = "";
        //    gridSkPsBmn.dataInisial = true;
        //    this.dataInisial = true;
        //    this.getInitRskPsBmn();
        //}

        //private void bbiRskPsBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        //{
        //    if (this.masihAdaData == true)
        //    {
        //        this.dataInisial = false;
        //        this.getInitRskPsBmn();
        //    }
        //}
        //#endregion --++ Tombol Ribbon

        //private void nbiRskPsBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        //{
        //    konfigApp.strMenu = "Perekaman SK";
        //    konfigApp.strSubMenu = konfigApp.namaLayanan05;
        //    konfigApp.kdPelayanan = "05";
        //    konfigApp.namaPelayanan = konfigApp.namaLayanan05;
        //    this.Enabled = false;
        //    this.inisialisasiForm();
        //    rpRekamSK.Visible = true;
        //    ribbon.SelectedPage = rpRekamSK;
        //    initGridSkPsBmn();
        //    modeCari = false;
        //    gridSkPsBmn.teNamaKolom.Text = "";
        //    gridSkPsBmn.teCari.Text = "";
        //    gridSkPsBmn.fieldDicari = "";
        //    strCari = "";
        //    this.dataInisial = true;
        //    this.getInitRskPsBmn();
        //}

        //#region --++ Ambil Data PS BMN
        //private void getInitRskPsBmn()
        //{
        //    this.Enabled = false;
        //    try
        //    {
        //        myThread = new Thread(new ThreadStart(ShowProgresBar));
        //        myThread.Start();
        //        SvcWasdalPSPBMNLAINSkSelect.InputParameters parInp = new SvcWasdalPSPBMNLAINSkSelect.InputParameters();
        //        parInp.P_COL = "";
        //        if (dataInisial == true)
        //        {
        //            konfigApp.currentMaks = konfigApp.dataAkhir;
        //            konfigApp.currentMin = konfigApp.dataAwal;
        //        }
        //        else
        //        {
        //            konfigApp.currentMin = konfigApp.currentMaks + 1;
        //            konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
        //        }
        //        parInp.P_MAX = konfigApp.currentMaks;
        //        parInp.P_MAXSpecified = true;
        //        parInp.P_MIN = konfigApp.currentMin;
        //        parInp.P_MINSpecified = true;
        //        parInp.P_SORT = "";
        //        parInp.P_COUNT = "y";
        //        parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='ESELON1' AND ID_PEMOHON = {2})) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idEselon1, this.strCari);
        //        ambilRskPsBmn = new SvcWasdalPSPBMNLAINSkSelect.execute_pttClient();
        //        ambilRskPsBmn.Open();
        //        ambilRskPsBmn.Beginexecute(parInp, new AsyncCallback(getRskPsBmn), null);
        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
        //    }
        //}

        //private void getRskPsBmn(IAsyncResult result)
        //{
        //    try
        //    {
        //        dOutRskPsBmn = ambilRskPsBmn.Endexecute(result);
        //        ambilRskPsBmn.Close();
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        this.Invoke(new DsRskPsBmn(dsRskPsBmn), dOutRskPsBmn);
        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
        //    }
        //}

        //private delegate void DsRskPsBmn(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut);

        //private void dsRskPsBmn(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut)
        //{
        //    int jmlData = dataOut.SF_READ_WASDAL_PSP_LAIN.Count();
        //    decimal jmlCurrent = 0;
        //    string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_PSP_LAIN[jmlData - 1].TOTAL_DATA.ToString();
        //    if (jmlData == konfigApp.dataAkhir)
        //    {
        //        this.masihAdaData = true;
        //        bbiRskMoreData.Enabled = true;
        //        jmlCurrent = konfigApp.dataAkhir;
        //    }
        //    else
        //    {
        //        this.masihAdaData = false;
        //        bbiRskMoreData.Enabled = false;
        //        if (jmlData > konfigApp.dataAkhir)
        //            jmlCurrent = konfigApp.dataAkhir;
        //        else
        //            jmlCurrent = jmlData;
        //    }

        //    if (dataInisial == true)
        //    {
        //        dsGridRskPsBmn = new ArrayList();
        //    }
        //    for (int i = 0; i < jmlData; i++)
        //    {
        //        dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
        //        dsGridRskPsBmn.Add(dataOut.SF_READ_WASDAL_PSP_LAIN[i]);
        //    }
        //    gridSkPsBmn.labelTotData.Text = "";
        //    gridSkPsBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
        //    gridSkPsBmn.sbCariOnline.Enabled = !modeCari;
        //    gridSkPsBmn.dsDataSource = dsGridRskPsBmn;
        //    gridSkPsBmn.displayData();
        //    if (modeCari == true)
        //    {
        //        string xSatu = gridSkPsBmn.teNamaKolom.Text.Trim();
        //        string xDua = gridSkPsBmn.teCari.Text.Trim();
        //        string xTiga = gridSkPsBmn.fieldDicari;
        //        gridSkPsBmn.gvGridSk.ClearColumnsFilter();
        //        gridSkPsBmn.teNamaKolom.Text = xSatu;
        //        gridSkPsBmn.teCari.Text = xDua;
        //        gridSkPsBmn.fieldDicari = xTiga;
        //    }
        //    else
        //        gridSkPsBmn.gvGridSk.ClearColumnsFilter();
        //}

        //private void cariDataRskPsBmn(string _strWhere, bool initModeCari)
        //{
        //    strCari = _strWhere;
        //    modeCari = true;
        //    dataInisial = initModeCari;
        //    getInitRskPsBmn();
        //}
        //#endregion Ambil PSP BMN

        //#region --++ Simpan Data PS BMN


        //private void simpanDataRskPsBmn(string _mode)
        //{
        //    try
        //    {
        //        myThread = new Thread(new ThreadStart(ShowProgresBar));
        //        myThread.Start();
        //        SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters();
        //        parInp.P_ID_SK_WASDALSpecified = true;
        //        parInp.P_ID_SK_WASDAL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.idSkWasdal : formSkPsBmnUbah.idSkWasdal);//
        //        parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
        //        parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
        //        parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.idPemohon : formSkPsBmnUbah.idPemohon);//
        //        parInp.P_ID_PEMOHONSpecified = true;
        //        parInp.P_ID_USER = konfigApp.idUser;
        //        parInp.P_ID_USERSpecified = true;
        //        parInp.P_ID_SATKERSpecified = true;
        //        parInp.P_ID_SATKER = konfigApp.idSatker;
        //        parInp.P_KD_SATKER = konfigApp.kodeSatker;
        //        parInp.P_UR_SATKER = konfigApp.namaSatker;
        //        parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.rgJenisAset.EditValue.ToString() : formSkPsBmnUbah.rgJenisAset.EditValue.ToString());
        //        parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teJabatan.Text.Trim() : formSkPsBmnUbah.teJabatan.Text.Trim());
        //        parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teTahunAnggaran.Text : formSkPsBmnUbah.teTahunAnggaran.Text);
        //        parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
        //        parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkPsBmnTambah.teNmPenerbitSk.ItemIndex).ToString() : formSkPsBmnTambah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkPsBmnUbah.teNmPenerbitSk.ItemIndex).ToString());
        //        parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.kodePenerbitSkDetail : formSkPsBmnUbah.kodePenerbitSkDetail);
        //        parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPsBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teNilaiPenetapan.Text)) : (formSkPsBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teNilaiPenetapan.Text)));
        //        parInp.P_NILAI_PENETAPANSpecified = true;
        //        parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNipPenandaTangan.Text : formSkPsBmnUbah.teNipPenandaTangan.Text);
        //        parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNamaPenandaTangan.Text : formSkPsBmnUbah.teNamaPenandaTangan.Text);
        //        //parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.tePeruntukan.Text : formSkPsBmnUbah.tePeruntukan.Text);
        //        parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNmPenerbitSk.Text : formSkPsBmnUbah.teNmPenerbitSk.Text);
        //        parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNamaInstansi.Text : formSkPsBmnUbah.teNamaInstansi.Text);
        //        string _penggantiChar = (_mode == "CU" ? "U" : _mode);
        //        parInp.P_SELECT = _penggantiChar;
        //        modeCrud = Convert.ToChar(_penggantiChar);
        //        parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNomorSk.Text.Trim() : formSkPsBmnUbah.teNomorSk.Text.Trim());
        //        parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
        //        parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teTanggalSk.EditValue : formSkPsBmnUbah.teTanggalSk.EditValue)));
        //        parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teJenisPemohon.Text : formSkPsBmnUbah.teJenisPemohon.Text);
        //        parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.tipePengelola : formSkPsBmnUbah.tipePengelola);
        //        parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teUraianKeputusan.Text : formSkPsBmnUbah.teUraianKeputusan.Text);
        //        parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teTahunAnggaran.Text.Trim() : formSkPsBmnUbah.teTahunAnggaran.Text.Trim());
        //        parInp.P_KD_KL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teKodeKl.Text.Trim() : formSkPsBmnUbah.teKodeKl.Text.Trim());
        //        ambilDataPsBmn = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
        //        ambilDataPsBmn.Open();
        //        ambilDataPsBmn.Beginexecute(parInp, new AsyncCallback(cudRskPsBmn), "");
        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(aktifkanForm), "");
        //        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
        //    }
        //}

        //private void cudRskPsBmn(IAsyncResult result)
        //{
        //    try
        //    {
        //        dOutAmbilDataPsBmn = ambilDataPsBmn.Endexecute(result);
        //        ambilDataPsBmn.Close();
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(this.aktifkanForm), "");
        //        this.Invoke(new UbahDsPsBmn(this.ubahDsPsBmn), dOutAmbilDataPsBmn);
        //    }
        //    catch
        //    {
        //        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
        //        this.Invoke(new AktifkanForm(aktifkanForm), "");
        //        if ((this.modeCrud == 'C') || (this.modeCrud == 'U'))
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalSimpan;
        //        }
        //        else if (this.modeCrud == 'D')
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalHapus;
        //        }
        //        else
        //        {
        //            konfigApp.teksDialog = konfigApp.teksGagalLain;
        //        }
        //        MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
        //    }
        //}

        //private delegate void UbahDsPsBmn(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutKpknlCrud);

        //private void ubahDsPsBmn(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutKpknlCrud)
        //{
        //    if (dataOutKpknlCrud.PO_RESULT == "Y")
        //    {
        //        SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN dataPenyama = new SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN();
        //        dataPenyama.ID_PEMOHONSpecified = true;
        //        dataPenyama.ID_SATKERSpecified = true;
        //        dataPenyama.ID_USER = konfigApp.idUser;
        //        dataPenyama.ID_USERSpecified = true;
        //        dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
        //        dataPenyama.KUANTITAS_SKSpecified = true;
        //        dataPenyama.NILAI_PENETAPANSpecified = true;
        //        dataPenyama.NUMSpecified = true;
        //        dataPenyama.TGL_CREATEDSpecified = true;
        //        dataPenyama.TGL_SKSpecified = true;
        //        dataPenyama.TOT_BMNSpecified = true;
        //        dataPenyama.TOT_STATUSSpecified = true;
        //        dataPenyama.TOTAL_DATASpecified = true;
        //        if (dsGridRskPsBmn == null) dsGridRskPsBmn = new ArrayList();
        //        switch (modeCrud.ToString())
        //        {
        //            case "C":
        //                dataPenyama.ID_PEMOHON = formSkPsBmnTambah.idPemohon;
        //                dataPenyama.ID_SATKER = formSkPsBmnTambah.idPemohon;
        //                dataPenyama.IS_TB = (formSkPsBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
        //                dataPenyama.JABATAN_TTD = formSkPsBmnTambah.teJabatan.Text;
        //                dataPenyama.KD_KL = formSkPsBmnTambah.teKodeKl.Text;
        //                dataPenyama.KD_PEMOHON = formSkPsBmnTambah.teKodePemohon.Text;
        //                dataPenyama.KD_PENERBIT_SK = formSkPsBmnTambah.teNmPenerbitSk.EditValue.ToString();
        //                dataPenyama.KD_PENERBIT_SK_DTL = formSkPsBmnTambah.kodePenerbitSkDetail;
        //                dataPenyama.KD_SATKER = formSkPsBmnTambah.teKodePemohon.Text;
        //                dataPenyama.KUANTITAS_SK = formSkPsBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teKuantitas.Text);
        //                dataPenyama.NILAI_PENETAPAN = formSkPsBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teNilaiPenetapan.Text);
        //                dataPenyama.NIP_PENANDATANGAN = formSkPsBmnTambah.teNipPenandaTangan.Text;
        //                dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
        //                dataPenyama.NM_PEMOHON = formSkPsBmnTambah.teNamaPemohon.Text;
        //                dataPenyama.NM_PENANDATANGAN = formSkPsBmnTambah.teNamaPenandaTangan.Text;
        //                dataPenyama.NM_PENERBIT_SK = formSkPsBmnTambah.teNmPenerbitSk.Text;
        //                dataPenyama.NM_PENERBIT_SK_DTL = formSkPsBmnTambah.namaPenerbitSkDetail;
        //                dataPenyama.NM_PENGGUNA = "";
        //                dataPenyama.NUM = (dsGridRskPsBmn == null ? 1 : dsGridRskPsBmn.Count + 1);
        //                dataPenyama.SK_KEPUTUSAN = formSkPsBmnTambah.teNomorSk.Text;
        //                dataPenyama.STATUS_BMN = "";
        //                dataPenyama.TGL_CREATED = DateTime.Now;
        //                dataPenyama.TGL_SK = Convert.ToDateTime(formSkPsBmnTambah.teTanggalSk.Text);
        //                dataPenyama.TIPE_PEMOHON = formSkPsBmnTambah.teJenisPemohon.Text;
        //                dataPenyama.TOT_BMN = 0;
        //                dataPenyama.TOT_STATUS = null;
        //                dataPenyama.TOTAL_DATA = null;
        //                dataPenyama.UR_KL = formSkPsBmnTambah.teNamaKl.Text;
        //                dataPenyama.UR_SATKER = formSkPsBmnTambah.teNamaPemohon.Text;
        //                dataPenyama.URAIAN_KEPUTUSAN = formSkPsBmnTambah.teUraianKeputusan.Text;
        //                dataPenyama.ALAMAT_PHK_LAIN = formSkPsBmnTambah.teAlamatPihakLain.Text;
        //                //dataPenyama.JANGKA_WAKTU = (formSkPsBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teJangkaWaktu.Text));
        //                //dataPenyama.NM_PHK_LAIN = formSkPsBmnTambah.teNamaKl.Text;
        //                dsGridRskPsBmn.Add(dataPenyama);
        //                formSkPsBmnTambah.gcDaftarAset.Enabled = true;
        //                formSkPsBmnTambah.sbTambah.Enabled = true;
        //                formSkPsBmnTambah.sbHapus.Enabled = true;
        //                formSkPsBmnTambah.rgJenisAset.Properties.ReadOnly = true;
        //                formSkPsBmnTambah.teNomorSk.Properties.ReadOnly = false;
        //                formSkPsBmnTambah.teTanggalSk.Properties.ReadOnly = false;
        //                formSkPsBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
        //                formSkPsBmnTambah.sbCariPemohon.Enabled = false;
        //                formSkPsBmnTambah.sbRefresh.Enabled = true;
        //                formSkPsBmnTambah.teNmPenerbitSk.Properties.ReadOnly = true;
        //                formSkPsBmnTambah.cePilihSemua.Enabled = true;
        //                formSkPsBmnTambah.teKodePemohon.Properties.ReadOnly = true;
        //                //formSkPsBmnTambah.statusForm = "CU";
        //                break;
        //            case "U":
        //                dataPenyama.ID_SK_WASDAL = formSkPsBmnUbah.idSkWasdal;
        //                dataPenyama.ID_PEMOHON = formSkPsBmnUbah.idPemohon;
        //                dataPenyama.ID_SATKER = formSkPsBmnUbah.idPemohon;
        //                dataPenyama.IS_TB = (formSkPsBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
        //                dataPenyama.JABATAN_TTD = formSkPsBmnUbah.teJabatan.Text;
        //                //dataPenyama.KD_KL = formSkPsBmnUbah.teKodeKl.Text;
        //                dataPenyama.KD_PEMOHON = formSkPsBmnUbah.teKodePemohon.Text;
        //                dataPenyama.KD_PENERBIT_SK = formSkPsBmnUbah.teNmPenerbitSk.EditValue.ToString();
        //                dataPenyama.KD_PENERBIT_SK_DTL = formSkPsBmnUbah.kodePenerbitSkDetail;
        //                dataPenyama.KD_SATKER = formSkPsBmnUbah.teKodePemohon.Text;
        //                dataPenyama.KUANTITAS_SK = formSkPsBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teKuantitas.Text);
        //                dataPenyama.NILAI_PENETAPAN = formSkPsBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teNilaiPenetapan.Text);
        //                dataPenyama.NIP_PENANDATANGAN = formSkPsBmnUbah.teNipPenandaTangan.Text;
        //                dataPenyama.NM_PELAYANAN = gridSkPsBmn.dataTerpilih.NM_PELAYANAN;
        //                dataPenyama.NM_PEMOHON = formSkPsBmnUbah.teNamaPemohon.Text;
        //                dataPenyama.NM_PENANDATANGAN = formSkPsBmnUbah.teNamaPenandaTangan.Text;
        //                dataPenyama.NM_PENERBIT_SK = formSkPsBmnUbah.teNmPenerbitSk.Text;
        //                dataPenyama.NM_PENERBIT_SK_DTL = formSkPsBmnUbah.namaPenerbitSkDetail;
        //                dataPenyama.NM_PENGGUNA = gridSkPsBmn.dataTerpilih.NM_PENGGUNA;
        //                dataPenyama.NUM = gridSkPsBmn.dataTerpilih.NUM;
        //                dataPenyama.SK_KEPUTUSAN = formSkPsBmnUbah.teNomorSk.Text;
        //                dataPenyama.STATUS_BMN = gridSkPsBmn.dataTerpilih.STATUS_BMN;
        //                dataPenyama.TGL_CREATED = gridSkPsBmn.dataTerpilih.TGL_CREATED;
        //                dataPenyama.TGL_SK = Convert.ToDateTime(formSkPsBmnUbah.teTanggalSk.Text);
        //                dataPenyama.TIPE_PEMOHON = formSkPsBmnUbah.teJenisPemohon.Text;
        //                dataPenyama.TOT_BMN = gridSkPsBmn.dataTerpilih.TOT_BMN;
        //                dataPenyama.TOT_STATUS = gridSkPsBmn.dataTerpilih.TOT_STATUS;
        //                dataPenyama.TOTAL_DATA = gridSkPsBmn.dataTerpilih.TOTAL_DATA;
        //                //dataPenyama.UR_KL = formSkPsBmnUbah.teNamaKl.Text;
        //                dataPenyama.UR_SATKER = formSkPsBmnUbah.teNamaPemohon.Text;
        //                dataPenyama.URAIAN_KEPUTUSAN = formSkPsBmnUbah.teUraianKeputusan.Text;
        //                dataPenyama.ALAMAT_PHK_LAIN = formSkPsBmnUbah.teAlamatPihakLain.Text;
        //                //dataPenyama.JANGKA_WAKTU = (formSkPsBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teJangkaWaktu.Text));
        //                //dataPenyama.NM_PHK_LAIN = formSkPsBmnUbah.teNamaKl.Text;
        //                int _indeksData = dsGridRskPsBmn.IndexOf(gridSkPsBmn.dataTerpilih);
        //                _indeksData = (_indeksData < 0 ? 0 : _indeksData);
        //                dsGridRskPsBmn.Remove(gridSkPsBmn.dataTerpilih);
        //                dsGridRskPsBmn.Insert(_indeksData, dataPenyama);
        //                break;
        //            case "D":
        //                dsGridRskPsBmn.Remove(gridSkPsBmn.dataTerpilih);
        //                break;
        //        }
        //        gridSkPsBmn.dsDataSource = dsGridRskPsBmn;
        //        gridSkPsBmn.displayData();
        //    }
        //    else MessageBox.Show(konfigApp.teksGagalLain + " " + dataOutKpknlCrud.PO_RESULT_MESSAGE, konfigApp.judulKonfirmasi);
        //}
        //#endregion Simpan Data PSP BMN

        //#endregion PSBMN

        #endregion

        #region VIEW PEREKAMAN SK (pake punya Korwil)

        #region pspbmn

        #region -->> Setting Sifat Tombol
        private void setTombolRskGrid()
        {
            bbiRskTambah.Enabled = true;
            bbiRskUbah.Enabled = true;
            bbiRskHapus.Enabled = true;
            bbiRskDetail.Enabled = true;
            bbiRskKembali.Enabled = true;
            bbiRskRefresh.Enabled = true;
            bbiRskMoreData.Enabled = false;
            bbiRskKembaliGrid.Enabled = false;
        }

        private void setTombolRskForm()
        {
            bbiRskTambah.Enabled = false;
            bbiRskUbah.Enabled = false;
            bbiRskHapus.Enabled = false;
            bbiRskDetail.Enabled = false;
            bbiRskKembali.Enabled = true;
            bbiRskRefresh.Enabled = false;
            bbiRskMoreData.Enabled = false;
            bbiRskKembaliGrid.Enabled = true;
        }

        private void resetEventTombolRsk()
        {
            konfigApp.RemoveClickEvent(bbiRskDetail);
            konfigApp.RemoveClickEvent(bbiRskHapus);
            konfigApp.RemoveClickEvent(bbiRskKembali);
            konfigApp.RemoveClickEvent(bbiRskMoreData);
            konfigApp.RemoveClickEvent(bbiRskRefresh);
            konfigApp.RemoveClickEvent(bbiRskTambah);
            konfigApp.RemoveClickEvent(bbiRskUbah);
            konfigApp.RemoveClickEvent(bbiRskKembaliGrid);
            konfigApp.RemoveClickEvent(bbiExportSk);
        }

        private void bbiRskExportKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (konfigApp.kdPelayanan == "02")
                gridSkPspBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "03")
                gridSkPspBmnDpl.ExportToExcel();
            else if (konfigApp.kdPelayanan == "04")
                gridSkAspBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "05")
                gridSkPsBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "06")
                gridSkSewaBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "07")
                gridSkPpBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "08")
                gridSkKspBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "09")
                gridSkBgs.ExportToExcel();
            else if (konfigApp.kdPelayanan == "10")
                gridSkBsg.ExportToExcel();
            else if (konfigApp.kdPelayanan == "11")
                gridSkPenjualan.ExportToExcel();
            else if (konfigApp.kdPelayanan == "12")
                gridSkTmBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "13")
                gridSkHibah.ExportToExcel();
            else if (konfigApp.kdPelayanan == "14")
                gridSkPmp.ExportToExcel();
            else if (konfigApp.kdPelayanan == "15")
                gridSkMusnahBmn.ExportToExcel();
            else if (konfigApp.kdPelayanan == "16")
                gridSkHapusBmnKpp.ExportToExcel();
            else if (konfigApp.kdPelayanan == "17")
                gridSkHapusBmnKsl.ExportToExcel();

        }

        #endregion

        private bool modeCariRSK = false;
        ucRskPspBmnGrid gridSkPspBmn;
        ucRskPspBmnForm formSkPspBmnTambah;
        ucRskPspBmnForm formSkPspBmnUbah;
        ucRskPspBmnForm formSkPspBmnDetail;
        private ArrayList dsGridRskPspBmn;
        SvcWasdalPSPBMNSkSelect.OutputParameters dOutRskPspBmn;
        SvcWasdalPSPBMNSkSelect.execute_pttClient ambilRskPspBmn;

        private void setEventTombolRskPspBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPspBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPspBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPspBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDetailKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPspBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPspBmnMoreDataKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliGridKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkPspBmn()
        {
            //if (gridSkPspBmn == null)
            //{
            gridSkPspBmn = new KKW.RSK.ucRskPspBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskPspBmn),
                detailDataGrid = new DetailDataGrid(bbiRskPspBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskPspBmn();
            setPanel(gridSkPspBmn);
        }

        #region --++ Tombol Ribbon
        private void bbiRskPspBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan02), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkPspBmnTambah == null)
                {
                    formSkPspBmnTambah = new KKW.RSK.ucRskPspBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPspBmn)
                    };
                }
                formSkPspBmnTambah.inisialisasiForm();
                setPanel(formSkPspBmnTambah);
                setTombolRskForm();
            }
        }

        private void bbiRskPspBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPspBmn.dataTerpilih != null)
            {
                if (formSkPspBmnUbah == null)
                {
                    formSkPspBmnUbah = new KKW.RSK.ucRskPspBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPspBmn)
                    };
                }
                formSkPspBmnUbah.dataTerpilih = gridSkPspBmn.dataTerpilih;
                setPanel(formSkPspBmnUbah);
                formSkPspBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPspBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPspBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPspBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
                        parInp.P_ID_SK_WASDALSpecified = true;
                        parInp.P_ID_SK_WASDAL = gridSkPspBmn.dataTerpilih.ID_SK_WASDAL;
                        parInp.P_ID_PEMOHON = gridSkPspBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkPspBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkPspBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkPspBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkPspBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkPspBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkPspBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NILAI_PENETAPAN = gridSkPspBmn.dataTerpilih.NILAI_PENETAPAN;
                        parInp.P_NILAI_PENETAPANSpecified = true;
                        parInp.P_NIP_PENANDATANGAN = gridSkPspBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkPspBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkPspBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkPspBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkPspBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TGL_SK = konfigApp.DateToString(gridSkPspBmn.dataTerpilih.TGL_SK);
                        parInp.P_THN_ANG = (gridSkPspBmn.dataTerpilih.THN_ANG == "-") ? konfigApp.tahunAnggaran.ToString() : gridSkPspBmn.dataTerpilih.THN_ANG;
                        parInp.P_TIPE_PEMOHON = gridSkPspBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkPspBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkPspBmn.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkPspBmn.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkPspBmn.dataTerpilih.UR_SATKER;

                        ambilDataPspBmn = new SvcWasdalPSPBMNCrud.execute_pttClient();
                        ambilDataPspBmn.Open();
                        ambilDataPspBmn.Beginexecute(parInp, new AsyncCallback(cudRskPspBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskPspBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPspBmn.dataTerpilih != null)
            {
                if (formSkPspBmnDetail == null)
                {
                    formSkPspBmnDetail = new KKW.RSK.ucRskPspBmnForm("A");
                    formSkPspBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkPspBmnDetail.dataTerpilih = gridSkPspBmn.dataTerpilih;
                setPanel(formSkPspBmnDetail);
                formSkPspBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPspBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //panelKoorSatker.Controls.Clear();
            //rpRekamSK.Visible = false;
            setPanel(gridSkPspBmn);
            setTombolRskGrid();
            gridSkPspBmn.dsDataSource = dsGridRskPspBmn;
            gridSkPspBmn.displayData();
        }

        private void bbiRskPspBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkPspBmn.teNamaKolom.Text = "";
            gridSkPspBmn.teCari.Text = "";
            gridSkPspBmn.fieldDicari = "";
            gridSkPspBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskPspBmn();
        }

        private void bbiRskPspBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskPspBmn();
            }
        }

        private void bbiRskPspBmnKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskPspBmnKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = "Perekaman " + konfigApp.namaLayanan02;
            konfigApp.kdPelayanan = "02";
            konfigApp.namaPelayanan = konfigApp.namaLayanan02;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkPspBmn();
            modeCariRSK = false;
            gridSkPspBmn.teNamaKolom.Text = "";
            gridSkPspBmn.teCari.Text = "";
            gridSkPspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskPspBmn();
        }

        #endregion --++ Tombol Ribbon

        private void nbiPerekamanSK_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = "Perekaman " + konfigApp.namaLayanan02;
            konfigApp.kdPelayanan = "02";
            konfigApp.namaPelayanan = konfigApp.namaLayanan02;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkPspBmn();
            modeCariRSK = false;
            gridSkPspBmn.teNamaKolom.Text = "";
            gridSkPspBmn.teCari.Text = "";
            gridSkPspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskPspBmn();
        }

        #region --++ Ambil Data PSP BMN
        private void getInitRskPspBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNSkSelect.InputParameters parInp = new SvcWasdalPSPBMNSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                // parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskPspBmn = new SvcWasdalPSPBMNSkSelect.execute_pttClient();
                //ambilRskPspBmn.Open();
                ambilRskPspBmn.Beginexecute(parInp, new AsyncCallback(getRskPspBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskPspBmn(IAsyncResult result)
        {
            try
            {
                dOutRskPspBmn = ambilRskPspBmn.Endexecute(result);
                ambilRskPspBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskPspBmn(dsRskPspBmn), dOutRskPspBmn);
            }
            catch (Exception ex)
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskPspBmn(SvcWasdalPSPBMNSkSelect.OutputParameters dataOut);

        private void dsRskPspBmn(SvcWasdalPSPBMNSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_PSP[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }
            if (dataInisial == true)
            {
                dsGridRskPspBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskPspBmn.Add(dataOut.SF_READ_WASDAL_PSP[i]);
            }

            gridSkPspBmn.labelTotData.Text = "";
            gridSkPspBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " data dari " + totalData + " data";
            gridSkPspBmn.sbCariOnline.Enabled = !modeCari;
            gridSkPspBmn.dsDataSource = dsGridRskPspBmn;
            gridSkPspBmn.displayData();
            if (modeCariRSK == true)
            {
                string xSatu = gridSkPspBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkPspBmn.teCari.Text.Trim();
                string xTiga = gridSkPspBmn.fieldDicari;
                gridSkPspBmn.gvGridPenertiban.ClearColumnsFilter();
                gridSkPspBmn.teNamaKolom.Text = xSatu;
                gridSkPspBmn.teCari.Text = xDua;
                gridSkPspBmn.fieldDicari = xTiga;
            }
            else
                gridSkPspBmn.gvGridPenertiban.ClearColumnsFilter();
        }

        private void cariDataRskPspBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCariRSK = true;
            dataInisial = initModeCari;
            getInitRskPspBmn();
        }
        #endregion Ambil PSP BMN

        #region --++ Simpan Data PSP BMN
        SvcWasdalPSPBMNCrud.OutputParameters dOutAmbilDataPspBmn;
        SvcWasdalPSPBMNCrud.execute_pttClient ambilDataPspBmn;

        private void simpanDataRskPspBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
                parInp.P_ID_SK_WASDALSpecified = true;
                parInp.P_ID_SK_WASDAL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.idSkWasdal : formSkPspBmnUbah.idSkWasdal);
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.idPemohon : formSkPspBmnUbah.idPemohon);
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.rgJenisAset.EditValue.ToString() : formSkPspBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teJabatan.Text.Trim() : formSkPspBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.kodePenerbitSk : formSkPspBmnUbah.kodePenerbitSk);
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.kodePenerbitSkDetail : formSkPspBmnUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnTambah.teNilaiPenetapan.Text)) : (formSkPspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNipPenandaTangan.Text : formSkPspBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNamaPenandaTangan.Text : formSkPspBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNmPenerbitSk.Text : formSkPspBmnUbah.teNmPenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNmPenerbitSkDetail.Text : formSkPspBmnUbah.teNmPenerbitSkDetail.Text);
                //parInp.P_FILE_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teFileSk.Text : formSkPspBmnUbah.teFileSk.Text);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkPspBmnTambah.teFileSk.Text) : konfigApp.FileToByteArray(formSkPspBmnUbah.teFileSk.Text ));
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teNomorSk.Text.Trim() : formSkPspBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teTanggalSk.EditValue : formSkPspBmnUbah.teTanggalSk.EditValue)));
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teTahunAnggaran.Text : formSkPspBmnUbah.teTahunAnggaran.Text);
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teJenisPemohon.Text : formSkPspBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.tipePengelola : formSkPspBmnUbah.tipePengelola); ;//konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnTambah.teUraianKeputusan.Text : formSkPspBmnUbah.teUraianKeputusan.Text);


                ambilDataPspBmn = new SvcWasdalPSPBMNCrud.execute_pttClient();
                ambilDataPspBmn.Beginexecute(parInp, new AsyncCallback(cudRskPspBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulGagalSimpan);
            }
        }

        private void cudRskPspBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPspBmn = ambilDataPspBmn.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsPspBmn(this.ubahDsPspBmn), dOutAmbilDataPspBmn);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsPspBmn(SvcWasdalPSPBMNCrud.OutputParameters dataOutKpknlCrud);

        int _yangkeBerapa = 0;

        private void ubahDsPspBmn(SvcWasdalPSPBMNCrud.OutputParameters dataOutKpknlCrud)
        {
            if (dataOutKpknlCrud.PO_RESULT == "Y")
            {
                int _indeksData = 0;
                SvcWasdalPSPBMNSkSelect.WASDALSROW_READ_WASDAL_PSP dataPenyama = new SvcWasdalPSPBMNSkSelect.WASDALSROW_READ_WASDAL_PSP();
                dataPenyama.ID_PEMOHONSpecified = true;
                //dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_PEMOHON = formSkPspBmnTambah.idPemohon;
                        //dataPenyama.ID_SATKER = konfigApp.idSatker;//formSkPspBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkPspBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPspBmnTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkPspBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPspBmnTambah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPspBmnTambah.kodePenerbitSkDetail;
                        //dataPenyama.KD_SATKER = konfigApp.kodeSatker;//formSkPspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPspBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPspBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkPspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPspBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPspBmnTambah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPspBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskPspBmn == null ? 1 : dsGridRskPspBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkPspBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPspBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPspBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.THN_ANG = formSkPspBmnTambah.teTahunAnggaran.Text;
                        dataPenyama.UR_KL = formSkPspBmnTambah.teNamaKl.Text;
                        //dataPenyama.UR_SATKER = konfigApp.namaSatker;//formSkPspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPspBmnTambah.teUraianKeputusan.Text;
                        dsGridRskPspBmn.Add(dataPenyama);
                        if (modeCrud == 'C')
                        {
                            gridSkPspBmn.dataTerpilih = dataPenyama;
                            _yangkeBerapa = 1;
                            formSkPspBmnTambah.gcDaftarAset.Enabled = true;
                            formSkPspBmnTambah.sbCari.Enabled = true;
                            formSkPspBmnTambah.sbTambah.Enabled = true;
                            formSkPspBmnTambah.sbHapus.Enabled = true;
                            formSkPspBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                            formSkPspBmnTambah.teNomorSk.Properties.ReadOnly = false;
                            formSkPspBmnTambah.teTanggalSk.Properties.ReadOnly = false;
                            formSkPspBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                            formSkPspBmnTambah.sbCariPemohon.Enabled = false;
                            formSkPspBmnTambah.sbRefresh.Enabled = true;
                            formSkPspBmnTambah.teNmPenerbitSk.Properties.ReadOnly = true;
                            formSkPspBmnTambah.cePilihSemua.Enabled = true;
                            formSkPspBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                            //formSkPspBmnTambah.statusForm = "CU";
                        }
                        else if (modeCrud == 'Z')
                        {
                            /*if (_keBerapa == 1)
                            {
                                _keBerapa++;
                                _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
                            }
                            else
                            {
                                gridSkPspBmn.dataTerpilih = gridSkPspBmn.dataTerpilih;
                            }*/
                            _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
                            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                            dsGridRskPspBmn.Remove(gridSkPspBmn.dataTerpilih);
                            dsGridRskPspBmn.Insert(_indeksData, dataPenyama);
                        }
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL = formSkPspBmnUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkPspBmnUbah.idPemohon;
                        //dataPenyama.ID_SATKER = konfigApp.idSatker;//formSkPspBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkPspBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPspBmnUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkPspBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPspBmnUbah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPspBmnUbah.kodePenerbitSkDetail;
                        //dataPenyama.KD_SATKER = konfigApp.kodeSatker;//formSkPspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPspBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPspBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkPspBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkPspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPspBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPspBmnUbah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPspBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkPspBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkPspBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkPspBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkPspBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkPspBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPspBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPspBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkPspBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkPspBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkPspBmn.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkPspBmnUbah.teNamaKl.Text;
                        //dataPenyama.UR_SATKER = konfigApp.namaSatker;//formSkPspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPspBmnUbah.teUraianKeputusan.Text;
                        dataPenyama.THN_ANG = formSkPspBmnUbah.teTahunAnggaran.Text;
                        _indeksData = dsGridRskPspBmn.IndexOf(gridSkPspBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskPspBmn.Remove(gridSkPspBmn.dataTerpilih);
                        dsGridRskPspBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskPspBmn.Remove(gridSkPspBmn.dataTerpilih);
                        break;
                }
                gridSkPspBmn.dsDataSource = dsGridRskPspBmn;
                gridSkPspBmn.displayData();

                //if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z') || (this.modeCrud == 'D'))
                //{
                //    initGridSkPspBmn();
                //}
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN

        #endregion

        #region pspbmndpl

        ucRskPspBmnDplGrid gridSkPspBmnDpl;
        ucRskPspBmnDplForm formSkPspBmnDplTambah;
        ucRskPspBmnDplForm formSkPspBmnDplUbah;
        ucRskPspBmnDplForm formSkPspBmnDplDetail;
        private ArrayList dsGridRskPspBmnDpl;
        SvcWasdalPSPBMNLAINSkSelect.OutputParameters dOutRskPspBmnDpl;
        SvcWasdalPSPBMNLAINSkSelect.execute_pttClient ambilRskPspBmnDpl;

        private void setEventTombolRskPspBmnDpl()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDplTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDplUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDplHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDplDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDplKembaliKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDplRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPspBmnDplMoreDataKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkPspBmnDpl()
        {
            //if (gridSkPspBmnDpl == null)
            //{
            gridSkPspBmnDpl = new AppPengguna.KKW.RSK.ucRskPspBmnDplGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskPspBmnDpl),
                detailDataGrid = new DetailDataGrid(bbiRskPspBmnDplUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskPspBmnDpl();
            setPanel(gridSkPspBmnDpl);
        }

        #region --++ Tombol Ribbon
        private void bbiRskPspBmnDplTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan03), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkPspBmnDplTambah == null)
                {
                    formSkPspBmnDplTambah = new AppPengguna.KKW.RSK.ucRskPspBmnDplForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmnDpl = new SimpanDataRsk(simpanDataRskPspBmnDpl)
                    };
                }
                setPanel(formSkPspBmnDplTambah);
                formSkPspBmnDplTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskPspBmnDplUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPspBmnDpl.dataTerpilih != null)
            {
                if (formSkPspBmnDplUbah == null)
                {
                    formSkPspBmnDplUbah = new AppPengguna.KKW.RSK.ucRskPspBmnDplForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmnDpl = new SimpanDataRsk(simpanDataRskPspBmnDpl)
                    };
                }
                formSkPspBmnDplUbah.dataTerpilih = gridSkPspBmnDpl.dataTerpilih;
                setPanel(formSkPspBmnDplUbah);
                formSkPspBmnDplUbah.inisialisasiForm();
                setEventTombolRskPspBmnDpl();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPspBmnDplHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPspBmnDpl.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPspBmnDpl.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters();
                        parInp.P_ID_SK_WASDALSpecified = true;
                        parInp.P_ID_SK_WASDAL = gridSkPspBmnDpl.dataTerpilih.ID_SK_WASDAL;

                        parInp.P_ID_PEMOHON = gridSkPspBmnDpl.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkPspBmnDpl.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkPspBmnDpl.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkPspBmnDpl.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkPspBmnDpl.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkPspBmnDpl.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkPspBmnDpl.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NILAI_PENETAPAN = gridSkPspBmnDpl.dataTerpilih.NILAI_PENETAPAN;
                        parInp.P_NILAI_PENETAPANSpecified = true;
                        parInp.P_NIP_PENANDATANGAN = gridSkPspBmnDpl.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkPspBmnDpl.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkPspBmnDpl.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkPspBmnDpl.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkPspBmnDpl.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkPspBmnDpl.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkPspBmnDpl.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkPspBmnDpl.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkPspBmnDpl.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkPspBmnDpl.dataTerpilih.UR_SATKER;
                        simpanDataPspBmnDpl = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
                        simpanDataPspBmnDpl.Open();
                        simpanDataPspBmnDpl.Beginexecute(parInp, new AsyncCallback(cudRskPspBmnDpl), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskPspBmnDplDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPspBmnDpl.dataTerpilih != null)
            {
                if (formSkPspBmnDplDetail == null)
                {
                    formSkPspBmnDplDetail = new AppPengguna.KKW.RSK.ucRskPspBmnDplForm("A")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar)
                    };
                }
                formSkPspBmnDplDetail.dataTerpilih = gridSkPspBmnDpl.dataTerpilih;
                setPanel(formSkPspBmnDplDetail);
                formSkPspBmnDplDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPspBmnDplKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkPspBmnDpl);
            setTombolRskGrid();
            gridSkPspBmnDpl.dsDataSource = dsGridRskPspBmnDpl;
            gridSkPspBmnDpl.displayData();
        }

        private void bbiRskPspBmnDplRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkPspBmnDpl.teNamaKolom.Text = "";
            gridSkPspBmnDpl.teCari.Text = "";
            gridSkPspBmnDpl.fieldDicari = "";
            gridSkPspBmnDpl.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskPspBmnDpl();
        }

        private void bbiRskPspBmnDplMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskPspBmnDpl();
            }
        }
        #endregion --++ Tombol Ribbon

        private void nbiRskPspBmnDpl_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan03;
            konfigApp.kdPelayanan = "03";
            konfigApp.namaPelayanan = konfigApp.namaLayanan03;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkPspBmnDpl();
            modeCari = false;
            gridSkPspBmnDpl.teNamaKolom.Text = "";
            gridSkPspBmnDpl.teCari.Text = "";
            gridSkPspBmnDpl.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskPspBmnDpl();
        }

        #region --++ Ambil Data PSP BMN DPL
        private void getInitRskPspBmnDpl()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNLAINSkSelect.InputParameters parInp = new SvcWasdalPSPBMNLAINSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //   parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskPspBmnDpl = new SvcWasdalPSPBMNLAINSkSelect.execute_pttClient();
                ambilRskPspBmnDpl.Open();
                ambilRskPspBmnDpl.Beginexecute(parInp, new AsyncCallback(getRskPspBmnDpl), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskPspBmnDpl(IAsyncResult result)
        {
            try
            {
                dOutRskPspBmnDpl = ambilRskPspBmnDpl.Endexecute(result);
                ambilRskPspBmnDpl.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskPspBmnDpl(dsRskPspBmnDpl), dOutRskPspBmnDpl);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskPspBmnDpl(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut);

        private void dsRskPspBmnDpl(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP_LAIN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_PSP_LAIN[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }
            if (dataInisial == true)
            {
                dsGridRskPspBmnDpl = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dataOut.SF_READ_WASDAL_PSP_LAIN[i].TGL_SK = konfigApp.setDefaultDate(dataOut.SF_READ_WASDAL_PSP_LAIN[i].TGL_SK);

                dsGridRskPspBmnDpl.Add(dataOut.SF_READ_WASDAL_PSP_LAIN[i]);
            }
            gridSkPspBmnDpl.labelTotData.Text = "";
            gridSkPspBmnDpl.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";

            gridSkPspBmnDpl.sbCariOnline.Enabled = !modeCari;
            gridSkPspBmnDpl.dsDataSource = dsGridRskPspBmnDpl;
            gridSkPspBmnDpl.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkPspBmnDpl.teNamaKolom.Text.Trim();
                string xDua = gridSkPspBmnDpl.teCari.Text.Trim();
                string xTiga = gridSkPspBmnDpl.fieldDicari;
                gridSkPspBmnDpl.gvGridSk.ClearColumnsFilter();
                gridSkPspBmnDpl.teNamaKolom.Text = xSatu;
                gridSkPspBmnDpl.teCari.Text = xDua;
                gridSkPspBmnDpl.fieldDicari = xTiga;
            }
            else
                gridSkPspBmnDpl.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskPspBmnDpl(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskPspBmnDpl();
        }
        #endregion Ambil PSP BMN DPL

        #region --++ Simpan Data PSP BMN DPL
        SvcWasdalPSPBMNLAINCrud.OutputParameters dOutPspBmnDpl;
        SvcWasdalPSPBMNLAINCrud.execute_pttClient simpanDataPspBmnDpl;

        private void simpanDataRskPspBmnDpl(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters()
                {
                    P_ID_SK_WASDALSpecified = true,
                    P_ID_SK_WASDAL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.idSkWasdal : formSkPspBmnDplUbah.idSkWasdal),
                    P_ID_KPKNL = konfigApp.idKpknl,
                    P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true),
                    P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.idPemohon : formSkPspBmnDplUbah.idPemohon),
                    P_ID_PEMOHONSpecified = true,
                    P_ID_USER = konfigApp.idUser,
                    P_ID_USERSpecified = true,
                    P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.rgJenisAset.EditValue.ToString() : formSkPspBmnDplUbah.rgJenisAset.EditValue.ToString()),
                    P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teJabatan.Text.Trim() : formSkPspBmnDplUbah.teJabatan.Text.Trim()),
                    P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teTahunAnggaran.Text.Trim() : formSkPspBmnDplUbah.teTahunAnggaran.Text.Trim()),
                    P_KD_PELAYANAN = konfigApp.kdPelayanan,
                    P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teNmPenerbitSk.EditValue.ToString() : formSkPspBmnDplUbah.teNmPenerbitSk.EditValue.ToString()),
                    P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.kodePenerbitSkDetail : formSkPspBmnDplUbah.kodePenerbitSkDetail),
                    P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPspBmnDplTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplTambah.teNilaiPenetapan.Text)) : (formSkPspBmnDplUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplUbah.teNilaiPenetapan.Text))),
                    P_NILAI_PENETAPANSpecified = true,
                    P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teNipPenandaTangan.Text : formSkPspBmnDplUbah.teNipPenandaTangan.Text),
                    P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teNamaPenandaTangan.Text : formSkPspBmnDplUbah.teNamaPenandaTangan.Text),
                    P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teNmPenerbitSk.Text : formSkPspBmnDplUbah.teNmPenerbitSk.Text),
                    P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teNamaInstansi.Text : formSkPspBmnDplUbah.namaPenerbitSkDetail),
                    P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teNomorSk.Text.Trim() : formSkPspBmnDplUbah.teNomorSk.Text.Trim()),
                    P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null),
                    P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teTanggalSk.EditValue : formSkPspBmnDplUbah.teTanggalSk.EditValue))),
                    P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teJenisPemohon.Text : formSkPspBmnDplUbah.teJenisPemohon.Text),
                    P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.tipePengelola : formSkPspBmnDplUbah.tipePengelola),
                    P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teUraianKeputusan.Text : formSkPspBmnDplUbah.teUraianKeputusan.Text),
                    P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teAlamatPihakLain.Text : formSkPspBmnDplUbah.teAlamatPihakLain.Text),
                    //P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkPspBmnDplTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplTambah.teJangkaWaktu.Text)) : (formSkPspBmnDplUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplUbah.teJangkaWaktu.Text))),
                    P_JANGKA_WAKTUSpecified = true,
                    P_KD_KL = konfigApp.kodeKl,
                    P_ID_SATKER = konfigApp.idSatker,
                    P_ID_SATKERSpecified = true,
                    P_KD_SATKER = konfigApp.kodeSatker,
                    P_UR_SATKER = konfigApp.namaSatker,
                    P_UR_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teNamaPihakLain.Text : formSkPspBmnDplUbah.teNamaPihakLain.Text),

                    //P_PERIODE = ((_mode=="C" || _mode=="CU") ? formSkPspBmnDplTambah.konversiPeriode():formSkPspBmnDplUbah.konversiPeriode()),
                    //P_FILE_SK = ((_mode == "C" || _mode == "CU") ? formSkPspBmnDplTambah.teFileSk.Text : formSkPspBmnDplUbah.teFileSk.Text),
                    //P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkPspBmnDplTambah.filePath) : konfigApp.FileToByteArray(formSkPspBmnDplUbah.filePath))

                };
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_penggantiChar);
                modeCrud = Convert.ToChar(_mode);
                simpanDataPspBmnDpl = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
                simpanDataPspBmnDpl.Open();
                simpanDataPspBmnDpl.Beginexecute(parInp, new AsyncCallback(cudRskPspBmnDpl), "");
            }
            catch (Exception e)
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalLain, konfigApp.judulKonfirmasi);
            }
        }

        private void cudRskPspBmnDpl(IAsyncResult result)
        {
            try
            {
                dOutPspBmnDpl = simpanDataPspBmnDpl.Endexecute(result);
                simpanDataPspBmnDpl.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsPspBmnDpl(ubahDsPspBmnDpl), dOutPspBmnDpl);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsPspBmnDpl(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutPspBmnDpl);

        private void ubahDsPspBmnDpl(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutPspBmnDpl)
        {
            if (dataOutPspBmnDpl.PO_RESULT == "Y")
            {
                SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN dataPenyama = new SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                if (dsGridRskPspBmnDpl == null) dsGridRskPspBmnDpl = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                        dataPenyama.ID_PEMOHON = formSkPspBmnDplTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPspBmnDplTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkPspBmnDplTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPspBmnDplTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkPspBmnDplTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPspBmnDplTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPspBmnDplTambah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPspBmnDplTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPspBmnDplTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = (formSkPspBmnDplTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplTambah.teKuantitas.Text));
                        dataPenyama.NILAI_PENETAPAN = (formSkPspBmnDplTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplTambah.teNilaiPenetapan.Text));
                        dataPenyama.NIP_PENANDATANGAN = formSkPspBmnDplTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkPspBmnDplTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPspBmnDplTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPspBmnDplTambah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPspBmnDplTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskPspBmnDpl == null ? 1 : dsGridRskPspBmnDpl.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkPspBmnDplTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPspBmnDplTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPspBmnDplTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.THN_ANG = formSkPspBmnDplTambah.teTahunAnggaran.Text;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkPspBmnDplTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPspBmnDplTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPspBmnDplTambah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPspBmnDplTambah.teAlamatPihakLain.Text;
                        //dataPenyama.JANGKA_WAKTU = (formSkPspBmnDplTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplTambah.teJangkaWaktu.Text));
                        dataPenyama.UR_PHK_LAIN = formSkPspBmnDplTambah.teNamaPihakLain.Text;
                        dsGridRskPspBmnDpl.Add(dataPenyama);
                        formSkPspBmnDplTambah.gcDaftarAset.Enabled = true;
                        formSkPspBmnDplTambah.sbTambah.Enabled = true;
                        formSkPspBmnDplTambah.sbHapus.Enabled = true;
                        formSkPspBmnDplTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkPspBmnDplTambah.teNomorSk.Properties.ReadOnly = false;
                        formSkPspBmnDplTambah.teTanggalSk.Properties.ReadOnly = false;
                        formSkPspBmnDplTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkPspBmnDplTambah.sbCariPemohon.Enabled = false;
                        formSkPspBmnDplTambah.sbRefresh.Enabled = true;
                        formSkPspBmnDplTambah.sbValidasi.Enabled = true;
                        formSkPspBmnDplTambah.teNmPenerbitSk.Properties.ReadOnly = true;
                        formSkPspBmnDplTambah.cePilihSemua.Enabled = true;
                        formSkPspBmnDplTambah.teKodePemohon.Properties.ReadOnly = true;

                        //formSkPspBmnDplTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL = formSkPspBmnDplUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkPspBmnDplUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPspBmnDplUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkPspBmnDplUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPspBmnDplUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkPspBmnDplUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPspBmnDplUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPspBmnDplUbah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPspBmnDplUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPspBmnDplUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = (formSkPspBmnDplUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplUbah.teKuantitas.Text));
                        dataPenyama.NILAI_PENETAPAN = (formSkPspBmnDplUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplUbah.teNilaiPenetapan.Text));
                        dataPenyama.NIP_PENANDATANGAN = formSkPspBmnDplUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkPspBmnDplUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPspBmnDplUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPspBmnDplUbah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPspBmnDplUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkPspBmnDpl.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkPspBmnDpl.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkPspBmnDplUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkPspBmnDpl.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkPspBmnDpl.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPspBmnDplUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPspBmnDplUbah.teJenisPemohon.Text;
                        dataPenyama.THN_ANG = formSkPspBmnDplUbah.teTahunAnggaran.Text;
                        dataPenyama.TOT_BMN = gridSkPspBmnDpl.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkPspBmnDpl.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkPspBmnDpl.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkPspBmnDplUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPspBmnDplUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPspBmnDplUbah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPspBmnDplUbah.teAlamatPihakLain.Text;
                        //dataPenyama.JANGKA_WAKTU = (formSkPspBmnDplUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPspBmnDplUbah.teJangkaWaktu.Text));
                        dataPenyama.UR_PHK_LAIN = formSkPspBmnDplUbah.teNamaPihakLain.Text;
                        int _indeksData = dsGridRskPspBmnDpl.IndexOf(gridSkPspBmnDpl.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskPspBmnDpl.Remove(gridSkPspBmnDpl.dataTerpilih);
                        dsGridRskPspBmnDpl.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskPspBmnDpl.Remove(gridSkPspBmnDpl.dataTerpilih);
                        break;
                }
                gridSkPspBmnDpl.dsDataSource = dsGridRskPspBmnDpl;
                gridSkPspBmnDpl.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN

        #endregion

        #region aspbmn
        ucRskAspBmnGrid gridSkAspBmn;
        ucRskAspBmnForm formSkAspBmnTambah;
        ucRskAspBmnForm formSkAspBmnUbah;
        ucRskAspBmnForm formSkAspBmnDetail;
        private ArrayList dsGridRskAspBmn;
        SvcWasdalPSPBMNLAINSkSelect.OutputParameters dOutRskAspBmn;
        SvcWasdalPSPBMNLAINSkSelect.execute_pttClient ambilRskAspBmn;


        private void setEventTombolRskAspBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskAspBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskAspBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskAspBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskAspBmnDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskAspBmnKembaliKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskAspBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskAspBmnMoreDataKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkAspBmn()
        {
            //if (gridSkAspBmn == null)
            //{
            gridSkAspBmn = new AppPengguna.KKW.RSK.ucRskAspBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskAspBmn),
                detailDataGrid = new DetailDataGrid(bbiRskAspBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskAspBmn();
            setPanel(gridSkAspBmn);
        }

        #region --++ Tombol Ribbon
        private void bbiRskAspBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan04), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkAspBmnTambah == null)
                {
                    formSkAspBmnTambah = new AppPengguna.KKW.RSK.ucRskAspBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskAspBmn)
                    };
                }
                setPanel(formSkAspBmnTambah);
                formSkAspBmnTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskAspBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkAspBmn.dataTerpilih != null)
            {
                if (formSkAspBmnUbah == null)
                {
                    formSkAspBmnUbah = new AppPengguna.KKW.RSK.ucRskAspBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskAspBmn)
                    };
                }
                formSkAspBmnUbah.dataTerpilih = gridSkAspBmn.dataTerpilih;
                setPanel(formSkAspBmnUbah);
                formSkAspBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskAspBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

            if (gridSkAspBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkAspBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters();
                        parInp.P_ID_SK_WASDALSpecified = true;
                        parInp.P_ID_SK_WASDAL = gridSkAspBmn.dataTerpilih.ID_SK_WASDAL;
                        parInp.P_ID_PEMOHON = gridSkAspBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkAspBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkAspBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkAspBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkAspBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkAspBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkAspBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NILAI_PENETAPAN = gridSkAspBmn.dataTerpilih.NILAI_PENETAPAN;
                        parInp.P_NILAI_PENETAPANSpecified = true;
                        parInp.P_NIP_PENANDATANGAN = gridSkAspBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkAspBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkAspBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkAspBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_JANGKA_WAKTUSpecified = true;
                        parInp.P_JANGKA_WAKTU = gridSkAspBmn.dataTerpilih.JANGKA_WAKTU;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkAspBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkAspBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkAspBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkAspBmn.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkAspBmn.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkAspBmn.dataTerpilih.UR_SATKER;
                        ambilDataRskAspBmn = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
                        ambilDataRskAspBmn.Open();
                        ambilDataRskAspBmn.Beginexecute(parInp, new AsyncCallback(cudRskAspBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskAspBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkAspBmn.dataTerpilih != null)
            {
                if (formSkAspBmnDetail == null)
                {
                    formSkAspBmnDetail = new AppPengguna.KKW.RSK.ucRskAspBmnForm("A");
                    formSkAspBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkAspBmnDetail.dataTerpilih = gridSkAspBmn.dataTerpilih;
                setPanel(formSkAspBmnDetail);
                formSkAspBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskAspBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkAspBmn);
            setTombolRskGrid();
            gridSkAspBmn.dsDataSource = dsGridRskAspBmn;
            gridSkAspBmn.displayData();
        }

        private void bbiRskAspBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkAspBmn.teNamaKolom.Text = "";
            gridSkAspBmn.teCari.Text = "";
            gridSkAspBmn.fieldDicari = "";
            gridSkAspBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskAspBmn();
        }

        private void bbiRskAspBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskAspBmn();
            }
        }
        #endregion --++ Tombol Ribbon

        private void nbiRskAspBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan04;
            konfigApp.kdPelayanan = "04";
            konfigApp.namaPelayanan = konfigApp.namaLayanan04;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkAspBmn();
            modeCari = false;
            gridSkAspBmn.teNamaKolom.Text = "";
            gridSkAspBmn.teCari.Text = "";
            gridSkAspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskAspBmn();
        }

        #region --++ Ambil Data ASP BMN
        private void getInitRskAspBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNLAINSkSelect.InputParameters parInp = new SvcWasdalPSPBMNLAINSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //   parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskAspBmn = new SvcWasdalPSPBMNLAINSkSelect.execute_pttClient();
                ambilRskAspBmn.Open();
                ambilRskAspBmn.Beginexecute(parInp, new AsyncCallback(getRskAspBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskAspBmn(IAsyncResult result)
        {
            try
            {
                dOutRskAspBmn = ambilRskAspBmn.Endexecute(result);
                ambilRskAspBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskAspBmn(dsRskAspBmn), dOutRskAspBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskAspBmn(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut);

        private void dsRskAspBmn(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP_LAIN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_PSP_LAIN[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }

            if (dataInisial == true)
            {
                dsGridRskAspBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskAspBmn.Add(dataOut.SF_READ_WASDAL_PSP_LAIN[i]);
            }
            gridSkAspBmn.labelTotData.Text = "";
            gridSkAspBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkAspBmn.sbCariOnline.Enabled = !modeCari;
            gridSkAspBmn.dsDataSource = dsGridRskAspBmn;
            gridSkAspBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkAspBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkAspBmn.teCari.Text.Trim();
                string xTiga = gridSkAspBmn.fieldDicari;
                gridSkAspBmn.gvGridSk.ClearColumnsFilter();
                gridSkAspBmn.teNamaKolom.Text = xSatu;
                gridSkAspBmn.teCari.Text = xDua;
                gridSkAspBmn.fieldDicari = xTiga;
            }
            else
                gridSkAspBmn.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskAspBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskAspBmn();
        }
        #endregion Ambil ASP BMN

        #region --++ Simpan Data ASP BMN
        //SvcWasdalLAINCrud.OutputParameters dOutAmbilDataRskAspBmn;
        //SvcWasdalLAINCrud.call_pttClient ambilDataRskAspBmn;
        SvcWasdalPSPBMNLAINCrud.OutputParameters dOutAmbilDataRskAspBmn;
        SvcWasdalPSPBMNLAINCrud.execute_pttClient ambilDataRskAspBmn;

        private void simpanDataRskAspBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters();
                parInp.P_ID_SK_WASDALSpecified = true;
                parInp.P_ID_SK_WASDAL = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.idSkWasdal : formSkAspBmnUbah.idSkWasdal);
                parInp.P_ID_KPKNL = konfigApp.idKpknl;
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.idPemohon : formSkAspBmnUbah.idPemohon);
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.rgJenisAset.EditValue.ToString() : formSkAspBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teJabatan.Text.Trim() : formSkAspBmnUbah.teJabatan.Text.Trim());
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teTahunAnggaran.Text : formSkAspBmnUbah.teTahunAnggaran.Text);
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teNmPenerbitSk.EditValue.ToString() : formSkAspBmnUbah.teNmPenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.kodePenerbitSkDetail : formSkAspBmnUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkAspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnTambah.teNilaiPenetapan.Text)) : (formSkAspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teNipPenandaTangan.Text : formSkAspBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teNamaPenandaTangan.Text : formSkAspBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teNmPenerbitSk.Text : formSkAspBmnUbah.teNmPenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teNamaInstansi.Text : formSkAspBmnUbah.teNamaInstansi.Text);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_penggantiChar);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teNomorSk.Text.Trim() : formSkAspBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teTanggalSk.EditValue : formSkAspBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teJenisPemohon.Text : formSkAspBmnUbah.teJenisPemohon.Text);
                //parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_JANGKA_WAKTUSpecified = true;
                //parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkAspBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnTambah.teJangkaWaktu.Text)) : (formSkAspBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnUbah.teJangkaWaktu.Text))); ;
                //parInp.P_FILE_SK = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teFileSk.Text : formSkAspBmnUbah.teFileSk.Text);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkAspBmnTambah.filePath) : konfigApp.FileToByteArray(formSkAspBmnUbah.filePath));
                //parInp.P_PERUNTUKAN = "";
                //parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teTahunAnggaran.Text : formSkAspBmnUbah.teTahunAnggaran.Text);
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teUraianKeputusan.Text : formSkAspBmnUbah.teUraianKeputusan.Text);
                //KD_KL, UR_KL, ALAMAT_KL --> belum masuk ke parameter input
                parInp.P_KD_KL = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.teKodeKl.Text : formSkAspBmnUbah.teKodeKl.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkAspBmnTambah.tipePengelola : formSkAspBmnUbah.tipePengelola);


                ambilDataRskAspBmn = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
                ambilDataRskAspBmn.Open();
                ambilDataRskAspBmn.Beginexecute(parInp, new AsyncCallback(cudRskAspBmn), "");
            }
            catch (Exception e)
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulGagalSimpan);
            }
        }

        private void cudRskAspBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataRskAspBmn = ambilDataRskAspBmn.Endexecute(result);
                ambilDataRskAspBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsAspBmn(ubahDsAspBmn), dOutAmbilDataRskAspBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsAspBmn(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutAspBmnCrud);

        private void ubahDsAspBmn(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutAspBmnCrud)
        {
            if (dataOutAspBmnCrud.PO_RESULT == "Y")
            {
                SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN dataPenyama = new SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                if (dsGridRskAspBmn == null) dsGridRskAspBmn = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                        dataPenyama.ID_PEMOHON = formSkAspBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkAspBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkAspBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkAspBmnTambah.teJabatan.Text;
                        //dataPenyama.KD_KL = formSkAspBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkAspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkAspBmnTambah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkAspBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkAspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkAspBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkAspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkAspBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkAspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkAspBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkAspBmnTambah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkAspBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskAspBmn == null ? 1 : dsGridRskAspBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkAspBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkAspBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkAspBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.KD_KL = formSkAspBmnTambah.teKodeKl.Text;
                        dataPenyama.UR_KL = formSkAspBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkAspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkAspBmnTambah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkAspBmnTambah.teAlamatPihakLain.Text;
                        //dataPenyama.JANGKA_WAKTU = (formSkAspBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnTambah.teJangkaWaktu.Text));
                        //dataPenyama.NM_PHK_LAIN = formSkAspBmnTambah.teNamaInstansi.Text;
                        dsGridRskAspBmn.Add(dataPenyama);
                        formSkAspBmnTambah.gcDaftarAset.Enabled = true;
                        formSkAspBmnTambah.sbTambah.Enabled = true;
                        formSkAspBmnTambah.sbHapus.Enabled = true;
                        formSkAspBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkAspBmnTambah.teNomorSk.Properties.ReadOnly = false;
                        formSkAspBmnTambah.teTanggalSk.Properties.ReadOnly = false;
                        formSkAspBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkAspBmnTambah.sbCariPemohon.Enabled = false;
                        formSkAspBmnTambah.sbRefresh.Enabled = true;
                        formSkAspBmnTambah.sbValidasi.Enabled = true;
                        formSkAspBmnTambah.teNmPenerbitSk.Properties.ReadOnly = true;
                        formSkAspBmnTambah.cePilihSemua.Enabled = true;
                        formSkAspBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkAspBmnTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL = formSkAspBmnUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkAspBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkAspBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkAspBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkAspBmnUbah.teJabatan.Text;
                        //dataPenyama.KD_KL = formSkAspBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkAspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkAspBmnUbah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkAspBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkAspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkAspBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkAspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkAspBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkAspBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkAspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkAspBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkAspBmnUbah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkAspBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkAspBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkAspBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkAspBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkAspBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkAspBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkAspBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkAspBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkAspBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkAspBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkAspBmn.dataTerpilih.TOTAL_DATA;
                        //dataPenyama.UR_KL = formSkAspBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkAspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkAspBmnUbah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkAspBmnUbah.teAlamatPihakLain.Text;
                        //dataPenyama.JANGKA_WAKTU = (formSkAspBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkAspBmnUbah.teJangkaWaktu.Text));
                        //dataPenyama.NM_PHK_LAIN = formSkAspBmnUbah.teNamaKl.Text;
                        int _indeksData = dsGridRskAspBmn.IndexOf(gridSkAspBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskAspBmn.Remove(gridSkAspBmn.dataTerpilih);
                        dsGridRskAspBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskAspBmn.Remove(gridSkAspBmn.dataTerpilih);
                        break;
                }
                gridSkAspBmn.dsDataSource = dsGridRskAspBmn;
                gridSkAspBmn.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data ASP BMN


        #endregion

        #region psbmn
        ucRskPsBmnGrid gridSkPsBmn;
        ucRskPsBmnForm formSkPsBmnTambah;
        ucRskPsBmnForm formSkPsBmnUbah;
        ucRskPsBmnForm formSkPsBmnDetail;
        private ArrayList dsGridRskPsBmn;
        SvcWasdalPSPBMNLAINSkSelect.OutputParameters dOutRskPsBmn;
        SvcWasdalPSPBMNLAINSkSelect.execute_pttClient ambilRskPsBmn;
        //SvcWasdalLAINCrud.OutputParameters dOutAmbilDataPsBmn;
        //SvcWasdalLAINCrud.call_pttClient ambilDataPsBmn;
        SvcWasdalPSPBMNLAINCrud.OutputParameters dOutAmbilDataPsBmn;
        SvcWasdalPSPBMNLAINCrud.execute_pttClient ambilDataPsBmn;

        private void setEventTombolRskPsBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPsBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPsBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPsBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPsBmnDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPsBmnKembaliKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPsBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPsBmnMoreDataKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkPsBmn()
        {
            //if (gridSkPsBmn == null)
            //{
            gridSkPsBmn = new AppPengguna.KKW.RSK.ucRskPsBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskPsBmn),
                detailDataGrid = new DetailDataGrid(bbiRskPsBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskPsBmn();
            setPanel(gridSkPsBmn);
        }

        #region --++ Tombol Ribbon
        private void bbiRskPsBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan05), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkPsBmnTambah == null)
                {
                    formSkPsBmnTambah = new AppPengguna.KKW.RSK.ucRskPsBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPsBmn)
                    };
                }
                setPanel(formSkPsBmnTambah);
                formSkPsBmnTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskPsBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPsBmn.dataTerpilih != null)
            {
                if (formSkPsBmnUbah == null)
                {
                    formSkPsBmnUbah = new AppPengguna.KKW.RSK.ucRskPsBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPsBmn)
                    };
                }
                formSkPsBmnUbah.dataTerpilih = gridSkPsBmn.dataTerpilih;
                setPanel(formSkPsBmnUbah);
                formSkPsBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPsBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPsBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPsBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        //SvcWasdalPSPBMNCrud.InputParameters parInp = new SvcWasdalPSPBMNCrud.InputParameters();
                        SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters();
                        parInp.P_ID_SK_WASDALSpecified = true;
                        parInp.P_ID_SK_WASDAL = gridSkPsBmn.dataTerpilih.ID_SK_WASDAL;
                        parInp.P_ID_PEMOHON = gridSkPsBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkPsBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkPsBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkPsBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkPsBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkPsBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkPsBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NILAI_PENETAPAN = gridSkPsBmn.dataTerpilih.NILAI_PENETAPAN;
                        parInp.P_NILAI_PENETAPANSpecified = true;
                        parInp.P_NIP_PENANDATANGAN = gridSkPsBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkPsBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkPsBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkPsBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkPsBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkPsBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkPsBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkPsBmn.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkPsBmn.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkPsBmn.dataTerpilih.UR_SATKER;
                        ambilDataPsBmn = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
                        ambilDataPsBmn.Open();
                        ambilDataPsBmn.Beginexecute(parInp, new AsyncCallback(cudRskPsBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskPsBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPsBmn.dataTerpilih != null)
            {
                if (formSkPsBmnDetail == null)
                {
                    formSkPsBmnDetail = new AppPengguna.KKW.RSK.ucRskPsBmnForm("A");
                    formSkPsBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkPsBmnDetail.dataTerpilih = gridSkPsBmn.dataTerpilih;
                setPanel(formSkPsBmnDetail);
                formSkPsBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPsBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkPsBmn);
            setTombolRskGrid();
            gridSkPsBmn.dsDataSource = dsGridRskPsBmn;
            gridSkPsBmn.displayData();
        }

        private void bbiRskPsBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkPsBmn.teNamaKolom.Text = "";
            gridSkPsBmn.teCari.Text = "";
            gridSkPsBmn.fieldDicari = "";
            gridSkPsBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskPsBmn();
        }

        private void bbiRskPsBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskPsBmn();
            }
        }
        #endregion --++ Tombol Ribbon

        private void nbiRskPsBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan05;
            konfigApp.kdPelayanan = "05";
            konfigApp.namaPelayanan = konfigApp.namaLayanan05;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkPsBmn();
            modeCari = false;
            gridSkPsBmn.teNamaKolom.Text = "";
            gridSkPsBmn.teCari.Text = "";
            gridSkPsBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskPsBmn();
        }

        #region --++ Ambil Data PS BMN
        private void getInitRskPsBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNLAINSkSelect.InputParameters parInp = new SvcWasdalPSPBMNLAINSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskPsBmn = new SvcWasdalPSPBMNLAINSkSelect.execute_pttClient();
                ambilRskPsBmn.Open();
                ambilRskPsBmn.Beginexecute(parInp, new AsyncCallback(getRskPsBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskPsBmn(IAsyncResult result)
        {
            try
            {
                dOutRskPsBmn = ambilRskPsBmn.Endexecute(result);
                ambilRskPsBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskPsBmn(dsRskPsBmn), dOutRskPsBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskPsBmn(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut);

        private void dsRskPsBmn(SvcWasdalPSPBMNLAINSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PSP_LAIN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_PSP_LAIN[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }

            if (dataInisial == true)
            {
                dsGridRskPsBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB = (dataOut.SF_READ_WASDAL_PSP_LAIN[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskPsBmn.Add(dataOut.SF_READ_WASDAL_PSP_LAIN[i]);
            }
            gridSkPsBmn.labelTotData.Text = "";
            gridSkPsBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkPsBmn.sbCariOnline.Enabled = !modeCari;
            gridSkPsBmn.dsDataSource = dsGridRskPsBmn;
            gridSkPsBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkPsBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkPsBmn.teCari.Text.Trim();
                string xTiga = gridSkPsBmn.fieldDicari;
                gridSkPsBmn.gvGridSk.ClearColumnsFilter();
                gridSkPsBmn.teNamaKolom.Text = xSatu;
                gridSkPsBmn.teCari.Text = xDua;
                gridSkPsBmn.fieldDicari = xTiga;
            }
            else
                gridSkPsBmn.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskPsBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskPsBmn();
        }
        #endregion Ambil PSP BMN

        #region --++ Simpan Data PS BMN


        private void simpanDataRskPsBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPSPBMNLAINCrud.InputParameters parInp = new SvcWasdalPSPBMNLAINCrud.InputParameters();
                parInp.P_ID_SK_WASDALSpecified = true;
                parInp.P_ID_SK_WASDAL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.idSkWasdal : formSkPsBmnUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.idPemohon : formSkPsBmnUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.rgJenisAset.EditValue.ToString() : formSkPsBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teJabatan.Text.Trim() : formSkPsBmnUbah.teJabatan.Text.Trim());
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teTahunAnggaran.Text : formSkPsBmnUbah.teTahunAnggaran.Text);
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkPsBmnTambah.teNmPenerbitSk.ItemIndex).ToString() : formSkPsBmnTambah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkPsBmnUbah.teNmPenerbitSk.ItemIndex).ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.kodePenerbitSkDetail : formSkPsBmnUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPsBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teNilaiPenetapan.Text)) : (formSkPsBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNipPenandaTangan.Text : formSkPsBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNamaPenandaTangan.Text : formSkPsBmnUbah.teNamaPenandaTangan.Text);
                //parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.tePeruntukan.Text : formSkPsBmnUbah.tePeruntukan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNmPenerbitSk.Text : formSkPsBmnUbah.teNmPenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNamaInstansi.Text : formSkPsBmnUbah.teNamaInstansi.Text);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_penggantiChar);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teNomorSk.Text.Trim() : formSkPsBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teTanggalSk.EditValue : formSkPsBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teJenisPemohon.Text : formSkPsBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.tipePengelola : formSkPsBmnUbah.tipePengelola);
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teUraianKeputusan.Text : formSkPsBmnUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teTahunAnggaran.Text.Trim() : formSkPsBmnUbah.teTahunAnggaran.Text.Trim());
                parInp.P_KD_KL = ((_mode == "C" || _mode == "CU") ? formSkPsBmnTambah.teKodeKl.Text.Trim() : formSkPsBmnUbah.teKodeKl.Text.Trim());
                ambilDataPsBmn = new SvcWasdalPSPBMNLAINCrud.execute_pttClient();
                ambilDataPsBmn.Open();
                ambilDataPsBmn.Beginexecute(parInp, new AsyncCallback(cudRskPsBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskPsBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPsBmn = ambilDataPsBmn.Endexecute(result);
                ambilDataPsBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsPsBmn(this.ubahDsPsBmn), dOutAmbilDataPsBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsPsBmn(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutKpknlCrud);

        private void ubahDsPsBmn(SvcWasdalPSPBMNLAINCrud.OutputParameters dataOutKpknlCrud)
        {
            if (dataOutKpknlCrud.PO_RESULT == "Y")
            {
                SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN dataPenyama = new SvcWasdalPSPBMNLAINSkSelect.WASDALSROW_READ_WASDAL_PSP_LAIN();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                if (dsGridRskPsBmn == null) dsGridRskPsBmn = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                        dataPenyama.ID_PEMOHON = formSkPsBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPsBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkPsBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPsBmnTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkPsBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPsBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPsBmnTambah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPsBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPsBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPsBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPsBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPsBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkPsBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPsBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPsBmnTambah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPsBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskPsBmn == null ? 1 : dsGridRskPsBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkPsBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPsBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPsBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkPsBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPsBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPsBmnTambah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPsBmnTambah.teAlamatPihakLain.Text;
                        //dataPenyama.JANGKA_WAKTU = (formSkPsBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnTambah.teJangkaWaktu.Text));
                        //dataPenyama.NM_PHK_LAIN = formSkPsBmnTambah.teNamaKl.Text;
                        dsGridRskPsBmn.Add(dataPenyama);
                        formSkPsBmnTambah.gcDaftarAset.Enabled = true;
                        formSkPsBmnTambah.sbTambah.Enabled = true;
                        formSkPsBmnTambah.sbHapus.Enabled = true;
                        formSkPsBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkPsBmnTambah.teNomorSk.Properties.ReadOnly = false;
                        formSkPsBmnTambah.teTanggalSk.Properties.ReadOnly = false;
                        formSkPsBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkPsBmnTambah.sbCariPemohon.Enabled = false;
                        formSkPsBmnTambah.sbRefresh.Enabled = true;
                        formSkPsBmnTambah.sbValidasi.Enabled = true;
                        formSkPsBmnTambah.teNmPenerbitSk.Properties.ReadOnly = true;
                        formSkPsBmnTambah.cePilihSemua.Enabled = true;
                        formSkPsBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkPsBmnTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL = formSkPsBmnUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkPsBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPsBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkPsBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPsBmnUbah.teJabatan.Text;
                        //dataPenyama.KD_KL = formSkPsBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPsBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPsBmnUbah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPsBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPsBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPsBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPsBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPsBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkPsBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkPsBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPsBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPsBmnUbah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPsBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkPsBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkPsBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkPsBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkPsBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkPsBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPsBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPsBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkPsBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkPsBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkPsBmn.dataTerpilih.TOTAL_DATA;
                        //dataPenyama.UR_KL = formSkPsBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPsBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPsBmnUbah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPsBmnUbah.teAlamatPihakLain.Text;
                        //dataPenyama.JANGKA_WAKTU = (formSkPsBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPsBmnUbah.teJangkaWaktu.Text));
                        //dataPenyama.NM_PHK_LAIN = formSkPsBmnUbah.teNamaKl.Text;
                        int _indeksData = dsGridRskPsBmn.IndexOf(gridSkPsBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskPsBmn.Remove(gridSkPsBmn.dataTerpilih);
                        dsGridRskPsBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskPsBmn.Remove(gridSkPsBmn.dataTerpilih);
                        break;
                }
                gridSkPsBmn.dsDataSource = dsGridRskPsBmn;
                gridSkPsBmn.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN

        #endregion

        #region -->> [06] Sub Menu SEWA BMN
        ucRskSewaBmnGrid gridSkSewaBmn;
        ucRskSewaBmnForm formSkSewaBmnTambah;
        ucRskSewaBmnForm formSkSewaBmnUbah;
        ucRskSewaBmnForm formSkSewaBmnDetail;
        private ArrayList dsGridRskSewaBmn;
        SvcWasdalManfaatSkSelect.OutputParameters dOutRskSewaBmn;
        SvcWasdalManfaatSkSelect.execute_pttClient ambilRskSewaBmn;

        private void setEventTombolRskSewaBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskSewaBmnKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkSewaBmn()
        {
            //if (gridSkSewaBmn == null)
            //{
            gridSkSewaBmn = new ucRskSewaBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskSewaBmn),
                detailDataGrid = new DetailDataGrid(bbiRskSewaBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskSewaBmn();
            setPanel(gridSkSewaBmn);
        }

        #region --++ Tombol Ribbon Sewa BMN
        private void bbiRskSewaBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan06), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkSewaBmnTambah == null)
                {
                    formSkSewaBmnTambah = new ucRskSewaBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskSewaBmn)
                    };
                }
                setPanel(formSkSewaBmnTambah);
                formSkSewaBmnTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskSewaBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkSewaBmn.dataTerpilih != null)
            {
                if (formSkSewaBmnUbah == null)
                {
                    formSkSewaBmnUbah = new ucRskSewaBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskSewaBmn)
                    };
                }
                formSkSewaBmnUbah.dataTerpilih = gridSkSewaBmn.dataTerpilih;
                setPanel(formSkSewaBmnUbah);
                formSkSewaBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskSewaBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkSewaBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkSewaBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                        parInp.P_ID_SK_WASDAL_MANFAAT = gridSkSewaBmn.dataTerpilih.ID_SK_WASDAL_MANFAAT;
                        parInp.P_ID_PEMOHON = gridSkSewaBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkSewaBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_ID_SATKER = konfigApp.idSatker;
                        parInp.P_KD_SATKER = konfigApp.kodeSatker;
                        parInp.P_UR_SATKER = konfigApp.namaSatker;
                        parInp.P_IS_TB = gridSkSewaBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkSewaBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkSewaBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkSewaBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkSewaBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkSewaBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkSewaBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkSewaBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkSewaBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkSewaBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TGL_SK = konfigApp.DateToString(gridSkSewaBmn.dataTerpilih.TGL_SK);
                        parInp.P_THN_ANG = gridSkSewaBmn.dataTerpilih.THN_ANG;
                        parInp.P_ID_KPKNL = konfigApp.idKpknl;
                        parInp.P_KD_KL = konfigApp.kodeKl;
                        parInp.P_TIPE_PEMOHON = gridSkSewaBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkSewaBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_DARI_TGL = konfigApp.DateToString(gridSkSewaBmn.dataTerpilih.DARI_TGL);
                        parInp.P_SD_TGL = konfigApp.DateToString(gridSkSewaBmn.dataTerpilih.SD_TGL);
                        parInp.P_NM_PHK_LAIN = gridSkSewaBmn.dataTerpilih.NM_PHK_LAIN;
                        parInp.P_ALAMAT_PHK_LAIN = gridSkSewaBmn.dataTerpilih.ALAMAT_PHK_LAIN;
                        parInp.P_PERUNTUKAN = gridSkSewaBmn.dataTerpilih.PERUNTUKAN;
                        parInp.P_PERIODE = gridSkSewaBmn.dataTerpilih.PERIODE;
                        parInp.P_JNS_MITRA = "-";
                        parInp.P_KETERANGAN = "-";
                        //parInp.P_TIPE_PENGELOLA = "03";
                        parInp.P_TGL_CREATED = null;
                        ambilDataSewaBmn = new SvcWasdalManfaatCud.execute_pttClient();
                        ambilDataSewaBmn.Open();
                        ambilDataSewaBmn.Beginexecute(parInp, new AsyncCallback(cudRskSewaBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskSewaBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkSewaBmn.dataTerpilih != null)
            {
                if (formSkSewaBmnDetail == null)
                {
                    formSkSewaBmnDetail = new ucRskSewaBmnForm("A");
                    formSkSewaBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkSewaBmnDetail.dataTerpilih = gridSkSewaBmn.dataTerpilih;
                setPanel(formSkSewaBmnDetail);
                formSkSewaBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskSewaBmnKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkSewaBmn);
            setTombolRskGrid();
            gridSkSewaBmn.dsDataSource = dsGridRskSewaBmn;
            gridSkSewaBmn.displayData();
        }

        private void bbiRskSewaBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkSewaBmn.teNamaKolom.Text = "";
            gridSkSewaBmn.teCari.Text = "";
            gridSkSewaBmn.fieldDicari = "";
            gridSkSewaBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskSewaBmn();
        }

        private void bbiRskSewaBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskSewaBmn();
            }
        }

        private void bbiRskSewaBmnKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskSewaBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon

        private void nbiRskSewaBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan06;
            konfigApp.kdPelayanan = "06";
            konfigApp.namaPelayanan = konfigApp.namaLayanan06;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkSewaBmn();
            modeCari = false;
            gridSkSewaBmn.teNamaKolom.Text = "";
            gridSkSewaBmn.teCari.Text = "";
            gridSkSewaBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskSewaBmn();
        }

        #region --++ Ambil Data Sewa BMN
        private void getInitRskSewaBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatSkSelect.InputParameters parInp = new SvcWasdalManfaatSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskSewaBmn = new SvcWasdalManfaatSkSelect.execute_pttClient();
                ambilRskSewaBmn.Open();
                ambilRskSewaBmn.Beginexecute(parInp, new AsyncCallback(getRskSewaBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskSewaBmn(IAsyncResult result)
        {
            try
            {
                dOutRskSewaBmn = ambilRskSewaBmn.Endexecute(result);
                ambilRskSewaBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskSewaBmn(dsRskSewaBmn), dOutRskSewaBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskSewaBmn(SvcWasdalManfaatSkSelect.OutputParameters dataOut);

        private void dsRskSewaBmn(SvcWasdalManfaatSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_MANFAAT.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_MANFAAT[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskSewaBmn = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dataOut.SF_READ_WASDAL_MANFAAT[i].TGL_SK = konfigApp.setDefaultDate(dataOut.SF_READ_WASDAL_MANFAAT[i].TGL_SK);
                dataOut.SF_READ_WASDAL_MANFAAT[i].PERIODE = konfigApp.setPeriode(dataOut.SF_READ_WASDAL_MANFAAT[i].PERIODE);
                dsGridRskSewaBmn.Add(dataOut.SF_READ_WASDAL_MANFAAT[i]);
            }
            gridSkSewaBmn.labelTotData.Text = "";
            gridSkSewaBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkSewaBmn.sbCariOnline.Enabled = !modeCari;
            gridSkSewaBmn.dsDataSource = dsGridRskSewaBmn;
            gridSkSewaBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkSewaBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkSewaBmn.teCari.Text.Trim();
                string xTiga = gridSkSewaBmn.fieldDicari;
                gridSkSewaBmn.gvGridSk.ClearColumnsFilter();
                gridSkSewaBmn.teNamaKolom.Text = xSatu;
                gridSkSewaBmn.teCari.Text = xDua;
                gridSkSewaBmn.fieldDicari = xTiga;
            }
            else
                gridSkSewaBmn.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskSewaBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskSewaBmn();
        }
        #endregion Ambil Sewa BMN

        #region --++ Simpan Data Sewa BMN
        SvcWasdalManfaatCud.OutputParameters dOutAmbilDataSewaBmn;
        SvcWasdalManfaatCud.execute_pttClient ambilDataSewaBmn;

        private void simpanDataRskSewaBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                parInp.P_ID_SK_WASDAL_MANFAAT = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.idSkWasdal : formSkSewaBmnUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.idPemohon : formSkSewaBmnUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.rgJenisAset.EditValue.ToString() : formSkSewaBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teJabatan.Text.Trim() : formSkSewaBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.lePenerbitSk.EditValue.ToString() : formSkSewaBmnUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.kodePenerbitSkDetail : formSkSewaBmnUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkSewaBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnTambah.teNilaiPenetapan.Text)) : (formSkSewaBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teNipPenandaTangan.Text : formSkSewaBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teNamaPenandaTangan.Text : formSkSewaBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.lePenerbitSk.Text : formSkSewaBmnUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teNmPenerbitSkDetail.Text : formSkSewaBmnUbah.teNmPenerbitSkDetail.Text);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teNomorSk.Text.Trim() : formSkSewaBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teTanggalSk.EditValue : formSkSewaBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teJenisPemohon.Text : formSkSewaBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.tipePengelola : formSkSewaBmnUbah.tipePengelola);
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teUraianKeputusan.Text : formSkSewaBmnUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teTahunAnggaran.Text : formSkSewaBmnUbah.teTahunAnggaran.Text);
                parInp.P_DARI_TGL = (_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teDariTgl.Text : formSkSewaBmnUbah.teDariTgl.Text;
                parInp.P_SD_TGL = (_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teSampaiTgl.Text : formSkSewaBmnUbah.teSampaiTgl.Text;

                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teAlamatPihakLain.Text : formSkSewaBmnUbah.teAlamatPihakLain.Text);
                parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkSewaBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnTambah.teJangkaWaktu.Text)) : (formSkSewaBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnUbah.teJangkaWaktu.Text)));
                parInp.P_JNS_MITRA = null;
                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.teNamaPihakLain.Text : formSkSewaBmnUbah.teNamaPihakLain.Text);
                parInp.P_PERIODE = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.konversiPeriode() : formSkSewaBmnUbah.konversiPeriode());
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.tePeruntukan.Text : formSkSewaBmnUbah.tePeruntukan.Text);
                parInp.P_JANGKA_WAKTUSpecified = true;
                parInp.P_KETERANGAN = null;
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkSewaBmnTambah.tipePengelola : formSkSewaBmnUbah.tipePengelola);
                ambilDataSewaBmn = new SvcWasdalManfaatCud.execute_pttClient();
                ambilDataSewaBmn.Open();
                ambilDataSewaBmn.Beginexecute(parInp, new AsyncCallback(cudRskSewaBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskSewaBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataSewaBmn = ambilDataSewaBmn.Endexecute(result);
                ambilDataSewaBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsSewaBmn(this.ubahDsSewaBmn), dOutAmbilDataSewaBmn);
            }
            catch (Exception ex)
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsSewaBmn(SvcWasdalManfaatCud.OutputParameters dataOutSewaBmnCrud);

        private void ubahDsSewaBmn(SvcWasdalManfaatCud.OutputParameters dataOutSewaBmnCrud)
        {
            if (dataOutSewaBmnCrud.PO_RESULT == "Y")
            {
                SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.DARI_TGLSpecified = true;
                dataPenyama.SD_TGLSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                if (dsGridRskSewaBmn == null) dsGridRskSewaBmn = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALAMAT_PHK_LAIN = formSkSewaBmnTambah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkSewaBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkSewaBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkSewaBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkSewaBmnTambah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkSewaBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnTambah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkSewaBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkSewaBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkSewaBmnTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkSewaBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkSewaBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkSewaBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkSewaBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkSewaBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkSewaBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkSewaBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkSewaBmnTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkSewaBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskSewaBmn == null ? 1 : dsGridRskSewaBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkSewaBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.SD_TGL = konfigApp.ToDate(formSkSewaBmnTambah.teSampaiTgl.Text);
                        dataPenyama.DARI_TGL = konfigApp.ToDate(formSkSewaBmnTambah.teDariTgl.Text);
                        //dataPenyama.PERIODE = formSkSewaBmnTambah.konversiPeriode();
                        //dataPenyama.PERUNTUKAN = formSkSewaBmnTambah.tePeruntukan.Text;
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = konfigApp.ToDate(formSkSewaBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkSewaBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkSewaBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkSewaBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkSewaBmnTambah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkSewaBmnTambah.teAlamatPihakLain.Text;
                        dataPenyama.NM_PHK_LAIN = formSkSewaBmnTambah.teNamaPihakLain.Text;
                        dataPenyama.PERIODE = formSkSewaBmnTambah.konversiPeriode();
                        dataPenyama.THN_ANG = formSkSewaBmnTambah.teTahunAnggaran.Text;
                        dsGridRskSewaBmn.Add(dataPenyama);
                        formSkSewaBmnTambah.gcDaftarAset.Enabled = true;
                        formSkSewaBmnTambah.sbTambah.Enabled = true;
                        formSkSewaBmnTambah.sbHapus.Enabled = true;
                        formSkSewaBmnTambah.sbValidasi.Enabled = true;
                        formSkSewaBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkSewaBmnTambah.teNomorSk.Properties.ReadOnly = false;
                        formSkSewaBmnTambah.teTanggalSk.Properties.ReadOnly = false;
                        formSkSewaBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkSewaBmnTambah.sbCariPemohon.Enabled = false;
                        formSkSewaBmnTambah.sbRefresh.Enabled = true;
                        formSkSewaBmnTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkSewaBmnTambah.cePilihSemua.Enabled = true;
                        formSkSewaBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkSewaBmnTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_MANFAAT = formSkSewaBmnUbah.idSkWasdal;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkSewaBmnUbah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkSewaBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkSewaBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkSewaBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkSewaBmnUbah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkSewaBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnUbah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkSewaBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkSewaBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkSewaBmnUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkSewaBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkSewaBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkSewaBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkSewaBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkSewaBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkSewaBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkSewaBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkSewaBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkSewaBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkSewaBmnUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkSewaBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkSewaBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkSewaBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkSewaBmnUbah.teNomorSk.Text;
                        dataPenyama.DARI_TGL = formSkSewaBmnUbah.teDariTgl.DateTime;
                        dataPenyama.SD_TGL = formSkSewaBmnUbah.teSampaiTgl.DateTime;
                        //dataPenyama.PERIODE = formSkSewaBmnUbah.konversiPeriode();
                        //dataPenyama.PERUNTUKAN = formSkSewaBmnUbah.tePeruntukan.Text;
                        dataPenyama.STATUS_BMN = gridSkSewaBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkSewaBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = formSkSewaBmnUbah.teTanggalSk.DateTime;
                        dataPenyama.TIPE_PEMOHON = formSkSewaBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkSewaBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkSewaBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkSewaBmn.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkSewaBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkSewaBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkSewaBmnUbah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkSewaBmnUbah.teAlamatPihakLain.Text;
                        dataPenyama.NM_PHK_LAIN = formSkSewaBmnUbah.teNamaPihakLain.Text;
                        dataPenyama.THN_ANG = formSkSewaBmnUbah.teTahunAnggaran.Text;
                        dataPenyama.PERIODE = formSkSewaBmnUbah.konversiPeriode();
                        dataPenyama.PERUNTUKAN = formSkSewaBmnUbah.tePeruntukan.Text;
                        int _indeksData = dsGridRskSewaBmn.IndexOf(gridSkSewaBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskSewaBmn.Remove(gridSkSewaBmn.dataTerpilih);
                        dsGridRskSewaBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskSewaBmn.Remove(gridSkSewaBmn.dataTerpilih);
                        break;
                }
                gridSkSewaBmn.dsDataSource = dsGridRskSewaBmn;
                gridSkSewaBmn.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN

        #endregion

        #region -->> [07] Sub Menu Pinjam Pakai BMN
        ucRskPpBmnGrid gridSkPpBmn;
        ucRskPpBmnForm formSkPpBmnTambah;
        ucRskPpBmnForm formSkPpBmnUbah;
        ucRskPpBmnForm formSkPpBmnDetail;
        private ArrayList dsGridRskPpBmn;
        SvcWasdalManfaatSkSelect.OutputParameters dOutRskPpBmn;
        SvcWasdalManfaatSkSelect.execute_pttClient ambilRskPpBmn;

        private void setEventTombolRskPpBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPpBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPpBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPpBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPpBmnDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPpBmnKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPpBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPpBmnMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPpBmnKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPpBmnKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkPpBmn()
        {
            //if (gridSkPpBmn == null)
            //{
            gridSkPpBmn = new ucRskPpBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskPpBmn),
                detailDataGrid = new DetailDataGrid(bbiRskPpBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskPpBmn();
            setPanel(gridSkPpBmn);
        }

        #region --++ Tombol Ribbon
        private void bbiRskPpBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan07), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkPpBmnTambah == null)
                {
                    formSkPpBmnTambah = new ucRskPpBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPpBmn)
                    };
                }
                setPanel(formSkPpBmnTambah);
                formSkPpBmnTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskPpBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPpBmn.dataTerpilih != null)
            {
                if (formSkPpBmnUbah == null)
                {
                    formSkPpBmnUbah = new ucRskPpBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPpBmn)
                    };
                }
                formSkPpBmnUbah.dataTerpilih = gridSkPpBmn.dataTerpilih;
                setPanel(formSkPpBmnUbah);
                formSkPpBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPpBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPpBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPpBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                        parInp.P_ID_SK_WASDAL_MANFAAT = gridSkPpBmn.dataTerpilih.ID_SK_WASDAL_MANFAAT;
                        parInp.P_ID_PEMOHON = gridSkPpBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkPpBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_ID_SATKER = konfigApp.idSatker;
                        parInp.P_KD_SATKER = konfigApp.kodeSatker;
                        parInp.P_UR_SATKER = konfigApp.namaSatker;
                        parInp.P_IS_TB = gridSkPpBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkPpBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkPpBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkPpBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkPpBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkPpBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkPpBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkPpBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkPpBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkPpBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TGL_SK = konfigApp.DateToString(gridSkPpBmn.dataTerpilih.TGL_SK);
                        parInp.P_THN_ANG = gridSkPpBmn.dataTerpilih.THN_ANG;
                        parInp.P_ID_KPKNL = konfigApp.idKpknl;
                        parInp.P_KD_KL = konfigApp.kodeKl;
                        parInp.P_TIPE_PEMOHON = gridSkPpBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkPpBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_DARI_TGL = konfigApp.DateToString(gridSkPpBmn.dataTerpilih.DARI_TGL);
                        parInp.P_SD_TGL = konfigApp.DateToString(gridSkPpBmn.dataTerpilih.SD_TGL);
                        parInp.P_NM_PHK_LAIN = gridSkPpBmn.dataTerpilih.NM_PHK_LAIN;
                        parInp.P_ALAMAT_PHK_LAIN = gridSkPpBmn.dataTerpilih.ALAMAT_PHK_LAIN;
                        parInp.P_PERUNTUKAN = gridSkPpBmn.dataTerpilih.PERUNTUKAN;
                        parInp.P_PERIODE = gridSkPpBmn.dataTerpilih.PERIODE;
                        parInp.P_JNS_MITRA = "-";
                        parInp.P_KETERANGAN = "-";
                        //parInp.P_TIPE_PENGELOLA = "03";
                        parInp.P_TGL_CREATED = null;
                        ambilDataPpBmn1 = new SvcWasdalManfaatCud.execute_pttClient();
                        ambilDataPpBmn1.Open();
                        ambilDataPpBmn1.Beginexecute(parInp, new AsyncCallback(cudRskPpBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskPpBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPpBmn.dataTerpilih != null)
            {
                if (formSkPpBmnDetail == null)
                {
                    formSkPpBmnDetail = new ucRskPpBmnForm("A");
                    formSkPpBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkPpBmnDetail.dataTerpilih = gridSkPpBmn.dataTerpilih;
                setPanel(formSkPpBmnDetail);
                formSkPpBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPpBmnKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkPpBmn);
            setTombolRskGrid();
            gridSkPpBmn.dsDataSource = dsGridRskPpBmn;
            gridSkPpBmn.displayData();
        }

        private void bbiRskPpBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkPpBmn.teNamaKolom.Text = "";
            gridSkPpBmn.teCari.Text = "";
            gridSkPpBmn.fieldDicari = "";
            gridSkPpBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskPpBmn();
        }

        private void bbiRskPpBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskPpBmn();
            }
        }

        private void bbiRskPpBmnKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskPpBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon Pinjam Pakai BMN

        private void nbiRskPpBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan07;
            konfigApp.kdPelayanan = "07";
            konfigApp.namaPelayanan = konfigApp.namaLayanan07;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkPpBmn();
            modeCari = false;
            gridSkPpBmn.teNamaKolom.Text = "";
            gridSkPpBmn.teCari.Text = "";
            gridSkPpBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskPpBmn();
        }

        #region --++ Ambil Data PP BMN
        private void getInitRskPpBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatSkSelect.InputParameters parInp = new SvcWasdalManfaatSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //   parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskPpBmn = new SvcWasdalManfaatSkSelect.execute_pttClient();
                ambilRskPpBmn.Open();
                ambilRskPpBmn.Beginexecute(parInp, new AsyncCallback(getRskPpBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskPpBmn(IAsyncResult result)
        {
            try
            {
                dOutRskPpBmn = ambilRskPpBmn.Endexecute(result);
                ambilRskPpBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskPpBmn(dsRskPpBmn), dOutRskPpBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskPpBmn(SvcWasdalManfaatSkSelect.OutputParameters dataOut);

        private void dsRskPpBmn(SvcWasdalManfaatSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_MANFAAT.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_MANFAAT[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskPpBmn = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);

                dsGridRskPpBmn.Add(dataOut.SF_READ_WASDAL_MANFAAT[i]);
            }
            gridSkPpBmn.labelTotData.Text = "";
            gridSkPpBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkPpBmn.sbCariOnline.Enabled = !modeCari;
            gridSkPpBmn.dsDataSource = dsGridRskPpBmn;
            gridSkPpBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkPpBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkPpBmn.teCari.Text.Trim();
                string xTiga = gridSkPpBmn.fieldDicari;
                gridSkPpBmn.gvGridSk.ClearColumnsFilter();
                gridSkPpBmn.teNamaKolom.Text = xSatu;
                gridSkPpBmn.teCari.Text = xDua;
                gridSkPpBmn.fieldDicari = xTiga;
            }
            else
                gridSkPpBmn.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskPpBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskPpBmn();
        }
        #endregion Ambil PP BMN

        #region --++ Simpan Data PP BMN
        SvcWasdalManfaatCud.OutputParameters dOutAmbilDataPpBmn1;
        SvcWasdalManfaatCud.execute_pttClient ambilDataPpBmn1;

        private void simpanDataRskPpBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                parInp.P_ID_SK_WASDAL_MANFAAT = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.idSkWasdal : formSkPpBmnUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.idPemohon : formSkPpBmnUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.rgJenisAset.EditValue.ToString() : formSkPpBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teJabatan.Text.Trim() : formSkPpBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.lePenerbitSk.EditValue.ToString() : formSkPpBmnUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.kodePenerbitSkDetail : formSkPpBmnUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPpBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnTambah.teNilaiPenetapan.Text)) : (formSkPpBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teNipPenandaTangan.Text : formSkPpBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teNamaPenandaTangan.Text : formSkPpBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.lePenerbitSk.Text : formSkPpBmnUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teNmPenerbitSkDetail.Text : formSkPpBmnUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teNomorSk.Text.Trim() : formSkPpBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teTanggalSk.EditValue : formSkPpBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teJenisPemohon.Text : formSkPpBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teUraianKeputusan.Text : formSkPpBmnUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teTahunAnggaran.Text : formSkPpBmnUbah.teTahunAnggaran.Text);

                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teAlamatPihakLain.Text : formSkPpBmnUbah.teAlamatPihakLain.Text);
                parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkPpBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnTambah.teJangkaWaktu.Text)) : (formSkPpBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnUbah.teJangkaWaktu.Text)));
                parInp.P_JNS_MITRA = null;
                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.teNamaPihakLain.Text : formSkPpBmnUbah.teNamaPihakLain.Text);
                parInp.P_PERIODE = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.konversiPeriode() : formSkPpBmnUbah.konversiPeriode());
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.tePeruntukan.Text : formSkPpBmnUbah.tePeruntukan.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPpBmnTambah.tipePengelola : formSkPpBmnUbah.tipePengelola);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkPpBmnTambah.filePath) : konfigApp.FileToByteArray(formSkPpBmnUbah.filePath));
                parInp.P_JANGKA_WAKTUSpecified = true;
                parInp.P_KETERANGAN = null;
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                ambilDataPpBmn1 = new SvcWasdalManfaatCud.execute_pttClient();
                ambilDataPpBmn1.Open();
                ambilDataPpBmn1.Beginexecute(parInp, new AsyncCallback(cudRskPpBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskPpBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPpBmn1 = ambilDataPpBmn1.Endexecute(result);
                ambilDataPpBmn1.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsPpBmn(this.ubahDsPpBmn), dOutAmbilDataPpBmn1);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsPpBmn(SvcWasdalManfaatCud.OutputParameters dataOutPpBmnCrud);

        private void ubahDsPpBmn(SvcWasdalManfaatCud.OutputParameters dataOutPpBmnCrud)
        {
            if (dataOutPpBmnCrud.PO_RESULT == "Y")
            {
                SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                if (dsGridRskPpBmn == null) dsGridRskPpBmn = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPpBmnTambah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkPpBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPpBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkPpBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPpBmnTambah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkPpBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnTambah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkPpBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPpBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPpBmnTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPpBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPpBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPpBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPpBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPpBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkPpBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPpBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPpBmnTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPpBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskPpBmn == null ? 1 : dsGridRskPpBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkPpBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPpBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPpBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkPpBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPpBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPpBmnTambah.teUraianKeputusan.Text;
                        dataPenyama.PERIODE = formSkPpBmnTambah.konversiPeriode();
                        dataPenyama.PERUNTUKAN = formSkPpBmnTambah.tePeruntukan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkPpBmnTambah.teNamaPihakLain.Text;
                        dataPenyama.THN_ANG = formSkPpBmnTambah.teTahunAnggaran.Text;
                        dsGridRskPpBmn.Add(dataPenyama);
                        formSkPpBmnTambah.gcDaftarAset.Enabled = true;
                        formSkPpBmnTambah.sbTambah.Enabled = true;
                        formSkPpBmnTambah.sbHapus.Enabled = true;
                        formSkPpBmnTambah.sbValidasi.Enabled = true;
                        formSkPpBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkPpBmnTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkPpBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkPpBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkPpBmnTambah.sbCariPemohon.Enabled = false;
                        formSkPpBmnTambah.sbRefresh.Enabled = true;
                        formSkPpBmnTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkPpBmnTambah.cePilihSemua.Enabled = true;
                        formSkPpBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkPpBmnTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_MANFAAT = formSkPpBmnUbah.idSkWasdal;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPpBmnUbah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkPpBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPpBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkPpBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPpBmnUbah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkPpBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnUbah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkPpBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPpBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPpBmnUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPpBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPpBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPpBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPpBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPpBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPpBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkPpBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkPpBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPpBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPpBmnUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPpBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkPpBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkPpBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkPpBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkPpBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkPpBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPpBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPpBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkPpBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkPpBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkPpBmn.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkPpBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPpBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPpBmnUbah.teUraianKeputusan.Text;
                        dataPenyama.THN_ANG = formSkPpBmnUbah.teTahunAnggaran.Text;
                        dataPenyama.PERUNTUKAN = formSkPpBmnUbah.tePeruntukan.Text;
                        dataPenyama.PERIODE = formSkPpBmnUbah.konversiPeriode();
                        dataPenyama.NM_PHK_LAIN = formSkPpBmnUbah.teNamaPihakLain.Text;
                        int _indeksData = dsGridRskPpBmn.IndexOf(gridSkPpBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskPpBmn.Remove(gridSkPpBmn.dataTerpilih);
                        dsGridRskPpBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskPpBmn.Remove(gridSkPpBmn.dataTerpilih);
                        break;
                }
                gridSkPpBmn.dsDataSource = dsGridRskPpBmn;
                gridSkPpBmn.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PP BMN

        #endregion

        #region -->> [08] Sub Menu KERJA SAMA PEMANFAATAN
        ucRskKspBmnGrid gridSkKspBmn;
        ucRskKspBmnForm formSkKspBmnTambah;
        ucRskKspBmnForm formSkKspBmnUbah;
        ucRskKspBmnForm formSkKspBmnDetail;
        private ArrayList dsGridRskKspBmn;
        SvcWasdalManfaatSkSelect.OutputParameters dOutRskKspBmn;
        SvcWasdalManfaatSkSelect.execute_pttClient ambilRskKspBmn;

        private void setEventTombolRskKspBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskKspBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskKspBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskKspBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskKspBmnDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskKspBmnKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskKspBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskKspBmnMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPpBmnKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPpBmnKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkKspBmn()
        {
            //if (gridSkKspBmn == null)
            //{
            gridSkKspBmn = new ucRskKspBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskKspBmn),
                detailDataGrid = new DetailDataGrid(bbiRskKspBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskKspBmn();
            setPanel(gridSkKspBmn);
        }

        #region --++ Tombol Ribbon KSP BMN
        private void bbiRskKspBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan08), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkKspBmnTambah == null)
                {
                    formSkKspBmnTambah = new ucRskKspBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskKspBmn)
                    };
                }
                setPanel(formSkKspBmnTambah);
                formSkKspBmnTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskKspBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkKspBmn.dataTerpilih != null)
            {
                if (formSkKspBmnUbah == null)
                {
                    formSkKspBmnUbah = new ucRskKspBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskKspBmn)
                    };
                }
                formSkKspBmnUbah.dataTerpilih = gridSkKspBmn.dataTerpilih;
                setPanel(formSkKspBmnUbah);
                formSkKspBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskKspBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkKspBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkKspBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                        parInp.P_ID_SK_WASDAL_MANFAAT = gridSkKspBmn.dataTerpilih.ID_SK_WASDAL_MANFAAT;
                        parInp.P_ID_PEMOHON = gridSkKspBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkKspBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkKspBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkKspBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkKspBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkKspBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkKspBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkKspBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkKspBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkKspBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkKspBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkKspBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TGL_SK = konfigApp.DateToString(gridSkKspBmn.dataTerpilih.TGL_SK);
                        parInp.P_THN_ANG = gridSkKspBmn.dataTerpilih.THN_ANG;
                        parInp.P_ID_KPKNL = konfigApp.idKpknl;
                        parInp.P_KD_KL = konfigApp.kodeKl;
                        parInp.P_TIPE_PEMOHON = gridSkKspBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkKspBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_DARI_TGL = konfigApp.DateToString(gridSkKspBmn.dataTerpilih.DARI_TGL);
                        parInp.P_SD_TGL = konfigApp.DateToString(gridSkKspBmn.dataTerpilih.SD_TGL);
                        parInp.P_NM_PHK_LAIN = gridSkKspBmn.dataTerpilih.NM_PHK_LAIN;
                        parInp.P_ALAMAT_PHK_LAIN = gridSkKspBmn.dataTerpilih.ALAMAT_PHK_LAIN;
                        parInp.P_PERUNTUKAN = gridSkKspBmn.dataTerpilih.PERUNTUKAN;
                        parInp.P_PERIODE = gridSkKspBmn.dataTerpilih.PERIODE;
                        parInp.P_JNS_MITRA = "-";
                        parInp.P_KETERANGAN = "-";
                        //parInp.P_TIPE_PENGELOLA = "03";
                        parInp.P_TGL_CREATED = null;
                        parInp.P_ID_SATKER = gridSkKspBmn.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkKspBmn.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkKspBmn.dataTerpilih.UR_SATKER;
                        ambilDataKspBmn = new SvcWasdalManfaatCud.execute_pttClient();
                        ambilDataKspBmn.Open();
                        ambilDataKspBmn.Beginexecute(parInp, new AsyncCallback(cudRskKspBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskKspBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkKspBmn.dataTerpilih != null)
            {
                if (formSkKspBmnDetail == null)
                {
                    formSkKspBmnDetail = new ucRskKspBmnForm("A");
                    formSkKspBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkKspBmnDetail.dataTerpilih = gridSkKspBmn.dataTerpilih;
                setPanel(formSkKspBmnDetail);
                formSkKspBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskKspBmnKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkKspBmn);
            setTombolRskGrid();
            gridSkKspBmn.dsDataSource = dsGridRskKspBmn;
            gridSkKspBmn.displayData();
        }

        private void bbiRskKspBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkKspBmn.teNamaKolom.Text = "";
            gridSkKspBmn.teCari.Text = "";
            gridSkKspBmn.fieldDicari = "";
            gridSkKspBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskKspBmn();
        }

        private void bbiRskKspBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskKspBmn();
            }
        }

        private void bbiRskKspBmnKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskKspBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon

        private void nbiRskKsp_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan08;
            konfigApp.kdPelayanan = "08";
            konfigApp.namaPelayanan = konfigApp.namaLayanan08;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkKspBmn();
            modeCari = false;
            gridSkKspBmn.teNamaKolom.Text = "";
            gridSkKspBmn.teCari.Text = "";
            gridSkKspBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskKspBmn();
        }

        #region --++ Ambil Data KSP BMN
        private void getInitRskKspBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatSkSelect.InputParameters parInp = new SvcWasdalManfaatSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_KPKNL = {1} AND THN_ANG='{2}' {3}", konfigApp.kdPelayanan, konfigApp.idKpknl, konfigApp.tahunAnggaran, this.strCari);
                // parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //   parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskKspBmn = new SvcWasdalManfaatSkSelect.execute_pttClient();
                ambilRskKspBmn.Open();
                ambilRskKspBmn.Beginexecute(parInp, new AsyncCallback(getRskKspBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskKspBmn(IAsyncResult result)
        {
            try
            {
                dOutRskKspBmn = ambilRskKspBmn.Endexecute(result);
                ambilRskKspBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskKspBmn(dsRskKspBmn), dOutRskKspBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskKspBmn(SvcWasdalManfaatSkSelect.OutputParameters dataOut);

        private void dsRskKspBmn(SvcWasdalManfaatSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_MANFAAT.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_MANFAAT[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskKspBmn = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);

                dsGridRskKspBmn.Add(dataOut.SF_READ_WASDAL_MANFAAT[i]);
            }
            gridSkKspBmn.labelTotData.Text = "";
            gridSkKspBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkKspBmn.sbCariOnline.Enabled = !modeCari;
            gridSkKspBmn.dsDataSource = dsGridRskKspBmn;
            gridSkKspBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkKspBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkKspBmn.teCari.Text.Trim();
                string xTiga = gridSkKspBmn.fieldDicari;
                gridSkKspBmn.gvGridSk.ClearColumnsFilter();
                gridSkKspBmn.teNamaKolom.Text = xSatu;
                gridSkKspBmn.teCari.Text = xDua;
                gridSkKspBmn.fieldDicari = xTiga;
            }
            else
                gridSkKspBmn.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskKspBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskKspBmn();
        }
        #endregion Ambil KSP BMN

        #region --++ Simpan Data KSP BMN
        SvcWasdalManfaatCud.OutputParameters dOutAmbilDataKspBmn;
        SvcWasdalManfaatCud.execute_pttClient ambilDataKspBmn;

        private void simpanDataRskKspBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                parInp.P_ID_SK_WASDAL_MANFAAT = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.idSkWasdal : formSkKspBmnUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.idPemohon : formSkKspBmnUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.rgJenisAset.EditValue.ToString() : formSkKspBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teJabatan.Text.Trim() : formSkKspBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.lePenerbitSk.EditValue.ToString() : formSkKspBmnUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.kodePenerbitSkDetail : formSkKspBmnUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkKspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnTambah.teNilaiPenetapan.Text)) : (formSkKspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teNipPenandaTangan.Text : formSkKspBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teNamaPenandaTangan.Text : formSkKspBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.lePenerbitSk.Text : formSkKspBmnUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teNmPenerbitSkDetail.Text : formSkKspBmnUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teNomorSk.Text.Trim() : formSkKspBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teTanggalSk.EditValue : formSkKspBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teJenisPemohon.Text : formSkKspBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teUraianKeputusan.Text : formSkKspBmnUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teTahunAnggaran.Text : formSkKspBmnUbah.teTahunAnggaran.Text);

                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teAlamatPihakLain.Text : formSkKspBmnUbah.teAlamatPihakLain.Text);
                parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkKspBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnTambah.teJangkaWaktu.Text)) : (formSkKspBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnUbah.teJangkaWaktu.Text)));
                parInp.P_JNS_MITRA = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teJenisMitra.EditValue.ToString() : formSkKspBmnUbah.teJenisMitra.EditValue.ToString());
                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.teNamaPihakLain.Text : formSkKspBmnUbah.teNamaPihakLain.Text);
                parInp.P_PERIODE = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.konversiPeriode() : formSkKspBmnUbah.konversiPeriode());
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.tePeruntukan.Text : formSkKspBmnUbah.tePeruntukan.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkKspBmnTambah.tipePengelola : formSkKspBmnUbah.tipePengelola);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkKspBmnTambah.filePath) : konfigApp.FileToByteArray(formSkKspBmnUbah.filePath));
                parInp.P_JANGKA_WAKTUSpecified = true;
                parInp.P_KETERANGAN = null;
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                ambilDataKspBmn = new SvcWasdalManfaatCud.execute_pttClient();
                ambilDataKspBmn.Open();
                ambilDataKspBmn.Beginexecute(parInp, new AsyncCallback(cudRskKspBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskKspBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataKspBmn = ambilDataKspBmn.Endexecute(result);
                ambilDataKspBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsKspBmn(this.ubahDsKspBmn), dOutAmbilDataKspBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsKspBmn(SvcWasdalManfaatCud.OutputParameters dataOutKpknlCrud);

        private void ubahDsKspBmn(SvcWasdalManfaatCud.OutputParameters dataOutKpknlCrud)
        {
            if (dataOutKpknlCrud.PO_RESULT == "Y")
            {
                SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                if (dsGridRskKspBmn == null) dsGridRskKspBmn = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALAMAT_PHK_LAIN = formSkKspBmnTambah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkKspBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkKspBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkKspBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkKspBmnTambah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkKspBmnTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnTambah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkKspBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkKspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkKspBmnTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkKspBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkKspBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkKspBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkKspBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkKspBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkKspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkKspBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkKspBmnTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkKspBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskKspBmn == null ? 1 : dsGridRskKspBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkKspBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkKspBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkKspBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkKspBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkKspBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkKspBmnTambah.teUraianKeputusan.Text;
                        dataPenyama.PERIODE = formSkKspBmnTambah.konversiPeriode();
                        dataPenyama.PERUNTUKAN = formSkKspBmnTambah.tePeruntukan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkKspBmnTambah.teNamaPihakLain.Text;
                        dataPenyama.THN_ANG = formSkKspBmnTambah.teTahunAnggaran.Text;
                        dsGridRskKspBmn.Add(dataPenyama);
                        formSkKspBmnTambah.gcDaftarAset.Enabled = true;
                        formSkKspBmnTambah.sbTambah.Enabled = true;
                        formSkKspBmnTambah.sbHapus.Enabled = true;
                        formSkKspBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkKspBmnTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkKspBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkKspBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkKspBmnTambah.sbCariPemohon.Enabled = false;
                        formSkKspBmnTambah.sbRefresh.Enabled = true;
                        formSkKspBmnTambah.sbValidasi.Enabled = true;
                        formSkKspBmnTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkKspBmnTambah.cePilihSemua.Enabled = true;
                        //formSkKspBmnTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_MANFAAT = formSkKspBmnUbah.idSkWasdal;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkKspBmnUbah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkKspBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkKspBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkKspBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkKspBmnUbah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkKspBmnUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnUbah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkKspBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkKspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkKspBmnUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkKspBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkKspBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkKspBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkKspBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkKspBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkKspBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkKspBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkKspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkKspBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkKspBmnUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkKspBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkKspBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkKspBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkKspBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkKspBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkKspBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkKspBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkKspBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkKspBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkKspBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkKspBmn.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkKspBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkKspBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkKspBmnUbah.teUraianKeputusan.Text;
                        dataPenyama.PERIODE = formSkKspBmnUbah.konversiPeriode();
                        dataPenyama.PERUNTUKAN = formSkKspBmnUbah.tePeruntukan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkKspBmnUbah.teNamaPihakLain.Text;
                        dataPenyama.THN_ANG = formSkKspBmnUbah.teTahunAnggaran.Text;
                        int _indeksData = dsGridRskKspBmn.IndexOf(gridSkKspBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskKspBmn.Remove(gridSkKspBmn.dataTerpilih);
                        dsGridRskKspBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskKspBmn.Remove(gridSkKspBmn.dataTerpilih);
                        break;
                }
                gridSkKspBmn.dsDataSource = dsGridRskKspBmn;
                gridSkKspBmn.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PSP BMN

        #endregion

        #region -->> [09] Sub Menu KSPI
        ucRskBgsGrid gridSkBgs;
        ucRskBgsForm formSkBgsTambah;
        ucRskBgsForm formSkBgsUbah;
        ucRskBgsForm formSkBgsDetail;
        private ArrayList dsGridRskBgs;
        SvcWasdalManfaatSkSelect.OutputParameters dOutRskBgs;
        SvcWasdalManfaatSkSelect.execute_pttClient ambilRskBgs;

        private void setEventTombolRskBgs()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskBgsTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskBgsUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskBgsHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskBgsDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskBgsKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskBgsRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskBgsMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskBgsKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskBgsKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkBgs()
        {
            //if (gridSkBgs == null)
            //{
            gridSkBgs = new ucRskBgsGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskBgs),
                detailDataGrid = new DetailDataGrid(bbiRskBgsUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskBgs();
            setPanel(gridSkBgs);
        }

        #region --++ Tombol Ribbon KSPI
        private void bbiRskBgsTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan09), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkBgsTambah == null)
                {
                    formSkBgsTambah = new ucRskBgsForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskBgs)
                    };
                }
                setPanel(formSkBgsTambah);
                formSkBgsTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskBgsUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkBgs.dataTerpilih != null)
            {
                if (formSkBgsUbah == null)
                {
                    formSkBgsUbah = new ucRskBgsForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskBgs)
                    };
                }
                formSkBgsUbah.dataTerpilih = gridSkBgs.dataTerpilih;
                setPanel(formSkBgsUbah);
                formSkBgsUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskBgsHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkBgs.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkBgs.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                        parInp.P_ID_SK_WASDAL_MANFAAT = gridSkBgs.dataTerpilih.ID_SK_WASDAL_MANFAAT;

                        parInp.P_ID_PEMOHON = gridSkBgs.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkBgs.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkBgs.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkBgs.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkBgs.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkBgs.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkBgs.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkBgs.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkBgs.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkBgs.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkBgs.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkBgs.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TGL_SK = konfigApp.DateToString(gridSkBgs.dataTerpilih.TGL_SK);
                        parInp.P_THN_ANG = gridSkBgs.dataTerpilih.THN_ANG;
                        parInp.P_ID_KPKNL = konfigApp.idKpknl;
                        parInp.P_KD_KL = konfigApp.kodeKl;
                        parInp.P_TIPE_PEMOHON = gridSkBgs.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkBgs.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_DARI_TGL = konfigApp.DateToString(gridSkBgs.dataTerpilih.DARI_TGL);
                        parInp.P_SD_TGL = konfigApp.DateToString(gridSkBgs.dataTerpilih.SD_TGL);
                        parInp.P_NM_PHK_LAIN = gridSkBgs.dataTerpilih.NM_PHK_LAIN;
                        parInp.P_ALAMAT_PHK_LAIN = gridSkBgs.dataTerpilih.ALAMAT_PHK_LAIN;
                        parInp.P_PERUNTUKAN = gridSkBgs.dataTerpilih.PERUNTUKAN;
                        parInp.P_PERIODE = gridSkBgs.dataTerpilih.PERIODE;
                        parInp.P_JNS_MITRA = "-";
                        parInp.P_KETERANGAN = "-";
                        //parInp.P_TIPE_PENGELOLA = "03";
                        parInp.P_TGL_CREATED = null;
                        parInp.P_ID_SATKER = gridSkBgs.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkBgs.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkBgs.dataTerpilih.UR_SATKER;
                        ambilDataBgs = new SvcWasdalManfaatCud.execute_pttClient();
                        ambilDataBgs.Open();
                        ambilDataBgs.Beginexecute(parInp, new AsyncCallback(cudRskBgs), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskBgsDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkBgs.dataTerpilih != null)
            {
                if (formSkBgsDetail == null)
                {
                    formSkBgsDetail = new ucRskBgsForm("A");
                    formSkBgsDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkBgsDetail.dataTerpilih = gridSkBgs.dataTerpilih;
                setPanel(formSkBgsDetail);
                formSkBgsDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskBgsKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkBgs);
            setTombolRskGrid();
            gridSkBgs.dsDataSource = dsGridRskBgs;
            gridSkBgs.displayData();
        }

        private void bbiRskBgsRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkBgs.teNamaKolom.Text = "";
            gridSkBgs.teCari.Text = "";
            gridSkBgs.fieldDicari = "";
            gridSkBgs.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskBgs();
        }

        private void bbiRskBgsMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskBgs();
            }
        }

        private void bbiRskBgsKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskBgsKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon KSPI

        private void nbiRskBgs_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan09;
            konfigApp.kdPelayanan = "09";
            konfigApp.namaPelayanan = konfigApp.namaLayanan09;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkBgs();
            modeCari = false;
            gridSkBgs.teNamaKolom.Text = "";
            gridSkBgs.teCari.Text = "";
            gridSkBgs.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskBgs();
        }

        #region --++ Ambil Data KSPI
        private void getInitRskBgs()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatSkSelect.InputParameters parInp = new SvcWasdalManfaatSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format(" KD_PELAYANAN = '{0}' AND ID_KPKNL = {1} AND THN_ANG='{2}' {3}", konfigApp.kdPelayanan, konfigApp.idKpknl, konfigApp.tahunAnggaran, this.strCari);
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '09'  AND (ID_USER={0} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {1})) AND (ID_SATKER = {1} OR ID_SATKER_PARENT= {1}) {2}", konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '09' AND " +
                //" (ID_USER={0} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={1}) " +
                // "OR ID_SATKER = {1} " +
                // "OR ID_SATKER_PARENT= {1}) {2}", konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskBgs = new SvcWasdalManfaatSkSelect.execute_pttClient();
                ambilRskBgs.Open();
                ambilRskBgs.Beginexecute(parInp, new AsyncCallback(getRskBgs), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskBgs(IAsyncResult result)
        {
            try
            {
                dOutRskBgs = ambilRskBgs.Endexecute(result);
                ambilRskBgs.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskBgs(dsRskBgs), dOutRskBgs);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskBgs(SvcWasdalManfaatSkSelect.OutputParameters dataOut);

        private void dsRskBgs(SvcWasdalManfaatSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_MANFAAT.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_MANFAAT[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskBgs = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskBgs.Add(dataOut.SF_READ_WASDAL_MANFAAT[i]);
            }
            gridSkBgs.labelTotData.Text = "";
            gridSkBgs.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkBgs.sbCariOnline.Enabled = !modeCari;
            gridSkBgs.dsDataSource = dsGridRskBgs;
            gridSkBgs.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkBgs.teNamaKolom.Text.Trim();
                string xDua = gridSkBgs.teCari.Text.Trim();
                string xTiga = gridSkBgs.fieldDicari;
                gridSkBgs.gvGridSk.ClearColumnsFilter();
                gridSkBgs.teNamaKolom.Text = xSatu;
                gridSkBgs.teCari.Text = xDua;
                gridSkBgs.fieldDicari = xTiga;
            }
            else
                gridSkBgs.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskBgs(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskBgs();
        }
        #endregion Ambil BGS/BSG

        #region --++ Simpan Data KSPI
        SvcWasdalManfaatCud.OutputParameters dOutAmbilDataBgs;
        SvcWasdalManfaatCud.execute_pttClient ambilDataBgs;

        private void simpanDataRskBgs(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                parInp.P_ID_SK_WASDAL_MANFAAT = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.idSkWasdal : formSkBgsUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.idPemohon : formSkBgsUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.rgJenisAset.EditValue.ToString() : formSkBgsUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teJabatan.Text.Trim() : formSkBgsUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.lePenerbitSk.EditValue.ToString() : formSkBgsUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.kodePenerbitSkDetail : formSkBgsUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkBgsTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBgsTambah.teNilaiPenetapan.Text)) : (formSkBgsUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBgsUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teNipPenandaTangan.Text : formSkBgsUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teNamaPenandaTangan.Text : formSkBgsUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.lePenerbitSk.Text : formSkBgsUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teNmPenerbitSkDetail.Text : formSkBgsUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teNomorSk.Text.Trim() : formSkBgsUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teTanggalSk.EditValue : formSkBgsUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teJenisPemohon.Text : formSkBgsUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teUraianKeputusan.Text : formSkBgsUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teTahunAnggaran.Text : formSkBgsUbah.teTahunAnggaran.Text);

                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teAlamatPihakLain.Text : formSkBgsUbah.teAlamatPihakLain.Text);
                parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkBgsTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBgsTambah.teJangkaWaktu.Text)) : (formSkBgsUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBgsUbah.teJangkaWaktu.Text)));
                parInp.P_JNS_MITRA = null;
                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.teNamaPihakLain.Text : formSkBgsUbah.teNamaPihakLain.Text);
                parInp.P_PERIODE = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.konversiPeriode() : formSkBgsUbah.konversiPeriode());
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.tePeruntukan.Text : formSkBgsUbah.tePeruntukan.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkBgsTambah.tipePengelola : formSkBgsUbah.tipePengelola);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkBgsTambah.filePath) : konfigApp.FileToByteArray(formSkBgsUbah.filePath));
                parInp.P_JANGKA_WAKTUSpecified = true;
                //parInp.P_KETERANGAN = null;
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                ambilDataBgs = new SvcWasdalManfaatCud.execute_pttClient();
                ambilDataBgs.Open();
                ambilDataBgs.Beginexecute(parInp, new AsyncCallback(cudRskBgs), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskBgs(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataBgs = ambilDataBgs.Endexecute(result);
                ambilDataBgs.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsBgs(this.ubahDsBgs), dOutAmbilDataBgs);
            }
            catch (Exception e)
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsBgs(SvcWasdalManfaatCud.OutputParameters dataOutBgsCrud);

        private void ubahDsBgs(SvcWasdalManfaatCud.OutputParameters dataOutBgsCrud)
        {
            if (dataOutBgsCrud.PO_RESULT == "Y")
            {
                SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                if (dsGridRskBgs == null) dsGridRskBgs = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALAMAT_PHK_LAIN = formSkBgsTambah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkBgsTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkBgsTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkBgsTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkBgsTambah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkBgsTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBgsTambah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkBgsTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkBgsTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkBgsTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkBgsTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkBgsTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkBgsTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkBgsTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkBgsTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBgsTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkBgsTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkBgsTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkBgsTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkBgsTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkBgsTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskBgs == null ? 1 : dsGridRskBgs.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkBgsTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkBgsTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkBgsTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkBgsTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkBgsTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkBgsTambah.teUraianKeputusan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkBgsTambah.teNamaPihakLain.Text;
                        dataPenyama.PERUNTUKAN = formSkBgsTambah.tePeruntukan.Text;
                        dataPenyama.THN_ANG = formSkBgsTambah.teTahunAnggaran.Text;
                        dataPenyama.PERIODE = formSkBgsTambah.konversiPeriode();
                        dsGridRskBgs.Add(dataPenyama);
                        formSkBgsTambah.gcDaftarAset.Enabled = true;
                        formSkBgsTambah.sbTambah.Enabled = true;
                        formSkBgsTambah.sbHapus.Enabled = true;
                        formSkBgsTambah.sbValidAset.Enabled = true;
                        formSkBgsTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkBgsTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkBgsTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkBgsTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkBgsTambah.sbCariPemohon.Enabled = false;
                        formSkBgsTambah.sbRefresh.Enabled = true;
                        formSkBgsTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkBgsTambah.cePilihSemua.Enabled = true;
                        formSkBgsTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkBgsTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_MANFAAT = formSkBgsUbah.idSkWasdal;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkBgsUbah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkBgsUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkBgsUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkBgsUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkBgsUbah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkBgsUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBgsUbah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkBgsUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkBgsUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkBgsUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkBgsUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkBgsUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkBgsUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkBgsUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkBgsUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBgsUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkBgsUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkBgs.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkBgsUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkBgsUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkBgsUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkBgsUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkBgs.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkBgs.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkBgsUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkBgs.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkBgs.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkBgsUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkBgsUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkBgs.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkBgs.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkBgs.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkBgsUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkBgsUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkBgsUbah.teUraianKeputusan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkBgsUbah.teNamaPihakLain.Text;
                        dataPenyama.PERUNTUKAN = formSkBgsUbah.tePeruntukan.Text;
                        dataPenyama.THN_ANG = formSkBgsUbah.teTahunAnggaran.Text;
                        dataPenyama.PERIODE = formSkBgsUbah.konversiPeriode();
                        int _indeksData = dsGridRskBgs.IndexOf(gridSkBgs.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskBgs.Remove(gridSkBgs.dataTerpilih);
                        dsGridRskBgs.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskBgs.Remove(gridSkBgs.dataTerpilih);
                        break;
                }
                gridSkBgs.dsDataSource = dsGridRskBgs;
                gridSkBgs.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data KSPI

        #endregion

        #region -->> [10] Sub Menu BGS/BSG
        ucRskBsgGrid gridSkBsg;
        ucRskBsgForm formSkBsgTambah;
        ucRskBsgForm formSkBsgUbah;
        ucRskBsgForm formSkBsgDetail;
        private ArrayList dsGridRskBsg;
        SvcWasdalManfaatSkSelect.OutputParameters dOutRskBsg;
        SvcWasdalManfaatSkSelect.execute_pttClient ambilRskBsg;

        private void setEventTombolRskBsg()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskBsgTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskBsgUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskBsgHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskBsgDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskBsgKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskBsgRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskBsgMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskBsgKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskBsgKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkBsg()
        {
            //if (gridSkBsg == null)
            //{
            gridSkBsg = new ucRskBsgGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskBsg),
                detailDataGrid = new DetailDataGrid(bbiRskBsgUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskBsg();
            setPanel(gridSkBsg);
        }

        #region --++ Tombol Ribbon BGS/BSG
        private void bbiRskBsgTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan10), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkBsgTambah == null)
                {
                    formSkBsgTambah = new ucRskBsgForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskBsg)
                    };
                }
                setPanel(formSkBsgTambah);
                formSkBsgTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskBsgUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkBsg.dataTerpilih != null)
            {
                if (formSkBsgUbah == null)
                {
                    formSkBsgUbah = new ucRskBsgForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskBsg)
                    };
                }
                formSkBsgUbah.dataTerpilih = gridSkBsg.dataTerpilih;
                setPanel(formSkBsgUbah);
                formSkBsgUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskBsgHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkBsg.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkBsg.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                        parInp.P_ID_SK_WASDAL_MANFAAT = gridSkBsg.dataTerpilih.ID_SK_WASDAL_MANFAAT;
                        parInp.P_ID_PEMOHON = gridSkBsg.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkBsg.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkBsg.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkBsg.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkBsg.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkBsg.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkBsg.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkBsg.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkBsg.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkBsg.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkBsg.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkBsg.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TGL_SK = konfigApp.DateToString(gridSkBsg.dataTerpilih.TGL_SK);
                        parInp.P_THN_ANG = gridSkBsg.dataTerpilih.THN_ANG;
                        parInp.P_ID_KPKNL = konfigApp.idKpknl;
                        parInp.P_KD_KL = konfigApp.kodeKl;
                        parInp.P_TIPE_PEMOHON = gridSkBsg.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkBsg.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_DARI_TGL = konfigApp.DateToString(gridSkBsg.dataTerpilih.DARI_TGL);
                        parInp.P_SD_TGL = konfigApp.DateToString(gridSkBsg.dataTerpilih.SD_TGL);
                        parInp.P_NM_PHK_LAIN = gridSkBsg.dataTerpilih.NM_PHK_LAIN;
                        parInp.P_ALAMAT_PHK_LAIN = gridSkBsg.dataTerpilih.ALAMAT_PHK_LAIN;
                        parInp.P_PERUNTUKAN = gridSkBsg.dataTerpilih.PERUNTUKAN;
                        parInp.P_PERIODE = gridSkBsg.dataTerpilih.PERIODE;
                        parInp.P_JNS_MITRA = "-";
                        parInp.P_KETERANGAN = "-";
                        //parInp.P_TIPE_PENGELOLA = "03";
                        parInp.P_TGL_CREATED = null;
                        parInp.P_ID_SATKER = gridSkBsg.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkBsg.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkBsg.dataTerpilih.UR_SATKER;
                        ambilDataBsg = new SvcWasdalManfaatCud.execute_pttClient();
                        ambilDataBsg.Open();
                        ambilDataBsg.Beginexecute(parInp, new AsyncCallback(cudRskBsg), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskBsgDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkBsg.dataTerpilih != null)
            {
                if (formSkBsgDetail == null)
                {
                    formSkBsgDetail = new ucRskBsgForm("A");
                    formSkBsgDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkBsgDetail.dataTerpilih = gridSkBsg.dataTerpilih;
                setPanel(formSkBsgDetail);
                formSkBsgDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskBsgKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkBsg);
            setTombolRskGrid();
            gridSkBsg.dsDataSource = dsGridRskBsg;
            gridSkBsg.displayData();
        }

        private void bbiRskBsgRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkBsg.teNamaKolom.Text = "";
            gridSkBsg.teCari.Text = "";
            gridSkBsg.fieldDicari = "";
            gridSkBsg.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskBsg();
        }

        private void bbiRskBsgMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskBsg();
            }
        }

        private void bbiRskBsgKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskBsgKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon BGS/BSG

        private void nbiRskBsg_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan10;
            konfigApp.kdPelayanan = "10";
            konfigApp.namaPelayanan = konfigApp.namaLayanan10;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkBsg();
            modeCari = false;
            gridSkBsg.teNamaKolom.Text = "";
            gridSkBsg.teCari.Text = "";
            gridSkBsg.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskBsg();
        }

        #region --++ Ambil Data BGS/BSG
        private void getInitRskBsg()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatSkSelect.InputParameters parInp = new SvcWasdalManfaatSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_KPKNL = {1} AND THN_ANG='{2}' {3}", konfigApp.kdPelayanan, konfigApp.idKpknl, konfigApp.tahunAnggaran, this.strCari);
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskBsg = new SvcWasdalManfaatSkSelect.execute_pttClient();
                ambilRskBsg.Open();
                ambilRskBsg.Beginexecute(parInp, new AsyncCallback(getRskBsg), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskBsg(IAsyncResult result)
        {
            try
            {
                dOutRskBsg = ambilRskBsg.Endexecute(result);
                ambilRskBsg.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskBsg(dsRskBsg), dOutRskBsg);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskBsg(SvcWasdalManfaatSkSelect.OutputParameters dataOut);

        private void dsRskBsg(SvcWasdalManfaatSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_MANFAAT.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_MANFAAT[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskBsg = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB = (dataOut.SF_READ_WASDAL_MANFAAT[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskBsg.Add(dataOut.SF_READ_WASDAL_MANFAAT[i]);
            }
            gridSkBsg.labelTotData.Text = "";
            gridSkBsg.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkBsg.sbCariOnline.Enabled = !modeCari;
            gridSkBsg.dsDataSource = dsGridRskBsg;
            gridSkBsg.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkBsg.teNamaKolom.Text.Trim();
                string xDua = gridSkBsg.teCari.Text.Trim();
                string xTiga = gridSkBsg.fieldDicari;
                gridSkBsg.gvGridSk.ClearColumnsFilter();
                gridSkBsg.teNamaKolom.Text = xSatu;
                gridSkBsg.teCari.Text = xDua;
                gridSkBsg.fieldDicari = xTiga;
            }
            else
                gridSkBsg.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskBsg(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskBsg();
        }
        #endregion Ambil BGS/BSG

        #region --++ Simpan Data BGS/BSG
        SvcWasdalManfaatCud.OutputParameters dOutAmbilDataBsg;
        SvcWasdalManfaatCud.execute_pttClient ambilDataBsg;

        private void simpanDataRskBsg(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalManfaatCud.InputParameters parInp = new SvcWasdalManfaatCud.InputParameters();
                parInp.P_ID_SK_WASDAL_MANFAATSpecified = true;
                parInp.P_ID_SK_WASDAL_MANFAAT = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.idSkWasdal : formSkBsgUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.idPemohon : formSkBsgUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.rgJenisAset.EditValue.ToString() : formSkBsgUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teJabatan.Text.Trim() : formSkBsgUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.lePenerbitSk.EditValue.ToString() : formSkBsgUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.kodePenerbitSkDetail : formSkBsgUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkBsgTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBsgTambah.teNilaiPenetapan.Text)) : (formSkBsgUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBsgUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teNipPenandaTangan.Text : formSkBsgUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teNamaPenandaTangan.Text : formSkBsgUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.lePenerbitSk.Text : formSkBsgUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teNmPenerbitSkDetail.Text : formSkBsgUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teNomorSk.Text.Trim() : formSkBsgUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teTanggalSk.EditValue : formSkBsgUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teJenisPemohon.Text : formSkBsgUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teUraianKeputusan.Text : formSkBsgUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teTahunAnggaran.Text : formSkBsgUbah.teTahunAnggaran.Text);

                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teAlamatPihakLain.Text : formSkBsgUbah.teAlamatPihakLain.Text);
                parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkBsgTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBsgTambah.teJangkaWaktu.Text)) : (formSkBsgUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBsgUbah.teJangkaWaktu.Text)));
                parInp.P_JNS_MITRA = null;
                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.teNamaPihakLain.Text : formSkBsgUbah.teNamaPihakLain.Text);
                parInp.P_PERIODE = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.konversiPeriode() : formSkBsgUbah.konversiPeriode());
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.tePeruntukan.Text : formSkBsgUbah.tePeruntukan.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkBsgTambah.tipePengelola : formSkBsgUbah.tipePengelola);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkBsgTambah.filePath) : konfigApp.FileToByteArray(formSkBsgUbah.filePath));
                parInp.P_JANGKA_WAKTUSpecified = true;
                parInp.P_KETERANGAN = null;
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                ambilDataBsg = new SvcWasdalManfaatCud.execute_pttClient();
                ambilDataBsg.Open();
                ambilDataBsg.Beginexecute(parInp, new AsyncCallback(cudRskBsg), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskBsg(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataBsg = ambilDataBsg.Endexecute(result);
                ambilDataBsg.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsBsg(this.ubahDsBsg), dOutAmbilDataBsg);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsBsg(SvcWasdalManfaatCud.OutputParameters dataOutBsgCrud);

        private void ubahDsBsg(SvcWasdalManfaatCud.OutputParameters dataOutBsgCrud)
        {
            if (dataOutBsgCrud.PO_RESULT == "Y")
            {
                SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT dataPenyama = new SvcWasdalManfaatSkSelect.WASDALSROW_READ_WASDAL_MANFAAT();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.JANGKA_WAKTUSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                if (dsGridRskBsg == null) dsGridRskBsg = new ArrayList();
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALAMAT_PHK_LAIN = formSkBsgTambah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkBsgTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkBsgTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkBsgTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkBsgTambah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkBsgTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBsgTambah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkBsgTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkBsgTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkBsgTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkBsgTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkBsgTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkBsgTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkBsgTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkBsgTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBsgTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkBsgTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkBsgTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkBsgTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkBsgTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkBsgTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskBsg == null ? 1 : dsGridRskBsg.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkBsgTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkBsgTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkBsgTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkBsgTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkBsgTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkBsgTambah.teUraianKeputusan.Text;
                        dataPenyama.THN_ANG = formSkBsgTambah.teTahunAnggaran.Text;
                        dataPenyama.PERUNTUKAN = formSkBsgTambah.tePeruntukan.Text;
                        dataPenyama.PERIODE = formSkBsgTambah.konversiPeriode();
                        dataPenyama.NM_PHK_LAIN = formSkBsgTambah.teNamaPihakLain.Text;
                        dsGridRskBsg.Add(dataPenyama);
                        formSkBsgTambah.gcDaftarAset.Enabled = true;
                        formSkBsgTambah.sbTambah.Enabled = true;
                        formSkBsgTambah.sbHapus.Enabled = true;
                        formSkBsgTambah.sbValidAset.Enabled = true;
                        formSkBsgTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkBsgTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkBsgTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkBsgTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkBsgTambah.sbCariPemohon.Enabled = false;
                        formSkBsgTambah.sbRefresh.Enabled = true;
                        formSkBsgTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkBsgTambah.cePilihSemua.Enabled = true;
                        formSkBsgTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkBsgTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_MANFAAT = formSkBgsUbah.idSkWasdal;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkBsgUbah.teAlamatPihakLain.Text;
                        dataPenyama.ID_PEMOHON = formSkBsgUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkBsgUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkBsgUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkBsgUbah.teJabatan.Text;
                        dataPenyama.JANGKA_WAKTU = formSkBsgUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkBsgUbah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkBsgUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkBsgUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkBsgUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkBsgUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkBsgUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkBsgUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkBsgUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkBsgUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkBsgUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkBsgUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkBsg.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkBsgUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkBsgUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkBsgUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkBsgUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkBsg.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkBsg.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkBsgUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkBsg.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkBsg.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkBsgUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkBsgUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkBsg.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkBsg.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkBsg.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkBsgUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkBsgUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkBsgUbah.teUraianKeputusan.Text;
                        dataPenyama.PERIODE = formSkBsgUbah.konversiPeriode();
                        dataPenyama.PERUNTUKAN = formSkBsgUbah.tePeruntukan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkBsgUbah.teNamaPihakLain.Text;
                        dataPenyama.THN_ANG = formSkBsgUbah.teTahunAnggaran.Text;
                        int _indeksData = dsGridRskBsg.IndexOf(gridSkBsg.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskBsg.Remove(gridSkBsg.dataTerpilih);
                        dsGridRskBsg.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskBsg.Remove(gridSkBsg.dataTerpilih);
                        break;
                }
                gridSkBsg.dsDataSource = dsGridRskBsg;
                gridSkBsg.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data BGS/BSG

        #endregion

        #region penjualan
        ucRskPenjualanGrid gridSkPenjualan;
        ucRskPenjualanForm formSkPenjualanTambah;
        ucRskPenjualanForm formSkPenjualanUbah;
        ucRskPenjualanForm formSkPenjualanDetail;
        private ArrayList dsGridRskPenjualan;
        SvcWasdalJualSkSelect.OutputParameters dOutRskPenjualan;
        SvcWasdalJualSkSelect.execute_pttClient ambilRskPenjualan;

        private void setEventTombolRskPenjualan()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPenjualanTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPenjualanUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPenjualanHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPenjualanDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPenjualanKembaliKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPenjualanRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPenjualanMoreDataKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkPenjualan()
        {
            //if (gridSkPenjualan == null)
            //{
            gridSkPenjualan = new AppPengguna.KKW.RSK.ucRskPenjualanGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskPenjualan),
                detailDataGrid = new DetailDataGrid(bbiRskPenjualanUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskPenjualan();
            setPanel(gridSkPenjualan);
        }

        #region --++ Tombol Ribbon Penjualan
        private void bbiRskPenjualanTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan11), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkPenjualanTambah == null)
                {
                    formSkPenjualanTambah = new AppPengguna.KKW.RSK.ucRskPenjualanForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPenjualan)
                    };
                }
                setPanel(formSkPenjualanTambah);
                formSkPenjualanTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskPenjualanUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPenjualan.dataTerpilih != null)
            {
                if (formSkPenjualanUbah == null)
                {
                    formSkPenjualanUbah = new AppPengguna.KKW.RSK.ucRskPenjualanForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPenjualan)
                    };
                }
                formSkPenjualanUbah.dataTerpilih = gridSkPenjualan.dataTerpilih;
                setPanel(formSkPenjualanUbah);
                formSkPenjualanUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPenjualanHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPenjualan.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPenjualan.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalJualCrud.InputParameters parInp = new SvcWasdalJualCrud.InputParameters();
                        parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                        parInp.P_ID_SK_WASDAL_PINDAHTANGAN = gridSkPenjualan.dataTerpilih.ID_SK_WASDAL_PINDAHTANGAN;
                        parInp.P_ID_PEMOHON = gridSkPenjualan.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkPenjualan.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkPenjualan.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkPenjualan.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkPenjualan.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkPenjualan.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkPenjualan.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkPenjualan.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkPenjualan.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkPenjualan.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkPenjualan.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkPenjualan.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkPenjualan.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkPenjualan.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkPenjualan.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkPenjualan.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkPenjualan.dataTerpilih.UR_SATKER;
                        ambilDataPenjualan = new SvcWasdalJualCrud.execute_pttClient();
                        ambilDataPenjualan.Open();
                        ambilDataPenjualan.Beginexecute(parInp, new AsyncCallback(cudRskPenjualan), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskPenjualanDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPenjualan.dataTerpilih != null)
            {
                if (formSkPenjualanDetail == null)
                {
                    formSkPenjualanDetail = new AppPengguna.KKW.RSK.ucRskPenjualanForm("A");
                    formSkPenjualanDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkPenjualanDetail.dataTerpilih = gridSkPenjualan.dataTerpilih;
                setPanel(formSkPenjualanDetail);
                formSkPenjualanDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPenjualanKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkPenjualan);
            setTombolRskGrid();
            gridSkPenjualan.dsDataSource = dsGridRskPenjualan;
            gridSkPenjualan.displayData();
        }

        private void bbiRskPenjualanRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkPenjualan.teNamaKolom.Text = "";
            gridSkPenjualan.teCari.Text = "";
            gridSkPenjualan.fieldDicari = "";
            gridSkPenjualan.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskPenjualan();
        }

        private void bbiRskPenjualanMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskPenjualan();
            }
        }
        #endregion --++ Tombol Ribbon Penjualan

        private void nbiRskPenjualan_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan11;
            konfigApp.kdPelayanan = "11";
            konfigApp.namaPelayanan = konfigApp.namaLayanan11;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkPenjualan();
            modeCari = false;
            gridSkPenjualan.teNamaKolom.Text = "";
            gridSkPenjualan.teCari.Text = "";
            gridSkPenjualan.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskPenjualan();
        }

        #region --++ Ambil Data Penjualan
        private void getInitRskPenjualan()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalJualSkSelect.InputParameters parInp = new SvcWasdalJualSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                // parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON={2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskPenjualan = new SvcWasdalJualSkSelect.execute_pttClient();
                ambilRskPenjualan.Open();
                ambilRskPenjualan.Beginexecute(parInp, new AsyncCallback(getRskPenjualan), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskPenjualan(IAsyncResult result)
        {
            try
            {
                dOutRskPenjualan = ambilRskPenjualan.Endexecute(result);
                ambilRskPenjualan.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskPenjualan(dsRskPenjualan), dOutRskPenjualan);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskPenjualan(SvcWasdalJualSkSelect.OutputParameters dataOut);

        private void dsRskPenjualan(SvcWasdalJualSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_PT_JUAL.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_PT_JUAL[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskPenjualan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_PT_JUAL[i].IS_TB = (dataOut.SF_READ_WASDAL_PT_JUAL[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskPenjualan.Add(dataOut.SF_READ_WASDAL_PT_JUAL[i]);
            }
            gridSkPenjualan.labelTotData.Text = "";
            gridSkPenjualan.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkPenjualan.sbCariOnline.Enabled = !modeCari;
            gridSkPenjualan.dsDataSource = dsGridRskPenjualan;
            gridSkPenjualan.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkPenjualan.teNamaKolom.Text.Trim();
                string xDua = gridSkPenjualan.teCari.Text.Trim();
                string xTiga = gridSkPenjualan.fieldDicari;
                gridSkPenjualan.gvGridSk.ClearColumnsFilter();
                gridSkPenjualan.teNamaKolom.Text = xSatu;
                gridSkPenjualan.teCari.Text = xDua;
                gridSkPenjualan.fieldDicari = xTiga;
            }
            else
                gridSkPenjualan.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskPenjualan(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskPenjualan();
        }
        #endregion Ambil Penjualan

        #region --++ Simpan Data Penjualan
        SvcWasdalJualCrud.OutputParameters dOutAmbilDataPenjualan;
        SvcWasdalJualCrud.execute_pttClient ambilDataPenjualan;

        private void simpanDataRskPenjualan(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalJualCrud.InputParameters parInp = new SvcWasdalJualCrud.InputParameters();
                parInp.P_ID_SK_WASDAL_PINDAHTANGAN = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.idSkWasdal : formSkPenjualanUbah.idSkWasdal);//
                parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.idPemohon : formSkPenjualanUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.rgJenisAset.EditValue.ToString() : formSkPenjualanUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teJabatan.Text.Trim() : formSkPenjualanUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkPenjualanTambah.teNmPenerbitSk.ItemIndex).ToString() : formSkPenjualanUbah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkPenjualanUbah.teNmPenerbitSk.ItemIndex).ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.kodePenerbitSkDetail : formSkPenjualanUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPenjualanTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPenjualanTambah.teNilaiPenetapan.Text)) : (formSkPenjualanUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPenjualanUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teNipPenandaTangan.Text : formSkPenjualanUbah.teNipPenandaTangan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teTahunAnggaran.Text : formSkPenjualanUbah.teTahunAnggaran.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teNamaPenandaTangan.Text : formSkPenjualanUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teNmPenerbitSk.Text : formSkPenjualanUbah.teNmPenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teNamaInstansi.Text : formSkPenjualanUbah.teNamaInstansi.Text);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teNomorSk.Text.Trim() : formSkPenjualanUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teTanggalSk.EditValue : formSkPenjualanUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teJenisPemohon.Text : formSkPenjualanUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.tipePengelola : formSkPenjualanUbah.tipePengelola);
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teUraianKeputusan.Text : formSkPenjualanUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPenjualanTambah.teTahunAnggaran.Text : formSkPenjualanUbah.teTahunAnggaran.Text);
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                ambilDataPenjualan = new SvcWasdalJualCrud.execute_pttClient();
                ambilDataPenjualan.Open();
                ambilDataPenjualan.Beginexecute(parInp, new AsyncCallback(cudRskPenjualan), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulGagalSimpan);
            }
        }

        private void cudRskPenjualan(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPenjualan = ambilDataPenjualan.Endexecute(result);
                ambilDataPenjualan.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsPenjualan(this.ubahDsPenjualan), dOutAmbilDataPenjualan);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsPenjualan(SvcWasdalJualCrud.OutputParameters dataOutPenjualanCrud);

        private void ubahDsPenjualan(SvcWasdalJualCrud.OutputParameters dataOutPenjualanCrud)
        {
            if (dataOutPenjualanCrud.PO_RESULT == "Y")
            {
                SvcWasdalJualSkSelect.WASDALSROW_READ_WASDAL_PT_JUAL dataPenyama = new SvcWasdalJualSkSelect.WASDALSROW_READ_WASDAL_PT_JUAL();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkPenjualanTambah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkPenjualanTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPenjualanTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkPenjualanTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPenjualanTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkPenjualanTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPenjualanTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPenjualanTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPenjualanTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPenjualanTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPenjualanTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPenjualanTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPenjualanTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPenjualanTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPenjualanTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkPenjualanTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPenjualanTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPenjualanTambah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPenjualanTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskPenjualan == null ? 1 : dsGridRskPenjualan.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkPenjualanTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPenjualanTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPenjualanTambah.teJenisPemohon.Text;
                        //dataPenyama.THN_ANG = formSkPenjualanTambah.teTahunAnggaran.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkPenjualanTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPenjualanTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPenjualanTambah.teUraianKeputusan.Text;
                        if (dsGridRskPenjualan == null) dsGridRskPenjualan = new ArrayList();
                        dsGridRskPenjualan.Add(dataPenyama);
                        formSkPenjualanTambah.gcDaftarAset.Enabled = true;
                        formSkPenjualanTambah.sbTambah.Enabled = true;
                        formSkPenjualanTambah.sbHapus.Enabled = true;
                        formSkPenjualanTambah.sbValidasi.Enabled = true;
                        formSkPenjualanTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkPenjualanTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkPenjualanTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkPenjualanTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkPenjualanTambah.sbCariPemohon.Enabled = false;
                        formSkPenjualanTambah.sbRefresh.Enabled = true;
                        formSkPenjualanTambah.teNamaInstansi.Properties.ReadOnly = true;
                        formSkPenjualanTambah.cePilihSemua.Enabled = true;
                        formSkPenjualanTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkPenjualanTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkPenjualanUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkPenjualanUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPenjualanUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkPenjualanUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPenjualanUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkPenjualanUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPenjualanUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPenjualanUbah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPenjualanUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPenjualanUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPenjualanUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPenjualanUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPenjualanUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPenjualanUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPenjualanUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkPenjualan.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkPenjualanUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPenjualanUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPenjualanUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPenjualanUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkPenjualan.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkPenjualan.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkPenjualanUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkPenjualan.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkPenjualan.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPenjualanUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkPenjualanUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkPenjualan.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkPenjualan.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkPenjualan.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkPenjualanUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPenjualanUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPenjualanUbah.teUraianKeputusan.Text;
                        //dataPenyama.THN_ANG = formSkPenjualanUbah.teTahunAnggaran.Text;
                        int _indeksData = dsGridRskPenjualan.IndexOf(gridSkPenjualan.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskPenjualan.Remove(gridSkPenjualan.dataTerpilih);
                        dsGridRskPenjualan.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskPenjualan.Remove(gridSkPenjualan.dataTerpilih);
                        break;
                }
                gridSkPenjualan.dsDataSource = dsGridRskPenjualan;
                gridSkPenjualan.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data Penjualan

        #endregion Penjualan

        #region tukarmenukar
        ucRskTmBmnGrid gridSkTmBmn;
        ucRskTmBmnForm formSkTmBmnTambah;
        ucRskTmBmnForm formSkTmBmnUbah;
        ucRskTmBmnForm formSkTmBmnDetail;
        private ArrayList dsGridRskTmBmn;
        SvcWasdalTmSkSelect.OutputParameters dOutRskTmBmn;
        SvcWasdalTmSkSelect.execute_pttClient ambilRskTmBmn;

        private void setEventTombolRskTmBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskTmBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskTmBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskTmBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskTmBmnDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskTmBmnKembaliKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskTmBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskTmBmnMoreDataKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkTmBmn()
        {
            //if (gridSkTmBmn == null)
            //{
            gridSkTmBmn = new AppPengguna.KKW.RSK.ucRskTmBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskTmBmn),
                detailDataGrid = new DetailDataGrid(bbiRskTmBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskTmBmn();
            setPanel(gridSkTmBmn);
        }

        #region --++ Tombol Ribbon Tukar Menukar
        private void bbiRskTmBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan12), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkTmBmnTambah == null)
                {
                    formSkTmBmnTambah = new AppPengguna.KKW.RSK.ucRskTmBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskTmBmn)
                    };
                }
                setPanel(formSkTmBmnTambah);
                formSkTmBmnTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskTmBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkTmBmn.dataTerpilih != null)
            {
                if (formSkTmBmnUbah == null)
                {
                    formSkTmBmnUbah = new AppPengguna.KKW.RSK.ucRskTmBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskTmBmn)
                    };
                }
                formSkTmBmnUbah.dataTerpilih = gridSkTmBmn.dataTerpilih;
                setPanel(formSkTmBmnUbah);
                formSkTmBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskTmBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkTmBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkTmBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalTmCrud.InputParameters parInp = new SvcWasdalTmCrud.InputParameters();
                        parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                        parInp.P_ID_SK_WASDAL_PINDAHTANGAN = gridSkTmBmn.dataTerpilih.ID_SK_WASDAL_PINDAHTANGAN;
                        parInp.P_ID_PEMOHON = gridSkTmBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkTmBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkTmBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkTmBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkTmBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkTmBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkTmBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkTmBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkTmBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkTmBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkTmBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkTmBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkTmBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkTmBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkTmBmn.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkTmBmn.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkTmBmn.dataTerpilih.UR_SATKER;
                        ambilDataTmBmn = new SvcWasdalTmCrud.execute_pttClient();
                        ambilDataTmBmn.Open();
                        ambilDataTmBmn.Beginexecute(parInp, new AsyncCallback(cudRskTmBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskTmBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkTmBmn.dataTerpilih != null)
            {
                if (formSkTmBmnDetail == null)
                {
                    formSkTmBmnDetail = new AppPengguna.KKW.RSK.ucRskTmBmnForm("A");
                    formSkTmBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkTmBmnDetail.dataTerpilih = gridSkTmBmn.dataTerpilih;
                setPanel(formSkTmBmnDetail);
                formSkTmBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskTmBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkTmBmn);
            setTombolRskGrid();
            gridSkTmBmn.dsDataSource = dsGridRskTmBmn;
            gridSkTmBmn.displayData();
        }

        private void bbiRskTmBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkTmBmn.teNamaKolom.Text = "";
            gridSkTmBmn.teCari.Text = "";
            gridSkTmBmn.fieldDicari = "";
            gridSkTmBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskTmBmn();
        }

        private void bbiRskTmBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskTmBmn();
            }
        }
        #endregion --++ Tombol Ribbon  Tukar Menukar

        private void nbiRskTmBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan12;
            konfigApp.kdPelayanan = "12";
            konfigApp.namaPelayanan = konfigApp.namaLayanan12;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkTmBmn();
            modeCari = false;
            gridSkTmBmn.teNamaKolom.Text = "";
            gridSkTmBmn.teCari.Text = "";
            gridSkTmBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskTmBmn();
        }

        #region --++ Ambil Data Tukar Menukar
        private void getInitRskTmBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalTmSkSelect.InputParameters parInp = new SvcWasdalTmSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskTmBmn = new SvcWasdalTmSkSelect.execute_pttClient();
                ambilRskTmBmn.Open();
                ambilRskTmBmn.Beginexecute(parInp, new AsyncCallback(getRskTmBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskTmBmn(IAsyncResult result)
        {
            try
            {
                dOutRskTmBmn = ambilRskTmBmn.Endexecute(result);
                ambilRskTmBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskTmBmn(dsRskTmBmn), dOutRskTmBmn);
            }
            catch (Exception ex)
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskTmBmn(SvcWasdalTmSkSelect.OutputParameters dataOut);

        private void dsRskTmBmn(SvcWasdalTmSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_PT_TUKAR.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_PT_TUKAR[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskTmBmn = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_PT_TUKAR[i].IS_TB = (dataOut.SF_READ_WASDAL_PT_TUKAR[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskTmBmn.Add(dataOut.SF_READ_WASDAL_PT_TUKAR[i]);
            }
            gridSkTmBmn.labelTotData.Text = "";
            gridSkTmBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkTmBmn.sbCariOnline.Enabled = !modeCari;
            gridSkTmBmn.dsDataSource = dsGridRskTmBmn;
            gridSkTmBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkTmBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkTmBmn.teCari.Text.Trim();
                string xTiga = gridSkTmBmn.fieldDicari;
                gridSkTmBmn.gvGridSk.ClearColumnsFilter();
                gridSkTmBmn.teNamaKolom.Text = xSatu;
                gridSkTmBmn.teCari.Text = xDua;
                gridSkTmBmn.fieldDicari = xTiga;
            }
            else
                gridSkTmBmn.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskTmBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskTmBmn();
        }
        #endregion Ambil TmBmn

        #region --++ Simpan Data Tukar Menukar
        SvcWasdalTmCrud.OutputParameters dOutAmbilDataTmBmn;
        SvcWasdalTmCrud.execute_pttClient ambilDataTmBmn;

        private void simpanDataRskTmBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalTmCrud.InputParameters parInp = new SvcWasdalTmCrud.InputParameters();
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_SK_WASDAL_PINDAHTANGAN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.idSkWasdal : formSkTmBmnUbah.idSkWasdal);
                parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.idPemohon : formSkTmBmnUbah.idPemohon);
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.rgJenisAset.EditValue.ToString() : formSkTmBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teJabatan.Text.Trim() : formSkTmBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkTmBmnTambah.teNmPenerbitSk.ItemIndex).ToString() : formSkTmBmnUbah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkTmBmnUbah.teNmPenerbitSk.ItemIndex).ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.kodePenerbitSkDetail : formSkTmBmnUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkTmBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkTmBmnTambah.teNilaiPenetapan.Text)) : (formSkTmBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkTmBmnUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teNipPenandaTangan.Text : formSkTmBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teNamaPenandaTangan.Text : formSkTmBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teTahunAnggaran.Text : formSkTmBmnUbah.teTahunAnggaran.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teNmPenerbitSk.Text : formSkTmBmnUbah.teNmPenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teNamaInstansi.Text : formSkTmBmnUbah.teNamaInstansi.Text);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teNomorSk.Text.Trim() : formSkTmBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teTanggalSk.EditValue : formSkTmBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teJenisPemohon.Text : formSkTmBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.tipePengelola : formSkTmBmnUbah.tipePengelola);
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teUraianKeputusan.Text : formSkTmBmnUbah.teUraianKeputusan.Text);

                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teAlamatPihakLain.Text : formSkTmBmnUbah.teAlamatPihakLain.Text);

                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teNamaPihakLain.Text : formSkTmBmnUbah.teNamaPihakLain.Text);
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.tePeruntukan.Text : formSkTmBmnUbah.tePeruntukan.Text);
                parInp.P_ASET_PENGGANTI_JENIS = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teJnsAsetPengganti.Text : formSkTmBmnUbah.teJnsAsetPengganti.Text);
                parInp.P_ASET_PENGGANTI_KUANTITASSpecified = true;
                parInp.P_ASET_PENGGANTI_KUANTITAS = ((_mode == "C" || _mode == "CU") ? Convert.ToDecimal(formSkTmBmnTambah.teKuantitasAsetPengganti.Text) : Convert.ToDecimal(formSkTmBmnUbah.teKuantitasAsetPengganti.Text));
                parInp.P_ASET_PENGGANTI_LUASSpecified = true;
                parInp.P_ASET_PENGGANTI_LUAS = ((_mode == "C" || _mode == "CU") ? Convert.ToDecimal(formSkTmBmnTambah.teLuasAsetPengganti.Text) : Convert.ToDecimal(formSkTmBmnUbah.teLuasAsetPengganti.Text));
                parInp.P_ASET_PENGGANTI_ALAMAT = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teAlamatAsetPengganti.Text : formSkTmBmnUbah.teAlamatAsetPengganti.Text);
                //parInp.P_FILE_SK = ((_mode == "C" || _mode == "CU") ? formSkTmBmnTambah.teFileSk.Text : formSkTmBmnUbah.teFileSk.Text);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkTmBmnTambah.filePath) : konfigApp.FileToByteArray(formSkTmBmnUbah.filePath));
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;
                ambilDataTmBmn = new SvcWasdalTmCrud.execute_pttClient();
                ambilDataTmBmn.Open();
                ambilDataTmBmn.Beginexecute(parInp, new AsyncCallback(cudRskTmBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskTmBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataTmBmn = ambilDataTmBmn.Endexecute(result);
                ambilDataTmBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsTmBmn(this.ubahDsTmBmn), dOutAmbilDataTmBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsTmBmn(SvcWasdalTmCrud.OutputParameters dataOutTmBmnCrud);

        private void ubahDsTmBmn(SvcWasdalTmCrud.OutputParameters dataOutTmBmnCrud)
        {
            if (dataOutTmBmnCrud.PO_RESULT == "Y")
            {
                SvcWasdalTmSkSelect.WASDALSROW_READ_WASDAL_PT_TUKAR dataPenyama = new SvcWasdalTmSkSelect.WASDALSROW_READ_WASDAL_PT_TUKAR();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkTmBmnTambah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkTmBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkTmBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkTmBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkTmBmnTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkTmBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkTmBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkTmBmnTambah.teNamaInstansi.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkTmBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkTmBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkTmBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkTmBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkTmBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkTmBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkTmBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkTmBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkTmBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkTmBmnTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkTmBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskTmBmn == null ? 1 : dsGridRskTmBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkTmBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkTmBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkTmBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkTmBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkTmBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkTmBmnTambah.teUraianKeputusan.Text;
                        //dataPenyama.THN_ANG = formSkTmBmnTambah.teTahunAnggaran.Text;
                        dataPenyama.NM_PHK_LAIN = formSkTmBmnTambah.teNamaPihakLain.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkTmBmnTambah.teAlamatPihakLain.Text;

                        dsGridRskTmBmn.Add(dataPenyama);
                        formSkTmBmnTambah.gcDaftarAset.Enabled = true;
                        formSkTmBmnTambah.sbTambah.Enabled = true;
                        formSkTmBmnTambah.sbHapus.Enabled = true;
                        formSkTmBmnTambah.sbValidasi.Enabled = true;
                        formSkTmBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkTmBmnTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkTmBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkTmBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkTmBmnTambah.sbCariPemohon.Enabled = false;
                        formSkTmBmnTambah.sbRefresh.Enabled = true;
                        formSkTmBmnTambah.teNamaInstansi.Properties.ReadOnly = true;
                        formSkTmBmnTambah.cePilihSemua.Enabled = true;
                        formSkTmBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                        formSkTmBmnTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkTmBmnUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkTmBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkTmBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkTmBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkTmBmnUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkTmBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkTmBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkTmBmnUbah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkTmBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkTmBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkTmBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkTmBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkTmBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkTmBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkTmBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkTmBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkTmBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkTmBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkTmBmnUbah.teNmPenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkTmBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkTmBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkTmBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkTmBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkTmBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkTmBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkTmBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkTmBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkTmBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkTmBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkTmBmn.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkTmBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkTmBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkTmBmnUbah.teUraianKeputusan.Text;
                        //dataPenyama.THN_ANG = formSkTmBmnUbah.teTahunAnggaran.Text;
                        //dataPenyama.JNS_ASET_PENGGANTI = formSkTmBmnUbah.teJnsAsetPengganti.Text;
                        //dataPenyama.ALAMAT_ASET_PENGGANTI = formSkTmBmnUbah.teAlamatAsetPengganti.Text;
                        //dataPenyama.PERUNTUKAN = formSkTmBmnUbah.tePeruntukan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkTmBmnUbah.teAlamatPihakLain.Text;
                        dataPenyama.NM_PHK_LAIN = formSkTmBmnUbah.teNamaPihakLain.Text;

                        int _indeksData = dsGridRskTmBmn.IndexOf(gridSkTmBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskTmBmn.Remove(gridSkTmBmn.dataTerpilih);
                        dsGridRskTmBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskTmBmn.Remove(gridSkTmBmn.dataTerpilih);
                        break;
                }
                gridSkTmBmn.dsDataSource = dsGridRskTmBmn;
                gridSkTmBmn.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data TmBmn

        #endregion tukarmenukar

        #region hibah
        ucRskHibahGrid gridSkHibah;
        ucRskHibahForm formSkHibahTambah;
        ucRskHibahForm formSkHibahUbah;
        ucRskHibahForm formSkHibahDetail;
        private ArrayList dsGridRskHibah;
        SvcWasdalHibahSkSelect.OutputParameters dOutRskHibah;
        SvcWasdalHibahSkSelect.execute_pttClient ambilRskHibah;

        private void setEventTombolRskHibah()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskHibahTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskHibahUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskHibahHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskHibahDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskHibahKembaliKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskHibahRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskHibahMoreDataKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPspBmnKeluarKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkHibah()
        {
            //if (gridSkHibah == null)
            //{
            gridSkHibah = new ucRskHibahGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskHibah),
                detailDataGrid = new DetailDataGrid(bbiRskHibahUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskHibah();
            setPanel(gridSkHibah);
        }

        #region --++ Tombol Ribbon Tukar Menukar
        private void bbiRskHibahTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan13), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkHibahTambah == null)
                {
                    formSkHibahTambah = new ucRskHibahForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskHibah)
                    };
                }
                setPanel(formSkHibahTambah);
                formSkHibahTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskHibahUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHibah.dataTerpilih != null)
            {
                if (formSkHibahUbah == null)
                {
                    formSkHibahUbah = new ucRskHibahForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskHibah)
                    };
                }
                formSkHibahUbah.dataTerpilih = gridSkHibah.dataTerpilih;
                setPanel(formSkHibahUbah);
                formSkHibahUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskHibahHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHibah.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkHibah.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalHibahCrud.InputParameters parInp = new SvcWasdalHibahCrud.InputParameters();
                        parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                        parInp.P_ID_SK_WASDAL_PINDAHTANGAN = gridSkHibah.dataTerpilih.ID_SK_WASDAL_PINDAHTANGAN;
                        parInp.P_ID_PEMOHON = gridSkHibah.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkHibah.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkHibah.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkHibah.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkHibah.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkHibah.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkHibah.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkHibah.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkHibah.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkHibah.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkHibah.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkHibah.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkHibah.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkHibah.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkHibah.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkHibah.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkHibah.dataTerpilih.UR_SATKER;
                        simpanDataHibah = new SvcWasdalHibahCrud.execute_pttClient();
                        simpanDataHibah.Open();
                        simpanDataHibah.Beginexecute(parInp, new AsyncCallback(cudRskHibah), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskHibahDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHibah.dataTerpilih != null)
            {
                if (formSkHibahDetail == null)
                {
                    formSkHibahDetail = new ucRskHibahForm("A");
                    formSkHibahDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkHibahDetail.dataTerpilih = gridSkHibah.dataTerpilih;
                setPanel(formSkHibahDetail);
                formSkHibahDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskHibahKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkHibah);
            setTombolRskGrid();
            gridSkHibah.dsDataSource = dsGridRskHibah;
            gridSkHibah.displayData();
        }

        private void bbiRskHibahRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkHibah.teNamaKolom.Text = "";
            gridSkHibah.teCari.Text = "";
            gridSkHibah.fieldDicari = "";
            gridSkHibah.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskHibah();
        }

        private void bbiRskHibahMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskHibah();
            }
        }
        #endregion --++ Tombol Ribbon Hibah

        private void nbiRskHibah_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan13;
            konfigApp.kdPelayanan = "13";
            konfigApp.namaPelayanan = konfigApp.namaLayanan13;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkHibah();
            modeCari = false;
            gridSkHibah.teNamaKolom.Text = "";
            gridSkHibah.teCari.Text = "";
            gridSkHibah.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskHibah();
        }

        #region --++ Ambil Data Hibah
        private void getInitRskHibah()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHibahSkSelect.InputParameters parInp = new SvcWasdalHibahSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                // parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //   parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskHibah = new SvcWasdalHibahSkSelect.execute_pttClient();
                ambilRskHibah.Open();
                ambilRskHibah.Beginexecute(parInp, new AsyncCallback(getRskHibah), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskHibah(IAsyncResult result)
        {
            try
            {
                dOutRskHibah = ambilRskHibah.Endexecute(result);
                ambilRskHibah.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskHibah(dsRskHibah), dOutRskHibah);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskHibah(SvcWasdalHibahSkSelect.OutputParameters dataOut);

        private void dsRskHibah(SvcWasdalHibahSkSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_READ_WASDAL_PT_HIBAH.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_READ_WASDAL_PT_HIBAH[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRskHibah = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dataOut.SF_READ_WASDAL_PT_HIBAH[i].IS_TB = (dataOut.SF_READ_WASDAL_PT_HIBAH[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskHibah.Add(dataOut.SF_READ_WASDAL_PT_HIBAH[i]);
            }
            gridSkHibah.labelTotData.Text = "";
            gridSkHibah.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkHibah.sbCariOnline.Enabled = !modeCari;
            gridSkHibah.dsDataSource = dsGridRskHibah;
            gridSkHibah.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkHibah.teNamaKolom.Text.Trim();
                string xDua = gridSkHibah.teCari.Text.Trim();
                string xTiga = gridSkHibah.fieldDicari;
                gridSkHibah.gvGridSk.ClearColumnsFilter();
                gridSkHibah.teNamaKolom.Text = xSatu;
                gridSkHibah.teCari.Text = xDua;
                gridSkHibah.fieldDicari = xTiga;
            }
            else
                gridSkHibah.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskHibah(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskHibah();
        }
        #endregion Ambil Hibah

        #region --++ Simpan Data Hibah
        SvcWasdalHibahCrud.OutputParameters dOutAmbilDataHibah;
        SvcWasdalHibahCrud.execute_pttClient simpanDataHibah;

        private void simpanDataRskHibah(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHibahCrud.InputParameters parInp = new SvcWasdalHibahCrud.InputParameters();
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_SK_WASDAL_PINDAHTANGAN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.idSkWasdal : formSkHibahUbah.idSkWasdal);//
                parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.idPemohon : formSkHibahUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.rgJenisAset.EditValue.ToString() : formSkHibahUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teJabatan.Text.Trim() : formSkHibahUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkHibahTambah.teNmPenerbitSk.ItemIndex).ToString() : formSkHibahUbah.teNmPenerbitSk.Properties.GetDataSourceValue("KD_INSTANSI", formSkHibahUbah.teNmPenerbitSk.ItemIndex).ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.kodePenerbitSkDetail : formSkHibahUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkHibahTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHibahTambah.teNilaiPenetapan.Text)) : (formSkHibahUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHibahUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teNipPenandaTangan.Text : formSkHibahUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teNamaPenandaTangan.Text : formSkHibahUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teNmPenerbitSk.Text : formSkHibahUbah.teNmPenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teNamaInstansi.Text : formSkHibahUbah.teNamaInstansi.Text);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teNomorSk.Text.Trim() : formSkHibahUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teTanggalSk.EditValue : formSkHibahUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teJenisPemohon.Text : formSkHibahUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.tipePengelola : formSkHibahUbah.tipePengelola);
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teUraianKeputusan.Text : formSkHibahUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teTahunAnggaran.Text : formSkHibahUbah.teTahunAnggaran.Text);

                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teAlamatPihakLain.Text : formSkHibahUbah.teAlamatPihakLain.Text);
                //parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkHibahTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkHibahTambah.teJangkaWaktu.Text)) : (formSkHibahUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkHibahUbah.teJangkaWaktu.Text)));
                //parInp.P_JNS_MITRA = "";
                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teNamaPihakLain.Text : formSkHibahUbah.teNamaPihakLain.Text);
                //parInp.P_PERIODE = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.tePeriode.Text : formSkHibahUbah.tePeriode.Text);
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.tePeruntukan.Text : formSkHibahUbah.tePeruntukan.Text);
                //parInp.P_FILE_SK = ((_mode == "C" || _mode == "CU") ? formSkHibahTambah.teFileSk.Text : formSkHibahUbah.teFileSk.Text);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkHibahTambah.filePath) : konfigApp.FileToByteArray(formSkHibahUbah.filePath));
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;

                simpanDataHibah = new SvcWasdalHibahCrud.execute_pttClient();
                simpanDataHibah.Open();
                simpanDataHibah.Beginexecute(parInp, new AsyncCallback(cudRskHibah), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskHibah(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataHibah = simpanDataHibah.Endexecute(result);
                simpanDataHibah.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsHibah(this.ubahDsHibah), dOutAmbilDataHibah);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsHibah(SvcWasdalHibahCrud.OutputParameters dataOutHibahCrud);

        private void ubahDsHibah(SvcWasdalHibahCrud.OutputParameters dataOutHibahCrud)
        {
            if (dataOutHibahCrud.PO_RESULT == "Y")
            {
                SvcWasdalHibahSkSelect.WASDALSROW_READ_WASDAL_PT_HIBAH dataPenyama = new SvcWasdalHibahSkSelect.WASDALSROW_READ_WASDAL_PT_HIBAH();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkHibahTambah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkHibahTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkHibahTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkHibahTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkHibahTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkHibahTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkHibahTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkHibahTambah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkHibahTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkHibahTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkHibahTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkHibahTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkHibahTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHibahTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkHibahTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkHibahTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkHibahTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkHibahTambah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkHibahTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskHibah == null ? 1 : dsGridRskHibah.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkHibahTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkHibahTambah.teTanggalSk.Text);
                        dataPenyama.THN_ANG = formSkHibahTambah.teTahunAnggaran.Text;
                        dataPenyama.TIPE_PEMOHON = formSkHibahTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkHibahTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkHibahTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkHibahTambah.teUraianKeputusan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkHibahTambah.teNamaPihakLain.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkHibahTambah.teAlamatPihakLain.Text;
                        if (dsGridRskHibah == null) dsGridRskHibah = new ArrayList();
                        dsGridRskHibah.Add(dataPenyama);
                        formSkHibahTambah.gcDaftarAset.Enabled = true;
                        formSkHibahTambah.sbTambah.Enabled = true;
                        formSkHibahTambah.sbHapus.Enabled = true;
                        formSkHibahTambah.sbValidasi.Enabled = true;
                        formSkHibahTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkHibahTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkHibahTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkHibahTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkHibahTambah.sbCariPemohon.Enabled = false;
                        formSkHibahTambah.sbRefresh.Enabled = true;
                        formSkHibahTambah.teNamaInstansi.Properties.ReadOnly = true;
                        formSkHibahTambah.cePilihSemua.Enabled = true;
                        formSkHibahTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkHibahTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkHibahUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkHibahUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkHibahUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkHibahUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkHibahUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkHibahUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkHibahUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkHibahUbah.teNmPenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkHibahUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkHibahUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkHibahUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkHibahUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkHibahUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHibahUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkHibahUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkHibah.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkHibahUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkHibahUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkHibahUbah.teNamaInstansi.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkHibahUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkHibah.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkHibah.dataTerpilih.NUM;
                        //dataPenyama.PERUNTUKAN = formSkHibahUbah.tePeruntukan.Text;
                        dataPenyama.SK_KEPUTUSAN = formSkHibahUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkHibah.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkHibah.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkHibahUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkHibahUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkHibah.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkHibah.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkHibah.dataTerpilih.TOTAL_DATA;
                        //dataPenyama.THN_ANG = formSkHibahUbah.teTahunAnggaran.Text;
                        dataPenyama.UR_KL = formSkHibahUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkHibahUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkHibahUbah.teUraianKeputusan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkHibahUbah.teNamaPihakLain.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkHibahUbah.teAlamatPihakLain.Text;


                        int _indeksData = dsGridRskHibah.IndexOf(gridSkHibah.dataTerpilih);
                        _indeksData = (_indeksData < 0) ? 0 : _indeksData;
                        dsGridRskHibah.Remove(gridSkHibah.dataTerpilih);
                        dsGridRskHibah.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskHibah.Remove(gridSkHibah.dataTerpilih);
                        break;
                }
                gridSkHibah.dsDataSource = dsGridRskHibah;
                gridSkHibah.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data Hibah

        #endregion

        #region pmp
        ucRskPmpGrid gridSkPmp;
        ucRskPmpForm formSkPmpTambah;
        ucRskPmpForm formSkPmpUbah;
        ucRskPmpForm formSkPmpDetail;
        private ArrayList dsGridRskPmp;
        SvcWasdalPmpSkSelect.OutputParameters dOutRskPmp;
        SvcWasdalPmpSkSelect.execute_pttClient ambilRskPmp;

        private void setEventTombolRskPmp()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskPmpTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskPmpUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskPmpHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskPmpDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskPmpKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskPmpRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskPmpMoreDataKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskPmpKembaliKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskPmpKeluarKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkPmp()
        {
            //if (gridSkPmp == null)
            //{
            gridSkPmp = new ucRskPmpGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskPmp),
                detailDataGrid = new DetailDataGrid(bbiRskPmpUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskPmp();
            setPanel(gridSkPmp);
        }

        #region --++ Tombol Ribbon PMP
        private void bbiRskPmpTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan14), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkPmpTambah == null)
                {
                    formSkPmpTambah = new ucRskPmpForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPmp)
                    };
                }
                setPanel(formSkPmpTambah);
                formSkPmpTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskPmpUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPmp.dataTerpilih != null)
            {
                if (formSkPmpUbah == null)
                {
                    formSkPmpUbah = new ucRskPmpForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskPmp)
                    };
                }
                formSkPmpUbah.dataTerpilih = gridSkPmp.dataTerpilih;
                setPanel(formSkPmpUbah);
                formSkPmpUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPmpHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPmp.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkPmp.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalPmpCrud.InputParameters parInp = new SvcWasdalPmpCrud.InputParameters();
                        parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                        parInp.P_ID_SK_WASDAL_PINDAHTANGAN = gridSkPmp.dataTerpilih.ID_SK_WASDAL_PINDAHTANGAN;
                        parInp.P_ID_PEMOHON = gridSkPmp.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkPmp.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkPmp.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkPmp.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkPmp.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkPmp.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkPmp.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkPmp.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkPmp.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkPmp.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkPmp.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkPmp.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkPmp.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkPmp.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkPmp.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkPmp.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkPmp.dataTerpilih.UR_SATKER;
                        ambilDataPmp = new SvcWasdalPmpCrud.execute_pttClient();
                        ambilDataPmp.Open();
                        ambilDataPmp.Beginexecute(parInp, new AsyncCallback(cudRskPmp), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskPmpDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkPmp.dataTerpilih != null)
            {
                if (formSkPmpDetail == null)
                {
                    formSkPmpDetail = new ucRskPmpForm("A");
                    formSkPmpDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkPmpDetail.dataTerpilih = gridSkPmp.dataTerpilih;
                setPanel(formSkPmpDetail);
                formSkPmpDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskPmpKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkPmp);
            setTombolRskGrid();
            gridSkPmp.dsDataSource = dsGridRskPmp;
            gridSkPmp.displayData();
        }

        private void bbiRskPmpRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkPmp.teNamaKolom.Text = "";
            gridSkPmp.teCari.Text = "";
            gridSkPmp.fieldDicari = "";
            gridSkPmp.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskPmp();
        }

        private void bbiRskPmpMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskPmp();
            }
        }

        private void bbiRskPmpKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskPmpKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }
        #endregion --++ Tombol Ribbon  Tukar Menukar

        private void nbiRskPmp_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan14;
            konfigApp.kdPelayanan = "14";
            konfigApp.namaPelayanan = konfigApp.namaLayanan14;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkPmp();
            modeCari = false;
            gridSkPmp.teNamaKolom.Text = "";
            gridSkPmp.teCari.Text = "";
            gridSkPmp.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskPmp();
        }

        #region --++ Ambil Data PMP
        private void getInitRskPmp()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPmpSkSelect.InputParameters parInp = new SvcWasdalPmpSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskPmp = new SvcWasdalPmpSkSelect.execute_pttClient();
                ambilRskPmp.Open();
                ambilRskPmp.Beginexecute(parInp, new AsyncCallback(getRskPmp), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskPmp(IAsyncResult result)
        {
            try
            {
                dOutRskPmp = ambilRskPmp.Endexecute(result);
                ambilRskPmp.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskPmp(dsRskPmp), dOutRskPmp);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskPmp(SvcWasdalPmpSkSelect.OutputParameters dataOut);

        private void dsRskPmp(SvcWasdalPmpSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_PT_MODAL.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_PT_MODAL[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }

            if (dataInisial == true)
            {
                dsGridRskPmp = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_PT_MODAL[i].IS_TB = (dataOut.SF_READ_WASDAL_PT_MODAL[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskPmp.Add(dataOut.SF_READ_WASDAL_PT_MODAL[i]);
            }
            gridSkPmp.labelTotData.Text = "";
            gridSkPmp.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkPmp.sbCariOnline.Enabled = !modeCari;
            gridSkPmp.dsDataSource = dsGridRskPmp;
            gridSkPmp.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkPmp.teNamaKolom.Text.Trim();
                string xDua = gridSkPmp.teCari.Text.Trim();
                string xTiga = gridSkPmp.fieldDicari;
                gridSkPmp.gvGridSk.ClearColumnsFilter();
                gridSkPmp.teNamaKolom.Text = xSatu;
                gridSkPmp.teCari.Text = xDua;
                gridSkPmp.fieldDicari = xTiga;
            }
            else
                gridSkPmp.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskPmp(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskPmp();
        }
        #endregion Ambil Pmp

        #region --++ Simpan Data PMP
        SvcWasdalPmpCrud.OutputParameters dOutAmbilDataPmp;
        SvcWasdalPmpCrud.execute_pttClient ambilDataPmp;

        private void simpanDataRskPmp(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalPmpCrud.InputParameters parInp = new SvcWasdalPmpCrud.InputParameters();
                parInp.P_ID_SK_WASDAL_PINDAHTANGAN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.idSkWasdal : formSkPmpUbah.idSkWasdal);//
                parInp.P_ID_SK_WASDAL_PINDAHTANGANSpecified = true;
                parInp.P_ID_KPKNL = konfigApp.idKpknl;//mngapa diisi dengan ID_KANWIL
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.idPemohon : formSkPmpUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.rgJenisAset.EditValue.ToString() : formSkPmpUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teJabatan.Text.Trim() : formSkPmpUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.lePenerbitSk.EditValue.ToString() : formSkPmpUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.kodePenerbitSkDetail : formSkPmpUbah.kodePenerbitSkDetail);
                //parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkPmpTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPmpTambah.teNilaiPenetapan.Text)) : (formSkPmpUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPmpUbah.teNilaiPenetapan.Text)));
                //parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teNipPenandaTangan.Text : formSkPmpUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teNamaPenandaTangan.Text : formSkPmpUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.lePenerbitSk.Text : formSkPmpUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teNmPenerbitSkDetail.Text : formSkPmpUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teNomorSk.Text.Trim() : formSkPmpUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teTanggalSk.EditValue : formSkPmpUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teJenisPemohon.Text : formSkPmpUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teUraianKeputusan.Text : formSkPmpUbah.teUraianKeputusan.Text);
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teTahunAnggaran.Text : formSkPmpUbah.teTahunAnggaran.Text);
                parInp.P_ALAMAT_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teAlamatPihakLain.Text : formSkPmpUbah.teAlamatPihakLain.Text);
                //parInp.P_JANGKA_WAKTU = ((_mode == "C" || _mode == "CU") ? (formSkPmpTambah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPmpTambah.teJangkaWaktu.Text)) : (formSkPmpUbah.teJangkaWaktu.Text == "" ? 0 : Convert.ToDecimal(formSkPmpUbah.teJangkaWaktu.Text)));
                //parInp.P_JNS_MITRA = "";
                parInp.P_NM_PHK_LAIN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.teNamaPihakLain.Text : formSkPmpUbah.teNamaPihakLain.Text);
                //parInp.P_PERIODE = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.tePeriode.Text : formSkPmpUbah.tePeriode.Text);
                parInp.P_PERUNTUKAN = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.tePeruntukan.Text : formSkPmpUbah.tePeruntukan.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkPmpTambah.tipePengelola : formSkPmpUbah.tipePengelola);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkPmpTambah.filePath) : konfigApp.FileToByteArray(formSkPmpUbah.filePath));
                parInp.P_KD_KL = konfigApp.kodeKl;
                parInp.P_ID_SATKER = konfigApp.idSatker;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = konfigApp.kodeSatker;
                parInp.P_UR_SATKER = konfigApp.namaSatker;

                ambilDataPmp = new SvcWasdalPmpCrud.execute_pttClient();
                ambilDataPmp.Open();
                ambilDataPmp.Beginexecute(parInp, new AsyncCallback(cudRskPmp), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskPmp(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataPmp = ambilDataPmp.Endexecute(result);
                ambilDataPmp.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsPmp(this.ubahDsPmp), dOutAmbilDataPmp);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsPmp(SvcWasdalPmpCrud.OutputParameters dataOutPmpCrud);

        private void ubahDsPmp(SvcWasdalPmpCrud.OutputParameters dataOutPmpCrud)
        {
            if (dataOutPmpCrud.PO_RESULT == "Y")
            {
                SvcWasdalPmpSkSelect.WASDALSROW_READ_WASDAL_PT_MODAL dataPenyama = new SvcWasdalPmpSkSelect.WASDALSROW_READ_WASDAL_PT_MODAL();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkPmpTambah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkPmpTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPmpTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkPmpTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPmpTambah.teJabatan.Text;
                        //dataPenyama.JANGKA_WAKTU = Convert.ToDecimal(formSkPmpTambah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkPmpTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPmpTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPmpTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPmpTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPmpTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPmpTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPmpTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPmpTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPmpTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPmpTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkPmpTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPmpTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PHK_LAIN = formSkPmpTambah.teNamaPihakLain.Text;
                        dataPenyama.NIP_PENANDATANGAN = formSkPmpTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPmpTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPmpTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskPmp == null ? 1 : dsGridRskPmp.Count + 1);
                        dataPenyama.PERUNTUKAN = formSkPmpTambah.tePeruntukan.Text;
                        dataPenyama.SK_KEPUTUSAN = formSkPmpTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPmpTambah.teTanggalSk.Text);
                        dataPenyama.THN_ANG = formSkPmpTambah.teTahunAnggaran.Text;
                        dataPenyama.TIPE_PEMOHON = formSkPmpTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkPmpTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPmpTambah.teNamaPemohon.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPmpTambah.teAlamatPihakLain.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPmpTambah.teUraianKeputusan.Text;
                        if (dsGridRskPmp == null) dsGridRskPmp = new ArrayList();
                        dsGridRskPmp.Add(dataPenyama);
                        formSkPmpTambah.gcDaftarAset.Enabled = true;
                        formSkPmpTambah.sbTambah.Enabled = true;
                        formSkPmpTambah.sbHapus.Enabled = true;
                        formSkPmpTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkPmpTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkPmpTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkPmpTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkPmpTambah.sbCariPemohon.Enabled = false;
                        formSkPmpTambah.sbRefresh.Enabled = true;
                        formSkPmpTambah.sbValidasi.Enabled = true;
                        formSkPmpTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkPmpTambah.cePilihSemua.Enabled = true;
                        formSkPmpTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkPmpTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_SK_WASDAL_PINDAHTANGAN = formSkPmpUbah.idSkWasdal;
                        dataPenyama.ID_PEMOHON = formSkPmpUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkPmpUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkPmpUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkPmpUbah.teJabatan.Text;
                        //dataPenyama.JANGKA_WAKTU = Convert.ToDecimal(formSkPmpUbah.teJangkaWaktu.Text);
                        dataPenyama.KD_KL = formSkPmpUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkPmpUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkPmpUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkPmpUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkPmpUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkPmpUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkPmpUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkPmpUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkPmpUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkPmpUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkPmp.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkPmpUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkPmpUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkPmpUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkPmpUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkPmp.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NM_PHK_LAIN = formSkPmpUbah.teNamaPihakLain.Text;
                        dataPenyama.NUM = gridSkPmp.dataTerpilih.NUM;
                        dataPenyama.PERUNTUKAN = formSkPmpUbah.tePeruntukan.Text;
                        dataPenyama.SK_KEPUTUSAN = formSkPmpUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkPmp.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkPmp.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkPmpUbah.teTanggalSk.Text);
                        dataPenyama.THN_ANG = formSkPmpUbah.teTahunAnggaran.Text;
                        dataPenyama.TIPE_PEMOHON = formSkPmpUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkPmp.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkPmp.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkPmp.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkPmpUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkPmpUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkPmpUbah.teUraianKeputusan.Text;
                        dataPenyama.ALAMAT_PHK_LAIN = formSkPmpUbah.teAlamatPihakLain.Text;
                        int _indeksData = dsGridRskPmp.IndexOf(gridSkPmp.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskPmp.Remove(gridSkPmp.dataTerpilih);
                        dsGridRskPmp.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskPmp.Remove(gridSkPmp.dataTerpilih);
                        break;
                }
                gridSkPmp.dsDataSource = dsGridRskPmp;
                gridSkPmp.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data PMP

        #endregion PMP

        #region penghapusan
        #region -->> [15] Pemusnahan BMN
        ucRskMusnahBmnGrid gridSkMusnahBmn;
        ucRskMusnahBmnForm formSkMusnahBmnTambah;
        ucRskMusnahBmnForm formSkMusnahBmnUbah;
        ucRskMusnahBmnForm formSkMusnahBmnDetail;
        private ArrayList dsGridRskMusnahBmn;
        SvcWasdalHapusSkSelect.OutputParameters dOutRskMusnahBmn;
        SvcWasdalHapusSkSelect.execute_pttClient ambilRskMusnahBmn;

        private void setEventTombolRskMusnahBmn()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskMusnahBmnKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkMusnahBmn()
        {
            //if (gridSkMusnahBmn == null)
            //{
            gridSkMusnahBmn = new ucRskMusnahBmnGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskMusnahBmn),
                detailDataGrid = new DetailDataGrid(bbiRskMusnahBmnUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskMusnahBmn();
            setPanel(gridSkMusnahBmn);
        }

        #region --++ Tombol Ribbon Pemusnahan BMN
        private void bbiRskMusnahBmnTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan15), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkMusnahBmnTambah == null)
                {
                    formSkMusnahBmnTambah = new ucRskMusnahBmnForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskMusnahBmn),
                        //delegateDuaParameter = new DelegateDuaParameter(refreshDsGridMusnahBmn)
                    };
                }
                setPanel(formSkMusnahBmnTambah);
                formSkMusnahBmnTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskMusnahBmnUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkMusnahBmn.dataTerpilih != null)
            {
                if (formSkMusnahBmnUbah == null)
                {
                    formSkMusnahBmnUbah = new ucRskMusnahBmnForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskMusnahBmn),
                        //delegateDuaParameter = new DelegateDuaParameter(refreshDsGridMusnahBmn)
                    };
                }
                formSkMusnahBmnUbah.dataTerpilih = gridSkMusnahBmn.dataTerpilih;
                setPanel(formSkMusnahBmnUbah);
                formSkMusnahBmnUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskMusnahBmnHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkMusnahBmn.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkMusnahBmn.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalHapusCud.InputParameters parInp = new SvcWasdalHapusCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_HAPUS = gridSkMusnahBmn.dataTerpilih.ID_SK_WASDAL_HAPUS;
                        parInp.P_ID_SK_WASDAL_HAPUSSpecified = true;
                        parInp.P_ID_PEMOHON = gridSkMusnahBmn.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkMusnahBmn.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkMusnahBmn.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkMusnahBmn.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkMusnahBmn.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkMusnahBmn.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkMusnahBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkMusnahBmn.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkMusnahBmn.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkMusnahBmn.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkMusnahBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkMusnahBmn.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkMusnahBmn.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkMusnahBmn.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkMusnahBmn.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkMusnahBmn.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkMusnahBmn.dataTerpilih.UR_SATKER;
                        simpanDataMusnahBmn = new SvcWasdalHapusCud.execute_pttClient();
                        simpanDataMusnahBmn.Open();
                        simpanDataMusnahBmn.Beginexecute(parInp, new AsyncCallback(cudRskMusnahBmn), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskMusnahBmnDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkMusnahBmn.dataTerpilih != null)
            {
                if (formSkMusnahBmnDetail == null)
                {
                    formSkMusnahBmnDetail = new ucRskMusnahBmnForm("A");
                    formSkMusnahBmnDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkMusnahBmnDetail.dataTerpilih = gridSkMusnahBmn.dataTerpilih;
                setPanel(formSkMusnahBmnDetail);
                formSkMusnahBmnDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskMusnahBmnKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkMusnahBmn);
            setTombolRskGrid();
            gridSkMusnahBmn.dsDataSource = dsGridRskMusnahBmn;
            gridSkMusnahBmn.displayData();
        }

        private void bbiRskMusnahBmnRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkMusnahBmn.teNamaKolom.Text = "";
            gridSkMusnahBmn.teCari.Text = "";
            gridSkMusnahBmn.fieldDicari = "";
            gridSkMusnahBmn.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskMusnahBmn();
        }

        private void bbiRskMusnahBmnMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskMusnahBmn();
            }
        }

        private void bbiRskMusnahBmnKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskMusnahBmnKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon  Pemusnahan BMN

        private void nbiRskPemusnahanBmn_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan15;
            konfigApp.kdPelayanan = "15";
            konfigApp.namaPelayanan = konfigApp.namaLayanan15;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkMusnahBmn();
            modeCari = false;
            gridSkMusnahBmn.teNamaKolom.Text = "";
            gridSkMusnahBmn.teCari.Text = "";
            gridSkMusnahBmn.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskMusnahBmn();
        }

        #region --++ Ambil Data Pemusnahan BMN
        private void getInitRskMusnahBmn()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusSkSelect.InputParameters parInp = new SvcWasdalHapusSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_KPKNL = {1} AND THN_ANG='{2}' {3}", konfigApp.kdPelayanan, konfigApp.idKpknl, konfigApp.tahunAnggaran, this.strCari);
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskMusnahBmn = new SvcWasdalHapusSkSelect.execute_pttClient();
                ambilRskMusnahBmn.Open();
                ambilRskMusnahBmn.Beginexecute(parInp, new AsyncCallback(getRskMusnahBmn), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskMusnahBmn(IAsyncResult result)
        {
            try
            {
                dOutRskMusnahBmn = ambilRskMusnahBmn.Endexecute(result);
                ambilRskMusnahBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskMusnahBmn(dsRskMusnahBmn), dOutRskMusnahBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskMusnahBmn(SvcWasdalHapusSkSelect.OutputParameters dataOut);

        private void dsRskMusnahBmn(SvcWasdalHapusSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_HAPUS.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_HAPUS[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }

            if (dataInisial == true)
            {
                dsGridRskMusnahBmn = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_HAPUS[i].IS_TB = (dataOut.SF_READ_WASDAL_HAPUS[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskMusnahBmn.Add(dataOut.SF_READ_WASDAL_HAPUS[i]);
            }
            gridSkMusnahBmn.labelTotData.Text = "";
            gridSkMusnahBmn.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkMusnahBmn.sbCariOnline.Enabled = !modeCari;
            gridSkMusnahBmn.dsDataSource = dsGridRskMusnahBmn;
            gridSkMusnahBmn.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkMusnahBmn.teNamaKolom.Text.Trim();
                string xDua = gridSkMusnahBmn.teCari.Text.Trim();
                string xTiga = gridSkMusnahBmn.fieldDicari;
                gridSkMusnahBmn.gvGridSk.ClearColumnsFilter();
                gridSkMusnahBmn.teNamaKolom.Text = xSatu;
                gridSkMusnahBmn.teCari.Text = xDua;
                gridSkMusnahBmn.fieldDicari = xTiga;
            }
            else
                gridSkMusnahBmn.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskMusnahBmn(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskMusnahBmn();
        }
        #endregion Ambil Pemusnahan BMN

        #region --++ Simpan Data Pemusnahan BMN
        SvcWasdalHapusCud.OutputParameters dOutAmbilDataMusnahBmn;
        SvcWasdalHapusCud.execute_pttClient simpanDataMusnahBmn;

        private void simpanDataRskMusnahBmn(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusCud.InputParameters parInp = new SvcWasdalHapusCud.InputParameters();
                parInp.P_ID_SK_WASDAL_HAPUSSpecified = true;
                parInp.P_ID_SK_WASDAL_HAPUS = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.idSkWasdal : formSkMusnahBmnUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.idPemohon : formSkMusnahBmnUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_SATKER = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.idPemohon : formSkMusnahBmnUbah.idPemohon);//
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teKodePemohon.Text : formSkMusnahBmnUbah.teKodePemohon.Text);//
                parInp.P_UR_SATKER = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teNamaPemohon.Text : formSkMusnahBmnUbah.teNamaPemohon.Text);//

                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.rgJenisAset.EditValue.ToString() : formSkMusnahBmnUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teJabatan.Text.Trim() : formSkMusnahBmnUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.lePenerbitSk.EditValue.ToString() : formSkMusnahBmnUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.kodePenerbitSkDetail : formSkMusnahBmnUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkMusnahBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkMusnahBmnTambah.teNilaiPenetapan.Text)) : (formSkMusnahBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkMusnahBmnUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teNipPenandaTangan.Text : formSkMusnahBmnUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teNamaPenandaTangan.Text : formSkMusnahBmnUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.lePenerbitSk.Text : formSkMusnahBmnUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teNmPenerbitSkDetail.Text : formSkMusnahBmnUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teNomorSk.Text.Trim() : formSkMusnahBmnUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teTanggalSk.EditValue : formSkMusnahBmnUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teJenisPemohon.Text : formSkMusnahBmnUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teUraianKeputusan.Text : formSkMusnahBmnUbah.teUraianKeputusan.Text);
                parInp.P_ALASAN = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teAlasan.Text : formSkMusnahBmnUbah.teAlasan.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.tipePengelola : formSkMusnahBmnUbah.tipePengelola);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkMusnahBmnTambah.filePath) : konfigApp.FileToByteArray(formSkMusnahBmnUbah.filePath));
                parInp.P_NAMA_PENGADILAN = null;
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teTahunAnggaran.Text : formSkMusnahBmnUbah.teTahunAnggaran.Text);
                parInp.P_KD_KL = ((_mode == "C" || _mode == "CU") ? formSkMusnahBmnTambah.teKodeKl.Text : formSkMusnahBmnUbah.teKodeKl.Text);//

                simpanDataMusnahBmn = new SvcWasdalHapusCud.execute_pttClient();
                simpanDataMusnahBmn.Open();
                simpanDataMusnahBmn.Beginexecute(parInp, new AsyncCallback(cudRskMusnahBmn), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskMusnahBmn(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataMusnahBmn = simpanDataMusnahBmn.Endexecute(result);
                simpanDataMusnahBmn.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsMusnahBmn(this.ubahDsMusnahBmn), dOutAmbilDataMusnahBmn);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsMusnahBmn(SvcWasdalHapusCud.OutputParameters dataOutMusnahBmnCrud);

        private void ubahDsMusnahBmn(SvcWasdalHapusCud.OutputParameters dataOutMusnahBmnCrud)
        {
            if (dataOutMusnahBmnCrud.PO_RESULT == "Y")
            {
                SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS dataPenyama = new SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALASAN = formSkMusnahBmnTambah.teAlasan.Text;
                        dataPenyama.ID_PEMOHON = formSkMusnahBmnTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkMusnahBmnTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkMusnahBmnTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkMusnahBmnTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkMusnahBmnTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkMusnahBmnTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkMusnahBmnTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkMusnahBmnTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkMusnahBmnTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkMusnahBmnTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkMusnahBmnTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkMusnahBmnTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkMusnahBmnTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkMusnahBmnTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkMusnahBmnTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkMusnahBmnTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkMusnahBmnTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkMusnahBmnTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskMusnahBmn == null ? 1 : dsGridRskMusnahBmn.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkMusnahBmnTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkMusnahBmnTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkMusnahBmnTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkMusnahBmnTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkMusnahBmnTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkMusnahBmnTambah.teUraianKeputusan.Text;
                        dataPenyama.NAMA_PENGADILAN = null;
                        if (dsGridRskMusnahBmn == null) dsGridRskMusnahBmn = new ArrayList();
                        dsGridRskMusnahBmn.Add(dataPenyama);
                        gridSkMusnahBmn.dataTerpilih = dataPenyama;
                        formSkMusnahBmnTambah.gcDaftarAset.Enabled = true;
                        formSkMusnahBmnTambah.sbTambah.Enabled = true;
                        formSkMusnahBmnTambah.sbHapus.Enabled = true;
                        formSkMusnahBmnTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkMusnahBmnTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkMusnahBmnTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkMusnahBmnTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkMusnahBmnTambah.sbCariPemohon.Enabled = false;
                        formSkMusnahBmnTambah.sbRefresh.Enabled = true;
                        formSkMusnahBmnTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkMusnahBmnTambah.cePilihSemua.Enabled = true;
                        formSkMusnahBmnTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkMusnahBmnTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ID_PEMOHON = formSkMusnahBmnUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkMusnahBmnUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkMusnahBmnUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkMusnahBmnUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkMusnahBmnUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkMusnahBmnUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkMusnahBmnUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkMusnahBmnUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkMusnahBmnUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkMusnahBmnUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkMusnahBmnUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkMusnahBmnUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkMusnahBmnUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkMusnahBmnUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkMusnahBmn.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkMusnahBmnUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkMusnahBmnUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkMusnahBmnUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkMusnahBmnUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkMusnahBmn.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkMusnahBmn.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkMusnahBmnUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkMusnahBmn.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkMusnahBmn.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkMusnahBmnUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkMusnahBmnUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkMusnahBmn.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkMusnahBmn.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkMusnahBmn.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkMusnahBmnUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkMusnahBmnUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkMusnahBmnUbah.teUraianKeputusan.Text;
                        int _indeksData = dsGridRskMusnahBmn.IndexOf(gridSkMusnahBmn.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskMusnahBmn.Remove(gridSkMusnahBmn.dataTerpilih);
                        dsGridRskMusnahBmn.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskMusnahBmn.Remove(gridSkMusnahBmn.dataTerpilih);
                        break;
                }
                gridSkMusnahBmn.dsDataSource = dsGridRskMusnahBmn;
                gridSkMusnahBmn.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data Pemusnahan BMN

        #region --++ Refresh Grid Karena Perubahan Tindak Lanjut
        private void refreshDsGridMusnahBmn(string _nilaiPenetapan = "0", string _kuantitas = "0")
        {
            SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS dataPenyama = new SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS();
            dataPenyama.ALASAN = gridSkMusnahBmn.dataTerpilih.ALASAN;
            dataPenyama.ID_PEMOHON = gridSkMusnahBmn.dataTerpilih.ID_PEMOHON;
            dataPenyama.ID_PEMOHONSpecified = gridSkMusnahBmn.dataTerpilih.ID_PEMOHONSpecified;
            dataPenyama.ID_SATKER = gridSkMusnahBmn.dataTerpilih.ID_SATKER;
            dataPenyama.ID_SATKERSpecified = gridSkMusnahBmn.dataTerpilih.ID_SATKERSpecified;
            dataPenyama.ID_USER = gridSkMusnahBmn.dataTerpilih.ID_USER;
            dataPenyama.ID_USERSpecified = gridSkMusnahBmn.dataTerpilih.ID_USERSpecified;
            dataPenyama.IS_TB = gridSkMusnahBmn.dataTerpilih.IS_TB;
            dataPenyama.JABATAN_TTD = gridSkMusnahBmn.dataTerpilih.JABATAN_TTD;
            dataPenyama.KD_KL = gridSkMusnahBmn.dataTerpilih.KD_KL;
            dataPenyama.KD_PELAYANAN = gridSkMusnahBmn.dataTerpilih.KD_PELAYANAN;
            dataPenyama.KD_PEMOHON = gridSkMusnahBmn.dataTerpilih.KD_PEMOHON;
            dataPenyama.KD_PENERBIT_SK = gridSkMusnahBmn.dataTerpilih.KD_PENERBIT_SK;
            dataPenyama.KD_PENERBIT_SK_DTL = gridSkMusnahBmn.dataTerpilih.KD_PENERBIT_SK_DTL;
            dataPenyama.KD_SATKER = gridSkMusnahBmn.dataTerpilih.KD_SATKER;
            dataPenyama.KUANTITAS_SK = Convert.ToDecimal(_kuantitas);
            dataPenyama.KUANTITAS_SKSpecified = gridSkMusnahBmn.dataTerpilih.KUANTITAS_SKSpecified;
            dataPenyama.NAMA_PENGADILAN = gridSkMusnahBmn.dataTerpilih.NAMA_PENGADILAN;
            dataPenyama.NILAI_PENETAPAN = Convert.ToDecimal(_nilaiPenetapan);
            dataPenyama.NILAI_PENETAPANSpecified = gridSkMusnahBmn.dataTerpilih.NILAI_PENETAPANSpecified;
            dataPenyama.NIP_PENANDATANGAN = gridSkMusnahBmn.dataTerpilih.NIP_PENANDATANGAN;
            dataPenyama.NM_PELAYANAN = gridSkMusnahBmn.dataTerpilih.NM_PELAYANAN;
            dataPenyama.NM_PEMOHON = gridSkMusnahBmn.dataTerpilih.NM_PEMOHON;
            dataPenyama.NM_PENANDATANGAN = gridSkMusnahBmn.dataTerpilih.NM_PENANDATANGAN;
            dataPenyama.NM_PENERBIT_SK = gridSkMusnahBmn.dataTerpilih.NM_PENERBIT_SK;
            dataPenyama.NM_PENERBIT_SK_DTL = gridSkMusnahBmn.dataTerpilih.NM_PENERBIT_SK_DTL;
            dataPenyama.NM_PENGGUNA = gridSkMusnahBmn.dataTerpilih.NM_PENGGUNA;
            dataPenyama.NUM = gridSkMusnahBmn.dataTerpilih.NUM;
            dataPenyama.NUMSpecified = gridSkMusnahBmn.dataTerpilih.NUMSpecified;
            dataPenyama.SK_KEPUTUSAN = gridSkMusnahBmn.dataTerpilih.SK_KEPUTUSAN;
            dataPenyama.STATUS_BMN = gridSkMusnahBmn.dataTerpilih.STATUS_BMN;
            dataPenyama.TGL_CREATED = gridSkMusnahBmn.dataTerpilih.TGL_CREATED;
            dataPenyama.TGL_CREATEDSpecified = gridSkMusnahBmn.dataTerpilih.TGL_CREATEDSpecified;
            dataPenyama.TGL_SK = gridSkMusnahBmn.dataTerpilih.TGL_SK;
            dataPenyama.TGL_SKSpecified = gridSkMusnahBmn.dataTerpilih.TGL_SKSpecified;
            dataPenyama.TIPE_PEMOHON = gridSkMusnahBmn.dataTerpilih.TIPE_PEMOHON;
            dataPenyama.TOT_BMN = gridSkMusnahBmn.dataTerpilih.TOT_BMN;
            dataPenyama.TOT_BMNSpecified = gridSkMusnahBmn.dataTerpilih.TOT_BMNSpecified;
            dataPenyama.TOT_STATUS = gridSkMusnahBmn.dataTerpilih.TOT_STATUS;
            dataPenyama.TOT_STATUSSpecified = gridSkMusnahBmn.dataTerpilih.TOT_STATUSSpecified;
            dataPenyama.TOTAL_DATA = gridSkMusnahBmn.dataTerpilih.TOTAL_DATA;
            dataPenyama.TOTAL_DATASpecified = gridSkMusnahBmn.dataTerpilih.TOTAL_DATASpecified;
            dataPenyama.UR_KL = gridSkMusnahBmn.dataTerpilih.UR_KL;
            dataPenyama.UR_SATKER = gridSkMusnahBmn.dataTerpilih.UR_SATKER;
            dataPenyama.URAIAN_KEPUTUSAN = gridSkMusnahBmn.dataTerpilih.URAIAN_KEPUTUSAN;
            int _indeksData = dsGridRskMusnahBmn.IndexOf(gridSkMusnahBmn.dataTerpilih);
            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
            dsGridRskMusnahBmn.Remove(gridSkMusnahBmn.dataTerpilih);
            dsGridRskMusnahBmn.Insert(_indeksData, dataPenyama);
            gridSkMusnahBmn.dsDataSource = dsGridRskMusnahBmn;
            gridSkMusnahBmn.displayData();
        }
        #endregion

        #endregion Pemusnahan BMN

        #region -->> [16] Hapus BMN KPP
        ucRskHapusBmnKppGrid gridSkHapusBmnKpp;
        ucRskHapusBmnKppForm formSkHapusBmnKppTambah;
        ucRskHapusBmnKppForm formSkHapusBmnKppUbah;
        ucRskHapusBmnKppForm formSkHapusBmnKppDetail;
        private ArrayList dsGridRskHapusBmnKpp;
        SvcWasdalHapusSkSelect.OutputParameters dOutRskHapusBmnKpp;
        SvcWasdalHapusSkSelect.execute_pttClient ambilRskHapusBmnKpp;

        private void setEventTombolRskHapusBmnKpp()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKppKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkHapusBmnKpp()
        {
            //if (gridSkHapusBmnKpp == null)
            //{
            gridSkHapusBmnKpp = new ucRskHapusBmnKppGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskHapusBmnKpp),
                detailDataGrid = new DetailDataGrid(bbiRskHapusBmnKppUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskHapusBmnKpp();
            setPanel(gridSkHapusBmnKpp);
        }

        #region --++ Tombol Ribbon Hapus BMN KPP
        private void bbiRskHapusBmnKppTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan16), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkHapusBmnKppTambah == null)
                {
                    formSkHapusBmnKppTambah = new ucRskHapusBmnKppForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskHapusBmnKpp),
                        //delegateDuaParameter = new DelegateDuaParameter(refreshDsGridHapusBmnKpp)
                    };
                }
                setPanel(formSkHapusBmnKppTambah);
                formSkHapusBmnKppTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskHapusBmnKppUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHapusBmnKpp.dataTerpilih != null)
            {
                if (formSkHapusBmnKppUbah == null)
                {
                    formSkHapusBmnKppUbah = new ucRskHapusBmnKppForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskHapusBmnKpp),
                        //delegateDuaParameter = new DelegateDuaParameter(refreshDsGridHapusBmnKpp)
                    };
                }
                formSkHapusBmnKppUbah.dataTerpilih = gridSkHapusBmnKpp.dataTerpilih;
                setPanel(formSkHapusBmnKppUbah);
                formSkHapusBmnKppUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskHapusBmnKppHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHapusBmnKpp.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkHapusBmnKpp.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalHapusCud.InputParameters parInp = new SvcWasdalHapusCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_HAPUS = gridSkHapusBmnKpp.dataTerpilih.ID_SK_WASDAL_HAPUS;
                        parInp.P_ID_SK_WASDAL_HAPUSSpecified = true;
                        parInp.P_ID_PEMOHON = gridSkHapusBmnKpp.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkHapusBmnKpp.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkHapusBmnKpp.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkHapusBmnKpp.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkHapusBmnKpp.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkHapusBmnKpp.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkHapusBmnKpp.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkHapusBmnKpp.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkHapusBmnKpp.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkHapusBmnKpp.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkHapusBmnKpp.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkHapusBmnKpp.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkHapusBmnKpp.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkHapusBmnKpp.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkHapusBmnKpp.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkHapusBmnKpp.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkHapusBmnKpp.dataTerpilih.UR_SATKER;
                        simpanDataHapusBmnKpp = new SvcWasdalHapusCud.execute_pttClient();
                        simpanDataHapusBmnKpp.Open();
                        simpanDataHapusBmnKpp.Beginexecute(parInp, new AsyncCallback(cudRskHapusBmnKpp), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskHapusBmnKppDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHapusBmnKpp.dataTerpilih != null)
            {
                if (formSkHapusBmnKppDetail == null)
                {
                    formSkHapusBmnKppDetail = new ucRskHapusBmnKppForm("A");
                    formSkHapusBmnKppDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkHapusBmnKppDetail.dataTerpilih = gridSkHapusBmnKpp.dataTerpilih;
                setPanel(formSkHapusBmnKppDetail);
                formSkHapusBmnKppDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskHapusBmnKppKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkHapusBmnKpp);
            setTombolRskGrid();
            gridSkHapusBmnKpp.dsDataSource = dsGridRskHapusBmnKpp;
            gridSkHapusBmnKpp.displayData();
        }

        private void bbiRskHapusBmnKppRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkHapusBmnKpp.teNamaKolom.Text = "";
            gridSkHapusBmnKpp.teCari.Text = "";
            gridSkHapusBmnKpp.fieldDicari = "";
            gridSkHapusBmnKpp.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskHapusBmnKpp();
        }

        private void bbiRskHapusBmnKppMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskHapusBmnKpp();
            }
        }

        private void bbiRskHapusBmnKppKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskHapusBmnKppKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon Hapus BMN KPP

        private void nbiRskHapusBmnKpp_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan16;
            konfigApp.kdPelayanan = "16";
            konfigApp.namaPelayanan = konfigApp.namaLayanan16;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkHapusBmnKpp();
            modeCari = false;
            gridSkHapusBmnKpp.teNamaKolom.Text = "";
            gridSkHapusBmnKpp.teCari.Text = "";
            gridSkHapusBmnKpp.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskHapusBmnKpp();
        }

        #region --++ Ambil Data Hapus BMN KPP
        private void getInitRskHapusBmnKpp()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusSkSelect.InputParameters parInp = new SvcWasdalHapusSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_KPKNL = {1} AND THN_ANG='{2}' {3}", konfigApp.kdPelayanan, konfigApp.idKpknl, konfigApp.tahunAnggaran, this.strCari);
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskHapusBmnKpp = new SvcWasdalHapusSkSelect.execute_pttClient();
                ambilRskHapusBmnKpp.Open();
                ambilRskHapusBmnKpp.Beginexecute(parInp, new AsyncCallback(getRskHapusBmnKpp), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskHapusBmnKpp(IAsyncResult result)
        {
            try
            {
                dOutRskHapusBmnKpp = ambilRskHapusBmnKpp.Endexecute(result);
                ambilRskHapusBmnKpp.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskHapusBmnKpp(dsRskHapusBmnKpp), dOutRskHapusBmnKpp);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskHapusBmnKpp(SvcWasdalHapusSkSelect.OutputParameters dataOut);

        private void dsRskHapusBmnKpp(SvcWasdalHapusSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_HAPUS.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_HAPUS[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }

            if (dataInisial == true)
            {
                dsGridRskHapusBmnKpp = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_HAPUS[i].IS_TB = (dataOut.SF_READ_WASDAL_HAPUS[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskHapusBmnKpp.Add(dataOut.SF_READ_WASDAL_HAPUS[i]);
            }
            gridSkHapusBmnKpp.labelTotData.Text = "";
            gridSkHapusBmnKpp.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkHapusBmnKpp.sbCariOnline.Enabled = !modeCari;
            gridSkHapusBmnKpp.dsDataSource = dsGridRskHapusBmnKpp;
            gridSkHapusBmnKpp.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkHapusBmnKpp.teNamaKolom.Text.Trim();
                string xDua = gridSkHapusBmnKpp.teCari.Text.Trim();
                string xTiga = gridSkHapusBmnKpp.fieldDicari;
                gridSkHapusBmnKpp.gvGridSk.ClearColumnsFilter();
                gridSkHapusBmnKpp.teNamaKolom.Text = xSatu;
                gridSkHapusBmnKpp.teCari.Text = xDua;
                gridSkHapusBmnKpp.fieldDicari = xTiga;
            }
            else
                gridSkHapusBmnKpp.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskHapusBmnKpp(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskHapusBmnKpp();
        }
        #endregion Ambil Hapus BMN KPP

        #region --++ Simpan Data Hapus BMN KPP
        SvcWasdalHapusCud.OutputParameters dOutAmbilDataHapusBmnKpp;
        SvcWasdalHapusCud.execute_pttClient simpanDataHapusBmnKpp;

        private void simpanDataRskHapusBmnKpp(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusCud.InputParameters parInp = new SvcWasdalHapusCud.InputParameters();
                parInp.P_ID_SK_WASDAL_HAPUSSpecified = true;
                parInp.P_ID_SK_WASDAL_HAPUS = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.idSkWasdal : formSkHapusBmnKppUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.idPemohon : formSkHapusBmnKppUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_SATKER = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.idPemohon : formSkHapusBmnKppUbah.idPemohon);//
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teKodePemohon.Text : formSkHapusBmnKppUbah.teKodePemohon.Text);//
                parInp.P_UR_SATKER = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teNamaPemohon.Text : formSkHapusBmnKppUbah.teNamaPemohon.Text);//

                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.rgJenisAset.EditValue.ToString() : formSkHapusBmnKppUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teJabatan.Text.Trim() : formSkHapusBmnKppUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.lePenerbitSk.EditValue.ToString() : formSkHapusBmnKppUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.kodePenerbitSkDetail : formSkHapusBmnKppUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkHapusBmnKppTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKppTambah.teNilaiPenetapan.Text)) : (formSkHapusBmnKppUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKppUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teNipPenandaTangan.Text : formSkHapusBmnKppUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teNamaPenandaTangan.Text : formSkHapusBmnKppUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.lePenerbitSk.Text : formSkHapusBmnKppUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teNmPenerbitSkDetail.Text : formSkHapusBmnKppUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teNomorSk.Text.Trim() : formSkHapusBmnKppUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teTanggalSk.EditValue : formSkHapusBmnKppUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teJenisPemohon.Text : formSkHapusBmnKppUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teUraianKeputusan.Text : formSkHapusBmnKppUbah.teUraianKeputusan.Text);
                parInp.P_ALASAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teAlasan.Text : formSkHapusBmnKppUbah.teAlasan.Text);
                parInp.P_NAMA_PENGADILAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teNamaPengadilan.Text.Trim() : formSkHapusBmnKppUbah.teNamaPengadilan.Text.Trim());
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.tipePengelola : formSkHapusBmnKppUbah.tipePengelola);
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkHapusBmnKppTambah.filePath) : konfigApp.FileToByteArray(formSkHapusBmnKppUbah.filePath));
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teTahunAnggaran.Text : formSkHapusBmnKppUbah.teTahunAnggaran.Text);
                parInp.P_KD_KL = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKppTambah.teKodeKl.Text : formSkHapusBmnKppUbah.teKodeKl.Text);//
                simpanDataHapusBmnKpp = new SvcWasdalHapusCud.execute_pttClient();
                simpanDataHapusBmnKpp.Open();
                simpanDataHapusBmnKpp.Beginexecute(parInp, new AsyncCallback(cudRskHapusBmnKpp), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskHapusBmnKpp(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataHapusBmnKpp = simpanDataHapusBmnKpp.Endexecute(result);
                simpanDataHapusBmnKpp.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsHapusBmnKpp(this.ubahDsHapusBmnKpp), dOutAmbilDataHapusBmnKpp);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsHapusBmnKpp(SvcWasdalHapusCud.OutputParameters dataOutHapusBmnKppCrud);

        private void ubahDsHapusBmnKpp(SvcWasdalHapusCud.OutputParameters dataOutHapusBmnKppCrud)
        {
            if (dataOutHapusBmnKppCrud.PO_RESULT == "Y")
            {
                SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS dataPenyama = new SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALASAN = formSkHapusBmnKppTambah.teAlasan.Text;
                        dataPenyama.ID_PEMOHON = formSkHapusBmnKppTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkHapusBmnKppTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkHapusBmnKppTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkHapusBmnKppTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkHapusBmnKppTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkHapusBmnKppTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkHapusBmnKppTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkHapusBmnKppTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkHapusBmnKppTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkHapusBmnKppTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKppTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkHapusBmnKppTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKppTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkHapusBmnKppTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkHapusBmnKppTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkHapusBmnKppTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkHapusBmnKppTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkHapusBmnKppTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskHapusBmnKpp == null ? 1 : dsGridRskHapusBmnKpp.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkHapusBmnKppTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkHapusBmnKppTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkHapusBmnKppTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkHapusBmnKppTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkHapusBmnKppTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkHapusBmnKppTambah.teUraianKeputusan.Text;
                        dataPenyama.NAMA_PENGADILAN = formSkHapusBmnKppTambah.teNamaPengadilan.Text;
                        if (dsGridRskHapusBmnKpp == null) dsGridRskHapusBmnKpp = new ArrayList();
                        dsGridRskHapusBmnKpp.Add(dataPenyama);
                        gridSkHapusBmnKpp.dataTerpilih = dataPenyama;
                        formSkHapusBmnKppTambah.gcDaftarAset.Enabled = true;
                        formSkHapusBmnKppTambah.sbTambah.Enabled = true;
                        formSkHapusBmnKppTambah.sbHapus.Enabled = true;
                        formSkHapusBmnKppTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkHapusBmnKppTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkHapusBmnKppTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkHapusBmnKppTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkHapusBmnKppTambah.sbCariPemohon.Enabled = false;
                        formSkHapusBmnKppTambah.sbRefresh.Enabled = true;
                        formSkHapusBmnKppTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkHapusBmnKppTambah.cePilihSemua.Enabled = true;
                        formSkHapusBmnKppTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkHapusBmnKppTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ALASAN = formSkHapusBmnKppUbah.teAlasan.Text;
                        dataPenyama.ID_PEMOHON = formSkHapusBmnKppUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkHapusBmnKppUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkHapusBmnKppUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkHapusBmnKppUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkHapusBmnKppUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkHapusBmnKppUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkHapusBmnKppUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkHapusBmnKppUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkHapusBmnKppUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkHapusBmnKppUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKppUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkHapusBmnKppUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKppUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkHapusBmnKppUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkHapusBmnKpp.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkHapusBmnKppUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkHapusBmnKppUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkHapusBmnKppUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkHapusBmnKppUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkHapusBmnKpp.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkHapusBmnKpp.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkHapusBmnKppUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkHapusBmnKpp.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkHapusBmnKpp.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkHapusBmnKppUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkHapusBmnKppUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkHapusBmnKpp.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkHapusBmnKpp.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkHapusBmnKpp.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkHapusBmnKppUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkHapusBmnKppUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkHapusBmnKppUbah.teUraianKeputusan.Text;
                        dataPenyama.NAMA_PENGADILAN = formSkHapusBmnKppUbah.teNamaPengadilan.Text;
                        int _indeksData = dsGridRskHapusBmnKpp.IndexOf(gridSkHapusBmnKpp.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskHapusBmnKpp.Remove(gridSkHapusBmnKpp.dataTerpilih);
                        dsGridRskHapusBmnKpp.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskHapusBmnKpp.Remove(gridSkHapusBmnKpp.dataTerpilih);
                        break;
                }
                gridSkHapusBmnKpp.dsDataSource = dsGridRskHapusBmnKpp;
                gridSkHapusBmnKpp.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data Hapus BMN KPP

        #region --++ Refresh Grid Karena Perubahan Tindak Lanjut
        private void refreshDsGridHapusBmnKpp(string _nilaiPenetapan = "0", string _kuantitas = "0")
        {
            SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS dataPenyama = new SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS();
            dataPenyama.ALASAN = gridSkHapusBmnKpp.dataTerpilih.ALASAN;
            dataPenyama.ID_PEMOHON = gridSkHapusBmnKpp.dataTerpilih.ID_PEMOHON;
            dataPenyama.ID_PEMOHONSpecified = gridSkHapusBmnKpp.dataTerpilih.ID_PEMOHONSpecified;
            dataPenyama.ID_SATKER = gridSkHapusBmnKpp.dataTerpilih.ID_SATKER;
            dataPenyama.ID_SATKERSpecified = gridSkHapusBmnKpp.dataTerpilih.ID_SATKERSpecified;
            dataPenyama.ID_USER = gridSkHapusBmnKpp.dataTerpilih.ID_USER;
            dataPenyama.ID_USERSpecified = gridSkHapusBmnKpp.dataTerpilih.ID_USERSpecified;
            dataPenyama.IS_TB = gridSkHapusBmnKpp.dataTerpilih.IS_TB;
            dataPenyama.JABATAN_TTD = gridSkHapusBmnKpp.dataTerpilih.JABATAN_TTD;
            dataPenyama.KD_KL = gridSkHapusBmnKpp.dataTerpilih.KD_KL;
            dataPenyama.KD_PELAYANAN = gridSkHapusBmnKpp.dataTerpilih.KD_PELAYANAN;
            dataPenyama.KD_PEMOHON = gridSkHapusBmnKpp.dataTerpilih.KD_PEMOHON;
            dataPenyama.KD_PENERBIT_SK = gridSkHapusBmnKpp.dataTerpilih.KD_PENERBIT_SK;
            dataPenyama.KD_PENERBIT_SK_DTL = gridSkHapusBmnKpp.dataTerpilih.KD_PENERBIT_SK_DTL;
            dataPenyama.KD_SATKER = gridSkHapusBmnKpp.dataTerpilih.KD_SATKER;
            dataPenyama.KUANTITAS_SK = Convert.ToDecimal(_kuantitas);
            dataPenyama.KUANTITAS_SKSpecified = gridSkHapusBmnKpp.dataTerpilih.KUANTITAS_SKSpecified;
            dataPenyama.NAMA_PENGADILAN = gridSkHapusBmnKpp.dataTerpilih.NAMA_PENGADILAN;
            dataPenyama.NILAI_PENETAPAN = Convert.ToDecimal(_nilaiPenetapan);
            dataPenyama.NILAI_PENETAPANSpecified = gridSkHapusBmnKpp.dataTerpilih.NILAI_PENETAPANSpecified;
            dataPenyama.NIP_PENANDATANGAN = gridSkHapusBmnKpp.dataTerpilih.NIP_PENANDATANGAN;
            dataPenyama.NM_PELAYANAN = gridSkHapusBmnKpp.dataTerpilih.NM_PELAYANAN;
            dataPenyama.NM_PEMOHON = gridSkHapusBmnKpp.dataTerpilih.NM_PEMOHON;
            dataPenyama.NM_PENANDATANGAN = gridSkHapusBmnKpp.dataTerpilih.NM_PENANDATANGAN;
            dataPenyama.NM_PENERBIT_SK = gridSkHapusBmnKpp.dataTerpilih.NM_PENERBIT_SK;
            dataPenyama.NM_PENERBIT_SK_DTL = gridSkHapusBmnKpp.dataTerpilih.NM_PENERBIT_SK_DTL;
            dataPenyama.NM_PENGGUNA = gridSkHapusBmnKpp.dataTerpilih.NM_PENGGUNA;
            dataPenyama.NUM = gridSkHapusBmnKpp.dataTerpilih.NUM;
            dataPenyama.NUMSpecified = gridSkHapusBmnKpp.dataTerpilih.NUMSpecified;
            dataPenyama.SK_KEPUTUSAN = gridSkHapusBmnKpp.dataTerpilih.SK_KEPUTUSAN;
            dataPenyama.STATUS_BMN = gridSkHapusBmnKpp.dataTerpilih.STATUS_BMN;
            dataPenyama.TGL_CREATED = gridSkHapusBmnKpp.dataTerpilih.TGL_CREATED;
            dataPenyama.TGL_CREATEDSpecified = gridSkHapusBmnKpp.dataTerpilih.TGL_CREATEDSpecified;
            dataPenyama.TGL_SK = gridSkHapusBmnKpp.dataTerpilih.TGL_SK;
            dataPenyama.TGL_SKSpecified = gridSkHapusBmnKpp.dataTerpilih.TGL_SKSpecified;
            dataPenyama.TIPE_PEMOHON = gridSkHapusBmnKpp.dataTerpilih.TIPE_PEMOHON;
            dataPenyama.TOT_BMN = gridSkHapusBmnKpp.dataTerpilih.TOT_BMN;
            dataPenyama.TOT_BMNSpecified = gridSkHapusBmnKpp.dataTerpilih.TOT_BMNSpecified;
            dataPenyama.TOT_STATUS = gridSkHapusBmnKpp.dataTerpilih.TOT_STATUS;
            dataPenyama.TOT_STATUSSpecified = gridSkHapusBmnKpp.dataTerpilih.TOT_STATUSSpecified;
            dataPenyama.TOTAL_DATA = gridSkHapusBmnKpp.dataTerpilih.TOTAL_DATA;
            dataPenyama.TOTAL_DATASpecified = gridSkHapusBmnKpp.dataTerpilih.TOTAL_DATASpecified;
            dataPenyama.UR_KL = gridSkHapusBmnKpp.dataTerpilih.UR_KL;
            dataPenyama.UR_SATKER = gridSkHapusBmnKpp.dataTerpilih.UR_SATKER;
            dataPenyama.URAIAN_KEPUTUSAN = gridSkHapusBmnKpp.dataTerpilih.URAIAN_KEPUTUSAN;
            int _indeksData = dsGridRskHapusBmnKpp.IndexOf(gridSkHapusBmnKpp.dataTerpilih);
            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
            dsGridRskHapusBmnKpp.Remove(gridSkHapusBmnKpp.dataTerpilih);
            dsGridRskHapusBmnKpp.Insert(_indeksData, dataPenyama);
            gridSkHapusBmnKpp.dsDataSource = dsGridRskHapusBmnKpp;
            gridSkHapusBmnKpp.displayData();
        }
        #endregion

        #endregion Hapus BMN KPP

        #region -->> [17] Hapus BMN KSL
        ucRskHapusBmnKslGrid gridSkHapusBmnKsl;
        ucRskHapusBmnKslForm formSkHapusBmnKslTambah;
        ucRskHapusBmnKslForm formSkHapusBmnKslUbah;
        ucRskHapusBmnKslForm formSkHapusBmnKslDetail;
        private ArrayList dsGridRskHapusBmnKsl;
        SvcWasdalHapusSkSelect.OutputParameters dOutRskHapusBmnKsl;
        SvcWasdalHapusSkSelect.execute_pttClient ambilRskHapusBmnKsl;

        private void setEventTombolRskHapusBmnKsl()
        {
            resetEventTombolRsk();
            bbiRskTambah.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslTambahKlik);
            bbiRskUbah.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslUbahKlik);
            bbiRskHapus.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslHapusKlik);
            bbiRskDetail.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslDetailKlik);
            bbiRskKembaliGrid.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslKembaliGridKlik);
            bbiRskRefresh.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslRefreshKlik);
            bbiRskMoreData.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslMoreDataKlik);
            bbiRskKeluar.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslKeluarKlik);
            bbiRskKembali.ItemClick += new ItemClickEventHandler(bbiRskHapusBmnKslKembaliKlik);
            bbiExportSk.ItemClick += new ItemClickEventHandler(bbiRskExportKlik);
        }

        private void initGridSkHapusBmnKsl()
        {
            //if (gridSkHapusBmnKsl == null)
            //{
            gridSkHapusBmnKsl = new ucRskHapusBmnKslGrid()
            {
                cariDataOnline = new CariDataOnline(cariDataRskHapusBmnKsl),
                detailDataGrid = new DetailDataGrid(bbiRskHapusBmnKslUbahKlik)
            };
            //}
            setTombolRskGrid();
            setEventTombolRskHapusBmnKsl();
            setPanel(gridSkHapusBmnKsl);
        }

        #region --++ Tombol Ribbon  Hapus BMN KSL
        private void bbiRskHapusBmnKslTambahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (MessageBox.Show(String.Format("Apakah anda ingin membuat Surat Keputusan Baru \n{0}?", konfigApp.namaLayanan15), konfigApp.judulKonfirmasi,
                MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                if (formSkHapusBmnKslTambah == null)
                {
                    formSkHapusBmnKslTambah = new ucRskHapusBmnKslForm("C")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskHapusBmnKsl),
                        //delegateDuaParameter = new DelegateDuaParameter(refreshDsGridHapusBmnKsl)
                    };
                }
                setPanel(formSkHapusBmnKslTambah);
                formSkHapusBmnKslTambah.inisialisasiForm();
                setTombolRskForm();
            }
        }

        private void bbiRskHapusBmnKslUbahKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHapusBmnKsl.dataTerpilih != null)
            {
                if (formSkHapusBmnKslUbah == null)
                {
                    formSkHapusBmnKslUbah = new ucRskHapusBmnKslForm("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRskHapusBmnKsl),
                        //delegateDuaParameter = new DelegateDuaParameter(refreshDsGridHapusBmnKsl)
                    };
                }
                formSkHapusBmnKslUbah.dataTerpilih = gridSkHapusBmnKsl.dataTerpilih;
                setPanel(formSkHapusBmnKslUbah);
                formSkHapusBmnKslUbah.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskHapusBmnKslHapusKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHapusBmnKsl.dataTerpilih != null)
            {
                if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusSk, gridSkHapusBmnKsl.dataTerpilih.SK_KEPUTUSAN), konfigApp.judulKonfirmasi,
                    MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    try
                    {
                        myThread = new Thread(new ThreadStart(ShowProgresBar));
                        myThread.Start();
                        SvcWasdalHapusCud.InputParameters parInp = new SvcWasdalHapusCud.InputParameters();
                        parInp.P_ID_SK_WASDAL_HAPUS = gridSkHapusBmnKsl.dataTerpilih.ID_SK_WASDAL_HAPUS;
                        parInp.P_ID_SK_WASDAL_HAPUSSpecified = true;
                        parInp.P_ID_PEMOHON = gridSkHapusBmnKsl.dataTerpilih.ID_PEMOHON;
                        parInp.P_ID_PEMOHONSpecified = true;
                        parInp.P_ID_USER = gridSkHapusBmnKsl.dataTerpilih.ID_USER;
                        parInp.P_ID_USERSpecified = true;
                        parInp.P_IS_TB = gridSkHapusBmnKsl.dataTerpilih.IS_TB;
                        parInp.P_JABATAN_TTD = gridSkHapusBmnKsl.dataTerpilih.JABATAN_TTD;
                        parInp.P_KD_PELAYANAN = gridSkHapusBmnKsl.dataTerpilih.KD_PELAYANAN;
                        parInp.P_KD_PENERBIT_SK = gridSkHapusBmnKsl.dataTerpilih.KD_PENERBIT_SK;
                        parInp.P_KD_PENERBIT_SK_DTL = gridSkHapusBmnKsl.dataTerpilih.KD_PENERBIT_SK_DTL;
                        parInp.P_NIP_PENANDATANGAN = gridSkHapusBmnKsl.dataTerpilih.NIP_PENANDATANGAN;
                        parInp.P_NM_PENANDATANGAN = gridSkHapusBmnKsl.dataTerpilih.NM_PENANDATANGAN;
                        parInp.P_NM_PENERBIT_SK = gridSkHapusBmnKsl.dataTerpilih.NM_PENERBIT_SK;
                        parInp.P_NM_PENERBIT_SK_DTL = gridSkHapusBmnKsl.dataTerpilih.NM_PENERBIT_SK_DTL;
                        parInp.P_SELECT = "D";
                        modeCrud = Convert.ToChar(parInp.P_SELECT);
                        parInp.P_SK_KEPUTUSAN = gridSkHapusBmnKsl.dataTerpilih.SK_KEPUTUSAN;
                        parInp.P_TIPE_PEMOHON = gridSkHapusBmnKsl.dataTerpilih.TIPE_PEMOHON;
                        parInp.P_URAIAN_KEPUTUSAN = gridSkHapusBmnKsl.dataTerpilih.URAIAN_KEPUTUSAN;
                        parInp.P_ID_SATKER = gridSkHapusBmnKsl.dataTerpilih.ID_SATKER;
                        parInp.P_ID_SATKERSpecified = true;
                        parInp.P_KD_SATKER = gridSkHapusBmnKsl.dataTerpilih.KD_SATKER;
                        parInp.P_UR_SATKER = gridSkHapusBmnKsl.dataTerpilih.UR_SATKER;
                        simpanDataHapusBmnKsl = new SvcWasdalHapusCud.execute_pttClient();
                        simpanDataHapusBmnKsl.Open();
                        simpanDataHapusBmnKsl.Beginexecute(parInp, new AsyncCallback(cudRskHapusBmnKsl), "");
                    }
                    catch
                    {
                        this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                        this.Invoke(new AktifkanForm(aktifkanForm), "");
                        MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
                    }
                }
            }
        }

        private void bbiRskHapusBmnKslDetailKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridSkHapusBmnKsl.dataTerpilih != null)
            {
                if (formSkHapusBmnKslDetail == null)
                {
                    formSkHapusBmnKslDetail = new ucRskHapusBmnKslForm("A");
                    formSkHapusBmnKslDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                }
                formSkHapusBmnKslDetail.dataTerpilih = gridSkHapusBmnKsl.dataTerpilih;
                setPanel(formSkHapusBmnKslDetail);
                formSkHapusBmnKslDetail.inisialisasiForm();
                setTombolRskForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiRskHapusBmnKslKembaliGridKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridSkHapusBmnKsl);
            setTombolRskGrid();
            gridSkHapusBmnKsl.dsDataSource = dsGridRskHapusBmnKsl;
            gridSkHapusBmnKsl.displayData();
        }

        private void bbiRskHapusBmnKslRefreshKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            strCari = "";
            modeCari = false;
            gridSkHapusBmnKsl.teNamaKolom.Text = "";
            gridSkHapusBmnKsl.teCari.Text = "";
            gridSkHapusBmnKsl.fieldDicari = "";
            gridSkHapusBmnKsl.dataInisial = true;
            this.dataInisial = true;
            this.getInitRskHapusBmnKsl();
        }

        private void bbiRskHapusBmnKslMoreDataKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (this.masihAdaData == true)
            {
                this.dataInisial = false;
                this.getInitRskHapusBmnKsl();
            }
        }

        private void bbiRskHapusBmnKslKeluarKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiRskHapusBmnKslKembaliKlik(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            panelKoorSatker.Controls.Clear();
            rpRekamSK.Visible = false;
        }

        #endregion --++ Tombol Ribbon  Hapus BMN KSL

        private void nbiRskHapusBmnKsl_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perekaman SK";
            konfigApp.strSubMenu = konfigApp.namaLayanan17;
            konfigApp.kdPelayanan = "17";
            konfigApp.namaPelayanan = konfigApp.namaLayanan17;
            this.Enabled = false;
            this.inisialisasiForm();
            rpRekamSK.Visible = true;
            ribbon.SelectedPage = rpRekamSK;
            initGridSkHapusBmnKsl();
            modeCari = false;
            gridSkHapusBmnKsl.teNamaKolom.Text = "";
            gridSkHapusBmnKsl.teCari.Text = "";
            gridSkHapusBmnKsl.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitRskHapusBmnKsl();
        }

        #region --++ Ambil Data  Hapus BMN KSL
        private void getInitRskHapusBmnKsl()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusSkSelect.InputParameters parInp = new SvcWasdalHapusSkSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "y";
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND ID_KPKNL = {1} AND THN_ANG='{2}' {3}", konfigApp.kdPelayanan, konfigApp.idKpknl, konfigApp.tahunAnggaran, this.strCari);
                //parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON = {2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);

                parInp.STR_WHERE = konfigApp.wherePerekamanSKnonSatker() + this.strCari;

                ambilRskHapusBmnKsl = new SvcWasdalHapusSkSelect.execute_pttClient();
                ambilRskHapusBmnKsl.Open();
                ambilRskHapusBmnKsl.Beginexecute(parInp, new AsyncCallback(getRskHapusBmnKsl), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRskHapusBmnKsl(IAsyncResult result)
        {
            try
            {
                dOutRskHapusBmnKsl = ambilRskHapusBmnKsl.Endexecute(result);
                ambilRskHapusBmnKsl.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsRskHapusBmnKsl(dsRskHapusBmnKsl), dOutRskHapusBmnKsl);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsRskHapusBmnKsl(SvcWasdalHapusSkSelect.OutputParameters dataOut);

        private void dsRskHapusBmnKsl(SvcWasdalHapusSkSelect.OutputParameters dataOut)
        {
            int jmlData = dataOut.SF_READ_WASDAL_HAPUS.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlData == 0) ? jmlData.ToString() : dataOut.SF_READ_WASDAL_HAPUS[jmlData - 1].TOTAL_DATA.ToString();
            if (jmlData == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiRskMoreData.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiRskMoreData.Enabled = false;
                if (jmlData > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlData;
            }

            if (dataInisial == true)
            {
                dsGridRskHapusBmnKsl = new ArrayList();
            }
            for (int i = 0; i < jmlData; i++)
            {
                dataOut.SF_READ_WASDAL_HAPUS[i].IS_TB = (dataOut.SF_READ_WASDAL_HAPUS[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRskHapusBmnKsl.Add(dataOut.SF_READ_WASDAL_HAPUS[i]);
            }
            gridSkHapusBmnKsl.labelTotData.Text = "";
            gridSkHapusBmnKsl.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridSkHapusBmnKsl.sbCariOnline.Enabled = !modeCari;
            gridSkHapusBmnKsl.dsDataSource = dsGridRskHapusBmnKsl;
            gridSkHapusBmnKsl.displayData();
            if (modeCari == true)
            {
                string xSatu = gridSkHapusBmnKsl.teNamaKolom.Text.Trim();
                string xDua = gridSkHapusBmnKsl.teCari.Text.Trim();
                string xTiga = gridSkHapusBmnKsl.fieldDicari;
                gridSkHapusBmnKsl.gvGridSk.ClearColumnsFilter();
                gridSkHapusBmnKsl.teNamaKolom.Text = xSatu;
                gridSkHapusBmnKsl.teCari.Text = xDua;
                gridSkHapusBmnKsl.fieldDicari = xTiga;
            }
            else
                gridSkHapusBmnKsl.gvGridSk.ClearColumnsFilter();
        }

        private void cariDataRskHapusBmnKsl(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCari = true;
            dataInisial = initModeCari;
            getInitRskHapusBmnKsl();
        }
        #endregion Ambil  Hapus BMN KSL

        #region --++ Simpan Data  Hapus BMN KSL
        SvcWasdalHapusCud.OutputParameters dOutAmbilDataHapusBmnKsl;
        SvcWasdalHapusCud.execute_pttClient simpanDataHapusBmnKsl;

        private void simpanDataRskHapusBmnKsl(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcWasdalHapusCud.InputParameters parInp = new SvcWasdalHapusCud.InputParameters();
                parInp.P_ID_SK_WASDAL_HAPUSSpecified = true;
                parInp.P_ID_SK_WASDAL_HAPUS = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.idSkWasdal : formSkHapusBmnKslUbah.idSkWasdal);//
                parInp.P_ID_KPKNL = konfigApp.idKpknl;
                parInp.P_ID_KPKNLSpecified = (konfigApp.idKpknl == 0 ? false : true);
                parInp.P_ID_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.idPemohon : formSkHapusBmnKslUbah.idPemohon);//
                parInp.P_ID_PEMOHONSpecified = true;
                parInp.P_ID_SATKER = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.idPemohon : formSkHapusBmnKslUbah.idPemohon);//
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KD_SATKER = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teKodePemohon.Text : formSkHapusBmnKslUbah.teKodePemohon.Text);//
                parInp.P_UR_SATKER = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teNamaPemohon.Text : formSkHapusBmnKslUbah.teNamaPemohon.Text);//


                parInp.P_ID_USER = konfigApp.idUser;
                parInp.P_ID_USERSpecified = true;
                parInp.P_IS_TB = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.rgJenisAset.EditValue.ToString() : formSkHapusBmnKslUbah.rgJenisAset.EditValue.ToString());
                parInp.P_JABATAN_TTD = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teJabatan.Text.Trim() : formSkHapusBmnKslUbah.teJabatan.Text.Trim());
                parInp.P_KD_PELAYANAN = konfigApp.kdPelayanan;
                parInp.P_KD_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.lePenerbitSk.EditValue.ToString() : formSkHapusBmnKslUbah.lePenerbitSk.EditValue.ToString());
                parInp.P_KD_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.kodePenerbitSkDetail : formSkHapusBmnKslUbah.kodePenerbitSkDetail);
                parInp.P_NILAI_PENETAPAN = ((_mode == "C" || _mode == "CU") ? (formSkHapusBmnKslTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKslTambah.teNilaiPenetapan.Text)) : (formSkHapusBmnKslUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKslUbah.teNilaiPenetapan.Text)));
                parInp.P_NILAI_PENETAPANSpecified = true;
                parInp.P_NIP_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teNipPenandaTangan.Text : formSkHapusBmnKslUbah.teNipPenandaTangan.Text);
                parInp.P_NM_PENANDATANGAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teNamaPenandaTangan.Text : formSkHapusBmnKslUbah.teNamaPenandaTangan.Text);
                parInp.P_NM_PENERBIT_SK = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.lePenerbitSk.Text : formSkHapusBmnKslUbah.lePenerbitSk.Text);
                parInp.P_NM_PENERBIT_SK_DTL = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teNmPenerbitSkDetail.Text : formSkHapusBmnKslUbah.namaPenerbitSkDetail);
                string _penggantiChar = (_mode == "CU" ? "U" : _mode);
                string _charSementara = (_mode == "CU" ? "Z" : _mode);
                parInp.P_SELECT = _penggantiChar;
                modeCrud = Convert.ToChar(_charSementara);
                parInp.P_SK_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teNomorSk.Text.Trim() : formSkHapusBmnKslUbah.teNomorSk.Text.Trim());
                parInp.P_TGL_CREATED = ((_mode == "C" || _mode == "CU") ? konfigApp.DateToString(DateTime.Now) : null);
                parInp.P_TGL_SK = konfigApp.DateToString(Convert.ToDateTime(((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teTanggalSk.EditValue : formSkHapusBmnKslUbah.teTanggalSk.EditValue)));
                parInp.P_TIPE_PEMOHON = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teJenisPemohon.Text : formSkHapusBmnKslUbah.teJenisPemohon.Text);
                parInp.P_TIPE_PENGELOLA = konfigApp.tipePengelola;
                parInp.P_URAIAN_KEPUTUSAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teUraianKeputusan.Text : formSkHapusBmnKslUbah.teUraianKeputusan.Text);
                parInp.P_ALASAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teAlasan.Text : formSkHapusBmnKslUbah.teAlasan.Text);
                parInp.P_TIPE_PENGELOLA = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.tipePengelola : formSkHapusBmnKslUbah.tipePengelola);
                parInp.P_NAMA_PENGADILAN = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teNamaPengadilan.Text.Trim() : formSkHapusBmnKslUbah.teNamaPengadilan.Text.Trim());
                //parInp.P_FILE_DOK = ((_mode == "C" || _mode == "CU") ? konfigApp.FileToByteArray(formSkHapusBmnKslTambah.filePath) : konfigApp.FileToByteArray(formSkHapusBmnKslUbah.filePath));
                parInp.P_THN_ANG = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teTahunAnggaran.Text : formSkHapusBmnKslUbah.teTahunAnggaran.Text);
                parInp.P_KD_KL = ((_mode == "C" || _mode == "CU") ? formSkHapusBmnKslTambah.teKodeKl.Text : formSkHapusBmnKslUbah.teKodeKl.Text);//

                simpanDataHapusBmnKsl = new SvcWasdalHapusCud.execute_pttClient();
                simpanDataHapusBmnKsl.Open();
                simpanDataHapusBmnKsl.Beginexecute(parInp, new AsyncCallback(cudRskHapusBmnKsl), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            }
        }

        private void cudRskHapusBmnKsl(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataHapusBmnKsl = simpanDataHapusBmnKsl.Endexecute(result);
                simpanDataHapusBmnKsl.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsHapusBmnKsl(this.ubahDsHapusBmnKsl), dOutAmbilDataHapusBmnKsl);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsHapusBmnKsl(SvcWasdalHapusCud.OutputParameters dataOutHapusBmnKslCrud);

        private void ubahDsHapusBmnKsl(SvcWasdalHapusCud.OutputParameters dataOutHapusBmnKslCrud)
        {
            if (dataOutHapusBmnKslCrud.PO_RESULT == "Y")
            {
                SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS dataPenyama = new SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS();
                dataPenyama.ID_PEMOHONSpecified = true;
                dataPenyama.ID_SATKERSpecified = true;
                dataPenyama.ID_USER = konfigApp.idUser;
                dataPenyama.ID_USERSpecified = true;
                dataPenyama.KD_PELAYANAN = konfigApp.kdPelayanan;
                dataPenyama.KUANTITAS_SKSpecified = true;
                dataPenyama.NILAI_PENETAPANSpecified = true;
                dataPenyama.NUMSpecified = true;
                dataPenyama.TGL_CREATEDSpecified = true;
                dataPenyama.TGL_SKSpecified = true;
                dataPenyama.TOT_BMNSpecified = true;
                dataPenyama.TOT_STATUSSpecified = true;
                dataPenyama.TOTAL_DATASpecified = true;
                switch (modeCrud.ToString())
                {
                    case "C":
                    case "Z":
                        dataPenyama.ALASAN = formSkHapusBmnKslTambah.teAlasan.Text;
                        dataPenyama.ID_PEMOHON = formSkHapusBmnKslTambah.idPemohon;
                        dataPenyama.ID_SATKER = formSkHapusBmnKslTambah.idPemohon;
                        dataPenyama.IS_TB = (formSkHapusBmnKslTambah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkHapusBmnKslTambah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkHapusBmnKslTambah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkHapusBmnKslTambah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkHapusBmnKslTambah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkHapusBmnKslTambah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkHapusBmnKslTambah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkHapusBmnKslTambah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKslTambah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkHapusBmnKslTambah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKslTambah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkHapusBmnKslTambah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = konfigApp.namaPelayanan;
                        dataPenyama.NM_PEMOHON = formSkHapusBmnKslTambah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkHapusBmnKslTambah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkHapusBmnKslTambah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkHapusBmnKslTambah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = "";
                        dataPenyama.NUM = (dsGridRskHapusBmnKsl == null ? 1 : dsGridRskHapusBmnKsl.Count + 1);
                        dataPenyama.SK_KEPUTUSAN = formSkHapusBmnKslTambah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = "";
                        dataPenyama.TGL_CREATED = DateTime.Now;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkHapusBmnKslTambah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkHapusBmnKslTambah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = 0;
                        dataPenyama.TOT_STATUS = null;
                        dataPenyama.TOTAL_DATA = null;
                        dataPenyama.UR_KL = formSkHapusBmnKslTambah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkHapusBmnKslTambah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkHapusBmnKslTambah.teUraianKeputusan.Text;
                        dataPenyama.NAMA_PENGADILAN = formSkHapusBmnKslTambah.teNamaPengadilan.Text;
                        dsGridRskHapusBmnKsl.Add(dataPenyama);
                        gridSkHapusBmnKsl.dataTerpilih = dataPenyama;
                        formSkHapusBmnKslTambah.gcDaftarAset.Enabled = true;
                        formSkHapusBmnKslTambah.sbTambah.Enabled = true;
                        formSkHapusBmnKslTambah.sbHapus.Enabled = true;
                        formSkHapusBmnKslTambah.rgJenisAset.Properties.ReadOnly = true;
                        formSkHapusBmnKslTambah.teNomorSk.Properties.ReadOnly = true;
                        formSkHapusBmnKslTambah.teTanggalSk.Properties.ReadOnly = true;
                        formSkHapusBmnKslTambah.teJenisPemohon.Properties.ReadOnly = true;
                        formSkHapusBmnKslTambah.sbCariPemohon.Enabled = false;
                        formSkHapusBmnKslTambah.sbRefresh.Enabled = true;
                        formSkHapusBmnKslTambah.lePenerbitSk.Properties.ReadOnly = true;
                        formSkHapusBmnKslTambah.cePilihSemua.Enabled = true;
                        formSkHapusBmnKslTambah.teKodePemohon.Properties.ReadOnly = true;
                        //formSkHapusBmnKslTambah.statusForm = "CU";
                        break;
                    case "U":
                        dataPenyama.ALASAN = formSkHapusBmnKslUbah.teAlasan.Text;
                        dataPenyama.ID_PEMOHON = formSkHapusBmnKslUbah.idPemohon;
                        dataPenyama.ID_SATKER = formSkHapusBmnKslUbah.idPemohon;
                        dataPenyama.IS_TB = (formSkHapusBmnKslUbah.rgJenisAset.SelectedIndex == 0 ? konfigApp.namaTb : konfigApp.namaNonTb);
                        dataPenyama.JABATAN_TTD = formSkHapusBmnKslUbah.teJabatan.Text;
                        dataPenyama.KD_KL = formSkHapusBmnKslUbah.teKodeKl.Text;
                        dataPenyama.KD_PEMOHON = formSkHapusBmnKslUbah.teKodePemohon.Text;
                        dataPenyama.KD_PENERBIT_SK = formSkHapusBmnKslUbah.lePenerbitSk.EditValue.ToString();
                        dataPenyama.KD_PENERBIT_SK_DTL = formSkHapusBmnKslUbah.kodePenerbitSkDetail;
                        dataPenyama.KD_SATKER = formSkHapusBmnKslUbah.teKodePemohon.Text;
                        dataPenyama.KUANTITAS_SK = formSkHapusBmnKslUbah.teKuantitas.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKslUbah.teKuantitas.Text);
                        dataPenyama.NILAI_PENETAPAN = formSkHapusBmnKslUbah.teNilaiPenetapan.Text == "" ? 0 : Convert.ToDecimal(formSkHapusBmnKslUbah.teNilaiPenetapan.Text);
                        dataPenyama.NIP_PENANDATANGAN = formSkHapusBmnKslUbah.teNipPenandaTangan.Text;
                        dataPenyama.NM_PELAYANAN = gridSkHapusBmnKsl.dataTerpilih.NM_PELAYANAN;
                        dataPenyama.NM_PEMOHON = formSkHapusBmnKslUbah.teNamaPemohon.Text;
                        dataPenyama.NM_PENANDATANGAN = formSkHapusBmnKslUbah.teNamaPenandaTangan.Text;
                        dataPenyama.NM_PENERBIT_SK = formSkHapusBmnKslUbah.lePenerbitSk.Text;
                        dataPenyama.NM_PENERBIT_SK_DTL = formSkHapusBmnKslUbah.namaPenerbitSkDetail;
                        dataPenyama.NM_PENGGUNA = gridSkHapusBmnKsl.dataTerpilih.NM_PENGGUNA;
                        dataPenyama.NUM = gridSkHapusBmnKsl.dataTerpilih.NUM;
                        dataPenyama.SK_KEPUTUSAN = formSkHapusBmnKslUbah.teNomorSk.Text;
                        dataPenyama.STATUS_BMN = gridSkHapusBmnKsl.dataTerpilih.STATUS_BMN;
                        dataPenyama.TGL_CREATED = gridSkHapusBmnKsl.dataTerpilih.TGL_CREATED;
                        dataPenyama.TGL_SK = Convert.ToDateTime(formSkHapusBmnKslUbah.teTanggalSk.Text);
                        dataPenyama.TIPE_PEMOHON = formSkHapusBmnKslUbah.teJenisPemohon.Text;
                        dataPenyama.TOT_BMN = gridSkHapusBmnKsl.dataTerpilih.TOT_BMN;
                        dataPenyama.TOT_STATUS = gridSkHapusBmnKsl.dataTerpilih.TOT_STATUS;
                        dataPenyama.TOTAL_DATA = gridSkHapusBmnKsl.dataTerpilih.TOTAL_DATA;
                        dataPenyama.UR_KL = formSkHapusBmnKslUbah.teNamaKl.Text;
                        dataPenyama.UR_SATKER = formSkHapusBmnKslUbah.teNamaPemohon.Text;
                        dataPenyama.URAIAN_KEPUTUSAN = formSkHapusBmnKslUbah.teUraianKeputusan.Text;
                        dataPenyama.NAMA_PENGADILAN = formSkHapusBmnKslUbah.teNamaPengadilan.Text;
                        int _indeksData = dsGridRskHapusBmnKsl.IndexOf(gridSkHapusBmnKsl.dataTerpilih);
                        _indeksData = (_indeksData < 0 ? 0 : _indeksData);
                        dsGridRskHapusBmnKsl.Remove(gridSkHapusBmnKsl.dataTerpilih);
                        dsGridRskHapusBmnKsl.Insert(_indeksData, dataPenyama);
                        break;
                    case "D":
                        dsGridRskHapusBmnKsl.Remove(gridSkHapusBmnKsl.dataTerpilih);
                        break;
                }
                gridSkHapusBmnKsl.dsDataSource = dsGridRskHapusBmnKsl;
                gridSkHapusBmnKsl.displayData();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data  Hapus BMN KSL

        #region --++ Refresh Grid Karena Perubahan Tindak Lanjut
        private void refreshDsGridHapusBmnKsl(string _nilaiPenetapan = "0", string _kuantitas = "0")
        {
            SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS dataPenyama = new SvcWasdalHapusSkSelect.WASDALSROW_READ_WASDAL_HAPUS();
            dataPenyama.ALASAN = gridSkHapusBmnKsl.dataTerpilih.ALASAN;
            dataPenyama.ID_PEMOHON = gridSkHapusBmnKsl.dataTerpilih.ID_PEMOHON;
            dataPenyama.ID_PEMOHONSpecified = gridSkHapusBmnKsl.dataTerpilih.ID_PEMOHONSpecified;
            dataPenyama.ID_SATKER = gridSkHapusBmnKsl.dataTerpilih.ID_SATKER;
            dataPenyama.ID_SATKERSpecified = gridSkHapusBmnKsl.dataTerpilih.ID_SATKERSpecified;
            dataPenyama.ID_USER = gridSkHapusBmnKsl.dataTerpilih.ID_USER;
            dataPenyama.ID_USERSpecified = gridSkHapusBmnKsl.dataTerpilih.ID_USERSpecified;
            dataPenyama.IS_TB = gridSkHapusBmnKsl.dataTerpilih.IS_TB;
            dataPenyama.JABATAN_TTD = gridSkHapusBmnKsl.dataTerpilih.JABATAN_TTD;
            dataPenyama.KD_KL = gridSkHapusBmnKsl.dataTerpilih.KD_KL;
            dataPenyama.KD_PELAYANAN = gridSkHapusBmnKsl.dataTerpilih.KD_PELAYANAN;
            dataPenyama.KD_PEMOHON = gridSkHapusBmnKsl.dataTerpilih.KD_PEMOHON;
            dataPenyama.KD_PENERBIT_SK = gridSkHapusBmnKsl.dataTerpilih.KD_PENERBIT_SK;
            dataPenyama.KD_PENERBIT_SK_DTL = gridSkHapusBmnKsl.dataTerpilih.KD_PENERBIT_SK_DTL;
            dataPenyama.KD_SATKER = gridSkHapusBmnKsl.dataTerpilih.KD_SATKER;
            dataPenyama.KUANTITAS_SK = Convert.ToDecimal(_kuantitas);
            dataPenyama.KUANTITAS_SKSpecified = gridSkHapusBmnKsl.dataTerpilih.KUANTITAS_SKSpecified;
            dataPenyama.NAMA_PENGADILAN = gridSkHapusBmnKsl.dataTerpilih.NAMA_PENGADILAN;
            dataPenyama.NILAI_PENETAPAN = Convert.ToDecimal(_nilaiPenetapan);
            dataPenyama.NILAI_PENETAPANSpecified = gridSkHapusBmnKsl.dataTerpilih.NILAI_PENETAPANSpecified;
            dataPenyama.NIP_PENANDATANGAN = gridSkHapusBmnKsl.dataTerpilih.NIP_PENANDATANGAN;
            dataPenyama.NM_PELAYANAN = gridSkHapusBmnKsl.dataTerpilih.NM_PELAYANAN;
            dataPenyama.NM_PEMOHON = gridSkHapusBmnKsl.dataTerpilih.NM_PEMOHON;
            dataPenyama.NM_PENANDATANGAN = gridSkHapusBmnKsl.dataTerpilih.NM_PENANDATANGAN;
            dataPenyama.NM_PENERBIT_SK = gridSkHapusBmnKsl.dataTerpilih.NM_PENERBIT_SK;
            dataPenyama.NM_PENERBIT_SK_DTL = gridSkHapusBmnKsl.dataTerpilih.NM_PENERBIT_SK_DTL;
            dataPenyama.NM_PENGGUNA = gridSkHapusBmnKsl.dataTerpilih.NM_PENGGUNA;
            dataPenyama.NUM = gridSkHapusBmnKsl.dataTerpilih.NUM;
            dataPenyama.NUMSpecified = gridSkHapusBmnKsl.dataTerpilih.NUMSpecified;
            dataPenyama.SK_KEPUTUSAN = gridSkHapusBmnKsl.dataTerpilih.SK_KEPUTUSAN;
            dataPenyama.STATUS_BMN = gridSkHapusBmnKsl.dataTerpilih.STATUS_BMN;
            dataPenyama.TGL_CREATED = gridSkHapusBmnKsl.dataTerpilih.TGL_CREATED;
            dataPenyama.TGL_CREATEDSpecified = gridSkHapusBmnKsl.dataTerpilih.TGL_CREATEDSpecified;
            dataPenyama.TGL_SK = gridSkHapusBmnKsl.dataTerpilih.TGL_SK;
            dataPenyama.TGL_SKSpecified = gridSkHapusBmnKsl.dataTerpilih.TGL_SKSpecified;
            dataPenyama.TIPE_PEMOHON = gridSkHapusBmnKsl.dataTerpilih.TIPE_PEMOHON;
            dataPenyama.TOT_BMN = gridSkHapusBmnKsl.dataTerpilih.TOT_BMN;
            dataPenyama.TOT_BMNSpecified = gridSkHapusBmnKsl.dataTerpilih.TOT_BMNSpecified;
            dataPenyama.TOT_STATUS = gridSkHapusBmnKsl.dataTerpilih.TOT_STATUS;
            dataPenyama.TOT_STATUSSpecified = gridSkHapusBmnKsl.dataTerpilih.TOT_STATUSSpecified;
            dataPenyama.TOTAL_DATA = gridSkHapusBmnKsl.dataTerpilih.TOTAL_DATA;
            dataPenyama.TOTAL_DATASpecified = gridSkHapusBmnKsl.dataTerpilih.TOTAL_DATASpecified;
            dataPenyama.UR_KL = gridSkHapusBmnKsl.dataTerpilih.UR_KL;
            dataPenyama.UR_SATKER = gridSkHapusBmnKsl.dataTerpilih.UR_SATKER;
            dataPenyama.URAIAN_KEPUTUSAN = gridSkHapusBmnKsl.dataTerpilih.URAIAN_KEPUTUSAN;
            int _indeksData = dsGridRskHapusBmnKsl.IndexOf(gridSkHapusBmnKsl.dataTerpilih);
            _indeksData = (_indeksData < 0 ? 0 : _indeksData);
            dsGridRskHapusBmnKsl.Remove(gridSkHapusBmnKsl.dataTerpilih);
            dsGridRskHapusBmnKsl.Insert(_indeksData, dataPenyama);
            gridSkHapusBmnKsl.dsDataSource = dsGridRskHapusBmnKsl;
            gridSkHapusBmnKsl.displayData();
        }
        #endregion

        #endregion Hapus BMNKSL

        #endregion


        #endregion

        #region Monitoring Wasdal
        string koneksiSqlServer = String.Format(@"Data Source=localhost\SQLBPSIMAN;Initial Catalog=LOCALBPSIMAN;User Id=sa;Password=SHTbpD*1");
        SqlConnection connection = null;

        #region Pengguna BMN
        private void initGridMonWlGunaBMNNew()
        {
            inisialisasiForm();

            this.setEventButtonMONWasdalGuna();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonGuna);

            this.lapWasdal = new KES1.WL.ucLapWasdal(this);
            lapWasdal.strKdPelayanan = "AND ((KD_PELAYANAN = '02') OR (KD_PELAYANAN = '03') OR (KD_PELAYANAN = '04') OR (KD_PELAYANAN = '05'))";
            lapWasdal.namaModul = "Penggunaan BMN Monitoring";
            this.setPanel(this.lapWasdal);
            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
            setEnabledButtonMWasdal("Export To Excel", true);
        }
        private void setEventButtonMONWasdalGuna()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPenggunaRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPenggunaaMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPenggunaPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPenggunaTutup);
            this.barMonWasdalExcel.ItemClick += new ItemClickEventHandler(this.mWLGunaExcel);
        }
        private void mWlPenggunaRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlGunaBMNNew();
        }
        private void mWlPenggunaaMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (lapWasdal.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (lapWasdal.penggunaan2.modeLoadData == "normal" || lapWasdal.penggunaan2.modeLoadData == "cari")
                    lapWasdal.penggunaan2.dataInisial = false;

                lapWasdal.penggunaan2.getTindakLanjut();
            }
        }
        private void mWlPenggunaPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //puParameterLaporan puParam = new puParameterLaporan();
            //puParam.ShowDialog();
            //tahunAnggaran = puParam.thnAng;
            //getInitWasdalBMN();
            ////lapWasdal.print("penggunaan");
        }
        private void mWlPenggunaTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        private void navPenggunaMonWas_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            initGridMonWlGunaBMNNew();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        private void mWLGunaExcel(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            lapWasdal.ExportToExcel();
        }
        #endregion



        #region Pemanfaatan BMN
        private void initGridMonWlManfaatBMNNew()
        {
            inisialisasiForm();

            this.setEventButtonMONWasdalManfaat();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonGuna);

            this.lapWasdal = new KES1.WL.ucLapWasdal(this);
            lapWasdal.strKdPelayanan = "AND ((KD_PELAYANAN = '02') OR (KD_PELAYANAN = '03') OR (KD_PELAYANAN = '04') OR (KD_PELAYANAN = '05'))";
            lapWasdal.namaModul = "Pemanfaatan BMN Monitoring";
            this.setPanel(this.lapWasdal);
            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }
        private void setEventButtonMONWasdalManfaat()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlManfaatMonRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlManfaatMonMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlManfaatMonPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlManfaatMonTutup);
        }
        private void mWlManfaatMonRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlManfaatBMNNew();
        }
        private void mWlManfaatMonMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (lapWasdal.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (lapWasdal.pemanfaatan2.modeLoadData == "normal" || lapWasdal.pemanfaatan2.modeLoadData == "cari")
                    lapWasdal.pemanfaatan2.dataInisial = false;

                lapWasdal.pemanfaatan2.getTindakLanjut();
            }
        }
        private void mWlManfaatMonPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //puParameterLaporan puParam = new puParameterLaporan();
            //puParam.ShowDialog();
            //tahunAnggaran = puParam.thnAng;
            //getInitWasdalBMN();
            ////lapWasdal.print("penggunaan");
        }
        private void mWlManfaatMonTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        private void nbiPemanfaattanMonWas_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            initGridMonWlManfaatBMNNew();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }

        #endregion

        #region Pemindahtanganan BMN
        private void initGridMonWlPindahTanganBMNNew()
        {
            inisialisasiForm();

            this.setEventButtonPindahTanganWasdalManfaat();
            this.setGridMonWasdal(this.menuMonWasdal, this.subMenuMonGuna);

            this.lapWasdal = new KES1.WL.ucLapWasdal(this);
            lapWasdal.strKdPelayanan = "AND ((KD_PELAYANAN = '02') OR (KD_PELAYANAN = '03') OR (KD_PELAYANAN = '04') OR (KD_PELAYANAN = '05'))";
            lapWasdal.namaModul = "Pemindahtanganan BMN Monitoring";
            this.setPanel(this.lapWasdal);
            setEnabledButtonMWasdal("Refresh", true);
            setEnabledButtonMWasdal("More", true);
            setEnabledButtonMWasdal("Print", true);
            setEnabledButtonMWasdal("Tutup", true);
        }
        private void setEventButtonPindahTanganWasdalManfaat()
        {
            this.resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlPindahTanganRefresh);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlPindahTanganMore);
            this.bbiMWasdalPrint.ItemClick += new ItemClickEventHandler(this.mWlPindahTanganPrint);
            this.bbiMWasdalTutup.ItemClick += new ItemClickEventHandler(this.mWlPindahTanganTutup);
        }
        private void mWlPindahTanganRefresh(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            dataInisial = true;
            initGridMonWlPindahTanganBMNNew();
        }
        private void mWlPindahTanganMore(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (lapWasdal.xtbDetail1.SelectedTabPageIndex == 0)
            {
                if (lapWasdal.pemindahtanganan2.modeLoadData == "normal" || lapWasdal.pemindahtanganan2.modeLoadData == "cari")
                    lapWasdal.pemindahtanganan2.dataInisial = false;

                lapWasdal.pemindahtanganan2.getTindakLanjut();
            }
        }
        private void mWlPindahTanganPrint(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //puParameterLaporan puParam = new puParameterLaporan();
            //puParam.ShowDialog();
            //tahunAnggaran = puParam.thnAng;
            //getInitWasdalBMN();
            ////lapWasdal.print("penggunaan");
        }
        private void mWlPindahTanganTutup(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }
        private void nbiPemindahTangananMon_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            initGridMonWlPindahTanganBMNNew();
            bbiMWasdalPrint.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;
        }
        #endregion

   
        #region Penertiban BMN
        private void nbiPenertibanMonWas_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Penertiban BMN Monitoring";
            konfigApp.strSubMenu = konfigApp.namaLayanan18;
            konfigApp.kdPelayanan = "18";
            konfigApp.namaPelayanan = konfigApp.namaLayanan18;
            this.Enabled = false;
            this.inisialisasiForm();
            rpPenertibanBMN.Visible = true;
            ribbon.SelectedPage = rpPenertibanBMN;
            initGridPenertiban();
            modeCariPenertiban = false;
            gridPenertiban.teNamaKolom.Text = "";
            gridPenertiban.teCari.Text = "";
            gridPenertiban.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitPenertiban();
        }


        #endregion


        #region Pengiriman Laporan Wasdal
        int statusMonLapWasdal = 0;
        KES1.WL.MONLAPWASDAL.ucMONLAPWASDALGrid gridMONLAPWASDAL;
        KES1.WL.MONLAPWASDAL.ucMONLAPWASDALFormNew formMONLAPWASDALDetail;
        private ArrayList dsGridMONLAPWASDAL;
        SvcLapMonWasdalSelect.OutputParameters dOutMONLAPWASDAL;
        SvcLapMonWasdalSelect.execute_pttClient ambilMONLAPWASDAL;
        KES1.WL.MONLAPWASDAL.xrMonLapWasdal1 xrmonLapWasdal;
        public string _closeMode;
        string activeMenu = "P";
        private bool modeCariMONLAPWASDAL = false;

        private void mainLapMonWasdal()
        {
            konfigApp.strMenu = "Laporan Wasdal";
            konfigApp.strSubMenu = "Monitoring Laporan Wasdal";
            konfigApp.kdPelayanan = "";
            konfigApp.namaPelayanan = "";
            this.Enabled = false;
            this.inisialisasiForm();
            rpPenertibanBMN.Visible = true;
            ribbon.SelectedPage = rpMonitoringWasdal;
            rpMonitoringWasdal.Text = this.subMenuLapWasdal;
            rpMonitoringWasdal.Text = this.subMenuLapWasdal;
            initGridMONLAPWASDAL_RPMK();
            modeCariMONLAPWASDAL = false;
            gridMONLAPWASDAL.teNamaKolom.Text = "";
            gridMONLAPWASDAL.teCari.Text = "";
            gridMONLAPWASDAL.fieldDicari = "";
            strCari = "";
            this.dataInisial = true;
            this.getInitMONLAPWASDAL_RPMK();
            activeMenu = "LW";
        }

        private void nbiKirimLapWasdal_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            mainLapMonWasdal();
        }

        private void setTombolMONLAPWASDALGrid()
        {
            bbiMWasdalRefresh.Enabled = true;
            bbiMWasdalMore.Enabled = true;
            bbiMWasdalPrint.Enabled = false;
            barMonWasdalExcel.Enabled = true;
        }

        private void setTombolMONLAPWASDALForm()
        {
            bbiPenertibanTambah.Enabled = false;
            bbiPenertibanUbah.Enabled = false;
            bbiPenertibanHapus.Enabled = false;
            bbiPenertibanDetail.Enabled = false;
            bbiPenertibanKembali.Enabled = true;
            bbiPenertibanRefresh.Enabled = false;
            bbiPenertibanMoreData.Enabled = false;
            barButtonItem10.Enabled = false;
        }

        private void setEventTombolMONLAPWASDAL_RPMK()
        {
            this.resetEventButtonMonWasdal();
            bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(bbiMONLAPWASDALRefreshKlik_RPMK);
            bbiMWasdalMore.ItemClick += new ItemClickEventHandler(bbiMONLAPWASDALMoreDataKlik_RPMK);
            barMonWasdalExcel.ItemClick += new ItemClickEventHandler(bbiMONLAPWASDALExcell_ItemClick);


            BbiPenertibanExcel.Visibility = BarItemVisibility.Never;
            barButtonItem10.Visibility = BarItemVisibility.Always;


        }

        private void initGridMONLAPWASDAL_RPMK()
        {
            statusMonLapWasdal = 0;
            if (gridMONLAPWASDAL == null)
            {
                gridMONLAPWASDAL = new KES1.WL.MONLAPWASDAL.ucMONLAPWASDALGrid()
                {
                    cariDataOnline = new CariDataOnline(cariDataMONLAPWASDAL_RPMK),
                    //detailDataGrid = new DetailDataGrid(bbiMONLAPWASDALUbahKlik_RPMK),
                    //detailSanksi = new DetailDataSanksi(initMonLapWasdalSanksiGrid),
                    //detailCatatan = new DetailDataCatatan(initLaporanWasdalCatatan),
                    toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                    aktifkanForm = new KES1.WL.MONLAPWASDAL.ucMONLAPWASDALGrid.AktifkanForm(this.aktifkanForm)

                };
            }
            setTombolMONLAPWASDALGrid();
            setEventTombolMONLAPWASDAL_RPMK();
            barButtonItem10.Visibility = BarItemVisibility.Never;
            setPanel(gridMONLAPWASDAL);
        }

        private void bbiMONLAPWASDALExcell_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            gridMONLAPWASDAL.ExportToExcel();
        }

        #region --++ Tombol Ribbon
        private void bbiMONLAPWASDALTambahKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {

            //if (formMONLAPWASDALTambah == null)
            //{
            //    formMONLAPWASDALTambah = new KSK.WL.MONLAPWASDAL.ucMONLAPWASDALFormNew("C")
            //    {
            //        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
            //        simpanDataMONLAPWASDAL = new SimpanDataMonLapWasdal(simpanDataMONLAPWASDAL_RPMK),
            //        aktifkanForm = new KSK.WL.MONLAPWASDAL.ucMONLAPWASDALFormNew.AktifkanForm(this.aktifkanForm),
            //    };
            //}
            //formMONLAPWASDALTambah.statusForm = "C";
            //formMONLAPWASDALTambah.inisialisasiForm();
            //setPanel(formMONLAPWASDALTambah);
            //setTombolMONLAPWASDALForm();

        }

        private void bbiMONLAPWASDALUbahKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //if (gridMONLAPWASDAL.dataTerpilih != null)
            //{
            //    if (formMONLAPWASDALUbah == null)
            //    {
            //        formMONLAPWASDALUbah = new KSK.WL.MONLAPWASDAL.ucMONLAPWASDALFormNew("U")
            //        {
            //            toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
            //            simpanDataMONLAPWASDAL = new SimpanDataMonLapWasdal(simpanDataMONLAPWASDAL_RPMK),
            //            aktifkanForm = new KSK.WL.MONLAPWASDAL.ucMONLAPWASDALFormNew.AktifkanForm(this.aktifkanForm),
            //        };
            //    }
            //    formMONLAPWASDALUbah.statusForm = "U";
            //    formMONLAPWASDALUbah.dataTerpilih = gridMONLAPWASDAL.dataTerpilih;
            //    formMONLAPWASDALUbah._idMONLAPWASDAL = gridMONLAPWASDAL.dataTerpilih.ID_MON_LAP;
            //    setPanel(formMONLAPWASDALUbah);
            //    formMONLAPWASDALUbah.inisialisasiForm();
            //    setTombolMONLAPWASDALForm();
            //}
            //else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiMONLAPWASDALHapusKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            //if (gridMONLAPWASDAL.dataTerpilih != null)
            //{
            //    //if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusMONLAPWASDAL, gridMONLAPWASDAL.dataTerpilih.), konfigApp.judulKonfirmasi,
            //    //MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            //    if (MessageBox.Show(String.Format(konfigApp.teksKonfHapusMonLapWasdal, gridMONLAPWASDAL.dataTerpilih.NO_SURAT), konfigApp.judulKonfirmasi,
            //        MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            //    {
            //        try
            //        {
            //            myThread = new Thread(new ThreadStart(ShowProgresBar));
            //            myThread.Start();
            //            SvcLapMonWasdalCud.InputParameters parInp = new SvcLapMonWasdalCud.InputParameters();
            //            parInp.P_ID_MON_LAP = gridMONLAPWASDAL.dataTerpilih.ID_MON_LAP;
            //            parInp.P_ID_MON_LAPSpecified = true;
            //            parInp.P_ID_SATKER = konfigApp.idSatker;
            //            parInp.P_ID_SATKERSpecified = (konfigApp.idSatker == 0 ? false : true);
            //            parInp.P_KD_SATKER = konfigApp.kodeSatker;
            //            parInp.P_UR_SATKER = konfigApp.namaSatker;

            //            parInp.P_SELECT = "D";
            //            modeCrudUpload = "D";
            //            ambilDataMONLAPWASDAL = new SvcLapMonWasdalCud.execute_pttClient();
            //            ambilDataMONLAPWASDAL.Open();
            //            ambilDataMONLAPWASDAL.Beginexecute(parInp, new AsyncCallback(cudMONLAPWASDAL_RPMK), "");
            //        }
            //        catch
            //        {
            //            this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
            //            this.Invoke(new AktifkanForm(aktifkanForm), "");
            //            MessageBox.Show(konfigApp.teksGagalHapus, konfigApp.judulGagalHapus);
            //        }
            //    }
            //}
        }

        private void bbiMONLAPWASDALDetailKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (gridMONLAPWASDAL.dataTerpilih != null)
            {
                if (formMONLAPWASDALDetail == null)
                {
                    formMONLAPWASDALDetail = new KES1.WL.MONLAPWASDAL.ucMONLAPWASDALFormNew("A");
                    formMONLAPWASDALDetail.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
                    formMONLAPWASDALDetail.aktifkanForm = new KES1.WL.MONLAPWASDAL.ucMONLAPWASDALFormNew.AktifkanForm(this.aktifkanForm);
                }
                formMONLAPWASDALDetail.statusForm = "A";
                formMONLAPWASDALDetail.dataTerpilih = gridMONLAPWASDAL.dataTerpilih;
                setPanel(formMONLAPWASDALDetail);
                formMONLAPWASDALDetail.inisialisasiForm();
                setTombolMONLAPWASDALForm();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void bbiMONLAPWASDALKembaliKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            setPanel(gridMONLAPWASDAL);
            setTombolMONLAPWASDALGrid();
            gridMONLAPWASDAL.dsDataSource = dsGridMONLAPWASDAL;
            gridMONLAPWASDAL.displayData();
        }

        private void bbiMONLAPWASDALRefreshKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (statusMonLapWasdal == 0) // grid pemantauan laporan wasdal
            {
                strCari = "";
                modeCari = false;
                gridMONLAPWASDAL.teNamaKolom.Text = "";
                gridMONLAPWASDAL.teCari.Text = "";
                gridMONLAPWASDAL.fieldDicari = "";
                gridMONLAPWASDAL.dataInisial = true;
                this.dataInisial = true;
                this.getInitMONLAPWASDAL_RPMK();
            }
            else if (statusMonLapWasdal == 1) // grid laporan wasdal sanksi
            {
                this.dataInisial = true;
                this.GetDataSanksi("");
            }
            else if (statusMonLapWasdal == 2) // grid laporan wasdal catatan
            {
                this.dataInisial = true;
                this.GetDataCatatan("");
            }

        }

        private void bbiMONLAPWASDALMoreDataKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            if (statusMonLapWasdal == 0) // grid pemantauan laporan wasdal
            {
                if (this.masihAdaData == true)
                {
                    this.dataInisial = false;
                    this.getInitMONLAPWASDAL_RPMK();
                }
            }
            else if (statusMonLapWasdal == 1) // grid laporan wasdal sanksi
            {
                if (this.moreSanksi == true)
                {
                    this.dataInisial = false;
                    this.GetDataSanksi("");
                }
            }
            else if (statusMonLapWasdal == 2) // grid laporan wasdal catatan
            {
                if (this.moreCatatan == true)
                {
                    this.dataInisial = false;
                    this.GetDataCatatan("");
                }
            }
        }

        private void bbiMONLAPWASDALKeluarKlik_RPMK(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.Dispose();
        }

        private void bbiMONLAPWASDALPRINT_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            puParameterLaporan puParam = new puParameterLaporan();
            puParam.ShowDialog();
            tahunAnggaran = puParam.thnAng;
            this._closeMode = puParam._closeMode;
            if (this._closeMode == "Y")
            {

                if (activeMenu == "LW")
                {
                    if (pernahUpdateMONLAPWASDAL())
                    {
                        DialogResult dialogResult = MessageBox.Show("Data sudah tersedia di komputer lokal. Apakah Anda ingin mengambil Data terbaru dari Server?", "Konfirmasi", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
                        if (dialogResult == DialogResult.Yes)
                        {
                            getInitMonLapWasdal();
                        }
                        else if (dialogResult == DialogResult.No)
                        {
                            this.dataLokalMonLapWasdalAda(); //data lokal
                        }
                    }
                    else
                    {
                        getInitMonLapWasdal(); //ambil data lagi dari server
                    }
                }
                else
                {
                    // Mencetak Laporan Wasdal
                    //getInitLaporanWasdalRpt();
                    getInitMonLapWasdal();
                }

            }
        }

        #region Init Lap Data Monitoring Lap Wasdal

        #region Cek Data Lokal
        private bool pernahUpdateMONLAPWASDAL()
        {
            SqlConnection connection = null;
            bool pernahApdet = false;
            DataTable dtData = new DataTable();
            using (connection = new SqlConnection(koneksiSqlServer))
            {
                connection.Open();
                SqlCommand cmd = connection.CreateCommand();
                cmd.CommandText = "SELECT * FROM RPT_MON_LAP_WASDAL";
                SqlDataAdapter dataAdapter = new SqlDataAdapter(cmd);
                dataAdapter.Fill(dtData);
                if (dtData.Rows.Count > 0)
                    pernahApdet = true;
            }
            return pernahApdet;
        }
        #endregion cek data lokal

        #region Get Data Lokal
        private void dataLokalMonLapWasdalAda()
        {
            ReportPrintTool pt;
            try
            {
                DataTable dtMonLapWasdal = new DataTable();
                xrmonLapWasdal = null;
                if (xrmonLapWasdal == null)
                    xrmonLapWasdal = new KES1.WL.MONLAPWASDAL.xrMonLapWasdal1();
                using (connection = new SqlConnection(koneksiSqlServer))
                {
                    connection.Open();
                    SqlCommand cmd = connection.CreateCommand();
                    cmd.CommandText = "SELECT NUM,ID_MON_LAP,ID_SATKER,KD_SATKER,UR_SATKER,ID_KL ,KD_KL,UR_KL,ID_KPKNL,KD_KPKNL,UR_KPKNL,ID_KANWIL,KD_KANWIL, UR_KANWIL, TGL_REKAM,THN_ANG, NO_SURAT,TGL_SURAT,STATUS_KIRIM,TGL_KIRIM,TGL_DITERIMA,IS_TEPAT_WAKTU,JML_SANKSI,JML_CAT,TOTAL_DATA FROM RPT_MON_LAP_WASDAL";
                    SqlDataAdapter dataAdapter = new SqlDataAdapter(cmd);
                    dataAdapter.Fill(dtMonLapWasdal);

                    DataTable DTMonLapWasdal = new DataTable("DTMonLapWasdal");
                    DTMonLapWasdal.Columns.Add("NUM", typeof(string));
                    DTMonLapWasdal.Columns.Add("ID_MON_LAP", typeof(string));
                    DTMonLapWasdal.Columns.Add("ID_SATKER", typeof(string));
                    DTMonLapWasdal.Columns.Add("KD_SATKER", typeof(string));
                    DTMonLapWasdal.Columns.Add("UR_SATKER", typeof(string));//4
                    DTMonLapWasdal.Columns.Add("ID_KL", typeof(string));
                    DTMonLapWasdal.Columns.Add("KD_KL", typeof(string));
                    DTMonLapWasdal.Columns.Add("UR_KL", typeof(string));
                    DTMonLapWasdal.Columns.Add("ID_KPKNL", typeof(string));
                    DTMonLapWasdal.Columns.Add("KD_KPKNL", typeof(string));
                    DTMonLapWasdal.Columns.Add("UR_KPKNL", typeof(string));//10
                    DTMonLapWasdal.Columns.Add("ID_KANWIL", typeof(string));
                    DTMonLapWasdal.Columns.Add("KD_KANWIL", typeof(string));
                    DTMonLapWasdal.Columns.Add("UR_KANWIL", typeof(string));
                    DTMonLapWasdal.Columns.Add("TGL_REKAM", typeof(string));//14
                    DTMonLapWasdal.Columns.Add("THN_ANG", typeof(string));
                    DTMonLapWasdal.Columns.Add("NO_SURAT", typeof(string));
                    DTMonLapWasdal.Columns.Add("TGL_SURAT", typeof(string));//17
                    DTMonLapWasdal.Columns.Add("STATUS_KIRIM", typeof(string));
                    DTMonLapWasdal.Columns.Add("TGL_KIRIM", typeof(string));//19
                    DTMonLapWasdal.Columns.Add("TGL_DITERIMA", typeof(string));//20
                    DTMonLapWasdal.Columns.Add("IS_TEPAT_WAKTU", typeof(string));
                    DTMonLapWasdal.Columns.Add("JML_SANKSI", typeof(string));//22
                    DTMonLapWasdal.Columns.Add("JML_CAT", typeof(string));//23
                    DTMonLapWasdal.Columns.Add("TOTAL_DATA", typeof(string));//24

                    if (dtMonLapWasdal.Rows.Count > 0)
                    {
                        int _no = 1;
                        foreach (DataRow dr in dtMonLapWasdal.Rows)
                        {
                            string tglRekam = (Convert.ToDateTime(dr[14]).Date.ToString("dd/MM/yyyy") == "11/11/2000" || Convert.ToDateTime(dr[14]).Date.ToString("dd/MM/yyyy") == "11/11/2011" || Convert.ToDateTime(dr[14]).Date.ToString("dd/MM/yyyy") == "11/11/1111" || Convert.ToDateTime(dr[14]).Date.ToString("dd/MM/yyyy") == "11/11/1000" || Convert.ToDateTime(dr[14]).Date.ToString("dd/MM/yyyy") == "1/1/0001" || Convert.ToDateTime(dr[14]).Date.ToString("dd/MM/yyyy") == "01/01/0001") ? "-" : Convert.ToDateTime(dr[14]).Date.ToString("dd/MM/yyyy");
                            string tglSrt = (Convert.ToDateTime(dr[17]).Date.ToString("dd/MM/yyyy") == "11/11/2000" || Convert.ToDateTime(dr[17]).Date.ToString("dd/MM/yyyy") == "11/11/2011" || Convert.ToDateTime(dr[17]).Date.ToString("dd/MM/yyyy") == "11/11/1111" || Convert.ToDateTime(dr[17]).Date.ToString("dd/MM/yyyy") == "11/11/1000" || Convert.ToDateTime(dr[17]).Date.ToString("dd/MM/yyyy") == "1/1/0001" || Convert.ToDateTime(dr[17]).Date.ToString("dd/MM/yyyy") == "01/01/0001") ? "-" : Convert.ToDateTime(dr[17]).Date.ToString("dd/MM/yyyy");
                            string tglKirim = (Convert.ToDateTime(dr[19]).Date.ToString("dd/MM/yyyy") == "11/11/2000" || Convert.ToDateTime(dr[19]).Date.ToString("dd/MM/yyyy") == "11/11/2011" || Convert.ToDateTime(dr[19]).Date.ToString("dd/MM/yyyy") == "11/11/1111" || Convert.ToDateTime(dr[19]).Date.ToString("dd/MM/yyyy") == "11/11/1000" || Convert.ToDateTime(dr[19]).Date.ToString("dd/MM/yyyy") == "1/1/0001" || Convert.ToDateTime(dr[19]).Date.ToString("dd/MM/yyyy") == "01/01/0001") ? "-" : Convert.ToDateTime(dr[19]).Date.ToString("dd/MM/yyyy");
                            string tglDiterima = (Convert.ToDateTime(dr[20]).Date.ToString("dd/MM/yyyy") == "11/11/2000" || Convert.ToDateTime(dr[20]).Date.ToString("dd/MM/yyyy") == "11/11/2011" || Convert.ToDateTime(dr[20]).Date.ToString("dd/MM/yyyy") == "11/11/1111" || Convert.ToDateTime(dr[20]).Date.ToString("dd/MM/yyyy") == "11/11/1000" || Convert.ToDateTime(dr[20]).Date.ToString("dd/MM/yyyy") == "1/1/0001" || Convert.ToDateTime(dr[20]).Date.ToString("dd/MM/yyyy") == "01/01/0001") ? "-" : Convert.ToDateTime(dr[20]).Date.ToString("dd/MM/yyyy");
                            decimal jmlSanksi = Convert.ToDecimal(dr[22]);
                            decimal jmlCat = Convert.ToDecimal(dr[23]);
                            decimal jmlTotData = Convert.ToDecimal(dr[24]);
                            DTMonLapWasdal.Rows.Add(Convert.ToString(dr[0]), Convert.ToString(dr[1]), Convert.ToString(dr[2]), Convert.ToString(dr[3]), Convert.ToString(dr[4]), Convert.ToString(dr[5]), Convert.ToString(dr[6]), Convert.ToString(dr[7]), Convert.ToString(dr[8]), Convert.ToString(dr[9]), Convert.ToString(dr[10]), Convert.ToString(dr[11]), Convert.ToString(dr[12]), Convert.ToString(dr[13]), tglRekam, Convert.ToString(dr[15]), Convert.ToString(dr[16]), tglSrt, Convert.ToString(dr[18]), tglKirim, tglDiterima, Convert.ToString(dr[21]), jmlSanksi.ToString("n0"), jmlCat.ToString("n0"), jmlTotData.ToString("n0"));
                            _no++;
                        }
                        xrmonLapWasdal.DataSource = DTMonLapWasdal;
                        xrmonLapWasdal.DataMember = "DTMonLapWasdal";
                    }
                }
            }
            catch
            {
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulKonfirmasi);
            }
            finally
            {
                connection.Close();
            }



            //konfigApp.setTahunAnggaran();
            Parameter param = new Parameter();
            param.Name = "tahunAnggaran";
            param.Type = typeof(System.String);
            param.Value = tahunAnggaran;
            param.Description = "";
            param.Visible = false;
            pt = new ReportPrintTool(xrmonLapWasdal);
            pt.AutoShowParametersPanel = false;
            pt.PrintingSystem.Document.AutoFitToPagesWidth = 1;
            pt.ShowPreviewDialog();

        }
        #endregion Get Data Lokal

        #region Get Data From Server
        SvcGnrtLapMonWasdal.execute_pttClient ambilGnrtMonLapWasdal;
        SvcGnrtLapMonWasdal.OutputParameters outputGnrtMonLapWasdal;
        private void getInitMonLapWasdal()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcGnrtLapMonWasdal.InputParameters parInp = new SvcGnrtLapMonWasdal.InputParameters();
                parInp.P_COL = "";
                parInp.P_MAX = 0;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = 0;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "N";
                //parInp.STR_WHERE = String.Format("ID_USER = {0} AND THN_ANG='{1}' {2}", konfigApp.idUser, (konfigApp.tahunAnggaran - 1), this.strCari);  //ini diganti jadi gini
                parInp.STR_WHERE = String.Format("KD_ESELON1 LIKE '{0}%' AND THN_ANG='{1}' {2}", konfigApp.kodeEselon1.Substring(0, 15), (tahunAnggaran), this.strCari);  //ini diganti jadi gini                
                ambilGnrtMonLapWasdal = new SvcGnrtLapMonWasdal.execute_pttClient();
                ambilGnrtMonLapWasdal.Open();
                ambilGnrtMonLapWasdal.Beginexecute(parInp, new AsyncCallback(getMonLapWasdal), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getMonLapWasdal(IAsyncResult result)
        {
            try
            {
                outputGnrtMonLapWasdal = ambilGnrtMonLapWasdal.Endexecute(result);    //dari sini langsung ke catch
                ambilGnrtMonLapWasdal.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsMonLapWasdal(dsMonLapWasdal), outputGnrtMonLapWasdal);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);   //disini
            }
        }

        private delegate void DsMonLapWasdal(SvcGnrtLapMonWasdal.OutputParameters dataOut);

        private void dsMonLapWasdal(SvcGnrtLapMonWasdal.OutputParameters dataOut)
        {
            /*laporan untuk pengembangan*/
            ReportPrintTool pt;
            string namaFileDownload = String.Format("MonLapWasdal.zip");
            string lokasiDiFile = String.Format("{0}\\Penggunaan\\{1}", System.IO.Directory.GetCurrentDirectory(), namaFileDownload);
            string FolderFile = String.Format("{0}\\Penggunaan", System.IO.Directory.GetCurrentDirectory());
            if (Directory.Exists(FolderFile))
            {
                System.IO.File.WriteAllBytes(lokasiDiFile, dataOut.PO_FILE_BLOB);
            }
            else
            {
                Directory.CreateDirectory(FolderFile);
                System.IO.File.WriteAllBytes(lokasiDiFile, dataOut.PO_FILE_BLOB);
            }

            DataLokal dl = new DataLokal();
            dl.pilihLaporan("monLapWasdal");
            this.dataLokalMonLapWasdalAda();

            //xrPenertiban xrTertib = new xrPenertiban();
            //xrTertib.bsLapPenertiban.DataSource = DataLokal.dt;


            ////ReportPrintTool pt;
            ////xrPenertiban1 xrTertib = new xrPenertiban1();
            ////xrTertib.bsLapPenertiban.DataSource = dataOut.SF_ROW_WASDAL_PENERTIBAN;

            //konfigApp.setTahunAnggaran();
            //Parameter param = new Parameter();
            //param.Name = "tahunAnggaran";
            //param.Type = typeof(System.String);
            ////param.Value = konfigApp.tahunAnggaran-1;
            //param.Value = tahunAnggaran;
            //param.Description = "";
            //param.Visible = false;

            //xrTertib.Parameters.Add(param);

            //#region setting margin, paperkind
            //DevExpress.XtraPrinting.Preview.PrintPreviewFormEx form = new DevExpress.XtraPrinting.Preview.PrintPreviewFormEx();
            //xrTertib.PaperKind = System.Drawing.Printing.PaperKind.A4; //paperkind
            //xrTertib.Margins = new System.Drawing.Printing.Margins(75, 75, 75, 75); //margin
            //form.PrintingSystem = xrTertib.PrintingSystem;
            //xrTertib.CreateDocument();
            //form.PrintingSystem.ExecCommand(DevExpress.XtraPrinting.PrintingSystemCommand.Scale, new object[] { 1 }); //autofit
            //form.ShowDialog();
            //#endregion

            //fToggleProgressBar("stop");
        }
        #endregion Get Data From Server

        #endregion

        #endregion --++ Tombol Ribbon

        #region --++ Ambil Data MONLAPWASDAL
        private void getInitMONLAPWASDAL_RPMK()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcLapMonWasdalSelect.InputParameters parInp = new SvcLapMonWasdalSelect.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = String.Format("ID_ESELON1 = {0} {1}", konfigApp.idEselon1, this.strCari);  //ini diganti jadi gini
                ambilMONLAPWASDAL = new SvcLapMonWasdalSelect.execute_pttClient();
                ambilMONLAPWASDAL.Open();
                ambilMONLAPWASDAL.Beginexecute(parInp, new AsyncCallback(getMONLAPWASDAL_RPMK), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getMONLAPWASDAL_RPMK(IAsyncResult result)
        {
            try
            {
                dOutMONLAPWASDAL = ambilMONLAPWASDAL.Endexecute(result);    //dari sini langsung ke catch
                ambilMONLAPWASDAL.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsMONLAPWASDAL_RPMK(dsMONLAPWASDAL_RPMK), dOutMONLAPWASDAL);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);   //disini
            }
        }

        private delegate void DsMONLAPWASDAL_RPMK(SvcLapMonWasdalSelect.OutputParameters dataOut);

        private void dsMONLAPWASDAL_RPMK(SvcLapMonWasdalSelect.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_MON_LAP_WASDAL.Count();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiPenertibanMoreData.Enabled = true;
            }
            else
            {
                this.masihAdaData = false;
                bbiPenertibanMoreData.Enabled = false;
            }
            if (dataInisial == true)
            {
                dsGridMONLAPWASDAL = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                //dataOut.SF_ROW_WASDAL_PENERTIBAN[i] = (dataOut.SF_ROW_WASDAL_PENERTIBAN[i] == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridMONLAPWASDAL.Add(dataOut.SF_MON_LAP_WASDAL[i]);
            }


            gridMONLAPWASDAL.sbCariOnline.Enabled = !modeCari;
            gridMONLAPWASDAL.dsDataSource = dsGridMONLAPWASDAL;
            gridMONLAPWASDAL.displayData();
            if (modeCariMONLAPWASDAL == true)
            {
                string xSatu = gridMONLAPWASDAL.teNamaKolom.Text.Trim();
                string xDua = gridMONLAPWASDAL.teCari.Text.Trim();
                string xTiga = gridMONLAPWASDAL.fieldDicari;
                gridMONLAPWASDAL.gvGridMONLAPWASDAL.ClearColumnsFilter();
                gridMONLAPWASDAL.teNamaKolom.Text = xSatu;
                gridMONLAPWASDAL.teCari.Text = xDua;
                gridMONLAPWASDAL.fieldDicari = xTiga;
            }
            else
                gridMONLAPWASDAL.gvGridMONLAPWASDAL.ClearColumnsFilter();
        }

        private void cariDataMONLAPWASDAL_RPMK(string _strWhere, bool initModeCari)
        {
            strCari = _strWhere;
            modeCariMONLAPWASDAL = true;
            dataInisial = initModeCari;
            getInitMONLAPWASDAL_RPMK();
        }
        #endregion Ambil Mon laporan wasdal

        #region MONLAPWASDAL - SANKSI

        #region Grid Sanksi

        private void setTombolSanksiGrid()
        {
            bbiPenertibanTambah.Enabled = false;
            bbiPenertibanUbah.Enabled = false;
            bbiPenertibanHapus.Enabled = false;
            bbiPenertibanDetail.Enabled = false;
            bbiPenertibanKembali.Enabled = false;
            barButtonItem10.Enabled = false;
        }

        KES1.WL.MONLAPWASDAL.ucLapMonSatkerGridSanksi ucSanksiGrid;

        public void initMonLapWasdalSanksiGrid(string kode, string label)
        {
            setTombolSanksiGrid();
            barButtonItem10.Visibility = BarItemVisibility.Never;
            kodeSanksi = kode;
            ucSanksiGrid = new KES1.WL.MONLAPWASDAL.ucLapMonSatkerGridSanksi(kode, label);
            ucSanksiGrid.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
            ucSanksiGrid.back = new backLapMonSatker(this.mainLapMonWasdal);
            ucSanksiGrid.rowDataTerpilih = gridMONLAPWASDAL.dataTerpilih;
            dataInisial = true;
            GetDataSanksi("");
            setPanel(ucSanksiGrid);
        }

        #region --++ Load Data Sanksi Grid
        string kodeSanksi = "";
        SvcLapMonWasdalSanksiSelect.execute_pttClient client;
        SvcLapMonWasdalSanksiSelect.InputParameters input;
        SvcLapMonWasdalSanksiSelect.OutputParameters output;

        int maxDataSanksi = 0;
        ArrayList dataSanksi;
        bool moreSanksi = true;
        public void GetDataSanksi(string where)
        {
            this.Enabled = false;

            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();

                input = new SvcLapMonWasdalSanksiSelect.InputParameters();
                if (dataInisial)
                {
                    input.P_MIN = konfigApp.dataAwal;
                    input.P_MAX = konfigApp.dataAkhir;
                }
                else
                {
                    input.P_MIN = maxDataSanksi + 1;
                    input.P_MAX = maxDataSanksi + konfigApp.dataAkhir;
                }
                input.P_MINSpecified = true;
                input.P_MAXSpecified = true;
                input.P_COL = "";
                input.P_SORT = "";
                input.STR_WHERE = "ID_MON_LAP = " + kodeSanksi;

                client = new SvcLapMonWasdalSanksiSelect.execute_pttClient();
                client.Open();
                client.Beginexecute(input, new AsyncCallback(getResultSanksi), null);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);

            }


        }

        private void getResultSanksi(IAsyncResult result)
        {
            try
            {
                output = client.Endexecute(result);
                client.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new ShowDataSanksi(this.showDataGridSanksi), output);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);

            }
        }

        private delegate void ShowDataSanksi(SvcLapMonWasdalSanksiSelect.OutputParameters output);

        private void showDataGridSanksi(SvcLapMonWasdalSanksiSelect.OutputParameters output)
        {
            try
            {
                int jmlData = output.SF_MON_LAP_WASDAL_SANKSI.Length;
                if (jmlData == konfigApp.dataAkhir)
                {
                    // set tombol more  = true  
                    bbiPenertibanMoreData.Enabled = true;
                    moreSanksi = true;
                }
                else
                {
                    // set tombol more false
                    bbiPenertibanMoreData.Enabled = false;
                    moreSanksi = false;
                }
                maxDataSanksi += jmlData;

                if (dataInisial)
                {
                    dataSanksi = new ArrayList();
                }

                dataSanksi.AddRange(output.SF_MON_LAP_WASDAL_SANKSI);
                ucSanksiGrid.bsPgnBrg.DataSource = dataSanksi;
                ucSanksiGrid.gcPgnBrg.RefreshDataSource();

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }

        }

        #endregion

        #endregion

        #region --++ Form Sanksi
        //KSK.WL.MONLAPWASDAL.ucLapMonSatkerCudSanksi ucSanksiForm;

        public void initMonLapWasdalSanksiForm()
        {
            setTombolMONLAPWASDALForm();


        }

        #endregion

        #endregion

        #region MONLAPWASDAL - CATATAN
        KES1.WL.MONLAPWASDAL.ucLapMonSatkerGridCatatan ucCatatanGrid;
        SvcLapMonWasdalCatatanSelect.execute_pttClient clientCatatan;
        SvcLapMonWasdalCatatanSelect.InputParameters inputCatatan;
        SvcLapMonWasdalCatatanSelect.OutputParameters outputCatatan;

        private void initLaporanWasdalCatatan(string kode, string label)
        {
            setTombolSanksiGrid();
            barButtonItem10.Visibility = BarItemVisibility.Never;
            kodeSanksi = kode;
            ucCatatanGrid = new KES1.WL.MONLAPWASDAL.ucLapMonSatkerGridCatatan(kode, label);
            ucCatatanGrid.toggleProgressBar = new ToggleProgressBar(fToggleProgressBar);
            ucCatatanGrid.back = new backLapMonSatker(this.mainLapMonWasdal);
            ucCatatanGrid.rowDataTerpilih = gridMONLAPWASDAL.dataTerpilih;
            dataInisial = true;
            GetDataCatatan("");
            setPanel(ucCatatanGrid);
        }


        #region Load Data Catatan
        int maxDataCatatan = 0;
        ArrayList dataCatatan;
        bool moreCatatan = true;
        public void GetDataCatatan(string where)
        {
            try
            {
                this.Enabled = false;
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();

                inputCatatan = new SvcLapMonWasdalCatatanSelect.InputParameters();
                if (dataInisial)
                {
                    inputCatatan.P_MIN = konfigApp.dataAwal;
                    inputCatatan.P_MAX = konfigApp.dataAkhir;
                }
                else
                {
                    inputCatatan.P_MIN = maxDataCatatan + 1;
                    input.P_MAX = maxDataCatatan + konfigApp.dataAkhir;
                }
                inputCatatan.P_MINSpecified = true;
                inputCatatan.P_MAXSpecified = true;
                inputCatatan.P_COL = "";
                inputCatatan.P_SORT = "";
                inputCatatan.STR_WHERE = "ID_MON_LAP = " + kodeSanksi;

                clientCatatan = new SvcLapMonWasdalCatatanSelect.execute_pttClient();
                clientCatatan.Open();
                clientCatatan.Beginexecute(inputCatatan, new AsyncCallback(getResultCatatan), null);

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);

            }


        }

        private void getResultCatatan(IAsyncResult result)
        {
            try
            {
                outputCatatan = clientCatatan.Endexecute(result);
                clientCatatan.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new ShowDataCatatan(this.ShowDataGridCatatan), outputCatatan);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);

            }
        }

        private delegate void ShowDataCatatan(SvcLapMonWasdalCatatanSelect.OutputParameters output);

        private void ShowDataGridCatatan(SvcLapMonWasdalCatatanSelect.OutputParameters output)
        {
            try
            {
                int jmlData = output.SF_MON_LAP_WASDAL_CATATAN.Count();
                if (jmlData == konfigApp.dataAkhir)
                {
                    bbiPenertibanMoreData.Enabled = true;
                    moreCatatan = true;
                }
                else
                {
                    bbiPenertibanMoreData.Enabled = false;
                    moreSanksi = true;
                }
                maxDataCatatan += jmlData;

                if (dataInisial)
                {
                    dataCatatan = new ArrayList();
                }

                dataCatatan.AddRange(output.SF_MON_LAP_WASDAL_CATATAN);
                ucCatatanGrid.bsPgnBrg.DataSource = dataCatatan;
                ucCatatanGrid.gcPgnBrg.RefreshDataSource();

            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);

            }

        }


        #endregion

        #endregion

        #endregion Pengiriman Laporan Wasdal

        #endregion

        #region PERBANDINGAN PNBP SIMAN DAN SPAN
        string cariPnbp = "";

        string cariPnbpLap1 = "";
        string cariPnbpLap2 = "";
        string cariPnbpLap3 = "";
        string cariPnbpLap4 = "";

        #region REKAP PNBP

        AppPengguna.KSK.SIMANSPAN.ucRekapPNBP gridRekapPNBP;
        AppPengguna.KSK.SIMANSPAN.FrmRekapPNBP formRekapPNBPTambah;
        AppPengguna.KSK.SIMANSPAN.FrmRekapPNBP formRekapPNBPUbah;
        AppPengguna.KSK.SIMANSPAN.FrmRekapPNBP formRekapPNBPDetail;
        private ArrayList dsGridRekapPNBP;
        SvcGridPnbpRekap.OutputParameters dOutGridPnbpRekap;
        SvcGridPnbpRekap.execute_pttClient ambilGridPnbpRekap;

        private void initGridRekapPNBP()
        {
            //if (gridSkBongkaran == null)
            //{
            gridRekapPNBP = new AppPengguna.KSK.SIMANSPAN.ucRekapPNBP()
            {
                //detailDataGrid = new DetailDataGrid(bbiRskBongkaranUbahKlik),
                filter = new detail(getInitGridRekapPNBP)
            };
            //}
            setEventTombolGridRekapPNBP();
            setPanel(gridRekapPNBP);
        }

        private void setEventTombolGridRekapPNBP()
        {
            resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlRefreshRekapPNBP);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlMoreRekapPNBP);
            this.barMonWasdalExcel.ItemClick += new ItemClickEventHandler(this.mWlExportRekapPNBP);
            this.bbiMWasdalPrint.Visibility = BarItemVisibility.Never;
            this.bbiMWasdalRefresh.Visibility = BarItemVisibility.Always;
            this.bbiMWasdalMore.Visibility = BarItemVisibility.Always;
        }

        public void detailDataRekapPNBP()
        {
            if (gridRekapPNBP.dataTerpilih != null)
            {
                if (formRekapPNBPUbah == null)
                {
                    formRekapPNBPUbah = new AppPengguna.KSK.SIMANSPAN.FrmRekapPNBP("U")
                    {
                        toggleProgressBar = new ToggleProgressBar(fToggleProgressBar),
                        simpanDataRskPspBmn = new SimpanDataRsk(simpanDataRekapPNBP)
                    };
                }
                formRekapPNBPUbah.dataTerpilih = gridRekapPNBP.dataTerpilih;
                formRekapPNBPUbah.ShowDialog();
            }
            else MessageBox.Show(konfigApp.teksPilihanKosong, konfigApp.judulKonfirmasi);
        }

        private void nbiPNBPRekap_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            cariPnbp = "";
            konfigApp.strMenu = "Perbandingan Data PNBP SIMAN dan SPAN";
            konfigApp.strSubMenu = "Data Rekap PNBP";
            this.Enabled = false;
            this.inisialisasiForm();
            rpMonitoringWasdal.Visible = true;
            ribbon.SelectedPage = rpMonitoringWasdal;
            initGridRekapPNBP();
            this.dataInisial = true;
            this.getInitGridRekapPNBP();
        }

        #region Tombol Rekap PNBP
        private void mWlRefreshRekapPNBP(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = true;
            this.getInitGridRekapPNBP();
        }

        private void mWlMoreRekapPNBP(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = false;
            this.getInitGridRekapPNBP();
        }

        private void mWlExportRekapPNBP(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            SaveFileDialog sfd = new SaveFileDialog();
            sfd.Filter = "Excel Files (*.xls, *.xlsx)|*.xls, *.xlsx";
            DialogResult dr = sfd.ShowDialog();
            if (dr == System.Windows.Forms.DialogResult.OK)
            {
                gridRekapPNBP.gridView1.BestFitColumns();
                gridRekapPNBP.gridControl1.ExportToXlsx(sfd.FileName);
            }

        }

        #endregion Tombol Rekap PNBP

        #region --++ Ambil Data Bongkaran
        private void getInitGridRekapPNBP(string cari = null)
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcGridPnbpRekap.InputParameters parInp = new SvcGridPnbpRekap.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = String.Format("ID_ESELON1 = {0}", konfigApp.idEselon1);
                // parInp.STR_WHERE = String.Format("KD_PELAYANAN = '{0}' AND (ID_USER={1} OR (TIPE_PEMOHON='SATKER' AND ID_PEMOHON={2})) AND (ID_SATKER = {2} OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                //    parInp.str_where = String.Format("KD_PELAYANAN = '{0}' AND " +
                //" (ID_USER={1} " +
                // "OR (TIPE_PEMOHON = 'SATKER' AND ID_PEMOHON={2}) " +
                // "OR ID_SATKER = {2} " +
                // "OR ID_SATKER_PARENT= {2}) {3}", konfigApp.kdPelayanan, konfigApp.idUser, konfigApp.idSatker, this.strCari);
                ambilGridPnbpRekap = new SvcGridPnbpRekap.execute_pttClient();
                ambilGridPnbpRekap.Open();
                ambilGridPnbpRekap.Beginexecute(parInp, new AsyncCallback(getRekapPNBP), "");
                //ambilRskBongkaran.Beginexecute(parInp, new AsyncCallback(getRskBongkaran), null);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRekapPNBP(IAsyncResult result)
        {
            try
            {
                dOutGridPnbpRekap = ambilGridPnbpRekap.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutGridRekapPNBP(dsOutGridRekapPNBP), dOutGridPnbpRekap);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutGridRekapPNBP(SvcGridPnbpRekap.OutputParameters dataOut);

        private void dsOutGridRekapPNBP(SvcGridPnbpRekap.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_GRID_REKAP_PNBP_SPAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_GRID_REKAP_PNBP_SPAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridRekapPNBP = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                //dataOut.SF_GRID_REKAP_PNBP_SPAN[i].IS_TB = (dataOut.SF_GRID_REKAP_PNBP_SPAN[i].IS_TB == "Y" ? konfigApp.namaTb : konfigApp.namaNonTb);
                dsGridRekapPNBP.Add(dataOut.SF_GRID_REKAP_PNBP_SPAN[i]);
            }
            gridRekapPNBP.labelTotData.Text = "";
            gridRekapPNBP.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridRekapPNBP.dsDataSource = dsGridRekapPNBP;
            gridRekapPNBP.displayData();
            gridRekapPNBP.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #region --++ Simpan Data RekapPNBP
        SvcUpdateKetRekapPNBP.OutputParameters dOutAmbilDataRekapPNBP;
        SvcUpdateKetRekapPNBP.execute_pttClient ambilDataRekapPNBP;

        private void simpanDataRekapPNBP(string _mode)
        {
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcUpdateKetRekapPNBP.InputParameters parInp = new SvcUpdateKetRekapPNBP.InputParameters();
                parInp.P_ID_SATKER = gridRekapPNBP.dataTerpilih.ID_SATKER;
                parInp.P_ID_SATKERSpecified = true;
                parInp.P_KET = ((_mode == "C" || _mode == "CU") ? formRekapPNBPTambah.teKeterangan.Text : formRekapPNBPUbah.teKeterangan.Text).ToString();
                parInp.P_PERIODE = gridRekapPNBP.dataTerpilih.PERIODE;

                ambilDataRekapPNBP = new SvcUpdateKetRekapPNBP.execute_pttClient();
                ambilDataRekapPNBP.Open();
                ambilDataRekapPNBP.Beginexecute(parInp, new AsyncCallback(cudRekapPNBP), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulGagalSimpan);
            }
        }

        private void cudRekapPNBP(IAsyncResult result)
        {
            try
            {
                dOutAmbilDataRekapPNBP = ambilDataRekapPNBP.Endexecute(result);
                ambilDataRekapPNBP.Close();
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new UbahDsRekapPNBP(this.ubahDsRekapPNBP), dOutAmbilDataRekapPNBP);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(aktifkanForm), "");
                if ((this.modeCrud == 'C') || (this.modeCrud == 'U') || (this.modeCrud == 'Z'))
                {
                    konfigApp.teksDialog = konfigApp.teksGagalSimpan;
                }
                else if (this.modeCrud == 'D')
                {
                    konfigApp.teksDialog = konfigApp.teksGagalHapus;
                }
                else
                {
                    konfigApp.teksDialog = konfigApp.teksGagalLain;
                }
                MessageBox.Show(konfigApp.teksDialog, konfigApp.judulGagalLain);
            }
        }

        private delegate void UbahDsRekapPNBP(SvcUpdateKetRekapPNBP.OutputParameters dataOutBongkaranCrud);

        private void ubahDsRekapPNBP(SvcUpdateKetRekapPNBP.OutputParameters dataOutBongkaranCrud)
        {
            if (dataOutBongkaranCrud.PO_RESULT == "Y")
            {
                getInitGridRekapPNBP();
            }
            else MessageBox.Show(konfigApp.teksGagalSimpan, konfigApp.judulKonfirmasi);
        }
        #endregion Simpan Data RekapPNBP



        #endregion REKAP PNBP

        #region REKAP PNBP SPAN

        AppPengguna.KSK.SIMANSPAN.ucPNBPSPAN gridRekapPNBPSpan;
        private ArrayList dsGridPNBPSpan;
        SvcGridPnbpSpan.OutputParameters dOutGridPnbpSpan;
        SvcGridPnbpSpan.execute_pttClient ambilGridPnbpSpan;

        private void initGridPNBPSPAN()
        {
            gridRekapPNBPSpan = new AppPengguna.KSK.SIMANSPAN.ucPNBPSPAN();
            setEventTombolGridRekapPNBPSPAN();
            setPanel(gridRekapPNBPSpan);
        }

        private void setEventTombolGridRekapPNBPSPAN()
        {
            resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlRefreshRekapPNBPSpan);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlMoreRekapPNBPSpan);
            this.barMonWasdalExcel.ItemClick += new ItemClickEventHandler(this.mWlExportRekapPNBPSpan);
            this.bbiMWasdalPrint.Visibility = BarItemVisibility.Never;
            this.bbiMWasdalRefresh.Visibility = BarItemVisibility.Always;
            this.bbiMWasdalMore.Visibility = BarItemVisibility.Always;
        }

        private void nbiPNBPSPAN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perbandingan Data PNBP SIMAN dan SPAN";
            konfigApp.strSubMenu = "Data Rekap PNBP SPAN";
            this.Enabled = false;
            this.inisialisasiForm();
            rpMonitoringWasdal.Visible = true;
            ribbon.SelectedPage = rpMonitoringWasdal;
            initGridPNBPSPAN();
            this.dataInisial = true;
            this.getInitGridRekapPNBPSPAN();
        }

        #region Tombol Rekap SPAN
        private void mWlRefreshRekapPNBPSpan(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = true;
            this.getInitGridRekapPNBP();
        }

        private void mWlMoreRekapPNBPSpan(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = false;
            this.getInitGridRekapPNBPSPAN();
        }

        private void mWlExportRekapPNBPSpan(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            SaveFileDialog sfd = new SaveFileDialog();
            sfd.Filter = "Excel Files (*.xls, *.xlsx)|*.xls, *.xlsx";
            DialogResult dr = sfd.ShowDialog();
            if (dr == DialogResult.OK)
            {
                gridRekapPNBPSpan.gridView1.BestFitColumns();
                gridRekapPNBPSpan.gridControl1.ExportToXlsx(sfd.FileName);
            }

        }

        #endregion Tombol Rekap PNBP

        #region --++ Ambil Data rekap SPAN
        private void getInitGridRekapPNBPSPAN()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcGridPnbpSpan.InputParameters parInp = new SvcGridPnbpSpan.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = String.Format("FLAG = 'N' AND ID_ESELON1 = {0}", konfigApp.idEselon1);
                ambilGridPnbpSpan = new SvcGridPnbpSpan.execute_pttClient();
                ambilGridPnbpSpan.Open();
                ambilGridPnbpSpan.Beginexecute(parInp, new AsyncCallback(getRekapPNBPSPAN), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRekapPNBPSPAN(IAsyncResult result)
        {
            try
            {
                dOutGridPnbpSpan = ambilGridPnbpSpan.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutGridRekapPNBPSPAN(dsOutGridRekapPNBPSPAN), dOutGridPnbpSpan);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutGridRekapPNBPSPAN(SvcGridPnbpSpan.OutputParameters dataOut);

        private void dsOutGridRekapPNBPSPAN(SvcGridPnbpSpan.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_GRID_PNBP_SPAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_GRID_PNBP_SPAN[0].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dsGridPNBPSpan.Add(dataOut.SF_GRID_PNBP_SPAN[i]);
            }
            gridRekapPNBPSpan.labelTotData.Text = "";
            string maxRow = (jmlDataKl == 0) ? "0" : dataOut.SF_GRID_PNBP_SPAN[0].TOTAL_DATA.ToString();
            gridRekapPNBPSpan.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + maxRow + " data";
            gridRekapPNBPSpan.dsDataSource = dsGridPNBPSpan;
            gridRekapPNBPSpan.displayData();
            gridRekapPNBPSpan.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #endregion REKAP PNBP SPAN

        #region REKAP PNBP SIMAN

        AppPengguna.KSK.SIMANSPAN.ucPNBPSIMAN gridRekapPNBPSiman;
        private ArrayList dsGridPNBPSiman;
        SvcGridPnbpSiman.OutputParameters dOutGridPnbpSiman;
        SvcGridPnbpSiman.execute_pttClient ambilGridPnbpSiman;

        private void initGridPNBPSIMAN()
        {
            gridRekapPNBPSiman = new AppPengguna.KSK.SIMANSPAN.ucPNBPSIMAN();
            setEventTombolGridRekapPNBPSIMAN();
            setPanel(gridRekapPNBPSiman);
        }

        private void setEventTombolGridRekapPNBPSIMAN()
        {
            resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlRefreshRekapPNBPSiman);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlMoreRekapPNBPSiman);
            this.barMonWasdalExcel.ItemClick += new ItemClickEventHandler(this.mWlExportRekapPNBPSiman);
            this.bbiMWasdalPrint.Visibility = BarItemVisibility.Never;
            this.bbiMWasdalRefresh.Visibility = BarItemVisibility.Always;
            this.bbiMWasdalMore.Visibility = BarItemVisibility.Always;
        }

        private void nbiPNBPSIMAN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perbandingan Data PNBP SIMAN dan SPAN";
            konfigApp.strSubMenu = "Data Rekap PNBP SIMAN";
            this.Enabled = false;
            this.inisialisasiForm();
            rpMonitoringWasdal.Visible = true;
            ribbon.SelectedPage = rpMonitoringWasdal;
            initGridPNBPSIMAN();
            this.dataInisial = true;
            this.getInitGridRekapPNBPSIMAN();
        }

        #region Tombol Rekap SPAN
        private void mWlRefreshRekapPNBPSiman(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = true;
            this.getInitGridRekapPNBPSIMAN();
        }

        private void mWlMoreRekapPNBPSiman(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = false;
            this.getInitGridRekapPNBPSIMAN();
        }

        private void mWlExportRekapPNBPSiman(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            SaveFileDialog sfd = new SaveFileDialog();
            sfd.Filter = "Excel Files (*.xls, *.xlsx)|*.xls, *.xlsx";
            DialogResult dr = sfd.ShowDialog();
            if (dr == DialogResult.OK)
            {
                gridRekapPNBPSiman.gridView1.BestFitColumns();
                gridRekapPNBPSiman.gridControl1.ExportToXlsx(sfd.FileName);
            }

        }

        #endregion Tombol Rekap PNBP

        #region --++ Ambil Data Rekap SIMAN
        private void getInitGridRekapPNBPSIMAN()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcGridPnbpSiman.InputParameters parInp = new SvcGridPnbpSiman.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = String.Format("ID_ESELON1 = {0}", konfigApp.idEselon1);
                ambilGridPnbpSiman = new SvcGridPnbpSiman.execute_pttClient();
                ambilGridPnbpSiman.Open();
                ambilGridPnbpSiman.Beginexecute(parInp, new AsyncCallback(getRekapPNBPSIMAN), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRekapPNBPSIMAN(IAsyncResult result)
        {
            try
            {
                dOutGridPnbpSiman = ambilGridPnbpSiman.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutGridRekapPNBPSIMAN(dsOutGridRekapPNBPSIMAN), dOutGridPnbpSiman);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutGridRekapPNBPSIMAN(SvcGridPnbpSiman.OutputParameters dataOut);

        private void dsOutGridRekapPNBPSIMAN(SvcGridPnbpSiman.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_GRID_PNBP_SIMAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_GRID_PNBP_SIMAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSiman = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dsGridPNBPSiman.Add(dataOut.SF_GRID_PNBP_SIMAN[i]);
            }
            gridRekapPNBPSiman.labelTotData.Text = "";
            gridRekapPNBPSiman.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridRekapPNBPSiman.dsDataSource = dsGridPNBPSiman;
            gridRekapPNBPSiman.displayData();
            gridRekapPNBPSiman.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #endregion REKAP PNBP SIMAN

        #region REKAP PNBP BANDING

        AppPengguna.KSK.SIMANSPAN.ucLapBandingSimanSpan gridBanding;
        private ArrayList dsGridBanding;
        SvcGridPnbpSpan.OutputParameters dOutGridBanding;
        SvcGridPnbpSpan.execute_pttClient ambilGridBanding;

        private void initGridBanding()
        {
            gridBanding = new AppPengguna.KSK.SIMANSPAN.ucLapBandingSimanSpan();
            gridBanding.refreshgc1 = new detail(getInitGridBandingSpanSimanAtas);
            gridBanding.refreshgc2 = new detail(getInitGridBandingSpanSiman);
            setEventTombolGridBanding();
            setPanel(gridBanding);
        }

        private void setEventTombolGridBanding()
        {
            resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlRefreshBanding);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlMoreBanding);
            this.barMonWasdalExcel.ItemClick += new ItemClickEventHandler(this.mWlExportBanding);
            this.bbiMWasdalPrint.Visibility = BarItemVisibility.Never;
            this.bbiMWasdalRefresh.Visibility = BarItemVisibility.Never;
            this.bbiMWasdalMore.Visibility = BarItemVisibility.Never;
        }

        private void nbiPerbandingan_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perbandingan Data PNBP SIMAN dan SPAN";
            konfigApp.strSubMenu = "Data Rekap PNBP SPAN";
            this.Enabled = false;
            this.inisialisasiForm();
            rpMonitoringWasdal.Visible = true;
            ribbon.SelectedPage = rpMonitoringWasdal;
            initGridBanding();
            this.dataInisial = true;
            getInitGridBandingSpanSimanAtas();
            getInitGridBandingSpanSiman();
        }

        #region Tombol Rekap SPAN
        private void mWlRefreshBanding(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            loadBanding(true);
        }

        private void mWlMoreBanding(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            loadBanding(false);
        }

        private void mWlExportBanding(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            SaveFileDialog sfd = new SaveFileDialog();
            sfd.Filter = "Excel Files (*.xls, *.xlsx)|*.xls, *.xlsx";
            DialogResult dr = sfd.ShowDialog();
            if (dr == DialogResult.OK)
            {
                gridRekapPNBPSpan.gridView1.BestFitColumns();
                gridRekapPNBPSpan.gridControl1.ExportToXlsx(sfd.FileName);
            }

        }

        #endregion Tombol Rekap PNBP

        private void loadBanding(bool initData)
        {
            //this.dataInisial = initData;

            //if (dataInisial == true)
            //{
            //    konfigApp.currentMaks = konfigApp.dataAkhir;
            //    konfigApp.currentMin = konfigApp.dataAwal;
            //}
            //else
            //{
            //    konfigApp.currentMin = konfigApp.currentMaks + 1;
            //    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
            //}

            //getInitGridBandingSpanSimanAtas();
            //getInitGridBandingSpanSiman();
        }

        #region --++ Ambil Data rekap SPAN
        private void getInitGridBanding()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcGridPnbpSpan.InputParameters parInp = new SvcGridPnbpSpan.InputParameters();
                parInp.P_COL = "";
                //if (dataInisial == true)
                //{
                //    konfigApp.currentMaks = konfigApp.dataAkhir;
                //    konfigApp.currentMin = konfigApp.dataAwal;
                //}
                //else
                //{
                //    konfigApp.currentMin = konfigApp.currentMaks + 1;
                //    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                //}
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = String.Format("FLAG = 'Y' AND ID_SATKER = {0}", konfigApp.idSatker);
                ambilGridPnbpSpan = new SvcGridPnbpSpan.execute_pttClient();
                ambilGridPnbpSpan.Open();
                ambilGridPnbpSpan.Beginexecute(parInp, new AsyncCallback(getRekapBanding), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRekapBanding(IAsyncResult result)
        {
            try
            {
                dOutGridBanding = ambilGridPnbpSpan.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutGridBanding(dsOutGridBanding), dOutGridBanding);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutGridBanding(SvcGridPnbpSpan.OutputParameters dataOut);

        private void dsOutGridBanding(SvcGridPnbpSpan.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_GRID_PNBP_SPAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_GRID_PNBP_SPAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.dataAkhir;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dsGridPNBPSpan.Add(dataOut.SF_GRID_PNBP_SPAN[i]);
            }
            gridBanding.labelTotData.Text = "";
            gridBanding.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridBanding.dsDataSource = dsGridPNBPSpan;
            gridBanding.displayData();
            gridBanding.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #region --++ Ambil Data rekap BandingSpanSiman
        SvcGridBandingSpanSiman.OutputParameters dOutGridBandingSpanSiman;
        SvcGridBandingSpanSiman.execute_pttClient ambilGridBandingSpanSiman;
        decimal minBawah = 0, maxBawah = 0;
        private void getInitGridBandingSpanSiman(string cari = null)
        {
            this.Enabled = false;
            try
            {
                cariPnbp = cari;
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcGridBandingSpanSiman.InputParameters parInp = new SvcGridBandingSpanSiman.InputParameters();
                parInp.P_COL = "";

                if (String.IsNullOrEmpty(cari))
                {
                    dataInisial = true;
                    maxBawah = konfigApp.dataAkhir;
                    minBawah = konfigApp.dataAwal;
                }
                else
                {
                    dataInisial = false;
                    minBawah = maxBawah + 1;
                    maxBawah = maxBawah + konfigApp.dataAkhir;
                }
                parInp.P_MAX = maxBawah;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = minBawah;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                //parInp.STR_WHERE = String.Format("FLAG = 'N' AND KD_SATKER LIKE '%{0}%' {1}", konfigApp.kodeSatker.Substring(10, 6), (string.IsNullOrEmpty(cariPnbp) ? "" : "AND " + cariPnbp));
                parInp.STR_WHERE = String.Format("FLAG = 'N' AND KD_SATKER LIKE '%{0}%'", konfigApp.kodeSatker.Substring(10, 6));
                ambilGridBandingSpanSiman = new SvcGridBandingSpanSiman.execute_pttClient();
                ambilGridBandingSpanSiman.Open();
                ambilGridBandingSpanSiman.Beginexecute(parInp, new AsyncCallback(getRekapBandingSpanSiman), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRekapBandingSpanSiman(IAsyncResult result)
        {
            try
            {
                dOutGridBandingSpanSiman = ambilGridBandingSpanSiman.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutGridBandingSpanSiman(dsOutGridBandingSpanSiman), dOutGridBandingSpanSiman);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutGridBandingSpanSiman(SvcGridBandingSpanSiman.OutputParameters dataOut);

        private void dsOutGridBandingSpanSiman(SvcGridBandingSpanSiman.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_PERBANDINGAN_SPAN_SIMAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_PERBANDINGAN_SPAN_SIMAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl >= maxBawah || jmlDataKl % konfigApp.dataAkhir == 0)
            {
                gridBanding.sbMore2.Enabled = true;
                jmlCurrent = maxBawah;
            }
            else
            {
                gridBanding.sbMore2.Enabled = false;
                jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                if (konfigApp.DateToString(dataOut.SF_PERBANDINGAN_SPAN_SIMAN[i].TANGGAL) == "11/11/1000") dataOut.SF_PERBANDINGAN_SPAN_SIMAN[i].TANGGAL = null;
                dsGridPNBPSpan.Add(dataOut.SF_PERBANDINGAN_SPAN_SIMAN[i]);
            }
            gridBanding.labelTotData2.Text = "";
            gridBanding.labelTotData2.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridBanding.dsDataSource2 = dsGridPNBPSpan;
            gridBanding.displayData2();
            gridBanding.gridView2.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #region --++ Ambil Data rekap BandingSpanSimanAtas
        SvcGridPnbpSpanSimanValid.OutputParameters dOutGridBandingSpanSimanAtas;
        SvcGridPnbpSpanSimanValid.execute_pttClient ambilGridBandingSpanSimanAtas;
        decimal minAtas = 0, maxAtas = 0;
        private void getInitGridBandingSpanSimanAtas(string cari = null)
        {
            this.Enabled = false;
            try
            {
                cariPnbp = cari;
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcGridPnbpSpanSimanValid.InputParameters parInp = new SvcGridPnbpSpanSimanValid.InputParameters();
                parInp.P_COL = "";

                if (String.IsNullOrEmpty(cari))
                {
                    dataInisial = true;
                    maxAtas = konfigApp.dataAkhir;
                    minAtas = konfigApp.dataAwal;
                }
                else
                {
                    dataInisial = false;
                    minAtas = maxAtas + 1;
                    maxAtas = maxAtas + konfigApp.dataAkhir;
                }
                parInp.P_MAX = maxAtas;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = minAtas;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                //parInp.STR_WHERE = String.Format("FLAG = 'Y' AND KD_SATKER LIKE '%{0}%' {1}", konfigApp.kodeSatker.Substring(10, 6), (string.IsNullOrEmpty(cariPnbp) ? "" : "AND " + cariPnbp));
                parInp.STR_WHERE = String.Format("KD_SATKER LIKE '%{0}%'", konfigApp.kodeSatker.Substring(10, 6));
                ambilGridBandingSpanSimanAtas = new SvcGridPnbpSpanSimanValid.execute_pttClient();
                ambilGridBandingSpanSimanAtas.Open();
                ambilGridBandingSpanSimanAtas.Beginexecute(parInp, new AsyncCallback(getRekapBandingSpanSimanAtas), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRekapBandingSpanSimanAtas(IAsyncResult result)
        {
            try
            {
                dOutGridBandingSpanSimanAtas = ambilGridBandingSpanSimanAtas.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutGridBandingSpanSimanAtas(dsOutGridBandingSpanSimanAtas), dOutGridBandingSpanSimanAtas);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutGridBandingSpanSimanAtas(SvcGridPnbpSpanSimanValid.OutputParameters dataOut);

        private void dsOutGridBandingSpanSimanAtas(SvcGridPnbpSpanSimanValid.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_GRID_PNBP_SPAN_SIMAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_GRID_PNBP_SPAN_SIMAN[jmlDataKl - 1].TOTAL_DATA.ToString();

            if (jmlDataKl >= maxAtas || jmlDataKl % konfigApp.dataAkhir == 0)
            {
                gridBanding.sbMore1.Enabled = true;
                jmlCurrent = maxAtas;
            }
            else
            {
                gridBanding.sbMore1.Enabled = false;
                jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                if (konfigApp.DateToString(dataOut.SF_GRID_PNBP_SPAN_SIMAN[i].TANGGAL) == "11/11/1000") dataOut.SF_GRID_PNBP_SPAN_SIMAN[i].TANGGAL = null;
                dsGridPNBPSpan.Add(dataOut.SF_GRID_PNBP_SPAN_SIMAN[i]);
            }
            gridBanding.labelTotData.Text = "";
            gridBanding.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            gridBanding.dsDataSource = dsGridPNBPSpan;
            gridBanding.displayData();
            gridBanding.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #endregion REKAP PNBP BANDING

        #region LAPORAN PNBP SIMAN SPAN
        //parent
        AppPengguna.KSK.SIMANSPAN.ucLapSIMANSPAN ucLapSimanSpanParent;

        //tabs
        AppPengguna.KSK.SIMANSPAN.LAPSIMANSPAN.ucLapSimanDanSpan ucLapSimanDanSpan;
        AppPengguna.KSK.SIMANSPAN.LAPSIMANSPAN.ucLapSama ucLapSama;
        AppPengguna.KSK.SIMANSPAN.LAPSIMANSPAN.ucLapNonSiman ucLapNonSiman;
        AppPengguna.KSK.SIMANSPAN.LAPSIMANSPAN.ucLapNonSpan ucLapNonSpan;

        #region Tombol Rekap PNBP
        private void setEventTombolGridPNBPSimanSpan()
        {
            resetEventButtonMonWasdal();
            this.bbiMWasdalRefresh.ItemClick += new ItemClickEventHandler(this.mWlRefreshPNBPSimanSpan);
            this.bbiMWasdalMore.ItemClick += new ItemClickEventHandler(this.mWlMorePNBPSimanSpan);
            this.barMonWasdalExcel.ItemClick += new ItemClickEventHandler(this.mWlExportPNBPSimanSpan);
            this.bbiMWasdalPrint.Visibility = BarItemVisibility.Never;
            this.bbiMWasdalRefresh.Visibility = BarItemVisibility.Always;
            this.bbiMWasdalMore.Visibility = BarItemVisibility.Always;
        }

        private void mWlRefreshPNBPSimanSpan(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = true;
            switch (ucLapSimanSpanParent.xtraTabControl1.SelectedTabPageIndex.ToString())
            {
                case "0": getInitLapRekapPnbpSpanSiman(); break;
                case "1": getInitLapSama(); break;
                case "2": getInitLapPnbpBlmRekamSiman(); break;
                case "3": getInitLapPnbpBlmRekamSpan(); break;
            }

        }

        private void mWlMorePNBPSimanSpan(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            this.dataInisial = false;
            switch (ucLapSimanSpanParent.xtraTabControl1.SelectedTabPageIndex.ToString())
            {
                case "0": getInitLapRekapPnbpSpanSiman(); break;
                case "1": getInitLapSama(); break;
                case "2": getInitLapPnbpBlmRekamSiman(); break;
                case "3": getInitLapPnbpBlmRekamSpan(); break;
            }
        }

        private void mWlExportPNBPSimanSpan(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            SaveFileDialog sfd = new SaveFileDialog();
            sfd.Filter = "Excel Files (*.xls, *.xlsx)|*.xls, *.xlsx";
            DialogResult dr = sfd.ShowDialog();
            if (dr == System.Windows.Forms.DialogResult.OK)
            {
                switch (ucLapSimanSpanParent.xtraTabControl1.SelectedTabPageIndex.ToString())
                {
                    case "0":
                        ucLapSimanDanSpan.advBandedGridView1.BestFitColumns();
                        ucLapSimanDanSpan.gridControl1.ExportToXlsx(sfd.FileName);
                        break;
                    case "1":
                        ucLapSama.gridView1.BestFitColumns();
                        ucLapSama.gridControl1.ExportToXlsx(sfd.FileName);
                        break;
                    case "2":
                        ucLapNonSiman.gridView1.BestFitColumns();
                        ucLapNonSiman.gridControl1.ExportToXlsx(sfd.FileName);
                        break;
                    case "3":
                        ucLapNonSpan.gridView1.BestFitColumns();
                        ucLapNonSpan.gridControl1.ExportToXlsx(sfd.FileName);
                        break;
                }

            }

        }

        #endregion Tombol Rekap PNBP

        public void perbandinganSimanSpanPanel()
        {
            ucLapSimanSpanParent = new KSK.SIMANSPAN.ucLapSIMANSPAN();

            //tab 1
            ucLapSimanDanSpan = new KSK.SIMANSPAN.LAPSIMANSPAN.ucLapSimanDanSpan();
            ucLapSimanDanSpan.Dock = DockStyle.Fill;
            ucLapSimanSpanParent.panelControl1.Controls.Clear();
            ucLapSimanSpanParent.panelControl1.Controls.Add(ucLapSimanDanSpan);

            //tab 1
            ucLapSama = new KSK.SIMANSPAN.LAPSIMANSPAN.ucLapSama();
            ucLapSama.Dock = DockStyle.Fill;
            ucLapSimanSpanParent.panelControl2.Controls.Clear();
            ucLapSimanSpanParent.panelControl2.Controls.Add(ucLapSama);

            //tab 1
            ucLapNonSiman = new KSK.SIMANSPAN.LAPSIMANSPAN.ucLapNonSiman();
            ucLapNonSiman.Dock = DockStyle.Fill;
            ucLapSimanSpanParent.panelControl3.Controls.Clear();
            ucLapSimanSpanParent.panelControl3.Controls.Add(ucLapNonSiman);

            //tab 1
            ucLapNonSpan = new KSK.SIMANSPAN.LAPSIMANSPAN.ucLapNonSpan();
            ucLapNonSpan.Dock = DockStyle.Fill;
            ucLapSimanSpanParent.panelControl4.Controls.Clear();
            ucLapSimanSpanParent.panelControl4.Controls.Add(ucLapNonSpan);

            ucLapSimanSpanParent.Dock = DockStyle.Fill;
            setPanel(ucLapSimanSpanParent);
        }

        private void nbiSIMANSPAN_LinkClicked(object sender, DevExpress.XtraNavBar.NavBarLinkEventArgs e)
        {
            konfigApp.strMenu = "Perbandingan PNBP SIMAN dan SPAN";
            konfigApp.strSubMenu = "Perbandingan PNBP SIMAN dan SPAN";
            this.inisialisasiForm();
            rpMonitoringWasdal.Visible = true;
            ribbon.SelectedPage = rpMonitoringWasdal;
            this.dataInisial = true;

            setEventTombolGridPNBPSimanSpan();
            perbandinganSimanSpanPanel();

            getInitLapSama();
            getInitLapRekapPnbpSpanSiman();
            getInitLapPnbpBlmRekamSiman();
            getInitLapPnbpBlmRekamSpan();
        }

        #region --++ Ambil Data rekap LapRekapPnbpSpanSiman
        SvcLapRekapPnbpSpanSiman.OutputParameters dOutLapRekapPnbpSpanSiman;
        SvcLapRekapPnbpSpanSiman.execute_pttClient ambilLapRekapPnbpSpanSiman;

        private void getInitLapRekapPnbpSpanSiman()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcLapRekapPnbpSpanSiman.InputParameters parInp = new SvcLapRekapPnbpSpanSiman.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = string.Format("ID_ESELON1 = {0}", konfigApp.idEselon1);
                ambilLapRekapPnbpSpanSiman = new SvcLapRekapPnbpSpanSiman.execute_pttClient();
                ambilLapRekapPnbpSpanSiman.Open();
                ambilLapRekapPnbpSpanSiman.Beginexecute(parInp, new AsyncCallback(getLapRekapPnbpSpanSiman), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getLapRekapPnbpSpanSiman(IAsyncResult result)
        {
            try
            {
                dOutLapRekapPnbpSpanSiman = ambilLapRekapPnbpSpanSiman.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutLapRekapPnbpSpanSiman(dsOutLapRekapPnbpSpanSiman), dOutLapRekapPnbpSpanSiman);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutLapRekapPnbpSpanSiman(SvcLapRekapPnbpSpanSiman.OutputParameters dataOut);

        private void dsOutLapRekapPnbpSpanSiman(SvcLapRekapPnbpSpanSiman.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_LAP_REKAP_SPAN_SIMAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_LAP_REKAP_SPAN_SIMAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.currentMaks;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dsGridPNBPSpan.Add(dataOut.SF_LAP_REKAP_SPAN_SIMAN[i]);
            }
            ucLapSimanDanSpan.labelTotData.Text = "";
            ucLapSimanDanSpan.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            ucLapSimanDanSpan.dsDataSource = dsGridPNBPSpan;
            ucLapSimanDanSpan.displayData();
            ucLapSimanDanSpan.advBandedGridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #region --++ Ambil Data rekap SPAN SIMAN sama
        SvcLapPnbpSama.OutputParameters dOutLapPnbpSama;
        SvcLapPnbpSama.execute_pttClient ambilLapPnbpSama;

        private void getInitLapSama()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcLapPnbpSama.InputParameters parInp = new SvcLapPnbpSama.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = string.Format("ID_ESELON1 = {0}", konfigApp.idEselon1);
                ambilLapPnbpSama = new SvcLapPnbpSama.execute_pttClient();
                ambilLapPnbpSama.Open();
                ambilLapPnbpSama.Beginexecute(parInp, new AsyncCallback(getRekapPNBPSIMANSPAN), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getRekapPNBPSIMANSPAN(IAsyncResult result)
        {
            try
            {
                dOutLapPnbpSama = ambilLapPnbpSama.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutLapPnbpSama(dsOutLapPnbpSama), dOutLapPnbpSama);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutLapPnbpSama(SvcLapPnbpSama.OutputParameters dataOut);

        private void dsOutLapPnbpSama(SvcLapPnbpSama.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_LAP_PNBP_SAMA.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_LAP_PNBP_SAMA[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.currentMaks;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dsGridPNBPSpan.Add(dataOut.SF_LAP_PNBP_SAMA[i]);
            }
            ucLapSama.labelTotData.Text = "";
            ucLapSama.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            ucLapSama.dsDataSource = dsGridPNBPSpan;
            ucLapSama.displayData();
            ucLapSama.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #region --++ Ambil Data Lap Pnbp Blm Rekam Siman
        SvcLapPnbpBlmRekamSiman.OutputParameters dOutLapPnbpBlmRekamSiman;
        SvcLapPnbpBlmRekamSiman.execute_pttClient ambilLapPnbpBlmRekamSiman;

        private void getInitLapPnbpBlmRekamSiman()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcLapPnbpBlmRekamSiman.InputParameters parInp = new SvcLapPnbpBlmRekamSiman.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = String.Format("ID_ESELON1 = {0} AND STATUS = 'TIDAK ADA DI SIMAN'", konfigApp.idEselon1);
                ambilLapPnbpBlmRekamSiman = new SvcLapPnbpBlmRekamSiman.execute_pttClient();
                ambilLapPnbpBlmRekamSiman.Open();
                ambilLapPnbpBlmRekamSiman.Beginexecute(parInp, new AsyncCallback(getLapPnbpBlmRekamSiman), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getLapPnbpBlmRekamSiman(IAsyncResult result)
        {
            try
            {
                dOutLapPnbpBlmRekamSiman = ambilLapPnbpBlmRekamSiman.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutLapPnbpBlmRekamSiman(dsOutLapPnbpBlmRekamSiman), dOutLapPnbpBlmRekamSiman);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutLapPnbpBlmRekamSiman(SvcLapPnbpBlmRekamSiman.OutputParameters dataOut);

        private void dsOutLapPnbpBlmRekamSiman(SvcLapPnbpBlmRekamSiman.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_LAP_SPAN_BLMREKAM_SIMAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_LAP_SPAN_BLMREKAM_SIMAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.currentMaks;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dsGridPNBPSpan.Add(dataOut.SF_LAP_SPAN_BLMREKAM_SIMAN[i]);
            }

            ucLapNonSiman.labelTotData.Text = "";
            ucLapNonSiman.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            ucLapNonSiman.dsDataSource = dsGridPNBPSpan;
            ucLapNonSiman.displayData();
            ucLapNonSiman.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #region --++ Ambil Data Lap Pnbp Blm Rekam Span
        SvcLapPnbpBlmRekamSpan.OutputParameters dOutLapPnbpBlmRekamSpan;
        SvcLapPnbpBlmRekamSpan.execute_pttClient ambilLapPnbpBlmRekamSpan;

        private void getInitLapPnbpBlmRekamSpan()
        {
            this.Enabled = false;
            try
            {
                myThread = new Thread(new ThreadStart(ShowProgresBar));
                myThread.Start();
                SvcLapPnbpBlmRekamSpan.InputParameters parInp = new SvcLapPnbpBlmRekamSpan.InputParameters();
                parInp.P_COL = "";
                if (dataInisial == true)
                {
                    konfigApp.currentMaks = konfigApp.dataAkhir;
                    konfigApp.currentMin = konfigApp.dataAwal;
                }
                else
                {
                    konfigApp.currentMin = konfigApp.currentMaks + 1;
                    konfigApp.currentMaks = konfigApp.currentMaks + konfigApp.dataAkhir;
                }
                parInp.P_MAX = konfigApp.currentMaks;
                parInp.P_MAXSpecified = true;
                parInp.P_MIN = konfigApp.currentMin;
                parInp.P_MINSpecified = true;
                parInp.P_SORT = "";
                parInp.P_COUNT = "Y";
                parInp.STR_WHERE = String.Format("ID_ESELON1 = {0} AND STATUS = 'TIDAK ADA DI SPAN'", konfigApp.idEselon1);
                ambilLapPnbpBlmRekamSpan = new SvcLapPnbpBlmRekamSpan.execute_pttClient();
                ambilLapPnbpBlmRekamSpan.Open();
                ambilLapPnbpBlmRekamSpan.Beginexecute(parInp, new AsyncCallback(getLapPnbpBlmRekamSpan), "");
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private void getLapPnbpBlmRekamSpan(IAsyncResult result)
        {
            try
            {
                dOutLapPnbpBlmRekamSpan = ambilLapPnbpBlmRekamSpan.Endexecute(result);
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                this.Invoke(new DsOutLapPnbpBlmRekamSpan(dsOutLapPnbpBlmRekamSpan), dOutLapPnbpBlmRekamSpan);
            }
            catch
            {
                this.Invoke(new ProgBar(this.progBar), BarItemVisibility.Never);
                this.Invoke(new AktifkanForm(this.aktifkanForm), "");
                MessageBox.Show(konfigApp.teksGagalAmbil, konfigApp.judulGagalAmbil);
            }
        }

        private delegate void DsOutLapPnbpBlmRekamSpan(SvcLapPnbpBlmRekamSpan.OutputParameters dataOut);

        private void dsOutLapPnbpBlmRekamSpan(SvcLapPnbpBlmRekamSpan.OutputParameters dataOut)
        {
            int jmlDataKl = dataOut.SF_LAP_SIMAN_BLMREKAM_SPAN.Count();
            decimal jmlCurrent = 0;
            string totalData = (jmlDataKl == 0) ? jmlDataKl.ToString() : dataOut.SF_LAP_SIMAN_BLMREKAM_SPAN[jmlDataKl - 1].TOTAL_DATA.ToString();
            if (jmlDataKl == konfigApp.dataAkhir)
            {
                this.masihAdaData = true;
                bbiMWasdalMore.Enabled = true;
                jmlCurrent = konfigApp.currentMaks;
            }
            else
            {
                this.masihAdaData = false;
                bbiMWasdalMore.Enabled = false;
                if (jmlDataKl > konfigApp.dataAkhir)
                    jmlCurrent = konfigApp.dataAkhir;
                else
                    jmlCurrent = jmlDataKl;
            }

            if (dataInisial == true)
            {
                dsGridPNBPSpan = new ArrayList();
            }
            for (int i = 0; i < jmlDataKl; i++)
            {
                dsGridPNBPSpan.Add(dataOut.SF_LAP_SIMAN_BLMREKAM_SPAN[i]);
            }

            ucLapNonSpan.labelTotData.Text = "";
            ucLapNonSpan.labelTotData.Text = "Menampilkan " + jmlCurrent.ToString() + " dari total " + totalData + " data";
            ucLapNonSpan.dsDataSource = dsGridPNBPSpan;
            ucLapNonSpan.displayData();
            ucLapNonSpan.gridView1.BestFitColumns();
        }
        #endregion Ambil Bongkaran

        #endregion REKAP PERBANDINGAN PNBP SIMAN SPAN

        #endregion PERBANDINGAN PNBP SIMAN DAN SPAN
    } 
}